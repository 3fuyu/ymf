/* Zepto v1.2.0 - zepto event ajax form ie - zeptojs.com/license */

define("md5",["require"],function(e){var t=function(e,t){return e<<t|e>>>32-t},i=function(e,t){var i,a,n,s,r;return n=2147483648&e,s=2147483648&t,i=1073741824&e,a=1073741824&t,r=(1073741823&e)+(1073741823&t),i&a?2147483648^r^n^s:i|a?1073741824&r?3221225472^r^n^s:1073741824^r^n^s:r^n^s},a=function(e,t,i){return e&t|~e&i},n=function(e,t,i){return e&i|t&~i},s=function(e,t,i){return e^t^i},r=function(e,t,i){return t^(e|~i)},o=function(e,n,s,r,o,l,h){return e=i(e,i(i(a(n,s,r),o),h)),i(t(e,l),n)},l=function(e,a,s,r,o,l,h){return e=i(e,i(i(n(a,s,r),o),h)),i(t(e,l),a)},h=function(e,a,n,r,o,l,h){return e=i(e,i(i(s(a,n,r),o),h)),i(t(e,l),a)},c=function(e,a,n,s,o,l,h){return e=i(e,i(i(r(a,n,s),o),h)),i(t(e,l),a)},p=function(e){for(var t,i=e.length,a=i+8,n=(a-a%64)/64,s=16*(n+1),r=Array(s-1),o=0,l=0;l<i;)t=(l-l%4)/4,o=l%4*8,r[t]=r[t]|e.charCodeAt(l)<<o,l++;return t=(l-l%4)/4,o=l%4*8,r[t]=r[t]|128<<o,r[s-2]=i<<3,r[s-1]=i>>>29,r},d=function(e){var t,i,a="",n="";for(i=0;i<=3;i++)t=e>>>8*i&255,n="0"+t.toString(16),a+=n.substr(n.length-2,2);return a},u=function(e){e=e.replace(/\x0d\x0a/g,"\n");for(var t="",i=0;i<e.length;i++){var a=e.charCodeAt(i);a<128?t+=String.fromCharCode(a):a>127&&a<2048?(t+=String.fromCharCode(a>>6|192),t+=String.fromCharCode(63&a|128)):(t+=String.fromCharCode(a>>12|224),t+=String.fromCharCode(a>>6&63|128),t+=String.fromCharCode(63&a|128))}return t};return function(e){var t,a,n,s,r,f,g,y,m,v=Array(),w=7,x=12,b=17,C=22,S=5,_=9,D=14,$=20,T=4,k=11,I=16,W=23,P=6,M=10,L=15,B=21;for(e=u(e),v=p(e),f=1732584193,g=4023233417,y=2562383102,m=271733878,t=0;t<v.length;t+=16)a=f,n=g,s=y,r=m,f=o(f,g,y,m,v[t+0],w,3614090360),m=o(m,f,g,y,v[t+1],x,3905402710),y=o(y,m,f,g,v[t+2],b,606105819),g=o(g,y,m,f,v[t+3],C,3250441966),f=o(f,g,y,m,v[t+4],w,4118548399),m=o(m,f,g,y,v[t+5],x,1200080426),y=o(y,m,f,g,v[t+6],b,2821735955),g=o(g,y,m,f,v[t+7],C,4249261313),f=o(f,g,y,m,v[t+8],w,1770035416),m=o(m,f,g,y,v[t+9],x,2336552879),y=o(y,m,f,g,v[t+10],b,4294925233),g=o(g,y,m,f,v[t+11],C,2304563134),f=o(f,g,y,m,v[t+12],w,1804603682),m=o(m,f,g,y,v[t+13],x,4254626195),y=o(y,m,f,g,v[t+14],b,2792965006),g=o(g,y,m,f,v[t+15],C,1236535329),f=l(f,g,y,m,v[t+1],S,4129170786),m=l(m,f,g,y,v[t+6],_,3225465664),y=l(y,m,f,g,v[t+11],D,643717713),g=l(g,y,m,f,v[t+0],$,3921069994),f=l(f,g,y,m,v[t+5],S,3593408605),m=l(m,f,g,y,v[t+10],_,38016083),y=l(y,m,f,g,v[t+15],D,3634488961),g=l(g,y,m,f,v[t+4],$,3889429448),f=l(f,g,y,m,v[t+9],S,568446438),m=l(m,f,g,y,v[t+14],_,3275163606),y=l(y,m,f,g,v[t+3],D,4107603335),g=l(g,y,m,f,v[t+8],$,1163531501),f=l(f,g,y,m,v[t+13],S,2850285829),m=l(m,f,g,y,v[t+2],_,4243563512),y=l(y,m,f,g,v[t+7],D,1735328473),g=l(g,y,m,f,v[t+12],$,2368359562),f=h(f,g,y,m,v[t+5],T,4294588738),m=h(m,f,g,y,v[t+8],k,2272392833),y=h(y,m,f,g,v[t+11],I,1839030562),g=h(g,y,m,f,v[t+14],W,4259657740),f=h(f,g,y,m,v[t+1],T,2763975236),m=h(m,f,g,y,v[t+4],k,1272893353),y=h(y,m,f,g,v[t+7],I,4139469664),g=h(g,y,m,f,v[t+10],W,3200236656),f=h(f,g,y,m,v[t+13],T,681279174),m=h(m,f,g,y,v[t+0],k,3936430074),y=h(y,m,f,g,v[t+3],I,3572445317),g=h(g,y,m,f,v[t+6],W,76029189),f=h(f,g,y,m,v[t+9],T,3654602809),m=h(m,f,g,y,v[t+12],k,3873151461),y=h(y,m,f,g,v[t+15],I,530742520),g=h(g,y,m,f,v[t+2],W,3299628645),f=c(f,g,y,m,v[t+0],P,4096336452),m=c(m,f,g,y,v[t+7],M,1126891415),y=c(y,m,f,g,v[t+14],L,2878612391),g=c(g,y,m,f,v[t+5],B,4237533241),f=c(f,g,y,m,v[t+12],P,1700485571),m=c(m,f,g,y,v[t+3],M,2399980690),y=c(y,m,f,g,v[t+10],L,4293915773),g=c(g,y,m,f,v[t+1],B,2240044497),f=c(f,g,y,m,v[t+8],P,1873313359),m=c(m,f,g,y,v[t+15],M,4264355552),y=c(y,m,f,g,v[t+6],L,2734768916),g=c(g,y,m,f,v[t+13],B,1309151649),f=c(f,g,y,m,v[t+4],P,4149444226),m=c(m,f,g,y,v[t+11],M,3174756917),y=c(y,m,f,g,v[t+2],L,718787259),g=c(g,y,m,f,v[t+9],B,3951481745),f=i(f,a),g=i(g,n),y=i(y,s),m=i(m,r);var N=d(f)+d(g)+d(y)+d(m);return N.toLowerCase()}}),define("utils",["md5"],function(e){function t(e){return"%"==e.substring(e.length-1)||"auto"==e}function i(e,t){e=parseInt(e);var i=t.width/w.baseSize.width;return i=i>1.5?1.5:i,t.width>1e3&&(i=1),parseInt(i*e)}function a(e,t){e=parseInt(e);var i=t.height/w.baseSize.height;return i=i<1?1:i,i=i>1.5?1.5:i,parseInt(i*e)}function n(e,t,n,s,r,o){if(1===s){if("fontSize"==e||"font-size"==e){t=parseInt(t);var l=r.width/w.baseSize.width;return l=l>1.5?1.5:l,r.width>1e3&&(l=1),l=l<1?1:l,parseInt(l*t)}return"width"==e||"left"==e||"right"==e||"maxWidth"==e||"marginLeft"==e||"marginRight"==e||"max-width"==e||"minWidth"==e||"min-width"==e?i(t,r):"height"==e||"top"==e||"marginBottom"==e||"marginTop"==e||"bottom"==e||"maxHeight"==e||"max-height"==e||"lineHeight"==e||"line-height"==e||"minHeight"==e||"min-height"==e?a(t,r):i(t,r)}return 0===n||2===n?a(t,r):1===n||3===n?i(t,r):i(t,r)}function s(e,i,a,s){var r=[];if(i.length>1&&i.length<4||"padding"==e||"margin"==e)if(1==i.length){var o=i[0];i=[o,o,o,o]}else i[2]?i[3]||(i[3]=i[1]):(i[2]=i[0],i[3]=i[1]);for(var l=0,h=i.length;l<h;l++){var c=i[l];t(c)||(c=n(e,c,l,h,a,s)+"px"),r.push(c)}return r.join(" ")}var r,o,l,h,c,p={},d={},u={},f={w:!0,borderRadius:!0,maxHeight:!0,lineHeight:!0,"line-height":!0,"max-height":!0,maxWidth:!0,"max-width":!0,minWidth:!0,"min-width":!0,minHeight:!0,"min-height":!0,fs:!0,top:!0,left:!0,right:!0,bottom:!0,fontSize:!0,"font-size":!0,width:!0,height:!0,padding:!0,paddingTop:!0,paddingRight:!0,paddingLeft:!0,paddingBottom:!0,"padding-bottom":!0,"padding-top":!0,"padding-left":!0,"padding-right":!0,margin:!0,marginTop:!0,marginRight:!0,marginLeft:!0,marginBottom:!0,"margin-bottom":!0,"margin-top":!0,"margin-left":!0,"margin-right":!0},g={flexShrink:"yy-fs-",flexDirection:"yy-fd-","flex-direction":"yy-fd-","flex-shrink":"yy-fs-",justifyContent:"yy-jc-","justify-content":"yy-jc-","align-items":"yy-ai-",alignItems:"yy-ai-",alignContent:"yy-ac-","align-content":"yy-ac-",alignSelf:"yy-as-","align-self":"yy-as-","flex-wrap":"yy-fw-",flexWrap:"yy-fw-",flex:"yy-flex-"},y=null,m=null,v={},w={isSupportFlexWrap:function(){return h||(h=document.createElement("p"),c=h.style.flexWrap||h.style.webkitFlexWrap,c=""===c),c},fontSize:function(e){return v[e.toString()]||(v[e.toString()]=this.getRealWidth(e)),v[e.toString()]},fontSize12:function(){return m||(m=this.getRealWidth(12)),m},fontSize13:function(){return r||(r=this.getRealWidth(13)),r},fontSize14:function(){return o||(o=this.getRealWidth(14)),o},fontSize15:function(){return l||(l=this.getRealWidth(15)),l},AutoResizeImage:function(e,t,i,a){var n=new Image;n.src=i.src,n.onload=function(){var s,r,o=1,l=n.width,h=n.height;if(r=e/l,s=t/h,0===e&&0===t?o=1:0===e?s<1&&(o=s):0===t?r<1&&(o=r):(r<1||s<1)&&(o=r<=s?r:s),"1"===a){o<1&&(l>=h?(l="auto",h="100%"):(l="100%",h="auto"));var c={w:"100%"===l||"auto"===l?l:l+"px",h:"100%"===h||"auto"===h?h:h+"px"};i.style.width=c.w,i.style.height=c.h}else o<1&&(l*=o,h*=o),i.height=h,i.width=l}},getImgBg:function(t){if(t=t||"",t in u)return u[t];var i=e(t).charAt(0).toLowerCase(),a=["#29d4ff","#1594ff","#ffa92f","#b587fa","#06cf86","#fa6771","#73d51c","#8991ff"],n=a["abcdefghijklmnopqrstuvwxyz0123456789".indexOf(i)%a.length];return u[t]=n,n},getImgTitle:function(e){try{return e=e||"",/[\u4e00-\u9fa5]/.test(e)?e.substr(-2):e.substr(0,2)}catch(t){return e}},deviceInfo:function(){if(void 0!==this._deviceInfo)return this._deviceInfo;var e=navigator.userAgent,t=e.indexOf("Android")>-1||e.indexOf("Adr")>-1,i=!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);return this._deviceInfo={isAndroid:t,isIOS:i},this._deviceInfo},getPicSize:function(e,t,i,a){var n,s,r=1;return s=e/i,n=t/a,0===e&&0===t?r=1:0===e?n<1&&(r=n):0===t?s<1&&(r=s):(s<1||n<1)&&(r=s<=n?s:n),r<1&&(i>=a?(i="auto",a="100%"):(i="100%",a="auto")),{w:"100%"===i||"auto"===i?i:i+"px",h:"100%"===a||"auto"===a?a:a+"px"}},convertStrToDate:function(e){if(!e)return new Date;var t=e.split(" "),i=t[0],a=t[1]||"",n=a.split(":"),s=i.split("-");return 3!=s.length&&(s=i.split("/")),3!=s.length?new Date:a?new Date(s[0],parseInt(s[1])-1,s[2],n[0]||0,n[1]||0,n[2]||0):new Date(s[0],parseInt(s[1])-1,s[2])},getPreMonth:function(e){var t=this.getDateInfo(e),i=new Date(t.year,t.month-1,0);return i},getCurMonthFirstDay:function(e){e=this.convertToDate(e);var t=this.getDateInfo(e);return new Date(t.year,t.month-1,1)},getPreYear:function(e){var t=this.getDateInfo(e),i=new Date(t.year-1,t.month-1,1);return i},setDateToYear:function(e,t){var i=this.getDateInfo(e),a=new Date(t,i.month-1,1);return a},setMonthToDate:function(e,t){t=parseInt(t);var i=this.getDateInfo(e);return new Date(i.year,t-1,1)},getNextYear:function(e){var t=this.getDateInfo(e),i=new Date(t.year+1,t.month-1,1);return i},getNextMonth:function(e){var t=this.getDateInfo(e),i=new Date(t.year,t.month+1,0);return i},getMonthFirstDayWhicDayInWeek:function(e){e=this.convertToDate(e);var t=new Date(e.getFullYear(),e.getMonth(),1);return t.getDay()},getDateWhichDayInWeek:function(e){return e=this.convertToDate(e),e.getDay()},timestampToDate:function(e){return e?(10===e.length&&(e=1e3*e),new Date(parseInt(e))):new Date},ConvertDateToStr:function(e,t){e=this.convertToDate(e);var i=this.getDateInfo(e);return i.month=i.month<10?"0"+i.month:i.month,i.day=i.day<10?"0"+i.day:i.day,i.min=i.min<10?"0"+i.min:i.min,i.second=i.second<10?"0"+i.second:i.second,i.hour=i.hour<10?"0"+i.hour:i.hour,"yyyy-MM-dd"==t?i.year+"-"+i.month+"-"+i.day:"yyyy-MM"==t?i.year+"-"+i.month:"yyyy-MM-dd hh:mm:ss"==t?i.year+"-"+i.month+"-"+i.day+" "+i.hour+":"+i.min+":"+i.second:"MM-dd hh:mm"==t?i.month+"-"+i.day+" "+i.hour+":"+i.min:"hh:mm"==t?i.hour+":"+i.min:"MM-dd week"==t?i.month+"-"+i.day+" "+i.week:"yyyy-MM-dd weekFullStr"==t?i.year+"-"+i.month+"-"+i.day+" "+i.weekFullStr:"yyyy-MM-dd week"==t?i.year+"-"+i.month+"-"+i.day+" "+i.week:"yyyy-MM-dd hh:mm"==t?i.year+"-"+i.month+"-"+i.day+" "+i.hour+":"+i.min:"yyyy年MM月dd日"==t?i.year+"年"+i.month+"月"+i.day+"日":"all"===t?{"yyyy-MM-dd":i.year+"-"+i.month+"-"+i.day,"yyyy年MM月dd日":i.year+"年"+i.month+"月"+i.day+"日"}:i.year+"-"+i.month+"-"+i.day},getMonthDayCount:function(e){e=this.convertToDate(e);var t=new Date(e.getFullYear(),e.getMonth()+1,0);return t.getDate()},convertToDate:function(e){try{if(e instanceof Date)return e;if(!isNaN(e))return this.timestampToDate(e);if("string"==typeof e)return this.convertStrToDate(e)}catch(e){return new Date}return new Date},_processtime:function(e){return e<10?"0"+e:e},weekArr:["日","一","二","三","四","五","六"],getDateInfo:function(e){e=this.convertToDate(e);var t=e.getMonth()+1,i=e.getDate(),a=e.getHours(),n=e.getMinutes(),s=e.getSeconds(),r=e.getDay(),o=e.getTime();return{year:e.getFullYear(),month:t,weekStr:this.weekArr[r],week:this.weekArr[r],weekFullStr:"星期"+this.weekArr[r],monthStr:this._processtime(t),day:i,dayStr:this._processtime(i),hour:a,hourStr:this._processtime(a),min:n,minStr:this._processtime(n),second:s,secondStr:this._processtime(s),timestamp:o}},viewport:{width:null,height:null},getUrl:function(e){if(e.indexOf("http")>=0||e.indexOf("https")>=0)return e;var t=this.appConfig.host;return t||console.error("请在app.js中指定host属性"),t=$.trim(t),e=$.trim(e),"/"==t.substring(t.length-1)&&(t=t.substring(0,t.length-1)),"/"==e.substring(0,1)&&(e=e.substring(1)),t+"/"+e},createStyleSheet:function(e,t){if(!document.getElementById(e)){var i=document.createElement("style");i.type="text/css",i.id=e,i.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(i)}},timestampToDateInfo:function(e){var t;try{e=parseFloat(e),t=new Date(e)}catch(e){t=new Date}return this.getDateInfo(t)},timestampToTimeStr:function(e){var t="";try{e=parseFloat(e);var i=new Date(e),a=new Date,n=a.getTime(),s=this.getDateInfo(i),r=this.getDateInfo(a);n=parseInt((n-e)/1e3);var o;n<10?t="刚刚":10<n&&n<60?t=n+"秒前":n<3600&&n>=60?(o=Math.floor(n/60),t=o+"分钟前"):t=r.year===s.year&&r.day===s.day&&r.month===s.month?"今天 "+s.hourStr+":"+s.minStr:r.year===s.year?s.monthStr+"-"+s.dayStr+" "+s.hourStr+":"+s.minStr:s.year+"-"+s.monthStr+"-"+s.dayStr+" "+s.hourStr+":"+s.minStr}catch(e){}return t},_isBadAndroid:null,isBadAndroid:function(){if(null!==this._isBadAndroid)return this._isBadAndroid;var e=window.navigator.appVersion;if(/Android/.test(e)&&!/Chrome\/\d/.test(e)){var t=e.match(/Safari\/(\d+.\d)/);t&&"object"==typeof t&&t.length>=2?this._isBadAndroid=parseFloat(t[1])<535.19:this._isBadAndroid=!0}else this._isBadAndroid=!1;return this._isBadAndroid},processHTMLMethod2:function(e){var t=$("<div></div>");t.html(e);var i=t.find("img"),a=t.html();i.replaceWith("");var n=t.text();return{originalText:a,imageDoms:i,curText:n}},processHTML:function(e,t){var i=$("<div></div>");i.html(e);var a=i.find("img"),n=$("<div></div>");n.html(e);var s=n.find("img");t&&(t(s),t(a)),a.replaceWith("");var r=i.text();return{dom:n,originalTextDom:i,imageDoms:a,curText:r}},ajax:function(e){var t=this,i=(e.pageviewInstance,t.appConfig.beforeSendAjax);i&&i(e);var a={type:e.type,url:this.getUrl(e.url),timeout:e.timeout||7e3,data:e.data,success:function(i){var a=t.appConfig.onAjaxResponse;a&&a({isSuccess:!0,data:i,config:e}),e.success&&e.success(i)},error:function(i){var a=t.appConfig.onAjaxResponse;a&&a({isSuccess:!1,e:i,config:e,data:{code:-1e3,msg:"服务器错误"}}),e.error&&e.error(i)}};e.contentType?(a.contentType=e.contentType,a.dataType="json"):a.contentType="application/x-www-form-urlencoded",$.ajax(a)},concat:function(e,t,i){i||console.error("合并页面配置的时候没有指定namespace"),e.components=e.components||{};for(var a in t){var n=i+a;e.components[n]&&console.error(n+" 已经存在原有的页面中 请不要重复控件的Key");var s=t[a],r=s.root;if(r)for(var o=0,l=r.length;o<l;o++)r[o]=i+r[o];e.components[n]=t[a]}return e},getTransitionKeys:function(){if(y)return y;var e=document.createElement("DIV").style,t={};return"-webkit-transform"in e?(t.transitionend="webkitTransitionEnd",t.transform="-webkit-transform",t.transition="-webkit-transition"):(t.transitionend="transitionend",t.transform="transform",t.transition="transition"),y=t,t},baseSize:{width:375,height:667},getRealWidth:function(e){e=parseInt(e);var t=this.viewport.width/this.baseSize.width;return t=t>1.5?1.5:t,this.viewport.width>1e3&&(t=1),parseInt(t*e)},getRealHeight:function(e){e=parseInt(e);var t=this.viewport.height/this.baseSize.height;return t=t<1?1:t,t=t>1.5?1.5:t,parseInt(t*e)},_initScrennSize:function(){this.viewport.width||(this.viewport.width=window.screen.width>700?document.body.offsetWidth:window.screen.width,window.screen.width>700?this.viewport.height=document.body.offsetHeight:this.viewport.height=window.screen.height)},processStyle:function(e,t){e=this.clone(e),this._initScrennSize(),t||(t=this.viewport),e=e||{};for(var a in e){var n=e[a].toString();if(f[a]){var r=n.split(" ");"fs"==a?(e.fontSize=parseInt(n)+"px",delete e.fs):"w"==a?(delete e.width,delete e.height,e.height=e.width=i(e.w,t)+"px",delete e.w):e[a]=s(a,r,t,e)}}return e},processPageConfig:function(e){var t;if(this.viewport.width||this._initScrennSize(),e.showPageStyle){var i=e.showPageStyle.width||"100%",a=e.showPageStyle.height||"100%";i=i.toString(),a=a.toString(),i="%"==i.substring(i.length-1)?parseInt(i)/100*this.viewport.width:parseInt(i)*this.viewport.width,a="%"==a.substring(a.length-1)?parseInt(a)/100*this.viewport.height:parseInt(a)*this.viewport.height,t={width:i,height:a}}else t=this.viewport;if(e.style&&(e.style=this.processStyle(e.style,t)),e.components)for(var n in e.components){var s=this.clone(e.components[n]);for(var r in s)r.length>=5&&"STYLE"==r.substring(r.length-5).toUpperCase()&&(s[r]=this.processStyle(s[r],t));e.components[n]=s}return e},setPageConfigByPagePath:function(e,t){return t.isNoAdaptScreen||(t=this.processPageConfig(t)),d[e]=t,t},getPageConfigByPagePath:function(e){return d[e]},getComponentInstance:function(e){return p[e]},customerComponents:{},getComponentClass:function(e,t,i){var a=e.type,n=p[a];if(n)return void t(n);var s=w.customerComponents[a];s||(s="../../components/"+a),require([s],function(e){p[a]=e,t(e)},function(){i(e)})},clone:function(e){var t=JSON.stringify(e);return JSON.parse(t)},getClassByStyle:function(e){var t=[];for(var i in e){var a=g[i];if(a){var n=e[i];t.push(a+n)}}return t},css:function(e,t,i){if(t){var a=this.getClassByStyle(t);a.length>0&&e.addClass(a.join(" ")),i&&(t=this.processStyle(t)),e.css(t)}},simpleExtendObj:function(e,t){e=e||{},t=t||{};for(var i in t)e[i]=t[i];return e},processTransitionStyle:function(e){return{transition:e,"-webkit-transition":e}},processTransformStyle:function(e){return{transform:e,"-webkit-transform":e}},processTransitionTanformStyle:function(e,t){return{"-webkit-transition":e,"-webkit-transform":t}},addDay:function(e,t){return e=this.convertToDate(e),new Date(e.setDate(e.getDate()+t))},compareDate:function(e,t,i){return i=i||"yyyy-MM-dd",e=this.ConvertDateToStr(e,i),t=this.ConvertDateToStr(t,i),this.compareTime(e,t)},compareTime:function(e,t){return e=this.convertToDate(e),t=this.convertToDate(t),e>t?1:e-t===0?0:-1},deleteEmoji:function(e){return e.replace(/\uD83C[\uDF00-\uDFFF]|\uD83D[\uDC00-\uDE4F]/g,"")},copy:function(e,t){if(null===e||void 0===e||"object"!=typeof e)return e;if(e.constructor!=Object&&e.constructor!=Array)return e;if(e.constructor==Date||e.constructor==RegExp||e.constructor==Function||e.constructor==String||e.constructor==Number||e.constructor==Boolean)return new e.constructor(e);t=t||new e.constructor;for(var i in e)t[i]="undefined"==typeof t[i]?this.copy(e[i],null):t[i];return t},extends:function(e,t){function i(){}i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e,e.baseConstructor=t,e.superClass=t.prototype}};return w}),define("app",["utils"],function(e){var t="开发",i="http://115.29.39.62/schedule",a="http://115.29.39.62/task";return"正式"===t&&(i="/wc",a="http://ezone.upesn.com/task"),{init:function(e){e.start({host:i,taskhost:a,customerComponents:{schedulecalendar:"./components/schedulecalendar",dayview:"./components/dayview"},root:"index",baseSize:{width:375,height:667},remindDict:[{id:"0",label:"不提醒"},{id:"1",label:"提前5分钟"},{id:"2",label:"提前30分钟"},{id:"3",label:"提前1小时"},{id:"4",label:"提前2小时"},{id:"5",label:"提前3小时"},{id:"6",label:"提前1天"},{id:"7",label:"提前2天"},{id:"8",label:"提前3天"}],beforeSendAjax:function(e){var t=e.pageviewInstance;e.data.token=t.params.token,e.data.pushSalt=t.params.pushSalt},beforeGo:function(e){var t=e.pageviewInstance;e.params.token=t.params.token||"123456",e.params.pushSalt=t.params.pushSalt},onAjaxResponse:function(t){if(t.isSuccess&&t.data){var i=t.data.code;if("100010008"===i.toString()){e.showTip({text:"操作过期,两秒后会自动退出",duration:3500,clickNoHide:!0});try{window.setTimeout(function(){window.yyesn.client.closePage()},3500)}catch(e){}}}},routerChange:function(e){}})}}}),define("tip",["utils"],function(e){var t=function(e){var t=this;e=e||$(document.body),this.tipWrapper=$("<div class='yy-tip displayflex jc-center ai-center displaynone'></div>"),this.textDom=$('<div class="yy-tip-text displaynone"></div>'),this.backCover=$('<div class="yy-tip-backcover displaynone"></div>'),this.backCover.bind("click",function(){t.clickBackCover()}),this.tipWrapper.append(this.textDom),e.append(this.tipWrapper).append(this.backCover),this.hideTimeoutId=null};return t.prototype={show:function(t){var i=this;this.textPos=t.textPos||"bottom","left"==this.textPos||"right"==this.textPos?this.tipWrapper.addClass("flex-h"):this.tipWrapper.addClass("flex-v");var a=t.pos||"center";this.config=t,this.hideTimeoutId&&window.clearTimeout(this.hideTimeoutId),t=t||{};var n=t.style;n&&this.tipWrapper.css(e.processStyle(n)),this._setText(t.text,t.textStyle),this._setIcon(t.font,t.iconStyle),this.config.withoutBackCover||this.backCover.removeClass("displaynone"),this.startClass="yy-tip-ani-"+a+"-start",this.tipWrapper.removeClass("displaynone").addClass(this.startClass),window.setTimeout(function(){i.endClass="yy-tip-ani-"+a+"-end",i.tipWrapper.addClass(i.endClass)},3),t.duration&&!isNaN(t.duration)&&(this.hideTimeoutId=window.setTimeout(function(){i.hide()},parseInt(t.duration)))},_setText:function(t,i){t?(this.textDom.removeClass("displaynone"),i&&this.textDom.css(e.processStyle(i)),this.textDom.html(t)):this.textDom.addClass("displaynone")},_setIcon:function(t,i){this.iconDom&&this.iconDom.remove();var a,n;t=t||"";var s=t.split("_");2==s.length?(a=s[0],n=s[1],this.iconDom=$('<i class="yy-tip-icon displayflex jc-center ai-center yy-icon-code displaynone" data-icon="&#x'+n+';"></i>'),i&&this.iconDom.css(e.processStyle(i)),this.iconDom.removeClass("displaynone"),this.iconDom.css({"font-family":a}),"top"==this.textPos||"left"==this.textPos?this.iconDom.appendTo(this.tipWrapper):this.iconDom.insertBefore(this.textDom)):this.icomDom&&this.iconDom.addClass("displaynone")},clickBackCover:function(){this.config.clickNoHide||(this.hideTimeoutId&&window.clearTimeout(this.hideTimeoutId),this.hide())},hide:function(){var e=this;this.tipWrapper.removeClass(this.endClass),window.setTimeout(function(){e.tipWrapper.addClass("displaynone").removeClass(e.startClass),e.tipWrapper.remove(),e.backCover.remove()},300),e.backCover.addClass("displaynone")}},t}),define("base",["utils","tip"],function(e,t){function i(e,t){if(!e)return null;for(var i=e,a=0,n=t.length;a<n;a++){var s=t[a];if(i=i[s],!i&&0!=i){i=null;break}}return i}var a=function(t){var i=this;this.pageview=t.$$pageview||this,this.loaderHtml="<div class='spinner center'><div class='spinner-blade'></div><div class='spinner-blade'></div><div class='spinner-blade'></div><div class='spinner-blade'></div><div class='spinner-blade'></div><div class='spinner-blade'></div><div class='spinner-blade'></div><div class='spinner-blade'></div><div class='spinner-blade'></div><div class='spinner-blade'></div><div class='spinner-blade'></div><div class='spinner-blade'></div></div>",this.disabled=!1,this.parent=t.$$parent,this.datasource=t.$$datasource||[],this.rowInstance=t.$$rowInstance,t.ref&&(this.rowInstance?(this.rowInstance.refs=this.rowInstance.refs||{},this.rowInstance.refs[t.comKey]=this):this.pageview.refs[t.comKey]=this);var a=t.className||"";this.selectedClassName=t.selectedClassName,t.tagName=t.tagName||"DIV";var n=t.activeClassName?"data-activecn='"+t.activeClassName+"'":"";this.$el=$("<"+t.tagName+" "+n+" data-comname='"+t.comKey+"' class='"+a+"'></"+t.tagName+">"),t=this._processConfig(t),this.config=t,this.components={},"repeat"!=t.type&&"listview"!=t.type||(this.components=[]),t.comKey&&this.$el.addClass(t.comKey);var s=this.config.comKey+"_init";if("repeatitem"===t.type&&(s=this.parent.config.comKey+"_iteminit"),"pageview"===this.config.type){var r=this.config.children;if(r&&r instanceof Array)for(var o=0,l=r.length;o<l;o++){var h=r[o].components;if(h)for(var c in h){var p=e.copy(h[c]);for(var d in p)d.length>=5&&"STYLE"==d.substring(d.length-5).toUpperCase()&&(p[d]=this.processStyle(p[d],BaseSize));this.config.components[c]=p}}}if(this.pageview.plugin&&this.pageview.plugin[s]){var u=this.pageview.plugin[s];u&&u.call(this.pageview.plugin,this)}var f=t.style;if(t.noNeedSetStyle||f&&"pageview"!=t.type&&"segment"!=t.type&&e.css(this.$el,f),this.disabledClassName=t.disabledClassName||"yy-disabled",this.disabled&&this.setDisabled(!0),t.comKey){var g=t.comKey+"_click",y=i.pageview.plugin[g];y&&this.$el.bind("click",function(e){e.preventDefault(),e.stopPropagation(),!i.disabled&&y&&y.call(i.pageview.plugin,i,{e:e})})}};return a.prototype.setDisabled=function(e){this.disabled=e,this.disabled?this.$el.addClass(this.disabledClassName):this.$el.removeClass(this.disabledClassName)},a.prototype._processConfig=function(e){for(var t in e){var a=t.split("_");if(2==a.length&&"bind"==a[1]){var n=e[t],s=a[0],r=typeof n;if("string"==r)e[s]=i(this.datasource,n.split("."));else if("object"==r)for(var o in n){var l=o,h=i(this.datasource,n[o].split("."));e[s]=e[s]||{},e[s][l]=h}}}return e},a.prototype.selected=function(e){if(!e||!this.config.disableParentSelect){this.isSelected=!0,this.selectedClassName&&""!==this.selectedClassName&&this.$el.addClass(this.selectedClassName);for(var t in this.components)this.components[t].selected(!0)}},a.prototype.unSelected=function(e){if(!e||!this.config.disableParentSelect){this.isSelected=!1,this.selectedClassName&&""!==this.selectedClassName&&this.$el.removeClass(this.selectedClassName);for(var t in this.components)this.components[t].unSelected(!0)}},a.prototype.getUniqueKey=function(){return this.pageview.config.pageKey+""+this.config.comKey},a.prototype.showTip=function(e){this.Tip=new t(this.$el),this.Tip.show(e)},a.prototype._prepareComponent=function(t,i,a){var n=e.clone(this.pageview.config.components[t]),s=n.type,r=e.getComponentInstance(s);n.$$pageview=this.pageview,n.$$rowInstance=a,n.$$parent=this,n.comKey=t,n.$$datasource=i;var o=null;try{o=new r(n,null)}catch(e){console.log(e),console.log(n)}var l=t+"_didmount";if(this.pageview.plugin){var h=this.pageview.plugin[l];h&&h.call(this.pageview.plugin,o)}return this.pageview.componentsInitActions[t]&&(this.pageview.componentsInitActions[t](o),delete this.pageview.componentsInitActions[t]),o},a.prototype._initComponents=function(e,t,i,a){for(var n=0,s=e.root.length;n<s;n++){var r=e.root[n],o=this._prepareComponent(r,t,a);e.isContainer||"repeat"==e.type?(this.components.push=o,i(o)):"tabbarview"==e.type?(this.components[r]=o,i(o)):this.components[r]=o}return this.components},a.prototype.getClientRect=function(){return this.$el[0].getBoundingClientRect()},a.prototype.getComponentInstanceByComKey=function(e,t,i,a,n){var s=this;this.loadFiles([e],this.pageview||this,function(){var n=s._prepareComponent(e,t,i);a(n)},function(){n&&n()})},a.prototype.initLayout=function(t,i,a,n){var s=this;this.config.root&&this.config.root.length>0&&this.loadFiles(this.config.root,this.pageview||this,function(){if(i)s._initComponents(s.config,t,i,a);else{s._initComponents(s.config,t,null,a);for(var r=0,o=s.config.root.length;r<o;r++){var l=s.components[s.config.root[r]],h=s.$$childrenWrapper||s.$el;null===l&&(console.log(s.config.root[r]),console.log(s.config.root),console.log(s.components)),h.append(l.$el);var c;s.config.splitStyle&&s.config.root.length>1&&r!=s.config.root.length-1&&(c=$("<div></div>"),l.splitLine=c,e.css(c,s.config.splitStyle,!0),h.append(c))}}if(n&&n(),"pageview"==s.config.type){var p=s.plugin.onPageLoad;p&&p.call(s.plugin,s)}},function(){})},a.prototype.setBadge=function(t,i){if(!this.$$badge){this.$$badge=$("<div class='displayflex jc-center ai-center yy-badge displaynone'></div>"),i=i||{};var a=i.width||i.height||16;i["min-width"]=i.height=a,delete i.width,i=e.processStyle(i),i["border-radius"]=parseInt(i.height)/2+"px",e.css(this.$$badge,i),this.$el.append(this.$$badge)}t?this.$$badge.html(t).removeClass("displaynone"):this.$$badge.addClass("displaynone")},a.prototype.showLoading=function(t){if(t=t||{},this.loadingConfig=t,!this.$$loadingWrapper){t.timeout&&!isNaN(t.timeout)||(t.timeout=7e3),this.loadingtimeout=parseInt(t.timeout)||7e3;var i="displaynone yy-loading-bk displayflex yy-jc-center yy-ai-center ";t.style&&(t.style.alignItems||t.style["align-items"]||(i+="yy-ai-center")),this.$$loadingWrapper=$("<div class='"+i+"'></div>"),t.style&&e.css(this.$$loadingWrapper,t.style);var a=$("<div class='yy-loading-wrapper yy-fd-column displayflex yy-jc-center yy-ai-center'>"+this.loaderHtml+"</div>");this.loadingText=$("<span class='yy-loading-text'></span>"),a.append(this.loadingText),this.$$loadingWrapper.append(a),this.$el.append(this.$$loadingWrapper)}this.loadingText.html(t.text||"正在努力加载"),this.startLoadingTimeout(t),this.$$loadingWrapper.removeClass("displaynone")},a.prototype.showLoadingError=function(){var e=this;if(this.$$loadingWrapper){if(this.loadingTimeId&&window.clearTimeout(this.loadingTimeId),!e.loadingConfig.reLoadCallBack)return void e.hideLoading();e.loadingErrorWrapper||(e.loadingErrorWrapper=e._createErrorDom(function(){e.$$loadingWrapper.removeClass("yy-loading-wrapper-error"),e.loadingErrorWrapper.addClass("displaynone"),e.loadingTimeId=null,e.startLoadingTimeout(e.loadingConfig),e.loadingConfig.reLoadCallBack&&e.loadingConfig.reLoadCallBack()}),e.loadingErrorWrapper.appendTo(e.$$loadingWrapper)),e.$$loadingWrapper.addClass("yy-loading-wrapper-error"),e.loadingErrorWrapper.removeClass("displaynone")}},a.prototype.startLoadingTimeout=function(e){var t=this;this.loadingTimeId||(this.loadingTimeId=window.setTimeout(function(){t.showLoadingError()},this.loadingtimeout))},a.prototype._createErrorDom=function(t){var i=e.getRealWidth(11),a=e.getRealWidth(20),n=$("<div style='height:100px' class='yy-loadmore-wrapper displayflex jc-center ai-center flex-h displaynone'></div>"),s=$("<i style='font-size:"+a+"px' class='yy-icommon yy-loadmore-erroricon'></i>"),r=$("<span style='font-size:"+i+"px' class='yy-pull-meslabel'>网络异常,点击</span>"),o=$("<span style='font-size:"+i+"px' class='yy-loadmore-reload-babel'>重新加载</span>");return o.bind("click",function(){t()}),n.append(s).append(r).append(o),n},a.prototype.hideLoading=function(e){return e===!1?void this.showLoadingError():(this.loadingTimeId&&(window.clearTimeout(this.loadingTimeId),this.loadingTimeId=null),void(this.$$loadingWrapper&&this.$$loadingWrapper.addClass("displaynone")))},a.prototype.loadFiles=function(t,i,a,n){for(var s=t.length,r=0,o=0;o<s;o++)!function(t,s,o){var l=i.config.components[o];e.getComponentClass(l,function(e){r+=1,r==t&&a()},function(){n()})}(s,o,t[o])},a}),define("pageview",["utils","base"],function(e,t){function i(e){var t=this;if(this.refs={},this.componentsInitActions={},i.baseConstructor.call(this,e),this.viewpagerParams=e.viewpagerParams,e.root=e.root||[],this.params=e.$$params,this.showPageParams=e.showPageParams||{},this.prePageView=e.prePageView,this.pageManager=e.$$pageManager,this.config=e,this.innerPages={},this.innerPagesWrappers={},e.pluginClass)try{this.plugin=new e.pluginClass({pageview:this})}catch(e){console.log(e)}this.components={};var a=e.style;this.$el.addClass("yy-pageview displayflex"),this.showPageBackCover=$("<div class='yy-backcover displaynone'></div>"),this.innerWrapper=$("<div class='displayflex yy-page-inner'></div>"),this.$$childrenWrapper=this.innerWrapper,this.$el.append(this.innerWrapper).append(this.showPageBackCover),a&&this.innerWrapper.css(a),this.showPageBackCover.bind("click",function(){t.hideCurShowPage()}),this.initLayout()}var a={fromLeft1:{zIndex:5,left:"0",top:0,transform:"translate3d(-100%,0,0)","-webkit-transform":"translate3d(-100%,0,0)"},fromLeft2:{zIndex:101,left:"0",top:0,transform:"translate3d(-100%,0,0)","-webkit-transform":"translate3d(-100%,0,0)"},fromLeft3:{left:0,top:0,zIndex:5,transform:"translate3d(0,0,0)","-webkit-transform":"translate3d(0,0,0)"},fromRight1:{zIndex:5,right:"0",top:0,transform:"translate3d(100%,0,0)","-webkit-transform":"translate3d(100%,0,0)"},fromRight2:{zIndex:101,right:"0",top:0,transform:"translate3d(100%,0,0)","-webkit-transform":"translate3d(100%,0,0)"},fromRight3:{zIndex:5,right:0,top:0,transform:"translate3d(0,0,0)","-webkit-transform":"translate3d(0,0,0)"},opacity:{left:"0",top:0},fromBottom:{zIndex:101,left:"0",bottom:"0",transform:"translate3d(0,100%,0)","-webkit-transform":"translate3d(0,100%,0)"}},n={fromLeft1:"yy-init-left",fromLeft2:"yy-init-left",fromLeft3:"yy-init-left",fromRight1:"yy-init-right",fromRight2:"yy-init-right",fromRight3:"yy-init-right",opacity:"yy-init-left",fromBottom:"yy-init-bottom"};return e.extends(i,t),i.prototype.regeistPageDestory=function(){},i.prototype.destory=function(){this.$el.remove()},i.prototype.ajax=function(t){t.pageviewInstance=this,e.ajax(t)},i.prototype.Enter=function(e,t){var i=this;if(this.$el[0].className=e,t){if(i.pageManager.getPageNameFromUrl()===i.config.pageKey){var a=i.plugin.onPageEnter;a&&a.call(i.plugin)}}else this.$el[0].addEventListener("webkitAnimationEnd",function(){if(i.pageManager.getPageNameFromUrl()===i.config.pageKey){var e=i.plugin.onPageEnter;e&&e.call(i.plugin)}})},i.prototype.bindShowPageEnterEvent=function(){var e=this;this.$el[0].parentNode.addEventListener("webkitTransitionEnd",function(){if(e.$$isshow){var t=e.plugin.onPageEnter;t&&t.call(e.plugin)}})},i.prototype.hideCurShowPage=function(){var t=this;if(this.pageManager.blur(),this.showpageInstance.showpageInstance)return this.showpageInstance.hideCurShowPage(),
!0;if(this.showpage_wrapper){this.showpageInstance.$$isshow=!1;var i=this.showpageInstance.plugin.onPageClose;i&&i.call(this.showpageInstance.plugin);var s=this.showpage_wrapper.attr("data-mode");this.showPageBackCover.addClass("displaynone"),this.innerWrapper[0].className="displayflex yy-page-inner "+n[s]+"-im ",window.setTimeout(function(){t.innerWrapper.css(e.processTransitionTanformStyle("none","translate3d(0,0,0)"))},300),"fromLeft1"==s||"fromLeft2"==s?this.showpage_wrapper.css(e.processTransformStyle("translate3d(-100%,0,0)")):"fromRight1"==s||"fromRight2"==s?this.showpage_wrapper.css(e.processTransformStyle("translate3d(100%,0,0)")):this.showpage_wrapper.css(a[s])}var r=this.showpageInstance.plugin.onPageResume;return r&&r.call(this.plugin),this.showpage_wrapper=null,this.showpageInstance=null,!1},i.prototype.do=function(e,t){var i=this.refs[e];i?t(i):(this.config.components[e].ref||console.error("请务必在"+e+"控件上设置ref:true"),this.componentsInitActions[e]=t)},i.prototype.delegate=function(e,t){this.do(e,t)},i.prototype.showLoadingProgressbar=function(){var e=this;this.loadingProgreessbar||(this.loadingProgreessbarWrapper=$("<div class='yy-loading-pbw displaynone'></div>"),this.loadingProgreessbar=$("<div class='yy-loading-pb'></div>"),this.loadingProgreessbarWrapper.append(this.loadingProgreessbar),this.loadingProgreessbarWrapper.appendTo(this.$el)),this.loadingProgreessbarWrapper.removeClass("displaynone"),window.setTimeout(function(){e.loadingProgreessbar.css({width:"90%"})},6)},i.prototype.hideLoadingProgressbar=function(){this.loadingProgreessbar&&(this.loadingProgreessbar.css({width:"0%"}),this.loadingProgreessbarWrapper.addClass("displaynone"))},i.prototype.close=function(){this.ownerPage&&this.ownerPage.hideCurShowPage()},i.prototype.showPage=function(t){if(t&&t.pageKey){this.pageManager.blur(),t.inRouter!==!1&&this.pageManager.regeistShowPageInRouter(this.config.pageKey);var i=this;this.showpage_wrapper=this.innerPagesWrappers[t.pageKey],this.showpageInstance=this.innerPages[t.pageKey],this.showLoadingProgressbar(),!this.showpage_wrapper||void 0!==t.nocache&&t.nocache?this.pageview.pageManager.getPageConfigByPageKey(t.pageKey,function(n){var s=t.params||{};n.showPageParams=s;var r=i.pageview.pageManager.createPageView(n);r.$el.addClass("yy-pageview-show"),r.ownerPage=i,i.hideLoadingProgressbar(),i.showpageInstance=r,i.innerPages[t.pageKey]=r,i.showpage_wrapper=$("<div class='yy-showpage'></div>");var o=n.showPageStyle||{width:"100%",height:"100%"};o&&(delete o.top,delete o.right,delete o.left,delete o.bottom);var l=t.mode||"fromLeft1";i.showpage_wrapper.attr("data-mode",l);var h=o.width||"100%",c=o.height||"100%";o=o||{};var p=a[l]||a.fromLeft1;p=e.clone(p),i.showpage_wrapper.attr("data-width",h),i.showpage_wrapper.attr("data-height",c),i.showpage_wrapper.css(e.simpleExtendObj(o,p)),i.innerPagesWrappers[t.pageKey]=i.showpage_wrapper,i.showpage_wrapper.append(r.$el),i.$el.append(i.showpage_wrapper),r.bindShowPageEnterEvent(),i._showpageAnimate(t,i.showpage_wrapper,r)},function(){}):(this.hideLoadingProgressbar(),this._showpageAnimate(t,this.showpage_wrapper,this.showpageInstance))}},i.prototype.goBack=function(){this.pageManager.goBack()},i.prototype.go=function(e,t){t=t||{};var i=this.pageManager.appConfig.beforeGo;i&&i({params:t,pageviewInstance:this}),this.pageManager.go(e,t)},i.prototype.replaceGo=function(e,t){t=t||{};var i=this.pageManager.appConfig.beforeGo;i&&i({params:t,pageviewInstance:this}),this.pageManager.replaceGo(e,t)},i.prototype._showpageAnimate=function(t,i,a){var s=this,r=12;a.$$isshow=!0;var o=i.attr("data-width"),l=i.attr("data-mode");if(this.innerWrapper[0].className="displayflex yy-page-inner "+n[l],"fromLeft1"!=l&&"fromLeft2"!=l||(this.showPageBackCover.removeClass("displaynone").css({left:o}),window.setTimeout(function(){if("fromLeft1"==l){var t=e.processTransitionTanformStyle("transform .3s cubic-bezier(.05, .69, .14, 1)","translate3d("+o+",0,0)");t["box-shadow"]="0px 0px 13px 1px #929292",s.innerWrapper.css(t)}i.css(e.processTransitionTanformStyle("transform .3s cubic-bezier(.05, .69, .14, 1)","translate3d(0,0,0)"))},r)),"fromLeft3"==l){this.showPageBackCover.removeClass("displaynone").css({left:o});var h=e.processTransitionTanformStyle("transform .3s cubic-bezier(.05, .69, .14, 1)","translate3d("+o+",0,0)");h["box-shadow"]="0px 0px 13px 1px #929292",window.setTimeout(function(){s.innerWrapper.css(h)},r)}if("fromRight1"!=l&&"fromRight2"!=l||(this.showPageBackCover.removeClass("displaynone").css({right:o}),window.setTimeout(function(){var t=e.processTransitionTanformStyle("transform .3s cubic-bezier(.05, .69, .14, 1)","translate3d(-"+o+",0,0)");t["box-shadow"]="0px 0px 13px 1px #929292","fromRight1"==l&&s.innerWrapper.css(t),i.css(e.processTransitionTanformStyle("transform .3s cubic-bezier(.05, .69, .14, 1)","translate3d(0,0,0)"))},r)),"fromRight3"==l){this.showPageBackCover.removeClass("displaynone").css({right:o});var h=e.processTransitionTanformStyle("transform .3s cubic-bezier(.05, .69, .14, 1)","translate3d(-"+o+",0,0)");h["box-shadow"]="0px 0px 13px 1px #929292",window.setTimeout(function(){s.innerWrapper.css(h)},r)}if("fromBottom"==l){i.attr("data-height");this.showPageBackCover.removeClass("displaynone").css({left:"0",top:"0"}),window.setTimeout(function(){i.css(e.processTransitionTanformStyle("transform .2s cubic-bezier(.05, .69, .14, 1)","translate3d(0,0,0)"))},r)}},i}),!function(e,t){"function"==typeof define&&define.amd?define("$",[],function(){return t(e)}):t(e)}(this,function(e){var t=function(){function t(e){return null==e?String(e):J[X.call(e)]||"object"}function i(e){return"function"==t(e)}function a(e){return null!=e&&e==e.window}function n(e){return null!=e&&e.nodeType==e.DOCUMENT_NODE}function s(e){return"object"==t(e)}function r(e){return s(e)&&!a(e)&&Object.getPrototypeOf(e)==Object.prototype}function o(e){var t=!!e&&"length"in e&&e.length,i=D.type(e);return"function"!=i&&!a(e)&&("array"==i||0===t||"number"==typeof t&&t>0&&t-1 in e)}function l(e){return P.call(e,function(e){return null!=e})}function h(e){return e.length>0?D.fn.concat.apply([],e):e}function c(e){return e.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function p(e){return e in N?N[e]:N[e]=new RegExp("(^|\\s)"+e+"(\\s|$)")}function d(e,t){return"number"!=typeof t||R[c(e)]?t:t+"px"}function u(e){var t,i;return B[e]||(t=L.createElement(e),L.body.appendChild(t),i=getComputedStyle(t,"").getPropertyValue("display"),t.parentNode.removeChild(t),"none"==i&&(i="block"),B[e]=i),B[e]}function f(e){return"children"in e?M.call(e.children):D.map(e.childNodes,function(e){return 1==e.nodeType?e:void 0})}function g(e,t){var i,a=e?e.length:0;for(i=0;a>i;i++)this[i]=e[i];this.length=a,this.selector=t||""}function y(e,t,i){for(_ in t)i&&(r(t[_])||ee(t[_]))?(r(t[_])&&!r(e[_])&&(e[_]={}),ee(t[_])&&!ee(e[_])&&(e[_]=[]),y(e[_],t[_],i)):t[_]!==S&&(e[_]=t[_])}function m(e,t){return null==t?D(e):D(e).filter(t)}function v(e,t,a,n){return i(t)?t.call(e,a,n):t}function w(e,t,i){null==i?e.removeAttribute(t):e.setAttribute(t,i)}function x(e,t){var i=e.className||"",a=i&&i.baseVal!==S;return t===S?a?i.baseVal:i:void(a?i.baseVal=t:e.className=t)}function b(e){try{return e?"true"==e||"false"!=e&&("null"==e?null:+e+""==e?+e:/^[\[\{]/.test(e)?D.parseJSON(e):e):e}catch(t){return e}}function C(e,t){t(e);for(var i=0,a=e.childNodes.length;a>i;i++)C(e.childNodes[i],t)}var S,_,D,$,T,k,I=[],W=I.concat,P=I.filter,M=I.slice,L=e.document,B={},N={},R={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},E=/^\s*<(\w+|!)[^>]*>/,A=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,j=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,H=/^(?:body|html)$/i,z=/([A-Z])/g,F=["val","css","html","text","data","width","height","offset"],K=["after","prepend","before","append"],V=L.createElement("table"),O=L.createElement("tr"),Y={tr:L.createElement("tbody"),tbody:V,thead:V,tfoot:V,td:O,th:O,"*":L.createElement("div")},U=/complete|loaded|interactive/,G=/^[\w-]*$/,J={},X=J.toString,q={},Z=L.createElement("div"),Q={tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},ee=Array.isArray||function(e){return e instanceof Array};return q.matches=function(e,t){if(!t||!e||1!==e.nodeType)return!1;var i=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.matchesSelector;if(i)return i.call(e,t);var a,n=e.parentNode,s=!n;return s&&(n=Z).appendChild(e),a=~q.qsa(n,t).indexOf(e),s&&Z.removeChild(e),a},T=function(e){return e.replace(/-+(.)?/g,function(e,t){return t?t.toUpperCase():""})},k=function(e){return P.call(e,function(t,i){return e.indexOf(t)==i})},q.fragment=function(e,t,i){var a,n,s;return A.test(e)&&(a=D(L.createElement(RegExp.$1))),a||(e.replace&&(e=e.replace(j,"<$1></$2>")),t===S&&(t=E.test(e)&&RegExp.$1),t in Y||(t="*"),s=Y[t],s.innerHTML=""+e,a=D.each(M.call(s.childNodes),function(){s.removeChild(this)})),r(i)&&(n=D(a),D.each(i,function(e,t){F.indexOf(e)>-1?n[e](t):n.attr(e,t)})),a},q.Z=function(e,t){return new g(e,t)},q.isZ=function(e){return e instanceof q.Z},q.init=function(e,t){var a;if(!e)return q.Z();if("string"==typeof e)if(e=e.trim(),"<"==e[0]&&E.test(e))a=q.fragment(e,RegExp.$1,t),e=null;else{if(t!==S)return D(t).find(e);a=q.qsa(L,e)}else{if(i(e))return D(L).ready(e);if(q.isZ(e))return e;if(ee(e))a=l(e);else if(s(e))a=[e],e=null;else if(E.test(e))a=q.fragment(e.trim(),RegExp.$1,t),e=null;else{if(t!==S)return D(t).find(e);a=q.qsa(L,e)}}return q.Z(a,e)},D=function(e,t){return q.init(e,t)},D.extend=function(e){var t,i=M.call(arguments,1);return"boolean"==typeof e&&(t=e,e=i.shift()),i.forEach(function(i){y(e,i,t)}),e},q.qsa=function(e,t){var i,a="#"==t[0],n=!a&&"."==t[0],s=a||n?t.slice(1):t,r=G.test(s);return e.getElementById&&r&&a?(i=e.getElementById(s))?[i]:[]:1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType?[]:M.call(r&&!a&&e.getElementsByClassName?n?e.getElementsByClassName(s):e.getElementsByTagName(t):e.querySelectorAll(t))},D.contains=L.documentElement.contains?function(e,t){return e!==t&&e.contains(t)}:function(e,t){for(;t&&(t=t.parentNode);)if(t===e)return!0;return!1},D.type=t,D.isFunction=i,D.isWindow=a,D.isArray=ee,D.isPlainObject=r,D.isEmptyObject=function(e){var t;for(t in e)return!1;return!0},D.isNumeric=function(e){var t=Number(e),i=typeof e;return null!=e&&"boolean"!=i&&("string"!=i||e.length)&&!isNaN(t)&&isFinite(t)||!1},D.inArray=function(e,t,i){return I.indexOf.call(t,e,i)},D.camelCase=T,D.trim=function(e){return null==e?"":String.prototype.trim.call(e)},D.uuid=0,D.support={},D.expr={},D.noop=function(){},D.map=function(e,t){var i,a,n,s=[];if(o(e))for(a=0;a<e.length;a++)i=t(e[a],a),null!=i&&s.push(i);else for(n in e)i=t(e[n],n),null!=i&&s.push(i);return h(s)},D.each=function(e,t){var i,a;if(o(e)){for(i=0;i<e.length;i++)if(t.call(e[i],i,e[i])===!1)return e}else for(a in e)if(t.call(e[a],a,e[a])===!1)return e;return e},D.grep=function(e,t){return P.call(e,t)},e.JSON&&(D.parseJSON=JSON.parse),D.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){J["[object "+t+"]"]=t.toLowerCase()}),D.fn={constructor:q.Z,length:0,forEach:I.forEach,reduce:I.reduce,push:I.push,sort:I.sort,splice:I.splice,indexOf:I.indexOf,concat:function(){var e,t,i=[];for(e=0;e<arguments.length;e++)t=arguments[e],i[e]=q.isZ(t)?t.toArray():t;return W.apply(q.isZ(this)?this.toArray():this,i)},map:function(e){return D(D.map(this,function(t,i){return e.call(t,i,t)}))},slice:function(){return D(M.apply(this,arguments))},ready:function(e){return U.test(L.readyState)&&L.body?e(D):L.addEventListener("DOMContentLoaded",function(){e(D)},!1),this},get:function(e){return e===S?M.call(this):this[e>=0?e:e+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(e){return I.every.call(this,function(t,i){return e.call(t,i,t)!==!1}),this},filter:function(e){return i(e)?this.not(this.not(e)):D(P.call(this,function(t){return q.matches(t,e)}))},add:function(e,t){return D(k(this.concat(D(e,t))))},is:function(e){return this.length>0&&q.matches(this[0],e)},not:function(e){var t=[];if(i(e)&&e.call!==S)this.each(function(i){e.call(this,i)||t.push(this)});else{var a="string"==typeof e?this.filter(e):o(e)&&i(e.item)?M.call(e):D(e);this.forEach(function(e){a.indexOf(e)<0&&t.push(e)})}return D(t)},has:function(e){return this.filter(function(){return s(e)?D.contains(this,e):D(this).find(e).size()})},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){var e=this[0];return e&&!s(e)?e:D(e)},last:function(){var e=this[this.length-1];return e&&!s(e)?e:D(e)},find:function(e){var t,i=this;return t=e?"object"==typeof e?D(e).filter(function(){var e=this;return I.some.call(i,function(t){return D.contains(t,e)})}):1==this.length?D(q.qsa(this[0],e)):this.map(function(){return q.qsa(this,e)}):D()},closest:function(e,t){var i=[],a="object"==typeof e&&D(e);return this.each(function(s,r){for(;r&&!(a?a.indexOf(r)>=0:q.matches(r,e));)r=r!==t&&!n(r)&&r.parentNode;r&&i.indexOf(r)<0&&i.push(r)}),D(i)},parents:function(e){for(var t=[],i=this;i.length>0;)i=D.map(i,function(e){return(e=e.parentNode)&&!n(e)&&t.indexOf(e)<0?(t.push(e),e):void 0});return m(t,e)},parent:function(e){return m(k(this.pluck("parentNode")),e)},children:function(e){return m(this.map(function(){return f(this)}),e)},contents:function(){return this.map(function(){return this.contentDocument||M.call(this.childNodes)})},siblings:function(e){return m(this.map(function(e,t){return P.call(f(t.parentNode),function(e){return e!==t})}),e)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(e){return D.map(this,function(t){return t[e]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=u(this.nodeName))})},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){var t=i(e);if(this[0]&&!t)var a=D(e).get(0),n=a.parentNode||this.length>1;return this.each(function(i){D(this).wrapAll(t?e.call(this,i):n?a.cloneNode(!0):a)})},wrapAll:function(e){if(this[0]){D(this[0]).before(e=D(e));for(var t;(t=e.children()).length;)e=t.first();D(e).append(this)}return this},wrapInner:function(e){var t=i(e);return this.each(function(i){var a=D(this),n=a.contents(),s=t?e.call(this,i):e;n.length?n.wrapAll(s):a.append(s)})},unwrap:function(){return this.parent().each(function(){D(this).replaceWith(D(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(e){return this.each(function(){var t=D(this);(e===S?"none"==t.css("display"):e)?t.show():t.hide()})},prev:function(e){return D(this.pluck("previousElementSibling")).filter(e||"*")},next:function(e){return D(this.pluck("nextElementSibling")).filter(e||"*")},html:function(e){return 0 in arguments?this.each(function(t){var i=this.innerHTML;D(this).empty().append(v(this,e,t,i))}):0 in this?this[0].innerHTML:null},text:function(e){return 0 in arguments?this.each(function(t){var i=v(this,e,t,this.textContent);this.textContent=null==i?"":""+i}):0 in this?this.pluck("textContent").join(""):null},attr:function(e,t){var i;return"string"!=typeof e||1 in arguments?this.each(function(i){if(1===this.nodeType)if(s(e))for(_ in e)w(this,_,e[_]);else w(this,e,v(this,t,i,this.getAttribute(e)))}):0 in this&&1==this[0].nodeType&&null!=(i=this[0].getAttribute(e))?i:S},removeAttr:function(e){return this.each(function(){1===this.nodeType&&e.split(" ").forEach(function(e){w(this,e)},this)})},prop:function(e,t){return e=Q[e]||e,1 in arguments?this.each(function(i){this[e]=v(this,t,i,this[e])}):this[0]&&this[0][e]},removeProp:function(e){return e=Q[e]||e,this.each(function(){delete this[e]})},data:function(e,t){var i="data-"+e.replace(z,"-$1").toLowerCase(),a=1 in arguments?this.attr(i,t):this.attr(i);return null!==a?b(a):S},val:function(e){return 0 in arguments?(null==e&&(e=""),this.each(function(t){this.value=v(this,e,t,this.value)})):this[0]&&(this[0].multiple?D(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value)},offset:function(t){if(t)return this.each(function(e){var i=D(this),a=v(this,t,e,i.offset()),n=i.offsetParent().offset(),s={top:a.top-n.top,left:a.left-n.left};"static"==i.css("position")&&(s.position="relative"),i.css(s)});if(!this.length)return null;if(L.documentElement!==this[0]&&!D.contains(L.documentElement,this[0]))return{top:0,left:0};var i=this[0].getBoundingClientRect();return{left:i.left+e.pageXOffset,top:i.top+e.pageYOffset,width:Math.round(i.width),height:Math.round(i.height)}},css:function(e,i){if(arguments.length<2){var a=this[0];if("string"==typeof e){if(!a)return;return a.style[T(e)]||getComputedStyle(a,"").getPropertyValue(e)}if(ee(e)){if(!a)return;var n={},s=getComputedStyle(a,"");return D.each(e,function(e,t){n[t]=a.style[T(t)]||s.getPropertyValue(t)}),n}}var r="";if("string"==t(e))i||0===i?r=c(e)+":"+d(e,i):this.each(function(){this.style.removeProperty(c(e))});else for(_ in e)e[_]||0===e[_]?r+=c(_)+":"+d(_,e[_])+";":this.each(function(){this.style.removeProperty(c(_))});return this.each(function(){this.style.cssText+=";"+r})},index:function(e){return e?this.indexOf(D(e)[0]):this.parent().children().indexOf(this[0])},hasClass:function(e){return!!e&&I.some.call(this,function(e){return this.test(x(e))},p(e))},addClass:function(e){return e?this.each(function(t){if("className"in this){$=[];var i=x(this),a=v(this,e,t,i);a.split(/\s+/g).forEach(function(e){D(this).hasClass(e)||$.push(e)},this),$.length&&x(this,i+(i?" ":"")+$.join(" "))}}):this},removeClass:function(e){return this.each(function(t){if("className"in this){if(e===S)return x(this,"");$=x(this),v(this,e,t,$).split(/\s+/g).forEach(function(e){$=$.replace(p(e)," ")}),x(this,$.trim())}})},toggleClass:function(e,t){return e?this.each(function(i){var a=D(this),n=v(this,e,i,x(this));n.split(/\s+/g).forEach(function(e){(t===S?!a.hasClass(e):t)?a.addClass(e):a.removeClass(e)})}):this},scrollTop:function(e){if(this.length){var t="scrollTop"in this[0];return e===S?t?this[0].scrollTop:this[0].pageYOffset:this.each(t?function(){this.scrollTop=e}:function(){this.scrollTo(this.scrollX,e)})}},scrollLeft:function(e){if(this.length){var t="scrollLeft"in this[0];return e===S?t?this[0].scrollLeft:this[0].pageXOffset:this.each(t?function(){this.scrollLeft=e}:function(){this.scrollTo(e,this.scrollY)})}},position:function(){if(this.length){var e=this[0],t=this.offsetParent(),i=this.offset(),a=H.test(t[0].nodeName)?{top:0,left:0}:t.offset();return i.top-=parseFloat(D(e).css("margin-top"))||0,i.left-=parseFloat(D(e).css("margin-left"))||0,a.top+=parseFloat(D(t[0]).css("border-top-width"))||0,a.left+=parseFloat(D(t[0]).css("border-left-width"))||0,{top:i.top-a.top,left:i.left-a.left}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||L.body;e&&!H.test(e.nodeName)&&"static"==D(e).css("position");)e=e.offsetParent;return e})}},D.fn.detach=D.fn.remove,["width","height"].forEach(function(e){var t=e.replace(/./,function(e){return e[0].toUpperCase()});D.fn[e]=function(i){var s,r=this[0];return i===S?a(r)?r["inner"+t]:n(r)?r.documentElement["scroll"+t]:(s=this.offset())&&s[e]:this.each(function(t){r=D(this),r.css(e,v(this,i,t,r[e]()))})}}),K.forEach(function(i,a){var n=a%2;D.fn[i]=function(){var i,s,r=D.map(arguments,function(e){var a=[];return i=t(e),"array"==i?(e.forEach(function(e){return e.nodeType!==S?a.push(e):D.zepto.isZ(e)?a=a.concat(e.get()):void(a=a.concat(q.fragment(e)))}),a):"object"==i||null==e?e:q.fragment(e)}),o=this.length>1;return r.length<1?this:this.each(function(t,i){s=n?i:i.parentNode,i=0==a?i.nextSibling:1==a?i.firstChild:2==a?i:null;var l=D.contains(L.documentElement,s);r.forEach(function(t){if(o)t=t.cloneNode(!0);else if(!s)return D(t).remove();s.insertBefore(t,i),l&&C(t,function(t){if(!(null==t.nodeName||"SCRIPT"!==t.nodeName.toUpperCase()||t.type&&"text/javascript"!==t.type||t.src)){var i=t.ownerDocument?t.ownerDocument.defaultView:e;i.eval.call(i,t.innerHTML)}})})})},D.fn[n?i+"To":"insert"+(a?"Before":"After")]=function(e){return D(e)[i](this),this}}),q.Z.prototype=g.prototype=D.fn,q.uniq=k,q.deserializeValue=b,D.zepto=q,D}();return e.Zepto=t,void 0===e.$&&(e.$=t),function(t){function i(e){return e._zid||(e._zid=u++)}function a(e,t,a,r){if(t=n(t),t.ns)var o=s(t.ns);return(m[i(e)]||[]).filter(function(e){return e&&(!t.e||e.e==t.e)&&(!t.ns||o.test(e.ns))&&(!a||i(e.fn)===i(a))&&(!r||e.sel==r)})}function n(e){var t=(""+e).split(".");return{e:t[0],ns:t.slice(1).sort().join(" ")}}function s(e){return new RegExp("(?:^| )"+e.replace(" "," .* ?")+"(?: |$)")}function r(e,t){return e.del&&!w&&e.e in x||!!t}function o(e){return b[e]||w&&x[e]||e}function l(e,a,s,l,h,p,u){var f=i(e),g=m[f]||(m[f]=[]);a.split(/\s/).forEach(function(i){if("ready"==i)return t(document).ready(s);var a=n(i);a.fn=s,a.sel=h,a.e in b&&(s=function(e){var i=e.relatedTarget;return!i||i!==this&&!t.contains(this,i)?a.fn.apply(this,arguments):void 0}),a.del=p;var f=p||s;a.proxy=function(t){if(t=c(t),!t.isImmediatePropagationStopped()){t.data=l;var i=f.apply(e,t._args==d?[t]:[t].concat(t._args));return i===!1&&(t.preventDefault(),t.stopPropagation()),i}},a.i=g.length,g.push(a),"addEventListener"in e&&e.addEventListener(o(a.e),a.proxy,r(a,u))})}function h(e,t,n,s,l){var h=i(e);(t||"").split(/\s/).forEach(function(t){a(e,t,n,s).forEach(function(t){delete m[h][t.i],"removeEventListener"in e&&e.removeEventListener(o(t.e),t.proxy,r(t,l))})})}function c(e,i){return(i||!e.isDefaultPrevented)&&(i||(i=e),t.each(D,function(t,a){var n=i[t];e[t]=function(){return this[a]=C,n&&n.apply(i,arguments)},e[a]=S}),e.timeStamp||(e.timeStamp=Date.now()),(i.defaultPrevented!==d?i.defaultPrevented:"returnValue"in i?i.returnValue===!1:i.getPreventDefault&&i.getPreventDefault())&&(e.isDefaultPrevented=C)),e}function p(e){var t,i={originalEvent:e};for(t in e)_.test(t)||e[t]===d||(i[t]=e[t]);return c(i,e)}var d,u=1,f=Array.prototype.slice,g=t.isFunction,y=function(e){return"string"==typeof e},m={},v={},w="onfocusin"in e,x={focus:"focusin",blur:"focusout"},b={mouseenter:"mouseover",mouseleave:"mouseout"};v.click=v.mousedown=v.mouseup=v.mousemove="MouseEvents",t.event={add:l,remove:h},t.proxy=function(e,a){var n=2 in arguments&&f.call(arguments,2);if(g(e)){var s=function(){return e.apply(a,n?n.concat(f.call(arguments)):arguments)};return s._zid=i(e),s}if(y(a))return n?(n.unshift(e[a],e),t.proxy.apply(null,n)):t.proxy(e[a],e);throw new TypeError("expected function")},t.fn.bind=function(e,t,i){return this.on(e,t,i)},t.fn.unbind=function(e,t){return this.off(e,t)},t.fn.one=function(e,t,i,a){return this.on(e,t,i,a,1)};var C=function(){return!0},S=function(){return!1},_=/^([A-Z]|returnValue$|layer[XY]$|webkitMovement[XY]$)/,D={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};t.fn.delegate=function(e,t,i){return this.on(t,e,i)},t.fn.undelegate=function(e,t,i){return this.off(t,e,i)},t.fn.live=function(e,i){return t(document.body).delegate(this.selector,e,i),this},t.fn.die=function(e,i){return t(document.body).undelegate(this.selector,e,i),this},t.fn.on=function(e,i,a,n,s){var r,o,c=this;return e&&!y(e)?(t.each(e,function(e,t){c.on(e,i,a,t,s)}),c):(y(i)||g(n)||n===!1||(n=a,a=i,i=d),(n===d||a===!1)&&(n=a,a=d),n===!1&&(n=S),c.each(function(c,d){s&&(r=function(e){return h(d,e.type,n),n.apply(this,arguments)}),i&&(o=function(e){var a,s=t(e.target).closest(i,d).get(0);return s&&s!==d?(a=t.extend(p(e),{currentTarget:s,liveFired:d}),(r||n).apply(s,[a].concat(f.call(arguments,1)))):void 0}),l(d,e,n,a,i,o||r)}))},t.fn.off=function(e,i,a){var n=this;return e&&!y(e)?(t.each(e,function(e,t){n.off(e,i,t)}),n):(y(i)||g(a)||a===!1||(a=i,i=d),a===!1&&(a=S),n.each(function(){h(this,e,a,i)}))},t.fn.trigger=function(e,i){return e=y(e)||t.isPlainObject(e)?t.Event(e):c(e),e._args=i,this.each(function(){e.type in x&&"function"==typeof this[e.type]?this[e.type]():"dispatchEvent"in this?this.dispatchEvent(e):t(this).triggerHandler(e,i)})},t.fn.triggerHandler=function(e,i){var n,s;return this.each(function(r,o){n=p(y(e)?t.Event(e):e),n._args=i,n.target=o,t.each(a(o,e.type||e),function(e,t){return s=t.proxy(n),!n.isImmediatePropagationStopped()&&void 0})}),s},"focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(e){t.fn[e]=function(t){return 0 in arguments?this.bind(e,t):this.trigger(e)}}),t.Event=function(e,t){y(e)||(t=e,e=t.type);var i=document.createEvent(v[e]||"Events"),a=!0;if(t)for(var n in t)"bubbles"==n?a=!!t[n]:i[n]=t[n];return i.initEvent(e,a,!0),c(i)}}(t),function(t){function i(e,i,a){var n=t.Event(i);return t(e).trigger(n,a),!n.isDefaultPrevented()}function a(e,t,a,n){return e.global?i(t||x,a,n):void 0}function n(e){e.global&&0===t.active++&&a(e,null,"ajaxStart")}function s(e){e.global&&!--t.active&&a(e,null,"ajaxStop")}function r(e,t){var i=t.context;return t.beforeSend.call(i,e,t)!==!1&&a(t,i,"ajaxBeforeSend",[e,t])!==!1&&void a(t,i,"ajaxSend",[e,t])}function o(e,t,i,n){var s=i.context,r="success";i.success.call(s,e,r,t),n&&n.resolveWith(s,[e,r,t]),a(i,s,"ajaxSuccess",[t,i,e]),h(r,t,i)}function l(e,t,i,n,s){var r=n.context;n.error.call(r,i,t,e),s&&s.rejectWith(r,[i,t,e]),a(n,r,"ajaxError",[i,n,e||t]),h(t,i,n)}function h(e,t,i){var n=i.context;i.complete.call(n,t,e),a(i,n,"ajaxComplete",[t,i]),s(i)}function c(e,t,i){if(i.dataFilter==p)return e;var a=i.context;return i.dataFilter.call(a,e,t)}function p(){}function d(e){return e&&(e=e.split(";",2)[0]),e&&(e==D?"html":e==_?"json":C.test(e)?"script":S.test(e)&&"xml")||"text"}function u(e,t){return""==t?e:(e+"&"+t).replace(/[&?]{1,2}/,"?")}function f(e){e.processData&&e.data&&"string"!=t.type(e.data)&&(e.data=t.param(e.data,e.traditional)),!e.data||e.type&&"GET"!=e.type.toUpperCase()&&"jsonp"!=e.dataType||(e.url=u(e.url,e.data),e.data=void 0)}function g(e,i,a,n){return t.isFunction(i)&&(n=a,a=i,i=void 0),t.isFunction(a)||(n=a,a=void 0),{url:e,data:i,success:a,dataType:n}}function y(e,i,a,n){var s,r=t.isArray(i),o=t.isPlainObject(i);t.each(i,function(i,l){s=t.type(l),n&&(i=a?n:n+"["+(o||"object"==s||"array"==s?i:"")+"]"),!n&&r?e.add(l.name,l.value):"array"==s||!a&&"object"==s?y(e,l,a,i):e.add(i,l)})}var m,v,w=+new Date,x=e.document,b=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,C=/^(?:text|application)\/javascript/i,S=/^(?:text|application)\/xml/i,_="application/json",D="text/html",$=/^\s*$/,T=x.createElement("a");T.href=e.location.href,t.active=0,t.ajaxJSONP=function(i,a){if(!("type"in i))return t.ajax(i);var n,s,h=i.jsonpCallback,c=(t.isFunction(h)?h():h)||"Zepto"+w++,p=x.createElement("script"),d=e[c],u=function(e){t(p).triggerHandler("error",e||"abort")},f={abort:u};return a&&a.promise(f),t(p).on("load error",function(r,h){clearTimeout(s),t(p).off().remove(),"error"!=r.type&&n?o(n[0],f,i,a):l(null,h||"error",f,i,a),e[c]=d,n&&t.isFunction(d)&&d(n[0]),d=n=void 0}),r(f,i)===!1?(u("abort"),f):(e[c]=function(){n=arguments},p.src=i.url.replace(/\?(.+)=\?/,"?$1="+c),x.head.appendChild(p),i.timeout>0&&(s=setTimeout(function(){u("timeout")},i.timeout)),f)},t.ajaxSettings={type:"GET",beforeSend:p,success:p,error:p,complete:p,context:null,global:!0,xhr:function(){return new e.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:_,xml:"application/xml, text/xml",html:D,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0,dataFilter:p},t.ajax=function(i){var a,s,h=t.extend({},i||{}),g=t.Deferred&&t.Deferred();for(m in t.ajaxSettings)void 0===h[m]&&(h[m]=t.ajaxSettings[m]);n(h),h.crossDomain||(a=x.createElement("a"),a.href=h.url,a.href=a.href,h.crossDomain=T.protocol+"//"+T.host!=a.protocol+"//"+a.host),h.url||(h.url=e.location.toString()),(s=h.url.indexOf("#"))>-1&&(h.url=h.url.slice(0,s)),f(h);var y=h.dataType,w=/\?.+=\?/.test(h.url);if(w&&(y="jsonp"),h.cache!==!1&&(i&&i.cache===!0||"script"!=y&&"jsonp"!=y)||(h.url=u(h.url,"_="+Date.now())),"jsonp"==y)return w||(h.url=u(h.url,h.jsonp?h.jsonp+"=?":h.jsonp===!1?"":"callback=?")),t.ajaxJSONP(h,g);var b,C=h.accepts[y],S={},_=function(e,t){S[e.toLowerCase()]=[e,t]},D=/^([\w-]+:)\/\//.test(h.url)?RegExp.$1:e.location.protocol,k=h.xhr(),I=k.setRequestHeader;if(g&&g.promise(k),h.crossDomain||_("X-Requested-With","XMLHttpRequest"),_("Accept",C||"*/*"),(C=h.mimeType||C)&&(C.indexOf(",")>-1&&(C=C.split(",",2)[0]),k.overrideMimeType&&k.overrideMimeType(C)),(h.contentType||h.contentType!==!1&&h.data&&"GET"!=h.type.toUpperCase())&&_("Content-Type",h.contentType||"application/x-www-form-urlencoded"),h.headers)for(v in h.headers)_(v,h.headers[v]);if(k.setRequestHeader=_,k.onreadystatechange=function(){if(4==k.readyState){k.onreadystatechange=p,clearTimeout(b);var e,i=!1;if(k.status>=200&&k.status<300||304==k.status||0==k.status&&"file:"==D){if(y=y||d(h.mimeType||k.getResponseHeader("content-type")),"arraybuffer"==k.responseType||"blob"==k.responseType)e=k.response;else{e=k.responseText;try{e=c(e,y,h),"script"==y?(0,eval)(e):"xml"==y?e=k.responseXML:"json"==y&&(e=$.test(e)?null:t.parseJSON(e))}catch(e){i=e}if(i)return l(i,"parsererror",k,h,g)}o(e,k,h,g)}else l(k.statusText||null,k.status?"error":"abort",k,h,g)}},r(k,h)===!1)return k.abort(),l(null,"abort",k,h,g),k;var W=!("async"in h)||h.async;if(k.open(h.type,h.url,W,h.username,h.password),h.xhrFields)for(v in h.xhrFields)k[v]=h.xhrFields[v];for(v in S)I.apply(k,S[v]);return h.timeout>0&&(b=setTimeout(function(){k.onreadystatechange=p,k.abort(),l(null,"timeout",k,h,g)},h.timeout)),k.send(h.data?h.data:null),k},t.get=function(){return t.ajax(g.apply(null,arguments))},t.post=function(){var e=g.apply(null,arguments);return e.type="POST",t.ajax(e)},t.getJSON=function(){var e=g.apply(null,arguments);return e.dataType="json",t.ajax(e)},t.fn.load=function(e,i,a){if(!this.length)return this;var n,s=this,r=e.split(/\s/),o=g(e,i,a),l=o.success;return r.length>1&&(o.url=r[0],n=r[1]),o.success=function(e){s.html(n?t("<div>").html(e.replace(b,"")).find(n):e),l&&l.apply(s,arguments)},t.ajax(o),this};var k=encodeURIComponent;t.param=function(e,i){var a=[];return a.add=function(e,i){t.isFunction(i)&&(i=i()),null==i&&(i=""),this.push(k(e)+"="+k(i))},y(a,e,i),a.join("&").replace(/%20/g,"+")}}(t),function(e){e.fn.serializeArray=function(){var t,i,a=[],n=function(e){return e.forEach?e.forEach(n):void a.push({name:t,value:e})};return this[0]&&e.each(this[0].elements,function(a,s){i=s.type,t=s.name,t&&"fieldset"!=s.nodeName.toLowerCase()&&!s.disabled&&"submit"!=i&&"reset"!=i&&"button"!=i&&"file"!=i&&("radio"!=i&&"checkbox"!=i||s.checked)&&n(e(s).val())}),a},e.fn.serialize=function(){var e=[];return this.serializeArray().forEach(function(t){e.push(encodeURIComponent(t.name)+"="+encodeURIComponent(t.value))}),e.join("&")},e.fn.submit=function(t){if(0 in arguments)this.bind("submit",t);else if(this.length){var i=e.Event("submit");this.eq(0).trigger(i),i.isDefaultPrevented()||this.get(0).submit()}return this}}(t),function(){try{getComputedStyle(void 0)}catch(i){var t=getComputedStyle;e.getComputedStyle=function(e,i){try{return t(e,i)}catch(e){return null}}}}(),t}),define("pm",["utils","pageview","$","tip"],function(e,t,i,a){function n(){var e=this;this.pages={},this.isForward=!0,this.isInit=!0,this.pagekeySeed=0,this.isPrevent=!1,this.$el=i("<div class='yy-root-view'></div>"),this.$el.appendTo(document.body),window.onhashchange=function(){
e.hashChange()};var t=null,a=null;i(document.body).bind("touchstart",function(e){for(t=e.target,a=t.getAttribute("data-activecn");t&&!a&&"BODY"!=t.tagName.toUpperCase()&&(t=t.parentNode,!(a=t.getAttribute("data-activecn"))););t&&a&&i(t).addClass(a)}),i(document.body).bind("touchend",function(){t&&a&&i(t).removeClass(a),t=null})}var s=!1,r=!1;return n.prototype={blur:function(){document.activeElement&&document.activeElement.blur()},showTip:function(e){this.Tip=new a(this.$el),this.Tip.show(e)},start:function(t){e.appConfig=t,this.appConfig=t,e.customerComponents=t.customerComponents||{},t.baseSize=t.baseSize||{width:320,height:568},e.baseSize.width=t.baseSize.width,e.baseSize.height=t.baseSize.height,this.config=t;var i=this.getPageNameFromUrl();if(i){this.hashChange();var a=i.split("$$");2==a.length&&(this.pagekeySeed=parseInt(a[1]))}else this.go(t.root,this.getParamsFromUrl())},showPageKeyDict:{},regeistShowPageInRouter:function(e){this.showPageKeyDict[e]=!0},hashChange:function(){var e=this.getPageNameFromUrl(),t=this.pages[this.fromPage],i=this;if(s)return s=!1,void(this.firstLoadToChangeHash=!1);if(this.isInit&&e===this.appConfig.root&&(this.firstLoadToChangeHash=!0),!this.isForward&&t&&this.showPageKeyDict[this.fromPage]===!0&&t.showpage_wrapper){var a=t.hideCurShowPage();if(!a){delete this.showPageKeyDict[this.fromPage];var n=t.plugin.onPageResume;n&&n.call(t.plugin,t,{isForward:!1})}return s=!0,void window.history.go(1)}if(t){var o=t.plugin.onPageBeforeLeave;if(o){var l=o.call(t.plugin,t,{isForward:this.isForward});if(l===!1)return s=!0,void window.history.go(1)}}if(this.config.routerChange){var h=this.config.routerChange({fromPage:this.fromPage,toPage:e,isForward:this.isForward,params:this.getParamsFromUrl()});if(h===!1)return s=!0,void window.history.go(1)}var c=this.pages[e];if(t&&!c&&t.showLoadingProgressbar(),this.blur(),this._renderNextPage(e,this.fromPage,this.isForward,t,function(t,a,n){a?(r&&(r=!1,i.pages[t].destory(),delete i.pages[t]),i.fromPage=e):window.setTimeout(function(){t&&i.pages[t]&&(i.pages[t].destory(),delete i.pages[t]),i.fromPage=e},300)},function(e){s=!0,window.history.go(-1),e&&e.hideLoadingProgressbar()}),this.firstLoadToChangeHash){var p=this.getParamsFromUrl();p._r=(new Date).valueOf(),this.go(this.appConfig.root,p),s=!0}},_renderNextPage:function(e,t,i,a,n,s){var r=this,o=this.pages[e],l="yy-pageview displayflex "+(i?"left-out":"right-out");if(a&&a.hideLoadingProgressbar(),o){if(!this.isForward){var h="yy-pageview displayflex left-in";o.$el[0].className=h;var c=o.plugin.onPageResume;c&&c.call(o.plugin,o,{isForward:!1})}a&&(a.$el[0].className=l),n(t,i,a),this.isForward=!1}else r.getPageConfigByPageKey(e,function(s){s.prePageView=i?a:null;var o=r.createPageView(s);r.pages[e]=o,r.$el.append(o.$el),r.isInit?(r.isForward=!1,o.Enter("yy-pageview displayflex yy-pageview-show",r.isInit),r.isInit=!1):window.setTimeout(function(){o.Enter("yy-pageview displayflex "+(r.isForward?"right-in":"left-in"),r.isInit),a&&(a.$el[0].className=l),r.isForward=!1},40),n(t,i,a)},function(e){s&&s(a)})},createPageView:function(e){return new t(e)},getPageNameFromUrl:function(){var e=window.location.hash.split("#"),t=e[1];if(!t)return this.rootPageKey;var i=t.split("?");return i[0]},getParamsStrFromUrl:function(){var e=window.location.href.split("?"),t=e[e.length-1];if(!t)return null;var i=t.split("#");return i[0]},getParamsFromUrl:function(){var e=this.getParamsStrFromUrl();if(!e)return null;for(var t={},i=e.split("&"),a=0,n=i.length;a<n;a++){var s=i[a].split("=");if(2==s.length)t=t||{},t[s[0]]=s[1];else if(s.length>2){var r=s.shift();t[r]=s.join("=")}}return t},tabSeleced:function(e,t){t||(s=!0);var i=this.getParamsFromUrl()||{};i.$$pn=e;var a=[];for(var n in i)a.push(n+"="+i[n]);var r=this.getPageNameFromUrl();a.length>0?location.replace(location.href.split("#")[0]+"#"+r+"?"+a.join("&")):location.replace(location.href.split("#")[0]+"#"+r)},goBack:function(){this.isForward=!1,window.history.go(-1)},go:function(e,t){this.isForward=!0,s=!1,this.isInit&&(this.rootPageKey=e),t=t||{};var i=[];for(var a in t)i.push(a+"="+t[a]);e=this._getUniquePageKey(e),i.length>0?location.hash=e+"?"+i.join("&"):location.hash=e},replaceGo:function(e,t){this.isForward=!0,s=!1,this.isInit&&(this.rootPageKey=e),t=t||{};var i=[];for(var a in t)i.push(a+"="+t[a]);e=this._getUniquePageKey(e),r=!0,i.length>0?location.replace(location.href.split("#")[0]+"#"+e+"?"+i.join("&")):location.replace(location.href.split("#")[0]+"#"+e)},_getUniquePageKey:function(e){var t=!1;for(var i in this.pages){var a=i.split("$$");if(a[0]==e){this.pagekeySeed+=1,t=!0;break}}return t?e+"$$"+this.pagekeySeed:e},_getPageConfigSuccess:function(t,i,a){i=e.copy(i),i.type="pageview",i.pageKey=t,i.$$params=this.getParamsFromUrl(),i.$$pageManager=this,a(i)},getPageConfigByPageKey:function(t,i,a){var n=this,s="./pages/"+t.split("$$")[0],r=e.getPageConfigByPagePath(s);return r?void this._getPageConfigSuccess(t,r,i):void require([s],function(a){a=e.setPageConfigByPagePath(s,a),n._getPageConfigSuccess(t,a,i)},function(e){console.error(e),a&&a(t)})}},new n}),require.config({waitSeconds:0,baseUrl:"./",shim:{$:{exports:"zepto"}},paths:{$:"../../libs/zepto",md5:"../../libs/md5",utils:"../../js/utils",base:"../../components/base",pageview:"../../components/pageview",pm:"../../js/pageViewManager",swiper:"../../components/swiper",calendar:"../../../components/calendar",tip:"../../components/tip"}}),require(["app","pm","$"],function(e,t,i){e.init||console.error("app.js 未提供init方法"),e.init(t)}),define("../../js/main",function(){}),define("../../components/base",["utils","tip"],function(e,t){function i(e,t){if(!e)return null;for(var i=e,a=0,n=t.length;a<n;a++){var s=t[a];if(i=i[s],!i&&0!=i){i=null;break}}return i}var a=function(t){var i=this;this.pageview=t.$$pageview||this,this.loaderHtml="<div class='spinner center'><div class='spinner-blade'></div><div class='spinner-blade'></div><div class='spinner-blade'></div><div class='spinner-blade'></div><div class='spinner-blade'></div><div class='spinner-blade'></div><div class='spinner-blade'></div><div class='spinner-blade'></div><div class='spinner-blade'></div><div class='spinner-blade'></div><div class='spinner-blade'></div><div class='spinner-blade'></div></div>",this.disabled=!1,this.parent=t.$$parent,this.datasource=t.$$datasource||[],this.rowInstance=t.$$rowInstance,t.ref&&(this.rowInstance?(this.rowInstance.refs=this.rowInstance.refs||{},this.rowInstance.refs[t.comKey]=this):this.pageview.refs[t.comKey]=this);var a=t.className||"";this.selectedClassName=t.selectedClassName,t.tagName=t.tagName||"DIV";var n=t.activeClassName?"data-activecn='"+t.activeClassName+"'":"";this.$el=$("<"+t.tagName+" "+n+" data-comname='"+t.comKey+"' class='"+a+"'></"+t.tagName+">"),t=this._processConfig(t),this.config=t,this.components={},"repeat"!=t.type&&"listview"!=t.type||(this.components=[]),t.comKey&&this.$el.addClass(t.comKey);var s=this.config.comKey+"_init";if("repeatitem"===t.type&&(s=this.parent.config.comKey+"_iteminit"),"pageview"===this.config.type){var r=this.config.children;if(r&&r instanceof Array)for(var o=0,l=r.length;o<l;o++){var h=r[o].components;if(h)for(var c in h){var p=e.copy(h[c]);for(var d in p)d.length>=5&&"STYLE"==d.substring(d.length-5).toUpperCase()&&(p[d]=this.processStyle(p[d],BaseSize));this.config.components[c]=p}}}if(this.pageview.plugin&&this.pageview.plugin[s]){var u=this.pageview.plugin[s];u&&u.call(this.pageview.plugin,this)}var f=t.style;if(t.noNeedSetStyle||f&&"pageview"!=t.type&&"segment"!=t.type&&e.css(this.$el,f),this.disabledClassName=t.disabledClassName||"yy-disabled",this.disabled&&this.setDisabled(!0),t.comKey){var g=t.comKey+"_click",y=i.pageview.plugin[g];y&&this.$el.bind("click",function(e){e.preventDefault(),e.stopPropagation(),!i.disabled&&y&&y.call(i.pageview.plugin,i,{e:e})})}};return a.prototype.setDisabled=function(e){this.disabled=e,this.disabled?this.$el.addClass(this.disabledClassName):this.$el.removeClass(this.disabledClassName)},a.prototype._processConfig=function(e){for(var t in e){var a=t.split("_");if(2==a.length&&"bind"==a[1]){var n=e[t],s=a[0],r=typeof n;if("string"==r)e[s]=i(this.datasource,n.split("."));else if("object"==r)for(var o in n){var l=o,h=i(this.datasource,n[o].split("."));e[s]=e[s]||{},e[s][l]=h}}}return e},a.prototype.selected=function(e){if(!e||!this.config.disableParentSelect){this.isSelected=!0,this.selectedClassName&&""!==this.selectedClassName&&this.$el.addClass(this.selectedClassName);for(var t in this.components)this.components[t].selected(!0)}},a.prototype.unSelected=function(e){if(!e||!this.config.disableParentSelect){this.isSelected=!1,this.selectedClassName&&""!==this.selectedClassName&&this.$el.removeClass(this.selectedClassName);for(var t in this.components)this.components[t].unSelected(!0)}},a.prototype.getUniqueKey=function(){return this.pageview.config.pageKey+""+this.config.comKey},a.prototype.showTip=function(e){this.Tip=new t(this.$el),this.Tip.show(e)},a.prototype._prepareComponent=function(t,i,a){var n=e.clone(this.pageview.config.components[t]),s=n.type,r=e.getComponentInstance(s);n.$$pageview=this.pageview,n.$$rowInstance=a,n.$$parent=this,n.comKey=t,n.$$datasource=i;var o=null;try{o=new r(n,null)}catch(e){console.log(e),console.log(n)}var l=t+"_didmount";if(this.pageview.plugin){var h=this.pageview.plugin[l];h&&h.call(this.pageview.plugin,o)}return this.pageview.componentsInitActions[t]&&(this.pageview.componentsInitActions[t](o),delete this.pageview.componentsInitActions[t]),o},a.prototype._initComponents=function(e,t,i,a){for(var n=0,s=e.root.length;n<s;n++){var r=e.root[n],o=this._prepareComponent(r,t,a);e.isContainer||"repeat"==e.type?(this.components.push=o,i(o)):"tabbarview"==e.type?(this.components[r]=o,i(o)):this.components[r]=o}return this.components},a.prototype.getClientRect=function(){return this.$el[0].getBoundingClientRect()},a.prototype.getComponentInstanceByComKey=function(e,t,i,a,n){var s=this;this.loadFiles([e],this.pageview||this,function(){var n=s._prepareComponent(e,t,i);a(n)},function(){n&&n()})},a.prototype.initLayout=function(t,i,a,n){var s=this;this.config.root&&this.config.root.length>0&&this.loadFiles(this.config.root,this.pageview||this,function(){if(i)s._initComponents(s.config,t,i,a);else{s._initComponents(s.config,t,null,a);for(var r=0,o=s.config.root.length;r<o;r++){var l=s.components[s.config.root[r]],h=s.$$childrenWrapper||s.$el;null===l&&(console.log(s.config.root[r]),console.log(s.config.root),console.log(s.components)),h.append(l.$el);var c;s.config.splitStyle&&s.config.root.length>1&&r!=s.config.root.length-1&&(c=$("<div></div>"),l.splitLine=c,e.css(c,s.config.splitStyle,!0),h.append(c))}}if(n&&n(),"pageview"==s.config.type){var p=s.plugin.onPageLoad;p&&p.call(s.plugin,s)}},function(){})},a.prototype.setBadge=function(t,i){if(!this.$$badge){this.$$badge=$("<div class='displayflex jc-center ai-center yy-badge displaynone'></div>"),i=i||{};var a=i.width||i.height||16;i["min-width"]=i.height=a,delete i.width,i=e.processStyle(i),i["border-radius"]=parseInt(i.height)/2+"px",e.css(this.$$badge,i),this.$el.append(this.$$badge)}t?this.$$badge.html(t).removeClass("displaynone"):this.$$badge.addClass("displaynone")},a.prototype.showLoading=function(t){if(t=t||{},this.loadingConfig=t,!this.$$loadingWrapper){t.timeout&&!isNaN(t.timeout)||(t.timeout=7e3),this.loadingtimeout=parseInt(t.timeout)||7e3;var i="displaynone yy-loading-bk displayflex yy-jc-center yy-ai-center ";t.style&&(t.style.alignItems||t.style["align-items"]||(i+="yy-ai-center")),this.$$loadingWrapper=$("<div class='"+i+"'></div>"),t.style&&e.css(this.$$loadingWrapper,t.style);var a=$("<div class='yy-loading-wrapper yy-fd-column displayflex yy-jc-center yy-ai-center'>"+this.loaderHtml+"</div>");this.loadingText=$("<span class='yy-loading-text'></span>"),a.append(this.loadingText),this.$$loadingWrapper.append(a),this.$el.append(this.$$loadingWrapper)}this.loadingText.html(t.text||"正在努力加载"),this.startLoadingTimeout(t),this.$$loadingWrapper.removeClass("displaynone")},a.prototype.showLoadingError=function(){var e=this;if(this.$$loadingWrapper){if(this.loadingTimeId&&window.clearTimeout(this.loadingTimeId),!e.loadingConfig.reLoadCallBack)return void e.hideLoading();e.loadingErrorWrapper||(e.loadingErrorWrapper=e._createErrorDom(function(){e.$$loadingWrapper.removeClass("yy-loading-wrapper-error"),e.loadingErrorWrapper.addClass("displaynone"),e.loadingTimeId=null,e.startLoadingTimeout(e.loadingConfig),e.loadingConfig.reLoadCallBack&&e.loadingConfig.reLoadCallBack()}),e.loadingErrorWrapper.appendTo(e.$$loadingWrapper)),e.$$loadingWrapper.addClass("yy-loading-wrapper-error"),e.loadingErrorWrapper.removeClass("displaynone")}},a.prototype.startLoadingTimeout=function(e){var t=this;this.loadingTimeId||(this.loadingTimeId=window.setTimeout(function(){t.showLoadingError()},this.loadingtimeout))},a.prototype._createErrorDom=function(t){var i=e.getRealWidth(11),a=e.getRealWidth(20),n=$("<div style='height:100px' class='yy-loadmore-wrapper displayflex jc-center ai-center flex-h displaynone'></div>"),s=$("<i style='font-size:"+a+"px' class='yy-icommon yy-loadmore-erroricon'></i>"),r=$("<span style='font-size:"+i+"px' class='yy-pull-meslabel'>网络异常,点击</span>"),o=$("<span style='font-size:"+i+"px' class='yy-loadmore-reload-babel'>重新加载</span>");return o.bind("click",function(){t()}),n.append(s).append(r).append(o),n},a.prototype.hideLoading=function(e){return e===!1?void this.showLoadingError():(this.loadingTimeId&&(window.clearTimeout(this.loadingTimeId),this.loadingTimeId=null),void(this.$$loadingWrapper&&this.$$loadingWrapper.addClass("displaynone")))},a.prototype.loadFiles=function(t,i,a,n){for(var s=t.length,r=0,o=0;o<s;o++)!function(t,s,o){var l=i.config.components[o];e.getComponentClass(l,function(e){r+=1,r==t&&a()},function(){n()})}(s,o,t[o])},a}),define("../../components/button",["utils","base"],function(e,t){var i=function(e){i.baseConstructor.call(this,e);var t=e.title||"按钮",a=e.mode||"1",n="displayflex yy-btn yy-btn-"+a;this.$el.addClass(n),this.$el.html(t)};return e.extends(i,t),i}),define("swiper",["utils","base"],function(e,t){var i=function(e){this.config=e,this.$el=$("<div style='"+e.style+"' class='yy-swiper-item-wrapper'></div>")};i.prototype={css:function(t){e.css(this.$el,t)}};var a=function(t){this.config=t||{},this.$el=$("<div class='yy-swiper-wrapper flex-1'></div>"),this.itemWrappers=[],this.posArr=[0,1,2],this.limit=e.getRealWidth(90),this.minOffsetX=t.minOffsetX||0,this.tanKeys=e.getTransitionKeys(),this.initLayout(),this.direction="h",this.config.init&&this.config.init(this)};return a.prototype={_posArrGoNext:function(){var e=this.posArr[0];this.posArr[0]=this.posArr[1],this.posArr[1]=this.posArr[2],this.posArr[2]=e},_resetPosArr:function(){this.posArr=[0,1,2]},_posArrGoPre:function(){var e=this.posArr[2];this.posArr[2]=this.posArr[1],this.posArr[1]=this.posArr[0],this.posArr[0]=e},initLayout:function(){var t=this;this.initPos=[0-e.viewport.width,0,e.viewport.width];for(var a=0;a<3;a++){var n=this.tanKeys.transform+":translate3d("+this.initPos[a]+"px,0,0)",s=new i({style:n});this.itemWrappers.push(s),this.config.initItem&&this.config.initItem(s,a),this.$el.append(s.$el)}var r,o,l;t.isIntransition=!1,this.$el.bind("touchstart",function(e){l=t.isIntransition,t.isIntransition||(r=e.touches[0].pageX)}),this.$el.bind("touchmove",function(e){if(!t.isIntransition&&!l){var i=e.touches[0];o=i.pageX-r,"h"===t.direction&&Math.abs(o)>4&&(e.preventDefault(),e.stopPropagation()),t.setPos("move",o)}}),this.$el.bind("touchend",function(e){if(!t.isIntransition&&!l&&o&&0!=o){if(Math.abs(o)<t.limit)return t.setPos(),void(t.isIntransition=!1);o>0?t.goPre():t.goNext(),o=0}})},transitionEnd:function(e){this.isIntransition=!1},goPre:function(){if(this.config.beforeGoPre){var e=this.config.beforeGoPre();if(e===!1)return this.setPos(),void(this.isIntransition=!1)}var t=this;this.isIntransition=!0,this._posArrGoPre(),this.setPos("gopre"),this.config.onChange&&this.config.onChange({swiper:this,action:"gopre",itemWrapper:this.itemWrappers[this.posArr[0]]}),window.setTimeout(function(){t.transitionEnd("gopre")},280)},goNext:function(){if(this.config.beforeGoNext){var e=this.config.beforeGoNext();if(e===!1)return this.setPos(),void(this.isIntransition=!1)}var t=this;this.isIntransition=!0,this._posArrGoNext(),this.setPos("gonext"),this.config.onChange&&this.config.onChange({swiper:this,action:"gonext",itemWrapper:this.itemWrappers[this.posArr[2]]}),window.setTimeout(function(){t.transitionEnd("gonext")},280)},reset:function(){this._resetPosArr(),this.setPos("move",0)},getMidWrapper:function(){return this.itemWrappers[this.posArr[1]]},getPreWrapper:function(){return this.itemWrappers[this.posArr[0]]},getNextWrapper:function(){return this.itemWrappers[this.posArr[2]]},setPos:function(e,t){var i=this;t=t||0;for(var a=0;a<3;a++){var n=i.posArr[a],s=i.itemWrappers[n],r={};r[i.tanKeys.transition]="move"==e?"none":this.tanKeys.transform+" .35s ease","gopre"==e&&0==a&&(r[i.tanKeys.transition]="none"),"gonext"==e&&2==a&&(r[i.tanKeys.transition]="none"),r[i.tanKeys.transform]="translate3d("+(this.initPos[a]+t)+"px,0,0)",s.css(r)}}},a}),define("../../components/calendar",["utils","base","swiper"],function(e,t,i){function a(t,i,a,n){var s=this;s.dateInfo=t,this.calendar=n,this.$el=$("<div date-seed='"+t.dateStr+"' date-mark='"+t.mark+"' date-day='"+t.day+"'  date-month='"+t.month+"' date-year='"+t.year+"' class='yy-calendar-day-item displayflex jc-center ai-center yy-calendar-day-item-"+t.mark+"'></div>");var r=e.ConvertDateToStr(n.selectedTime)==s.dateInfo.dateStr;this.dayLabel=$("<div style='font-size:"+e.fontSize12()+"px;width:"+a+"px;height:"+a+"px;line-height:"+a+"px' class='yy-calendar-day'>"+t.day+"</div>"),r&&this.selected(),this.$el.append(this.dayLabel),e.css(this.$el,i)}function n(e){this.config=e,this.yearItems={},this.itemWrapper=e.itemWrapper,this.calendar=e.calendar}function s(t){this.config=t,this.itemWrapper=t.itemWrapper,this.calendar=t.calendar,this.SumDay=42,this.dayInnerWidth=e.getRealWidth(23),this.dayItems={}}a.prototype={selected:function(){this.dayLabel.addClass("yy-calendar-day-selected")},unSelected:function(){this.dayLabel.removeClass("yy-calendar-day-selected")}},n.prototype={createLaytout:function(e){this.yearItems={},this.itemWrapper.$el.empty();for(var t=0;t<12;t++){var i=e+t,a=new r({calendar:this.calendar,year:i,itemHeight:this.config.itemHeight});this.yearItems[i]=a,this.itemWrapper.$el.append(a.$el)}}};var r=function(t){this.config=t,this.calendar=t.calendar;var i=e.convertToDate(this.calendar.curDate),a=i.getFullYear()==this.config.year;this.$el=$("<div  date-year-seed='"+t.year+"' style='height:"+this.config.itemHeight+";line-height:"+this.config.itemHeight+"' class='yy-calendar-year-item'></div>"),this.innnerYear=$("<span style='font-size:"+e.fontSize15()+"px' class='yy-calendar-year'>"+this.config.year+"</span>"),a&&this.selected(),this.$el.append(this.innnerYear)};r.prototype={selected:function(){this.innnerYear.addClass("yy-calendar-year-selected")},unSelected:function(){this.innnerYear.removeClass("yy-calendar-year-selected")}},s.prototype={createLaytout:function(t){this.dayItems={},this.date=e.convertToDate(t),this.itemWrapper.$el.empty();for(var i=this.getDaysArr(),n={height:this.config.itemHeight+"px","font-size":e.getRealWidth(14)+"px"},s=document.createDocumentFragment(),r=0;r<this.SumDay;r++){var o=i[r],l=new a(o,n,this.dayInnerWidth,this.calendar);this.dayItems[o.dateStr]=l,s.appendChild(l.$el[0])}this.itemWrapper.$el[0].appendChild(s)},getDaysArr:function(){var t=[],i=e.getMonthDayCount(this.date),a=e.getDateInfo(this.date),n=e.getMonthFirstDayWhicDayInWeek(this.date),s=this.SumDay-n-i;if(n>0)for(var r=e.getPreMonth(this.date),o=e.getMonthDayCount(r),l=e.getDateInfo(r),h=0;h<n;h++){var c=o-n+h+1,p=new Date(l.year,l.month-1,c);t.push({date:p,dateStr:e.ConvertDateToStr(p),year:l.year,month:l.month,day:c,mark:"premonth"})}for(var h=1;h<=i;h++){var p=new Date(a.year,a.month-1,h);t.push({date:p,dateStr:e.ConvertDateToStr(p),year:a.year,month:a.month,day:h,mark:"curmonth"})}if(s>0)for(var d=e.getNextMonth(this.date),u=e.getDateInfo(d),h=1;h<=s;h++){var p=new Date(u.year,u.month-1,h);t.push({date:p,dateStr:e.ConvertDateToStr(p),year:u.year,month:u.month,day:h,mark:"nextmonth"})}return t}};var o=["一","二","三","四","五","六","七","八","九","十","十一","十二"],l=function(t){var i=this;l.baseConstructor.call(this,t),this.$el.addClass("yy-calendar-wrapper");var a=this.config.itemHeight;isNaN(a)&&(a=45),this.curDate=t.date||new Date,this.selectedTime=new Date(e.convertToDate(this.curDate).getTime()),a=parseInt(a),this.itemHeight=e.getRealHeight(a);var n=t.comKey+"_change";this.pageview&&this.pageview.plugin&&(this.pluginChangeMethod=this.pageview.plugin[n]),this.labelBarHeight=e.getRealHeight(27);var s=6*this.itemHeight+this.labelBarHeight;this.innerWrapper=$("<div style='height:"+s+"px' class='yy-calendar-inner'></div>");var r=this.config.isShowYearAndMonthPicker||!0;if(r){var o=e.getRealHeight(36);s+=o,this.initYearAndMonthPicker(o,s)}this.mode=t.mode||"年月日","年月"==this.mode?(this.curShow="year",this.createYearWrapper(s-o),this.triggerChange()):(this.curShow="day",i.createDayWraper()),this.$el.append(this.innerWrapper)};return e.extends(l,t),l.prototype.setDateSelected=function(t,i){var t=e.convertToDate(t),a=(t.getFullYear(),e.ConvertDateToStr(t));this.selectedTime=t;for(var n=0;n<3;n++){var s=this.Swiper.itemWrappers[n].daysCreator;for(var r in s.dayItems){var o=s.dayItems[r];o.dateInfo.dateStr==a?o.selected():o.unSelected()}}if(i){var l=i.getAttribute("date-mark");"premonth"==l?this.goPre():"nextmonth"==l&&this.goNext()}},l.prototype.setYearSelected=function(){var t,i=this,a=e.getDateInfo(this.curDate),n=!1,s=a.year;if(this.yearSwiper){for(var r=0;r<3;r++){var o=this.yearSwiper.itemWrappers[this.yearSwiper.posArr[r]].yearCreator;for(var l in o.yearItems){var h=o.yearItems[l];t=h.config.year,h.config.year==s?(n=!0,h.selected(),0==r?this.yearSwiper.goPre():2==r&&this.yearSwiper.goNext()):h.unSelected()}}n||(t>s?(this.initYearWrapper(s-3+12),window.setTimeout(function(){i.yearSwiper.goPre()},0)):(this.initYearWrapper(s-3-12),window.setTimeout(function(){i.yearSwiper.goNext()},0)))}},l.prototype.createDayWraper=function(){var t=this;new i({onChange:function(i){if("gopre"==i.action){var a=e.getPreMonth(t.curDate),n=e.getPreMonth(a);t.curDate=e.getCurMonthFirstDay(a),t.triggerChange(),i.itemWrapper.daysCreator.createLaytout(n)}else if("gonext"==i.action){var a=e.getNextMonth(t.curDate),s=e.getNextMonth(a);t.curDate=e.getCurMonthFirstDay(a),t.triggerChange(),i.itemWrapper.daysCreator.createLaytout(s)}},initItem:function(e,i){e.daysCreator=new s({calendar:t,itemWrapper:e,itemHeight:t.itemHeight})},init:function(e){t.Swiper=e}});var a=e.getRealWidth(13),n="style='line-height:"+this.labelBarHeight+"px;font-size:"+a+"px'",r=$("<div style='height:"+this.labelBarHeight+"px' class='yy-calendar-bar'><div "+n+" class='yy-c-bar-item'>日</div><div "+n+" class='yy-c-bar-item'>一</div><div "+n+" class='yy-c-bar-item'>二</div><div "+n+" class='yy-c-bar-item'>三</div><div "+n+" class='yy-c-bar-item'>四</div><div "+n+" class='yy-c-bar-item'>五</div><div "+n+" class='yy-c-bar-item'>六</div></div>");this.dayWrapper=$("<div class='yy-calendar-ymd-wrapper displayflex flex-v'></div>"),this.dayWrapper.append(r).append(this.Swiper.$el),this.Swiper.$el.bind("click",function(e){for(var i=e.target,a=i.getAttribute("date-seed");null==a&&(i=i.parentNode,!(a=i.getAttribute("date-seed")))&&"BODY"!=i.tagName.toUpperCase(););t.setDateSelected(a,i)}),this.innerWrapper.append(this.dayWrapper),this.show()},l.prototype.createYearWrapper=function(t){var a=t/4+"px",s=this,r="year"==this.curShow?"":"displaynone";this.yearWrapper=$("<div class='yy-calendar-ymd-wrapper "+r+"'></div>"),new i({onChange:function(e){"gopre"==e.action?(s.curYearWrapperStartYear-=12,e.itemWrapper.yearCreator.createLaytout(s.curYearWrapperStartYear-12)):"gonext"==e.action&&(s.curYearWrapperStartYear+=12,e.itemWrapper.yearCreator.createLaytout(s.curYearWrapperStartYear+12))},initItem:function(e,t){e.yearCreator=new n({itemWrapper:e,itemHeight:a,calendar:s})},init:function(t){s.yearSwiper=t,t.$el.appendTo(s.yearWrapper);var i=e.getDateInfo(s.curDate);s.initYearWrapper(i.year)}}),this.yearWrapper.bind("click",function(t){for(var i=t.target,a=i.getAttribute("date-year-seed");null==a&&(i=i.parentNode,!(a=i.getAttribute("date-year-seed")))&&"BODY"!=i.tagName.toUpperCase(););var n=parseInt(a);s.curDate=e.setDateToYear(s.curDate,n),s.show(s.curDate,!1),s.curShow="day",s.dayWrapper&&s.dayWrapper.removeClass("displaynone"),s.yearWrapper.addClass("displaynone"),s.setYearSelected()}),this.innerWrapper.append(this.yearWrapper)},l.prototype.initYearWrapper=function(e){this.yearSwiper.reset(),this.curYearWrapperStartYear=e-4,this.yearSwiper.itemWrappers[0].yearCreator.createLaytout(e-4-12),this.yearSwiper.itemWrappers[1].yearCreator.createLaytout(e-4),this.yearSwiper.itemWrappers[2].yearCreator.createLaytout(e-4+12)},l.prototype.initYearAndMonthPicker=function(t,i){var a=e.getRealWidth(18),n=this,s=$("<div style='height:"+t+"px' class='yy-calendar-ym-picker displayflex flex-h'></div>");this.yearLeftIcon=$("<div class='yy-calendar-picker-lefticon' style='width:"+t+"px;height:"+t+"px;line-height:"+t+"px'></div>"),this.yearLabel=$("<div style='font-size:"+a+"px' class='yy-calendar-picker-label displayflex ai-center jc-center flex-1'>2013</div>"),this.yearLabel.bind("click",function(){n.yearWrapper||n.createYearWrapper(i-t),"day"==n.curShow?(n.curShow="year",n.yearWrapper.removeClass("displaynone"),n.dayWrapper&&n.dayWrapper.addClass("displaynone")):"year"==n.curShow?(n.curShow="day",n.dayWrapper&&n.dayWrapper.removeClass("displaynone"),n.yearWrapper.addClass("displaynone")):"month"==n.curShow&&(n.curShow="year",n.monthWrapper&&n.monthWrapper.addClass("displaynone"),n.yearWrapper.removeClass("displaynone"))}),this.yearLeftIcon.bind("click",function(){n.goTo(e.getPreYear(n.curDate)),n.setYearSelected()}),this.yearRightIcon=$("<div class='yy-calendar-picker-righticon' style='width:"+t+"px;height:"+t+"px;line-height:"+t+"px'></div>"),this.yearRightIcon.bind("click",function(){n.goTo(e.getNextYear(n.curDate)),n.setYearSelected()}),this.monthLeftIcon=$("<div class='yy-calendar-picker-lefticon' style='width:"+t+"px;height:"+t+"px;line-height:"+t+"px'></div>"),this.monthLeftIcon.bind("click",function(){n.goPre(),n.setMonthSelected()}),this.monthLabel=$("<div style='font-size:"+a+"px' class='yy-calendar-picker-label displayflex ai-center jc-center flex-1'>2013</div>"),this.monthLabel.bind("click",function(){n.monthWrapper||n.createMonthWrapper(i-t),"day"==n.curShow?(n.setMonthSelected(),n.curShow="month",n.monthWrapper.removeClass("displaynone"),n.dayWrapper&&n.dayWrapper.addClass("displaynone")):"year"==n.curShow?(n.setMonthSelected(),n.curShow="month",n.monthWrapper.removeClass("displaynone"),n.yearWrapper&&n.yearWrapper.addClass("displaynone")):"month"==n.curShow&&(n.curShow="day",n.monthWrapper&&n.monthWrapper.addClass("displaynone"),n.dayWrapper&&n.dayWrapper.removeClass("displaynone"))}),this.monthRightIcon=$("<div class='yy-calendar-picker-righticon' style='width:"+t+"px;height:"+t+"px;line-height:"+t+"px'></div>"),this.monthRightIcon.bind("click",function(){n.goNext(),n.setMonthSelected()}),s.append(this.yearLeftIcon).append(this.yearLabel).append(this.yearRightIcon).append(this.monthLeftIcon).append(this.monthLabel).append(this.monthRightIcon),this.$el.append(s)},l.prototype.createMonthWrapper=function(t){var i=t/4+"px",a=this;this.monthDict={},this.monthWrapper=$("<div class='yy-calendar-ymd-wrapper displaynone'></div>");for(var n=0;n<12;n++){var s=$("<div data-month-seed='"+(n+1)+"' style='height:"+i+";line-height:"+i+"' class='yy-calendar-month-item'></div>"),r=$("<span class='yy-calendar-month' style='font-size:"+e.fontSize15()+"px'>"+o[n]+"</span>");s.append(r),n+1==this.curDate.getMonth()+1&&r.addClass("yy-calendar-month-selected"),this.monthDict[(n+1).toString()]=r,this.monthWrapper.append(s)}this.monthWrapper.bind("click",function(t){for(var i=t.target,n=i.getAttribute("data-month-seed");null==n&&(i=i.parentNode,!(n=i.getAttribute("data-month-seed")))&&"BODY"!=i.tagName.toUpperCase(););n&&(a.curDate=e.setMonthToDate(a.curDate,n),a.show(a.curDate,!1),a.curShow="day",a.dayWrapper&&a.dayWrapper.removeClass("displaynone"),a.monthWrapper.addClass("displaynone"),a.setMonthSelected())}),this.innerWrapper.append(this.monthWrapper)},l.prototype.setMonthSelected=function(){var t=e.convertToDate(this.curDate).getMonth()+1;this.setYearSelected();for(var i in this.monthDict)t==parseInt(i)?this.monthDict[i].addClass("yy-calendar-month-selected"):this.monthDict[i].removeClass("yy-calendar-month-selected")},l.prototype.show=function(t,i){t=t||this.curDate||new Date,this.curDate=e.convertToDate(t),this.Swiper.reset();var a=e.getPreMonth(this.curDate);this.Swiper.itemWrappers[0].daysCreator.createLaytout(a),this.Swiper.itemWrappers[1].daysCreator.createLaytout(this.curDate);var n=e.getNextMonth(this.curDate);this.Swiper.itemWrappers[2].daysCreator.createLaytout(n),i||this.triggerChange()},l.prototype.triggerChange=function(){var t=e.getDateInfo(this.curDate);this.monthLabel.html(t.month+"月"),this.yearLabel.html(t.year),this.pluginChangeMethod&&this.pluginChangeMethod.call(this.pageview.plugin,this,{})},l.prototype.goPre=function(){this.Swiper.goPre()},l.prototype.goNext=function(){this.Swiper.goNext()},l.prototype.setValue=function(t){t=t||new Date,t=e.convertToDate(t),this.selectedTime=t,this.goTo(t)},l.prototype.goTo=function(t){var i=this;if(t=t||new Date,t=e.convertToDate(t),e.ConvertDateToStr(this.curDate)!=e.ConvertDateToStr(t)){if(e.ConvertDateToStr(this.curDate,"yyyy-MM")==e.ConvertDateToStr(t,"yyyy-MM"))return void this.setDateSelected(t);this.curDate=t,this.curDate>t?(this.show(e.getNextMonth(t),!0),window.setTimeout(function(){i.goPre()},0)):(this.show(e.getPreMonth(t),!0),window.setTimeout(function(){i.goNext()},0))}},l}),define("calendar",["utils","base","swiper"],function(e,t,i){function a(t,i,a,n){var s=this;s.dateInfo=t,this.calendar=n,this.$el=$("<div date-seed='"+t.dateStr+"' date-mark='"+t.mark+"' date-day='"+t.day+"'  date-month='"+t.month+"' date-year='"+t.year+"' class='yy-calendar-day-item displayflex jc-center ai-center yy-calendar-day-item-"+t.mark+"'></div>");var r=e.ConvertDateToStr(n.selectedTime)==s.dateInfo.dateStr;this.dayLabel=$("<div style='font-size:"+e.fontSize12()+"px;width:"+a+"px;height:"+a+"px;line-height:"+a+"px' class='yy-calendar-day'>"+t.day+"</div>"),r&&this.selected(),this.$el.append(this.dayLabel),e.css(this.$el,i)}function n(e){this.config=e,this.yearItems={},this.itemWrapper=e.itemWrapper,this.calendar=e.calendar}function s(t){this.config=t,this.itemWrapper=t.itemWrapper,this.calendar=t.calendar,this.SumDay=42,this.dayInnerWidth=e.getRealWidth(23),this.dayItems={}}a.prototype={selected:function(){this.dayLabel.addClass("yy-calendar-day-selected")},unSelected:function(){this.dayLabel.removeClass("yy-calendar-day-selected")}},n.prototype={createLaytout:function(e){this.yearItems={},this.itemWrapper.$el.empty();for(var t=0;t<12;t++){var i=e+t,a=new r({calendar:this.calendar,year:i,itemHeight:this.config.itemHeight});this.yearItems[i]=a,this.itemWrapper.$el.append(a.$el)}}};var r=function(t){this.config=t,this.calendar=t.calendar;var i=e.convertToDate(this.calendar.curDate),a=i.getFullYear()==this.config.year;this.$el=$("<div  date-year-seed='"+t.year+"' style='height:"+this.config.itemHeight+";line-height:"+this.config.itemHeight+"' class='yy-calendar-year-item'></div>"),this.innnerYear=$("<span style='font-size:"+e.fontSize15()+"px' class='yy-calendar-year'>"+this.config.year+"</span>"),a&&this.selected(),this.$el.append(this.innnerYear)};r.prototype={selected:function(){this.innnerYear.addClass("yy-calendar-year-selected")},unSelected:function(){this.innnerYear.removeClass("yy-calendar-year-selected");
}},s.prototype={createLaytout:function(t){this.dayItems={},this.date=e.convertToDate(t),this.itemWrapper.$el.empty();for(var i=this.getDaysArr(),n={height:this.config.itemHeight+"px","font-size":e.getRealWidth(14)+"px"},s=document.createDocumentFragment(),r=0;r<this.SumDay;r++){var o=i[r],l=new a(o,n,this.dayInnerWidth,this.calendar);this.dayItems[o.dateStr]=l,s.appendChild(l.$el[0])}this.itemWrapper.$el[0].appendChild(s)},getDaysArr:function(){var t=[],i=e.getMonthDayCount(this.date),a=e.getDateInfo(this.date),n=e.getMonthFirstDayWhicDayInWeek(this.date),s=this.SumDay-n-i;if(n>0)for(var r=e.getPreMonth(this.date),o=e.getMonthDayCount(r),l=e.getDateInfo(r),h=0;h<n;h++){var c=o-n+h+1,p=new Date(l.year,l.month-1,c);t.push({date:p,dateStr:e.ConvertDateToStr(p),year:l.year,month:l.month,day:c,mark:"premonth"})}for(var h=1;h<=i;h++){var p=new Date(a.year,a.month-1,h);t.push({date:p,dateStr:e.ConvertDateToStr(p),year:a.year,month:a.month,day:h,mark:"curmonth"})}if(s>0)for(var d=e.getNextMonth(this.date),u=e.getDateInfo(d),h=1;h<=s;h++){var p=new Date(u.year,u.month-1,h);t.push({date:p,dateStr:e.ConvertDateToStr(p),year:u.year,month:u.month,day:h,mark:"nextmonth"})}return t}};var o=["一","二","三","四","五","六","七","八","九","十","十一","十二"],l=function(t){var i=this;l.baseConstructor.call(this,t),this.$el.addClass("yy-calendar-wrapper");var a=this.config.itemHeight;isNaN(a)&&(a=45),this.curDate=t.date||new Date,this.selectedTime=new Date(e.convertToDate(this.curDate).getTime()),a=parseInt(a),this.itemHeight=e.getRealHeight(a);var n=t.comKey+"_change";this.pageview&&this.pageview.plugin&&(this.pluginChangeMethod=this.pageview.plugin[n]),this.labelBarHeight=e.getRealHeight(27);var s=6*this.itemHeight+this.labelBarHeight;this.innerWrapper=$("<div style='height:"+s+"px' class='yy-calendar-inner'></div>");var r=this.config.isShowYearAndMonthPicker||!0;if(r){var o=e.getRealHeight(36);s+=o,this.initYearAndMonthPicker(o,s)}this.mode=t.mode||"年月日","年月"==this.mode?(this.curShow="year",this.createYearWrapper(s-o),this.triggerChange()):(this.curShow="day",i.createDayWraper()),this.$el.append(this.innerWrapper)};return e.extends(l,t),l.prototype.setDateSelected=function(t,i){var t=e.convertToDate(t),a=(t.getFullYear(),e.ConvertDateToStr(t));this.selectedTime=t;for(var n=0;n<3;n++){var s=this.Swiper.itemWrappers[n].daysCreator;for(var r in s.dayItems){var o=s.dayItems[r];o.dateInfo.dateStr==a?o.selected():o.unSelected()}}if(i){var l=i.getAttribute("date-mark");"premonth"==l?this.goPre():"nextmonth"==l&&this.goNext()}},l.prototype.setYearSelected=function(){var t,i=this,a=e.getDateInfo(this.curDate),n=!1,s=a.year;if(this.yearSwiper){for(var r=0;r<3;r++){var o=this.yearSwiper.itemWrappers[this.yearSwiper.posArr[r]].yearCreator;for(var l in o.yearItems){var h=o.yearItems[l];t=h.config.year,h.config.year==s?(n=!0,h.selected(),0==r?this.yearSwiper.goPre():2==r&&this.yearSwiper.goNext()):h.unSelected()}}n||(t>s?(this.initYearWrapper(s-3+12),window.setTimeout(function(){i.yearSwiper.goPre()},0)):(this.initYearWrapper(s-3-12),window.setTimeout(function(){i.yearSwiper.goNext()},0)))}},l.prototype.createDayWraper=function(){var t=this;new i({onChange:function(i){if("gopre"==i.action){var a=e.getPreMonth(t.curDate),n=e.getPreMonth(a);t.curDate=e.getCurMonthFirstDay(a),t.triggerChange(),i.itemWrapper.daysCreator.createLaytout(n)}else if("gonext"==i.action){var a=e.getNextMonth(t.curDate),s=e.getNextMonth(a);t.curDate=e.getCurMonthFirstDay(a),t.triggerChange(),i.itemWrapper.daysCreator.createLaytout(s)}},initItem:function(e,i){e.daysCreator=new s({calendar:t,itemWrapper:e,itemHeight:t.itemHeight})},init:function(e){t.Swiper=e}});var a=e.getRealWidth(13),n="style='line-height:"+this.labelBarHeight+"px;font-size:"+a+"px'",r=$("<div style='height:"+this.labelBarHeight+"px' class='yy-calendar-bar'><div "+n+" class='yy-c-bar-item'>日</div><div "+n+" class='yy-c-bar-item'>一</div><div "+n+" class='yy-c-bar-item'>二</div><div "+n+" class='yy-c-bar-item'>三</div><div "+n+" class='yy-c-bar-item'>四</div><div "+n+" class='yy-c-bar-item'>五</div><div "+n+" class='yy-c-bar-item'>六</div></div>");this.dayWrapper=$("<div class='yy-calendar-ymd-wrapper displayflex flex-v'></div>"),this.dayWrapper.append(r).append(this.Swiper.$el),this.Swiper.$el.bind("click",function(e){for(var i=e.target,a=i.getAttribute("date-seed");null==a&&(i=i.parentNode,!(a=i.getAttribute("date-seed")))&&"BODY"!=i.tagName.toUpperCase(););t.setDateSelected(a,i)}),this.innerWrapper.append(this.dayWrapper),this.show()},l.prototype.createYearWrapper=function(t){var a=t/4+"px",s=this,r="year"==this.curShow?"":"displaynone";this.yearWrapper=$("<div class='yy-calendar-ymd-wrapper "+r+"'></div>"),new i({onChange:function(e){"gopre"==e.action?(s.curYearWrapperStartYear-=12,e.itemWrapper.yearCreator.createLaytout(s.curYearWrapperStartYear-12)):"gonext"==e.action&&(s.curYearWrapperStartYear+=12,e.itemWrapper.yearCreator.createLaytout(s.curYearWrapperStartYear+12))},initItem:function(e,t){e.yearCreator=new n({itemWrapper:e,itemHeight:a,calendar:s})},init:function(t){s.yearSwiper=t,t.$el.appendTo(s.yearWrapper);var i=e.getDateInfo(s.curDate);s.initYearWrapper(i.year)}}),this.yearWrapper.bind("click",function(t){for(var i=t.target,a=i.getAttribute("date-year-seed");null==a&&(i=i.parentNode,!(a=i.getAttribute("date-year-seed")))&&"BODY"!=i.tagName.toUpperCase(););var n=parseInt(a);s.curDate=e.setDateToYear(s.curDate,n),s.show(s.curDate,!1),s.curShow="day",s.dayWrapper&&s.dayWrapper.removeClass("displaynone"),s.yearWrapper.addClass("displaynone"),s.setYearSelected()}),this.innerWrapper.append(this.yearWrapper)},l.prototype.initYearWrapper=function(e){this.yearSwiper.reset(),this.curYearWrapperStartYear=e-4,this.yearSwiper.itemWrappers[0].yearCreator.createLaytout(e-4-12),this.yearSwiper.itemWrappers[1].yearCreator.createLaytout(e-4),this.yearSwiper.itemWrappers[2].yearCreator.createLaytout(e-4+12)},l.prototype.initYearAndMonthPicker=function(t,i){var a=e.getRealWidth(18),n=this,s=$("<div style='height:"+t+"px' class='yy-calendar-ym-picker displayflex flex-h'></div>");this.yearLeftIcon=$("<div class='yy-calendar-picker-lefticon' style='width:"+t+"px;height:"+t+"px;line-height:"+t+"px'></div>"),this.yearLabel=$("<div style='font-size:"+a+"px' class='yy-calendar-picker-label displayflex ai-center jc-center flex-1'>2013</div>"),this.yearLabel.bind("click",function(){n.yearWrapper||n.createYearWrapper(i-t),"day"==n.curShow?(n.curShow="year",n.yearWrapper.removeClass("displaynone"),n.dayWrapper&&n.dayWrapper.addClass("displaynone")):"year"==n.curShow?(n.curShow="day",n.dayWrapper&&n.dayWrapper.removeClass("displaynone"),n.yearWrapper.addClass("displaynone")):"month"==n.curShow&&(n.curShow="year",n.monthWrapper&&n.monthWrapper.addClass("displaynone"),n.yearWrapper.removeClass("displaynone"))}),this.yearLeftIcon.bind("click",function(){n.goTo(e.getPreYear(n.curDate)),n.setYearSelected()}),this.yearRightIcon=$("<div class='yy-calendar-picker-righticon' style='width:"+t+"px;height:"+t+"px;line-height:"+t+"px'></div>"),this.yearRightIcon.bind("click",function(){n.goTo(e.getNextYear(n.curDate)),n.setYearSelected()}),this.monthLeftIcon=$("<div class='yy-calendar-picker-lefticon' style='width:"+t+"px;height:"+t+"px;line-height:"+t+"px'></div>"),this.monthLeftIcon.bind("click",function(){n.goPre(),n.setMonthSelected()}),this.monthLabel=$("<div style='font-size:"+a+"px' class='yy-calendar-picker-label displayflex ai-center jc-center flex-1'>2013</div>"),this.monthLabel.bind("click",function(){n.monthWrapper||n.createMonthWrapper(i-t),"day"==n.curShow?(n.setMonthSelected(),n.curShow="month",n.monthWrapper.removeClass("displaynone"),n.dayWrapper&&n.dayWrapper.addClass("displaynone")):"year"==n.curShow?(n.setMonthSelected(),n.curShow="month",n.monthWrapper.removeClass("displaynone"),n.yearWrapper&&n.yearWrapper.addClass("displaynone")):"month"==n.curShow&&(n.curShow="day",n.monthWrapper&&n.monthWrapper.addClass("displaynone"),n.dayWrapper&&n.dayWrapper.removeClass("displaynone"))}),this.monthRightIcon=$("<div class='yy-calendar-picker-righticon' style='width:"+t+"px;height:"+t+"px;line-height:"+t+"px'></div>"),this.monthRightIcon.bind("click",function(){n.goNext(),n.setMonthSelected()}),s.append(this.yearLeftIcon).append(this.yearLabel).append(this.yearRightIcon).append(this.monthLeftIcon).append(this.monthLabel).append(this.monthRightIcon),this.$el.append(s)},l.prototype.createMonthWrapper=function(t){var i=t/4+"px",a=this;this.monthDict={},this.monthWrapper=$("<div class='yy-calendar-ymd-wrapper displaynone'></div>");for(var n=0;n<12;n++){var s=$("<div data-month-seed='"+(n+1)+"' style='height:"+i+";line-height:"+i+"' class='yy-calendar-month-item'></div>"),r=$("<span class='yy-calendar-month' style='font-size:"+e.fontSize15()+"px'>"+o[n]+"</span>");s.append(r),n+1==this.curDate.getMonth()+1&&r.addClass("yy-calendar-month-selected"),this.monthDict[(n+1).toString()]=r,this.monthWrapper.append(s)}this.monthWrapper.bind("click",function(t){for(var i=t.target,n=i.getAttribute("data-month-seed");null==n&&(i=i.parentNode,!(n=i.getAttribute("data-month-seed")))&&"BODY"!=i.tagName.toUpperCase(););n&&(a.curDate=e.setMonthToDate(a.curDate,n),a.show(a.curDate,!1),a.curShow="day",a.dayWrapper&&a.dayWrapper.removeClass("displaynone"),a.monthWrapper.addClass("displaynone"),a.setMonthSelected())}),this.innerWrapper.append(this.monthWrapper)},l.prototype.setMonthSelected=function(){var t=e.convertToDate(this.curDate).getMonth()+1;this.setYearSelected();for(var i in this.monthDict)t==parseInt(i)?this.monthDict[i].addClass("yy-calendar-month-selected"):this.monthDict[i].removeClass("yy-calendar-month-selected")},l.prototype.show=function(t,i){t=t||this.curDate||new Date,this.curDate=e.convertToDate(t),this.Swiper.reset();var a=e.getPreMonth(this.curDate);this.Swiper.itemWrappers[0].daysCreator.createLaytout(a),this.Swiper.itemWrappers[1].daysCreator.createLaytout(this.curDate);var n=e.getNextMonth(this.curDate);this.Swiper.itemWrappers[2].daysCreator.createLaytout(n),i||this.triggerChange()},l.prototype.triggerChange=function(){var t=e.getDateInfo(this.curDate);this.monthLabel.html(t.month+"月"),this.yearLabel.html(t.year),this.pluginChangeMethod&&this.pluginChangeMethod.call(this.pageview.plugin,this,{})},l.prototype.goPre=function(){this.Swiper.goPre()},l.prototype.goNext=function(){this.Swiper.goNext()},l.prototype.setValue=function(t){t=t||new Date,t=e.convertToDate(t),this.selectedTime=t,this.goTo(t)},l.prototype.goTo=function(t){var i=this;if(t=t||new Date,t=e.convertToDate(t),e.ConvertDateToStr(this.curDate)!=e.ConvertDateToStr(t)){if(e.ConvertDateToStr(this.curDate,"yyyy-MM")==e.ConvertDateToStr(t,"yyyy-MM"))return void this.setDateSelected(t);this.curDate=t,this.curDate>t?(this.show(e.getNextMonth(t),!0),window.setTimeout(function(){i.goPre()},0)):(this.show(e.getPreMonth(t),!0),window.setTimeout(function(){i.goNext()},0))}},l}),define("../../components/calendarpicker",["utils","calendar"],function(e,t){var i=function(i){var a=this;i=i||{};var n=i.wrapper||document.body;this.$el=$("<div class='yy-calendar-picker'></div>"),this.calendar=new t({itemHeight:38}),this.backCover=$("<div class='yy-calendar-picker-bk displaynone'></div>"),this.backCover.bind("click",function(){a.hide()});var s=e.getRealHeight("36"),r=$("<div style='height:"+s+"px' class='yy-calendar-picker-btns'></div>"),o=$("<div style='font-size:"+e.fontSize15()+"px;line-height:"+s+"px' class='yy-calendar-picker-cancelbtn'>取消</div>"),l=$("<div style='font-size:"+e.fontSize15()+"px;line-height:"+s+"px' class='yy-calendar-picker-okbtn'>确定</div>");l.bind("click",function(){i.ok&&i.ok({date:a.calendar.selectedTime,dateStr:e.ConvertDateToStr(a.calendar.selectedTime)}),a.hide()}),o.bind("click",function(){a.hide()}),r.append(o).append(l),this.$el.append(r).append(this.calendar.$el),$(n).append(this.backCover[0]).append(this.$el)};return i.prototype.show=function(e){this.calendar.setValue(e);var t=this;window.setTimeout(function(){t.$el.addClass("yy-calendar-picker-show"),t.backCover.removeClass("displaynone")},0)},i.prototype.hide=function(e){this.$el.removeClass("yy-calendar-picker-show"),this.backCover.addClass("displaynone")},i}),define("../../components/calendarrange",["utils","base","./calendar"],function(e,t,i){var a=function(e){a.baseConstructor.call(this,e)};return e.extends(a,t),a}),define("../../components/checkbox",["utils","base"],function(e,t){var i=e.getRealWidth(20),a=e.getRealWidth(4),n=e.getRealWidth(14),s={width:i,height:i,borderRadius:a,border:"1px solid rgb(229, 229, 229)",backgroundColor:"#fff",fontSize:n},r={width:i,height:i,borderRadius:a,border:"1px solid #0093ff",color:"#fff",backgroundColor:"#0093ff",fontSize:n},o=function(t){var i=this;t.style=t.style||{},this.uss=e.simpleExtendObj(e.clone(s),t.style),this.uss=e.simpleExtendObj(this.uss,t.unSelectedStyle||{}),this.ss=e.simpleExtendObj(e.clone(r),t.selectedStyle||{}),this.ss=e.simpleExtendObj(this.ss,t.selectedStyle||{}),this.value=t.value,o.baseConstructor.call(this,t),this.$el.addClass("yy-checkbox yy-icommon"),this.setValue(this.value),this.$el.bind("click",function(){i.change()});var a=this.config.comKey+"_change";this.changeMethod=this.pageview.plugin[a]};return e.extends(o,t),o.prototype.change=function(){this.changeMethod&&this.changeMethod.call(this.pageview.plugin,this,{value:!this.value})},o.prototype.selected=function(t){t&&this.config.disableParentSelect||(this.value=!0,e.css(this.$el,this.ss),this.$el.addClass("yy-checkbox-selected"))},o.prototype.unSelected=function(t){t&&this.config.disableParentSelect||(this.value=!1,e.css(this.$el,this.uss),this.$el.removeClass("yy-checkbox-selected"))},o.prototype.setValue=function(t){this.value=t,t?(this.$el.addClass("yy-checkbox-selected"),e.css(this.$el,this.ss)):(this.$el.removeClass("yy-checkbox-selected"),e.css(this.$el,this.uss))},o}),define("../../components/checklist",["utils","base"],function(e,t){var i=function(t){if(this.itemData=t.itemData,this.parent=t.parent,"string"==typeof this.parent.primaryKey)this.key=this.itemData[this.parent.primaryKey];else if(this.parent.primaryKey instanceof Array){for(var i=[],a=0,n=this.parent.primaryKey.length;a<n;a++)i.push(this.itemData[this.parent.primaryKey[a]]);this.key=i.join("_")}else console.error("checklist控件primaryKey属性 错误的数据类型");this.$el=$("<div data-key='"+this.key+"' class='yy-checklist-item yy-icommon' style='height:"+t.parent.itemHeight+"px;line-height:"+t.parent.itemHeight+"px;font-size:"+e.fontSize13()+"px'>"+(t.itemData[t.parent.labelKey]||"")+"</div>")};i.prototype={selected:function(){this.$el.addClass("yy-checklist-item-selected")},unSelected:function(){this.$el.removeClass("yy-checklist-item-selected")}};var a=function(t){var i=this;a.baseConstructor.call(this,t);var n=e.getRealHeight("38");this.itemHeight=e.getRealHeight("48"),this.canbeNull=t.canbeNull||!1,this.selectedValue=[],this.$el.addClass("yy-checklist"),this.items=[],this.selectedValue=[],this.primaryKey=this.config.primaryKey,this.primaryKey||console.error(this.config.comKey+"控件没有指定primaryKey数据的主键"),this.loadWrapper=$("<div class='yy-cs-loading-wrapper displayflex jc-center ai-center'><div class='preloader'></div></div>"),this.backCoverLayer=$("<div class='yy-cl-coverlayer displaynone'></div>");var s=$("<div style='height:"+n+"px;font-size:"+e.fontSize(16)+"px;line-height:"+n+"px' class='displayflex jc-between ai-center yy-cl-title-wrapper'></div>");this.backCoverLayer.bind("touchmove",function(e){e.preventDefault(),e.stopPropagation()}),this.CancelBtn=$("<div  class='yy-checklist-btn'>取消</div>"),this.OkBtn=$("<div class='yy-checklist-btn yy-checklist-okbtn'>确定</div>"),s.append(this.CancelBtn).append(this.OkBtn),this.CancelBtn.bind("click",function(){i.cancel()}),this.OkBtn.bind("click",function(){i.OK()}),this.listWrapper=$("<div style='max-height:"+6.7*this.itemHeight+"px;' class='yy-cl-list-wrapper'></div>"),this.listWrapper.append(this.loadWrapper),this.pageview.innerWrapper.append(this.backCoverLayer),this.$el.append(s).append(this.listWrapper),this.labelKey=this.config.labelKey||"text",this.backCoverLayer.bind("click",function(){i.cancel()}),this.listWrapper.bind("click",function(e){i.itemClick(e)});var r=this.config.comKey+"_selected";this.selectedMethod=this.pageview.plugin[r]};return e.extends(a,t),a.prototype.OK=function(){(0!=this.selectedValue.length||this.canbeNull)&&(this.originalSelectedValue=e.copy(this.selectedValue),this.hide(),this.selectedMethod&&this.selectedMethod.call(this.pageview.plugin,this,{selectedValue:this.selectedValue}))},a.prototype.cancel=function(){this.hide(),this.originalSelectedValue&&this.setItemSelected(this.originalSelectedValue,!0)},a.prototype._getPrimaryValue=function(e){var t="";if("string"==typeof this.primaryKey)t=e[this.primaryKey];else if(this.primaryKey instanceof Array){for(var i=[],a=0,n=this.primaryKey.length;a<n;a++)i.push(e[this.primaryKey[a]]);t=i.join("_")}else console.error("checklist控件primaryKey属性 错误的数据类型");return t},a.prototype.itemClick=function(e){var t=e.target.getAttribute("data-key");if(t){for(var i=null,a=0,n=this.items.length;a<n;a++)if(t==this.items[a].key){i=this.items[a];break}if(i){var s=this.selectedValue.indexOf(i.itemData);s>=0?this.selectedValue.splice(s,1):this.selectedValue.push(i.itemData),0!=this.selectedValue.length||this.canbeNull?this.OkBtn.removeClass("yy-disabled"):this.OkBtn.addClass("yy-disabled"),this.setItemSelected(this.selectedValue)}}},a.prototype.show=function(){this.$el.addClass("yy-checklist-show"),this.backCoverLayer.removeClass("displaynone"),this.init()},a.prototype.setItemSelected=function(t,i){for(var a=0,n=this.items.length;a<n;a++){var s=this.items[a];s.unSelected()}if(t.length>0){this.selectedValue=[];for(var r=0,o=t.length;r<o;r++)for(var l=this._getPrimaryValue(t[r]),a=0,n=this.items.length;a<n;a++){var s=this.items[a];s.key==l&&(s.selected(),this.OkBtn.removeClass("yy-disabled"),this.selectedValue.push(s.itemData))}}i&&(this.originalSelectedValue=e.copy(this.selectedValue))},a.prototype.setSelectedValue=function(e){this.selectedValue=[],e instanceof Array||console.error("checklist setSelectedValue方法必须是数组"),this.items?this.setItemSelected(e,!0):this._midSelectedValue=e},a.prototype.createItems=function(e){this.dataSource=e,this.items=[],this.selectedValue=this.config.selectedValue||[],this.listWrapper.empty();for(var t=this.dataSource.length,a=0,n=t;a<n;a++){var s=this.dataSource[a],r=new i({itemData:s,parent:this});this.listWrapper.append(r.$el),this.items.push(r),t>1&&a!=t-1&&this.listWrapper.append("<div class='yy-checklist-line'></div>")}this._midSelectedValue&&(this.setItemSelected(this._midSelectedValue,!0),this._midSelectedValue=null),this.selectedValue.length>0?this.OkBtn.removeClass("yy-disabled"):this.OkBtn.addClass("yy-disabled"),this.setSelectedValue(this.config.selectedValue||[])},a.prototype.init=function(){var e=this;this.dataSource||(e.loadWrapper.removeClass("displaynone"),e.loadErrorWrapper&&e.loadErrorWrapper.addClass("displaynone"),e.OkBtn.addClass("yy-disabled"),this.loadData(function(t){e.OkBtn.removeClass("yy-disabled"),e.loadWrapper.addClass("displaynone"),e.loadErrorWrapper&&e.loadErrorWrapper.addClass("displaynone"),e.createItems(t)},function(){e.loadErrorWrapper||e.initLoadErrorDom(),e.loadErrorWrapper.removeClass("displaynone"),e.loadWrapper.addClass("displaynone")}))},a.prototype.loadData=function(e,t){if(this.dataSource)return void e(this.dataSource);var i=this.config.comKey+"_loaddata",a=this.pageview.plugin[i];a&&a.call(this.pageview.plugin,this,{success:e,error:t})},a.prototype.initLoadErrorDom=function(){var t=this,i=e.getRealWidth(11),a=e.getRealWidth(20);this.loadErrorWrapper=$("<div style='height:100px' class='yy-loadmore-wrapper displayflex jc-center ai-center flex-h'></div>");var n=$("<i style='font-size:"+a+"px' class='yy-icommon yy-loadmore-erroricon'></i>"),s=$("<span style='font-size:"+i+"px' class='yy-pull-meslabel'>网络异常,点击</span>"),r=$("<span style='font-size:"+i+"px' class='yy-loadmore-reload-babel'>重新加载</span>");r.bind("click",function(){t.init()}),this.loadErrorWrapper.append(n).append(s).append(r),this.listWrapper.append(this.loadErrorWrapper)},a.prototype.hide=function(){this.$el.removeClass("yy-checklist-show"),this.backCoverLayer.addClass("displaynone")},a}),define("../../components/conditionselector",["utils","base"],function(e,t){var i=function(e){var t=this;this.rootInstance=e.parent,this.index=e.index,this.item=e.item,this.$el=$("<div class='displayflex yy-cs-item'></div>"),this.titleDom=$("<span style='font-size:"+this.rootInstance.itemFontSize+"'>"+this.item+"</span>"),this.$el.append(this.titleDom).append("<i></i>"),this.$el.appendTo(this.rootInstance.$el),this.$el.bind("click",function(){t.rootInstance.itemClick(t)})};i.prototype={selected:function(){this.$el.addClass("yy-cs-item-selected")},unSelected:function(){this.$el.removeClass("yy-cs-item-selected")}};var a=function(e){var t=this;this.isMulti=e.isMulti,this.parent=e.parent,this.barItemInstance=e.barItemInstance,this.rootInstance=e.rootInstance,this.index=this.barItemInstance.index,this.data=e.itemData;var i="menu"+this.index+"LabelKey",a=this.rootInstance.config[i];a||alert("程序配置错误"+this.rootInstance.config.comKey+"未配置 :"+i);var n="yy-cs-selector-item";if(this.isMulti){var s="menu"+this.index+"Col",r=this.rootInstance.config[s];n="yy-cs-muselector-item",r&&(r=parseInt(r),2==r&&(n="yy-cs-muselector-item yy-cs-muselector-item2"))}this.$el=$("<div class='"+n+"'><span class='yy-cs-selector-span' style='font-size:"+this.rootInstance.itemFontSize+"'>"+(this.data[a]||"")+"</span></div>"),this.$el.css({height:this.rootInstance.itemHeight,lineHeight:this.rootInstance.itemHeight}),this.$el.bind("click",function(){t.parent.itemClick(t)})};a.prototype={selected:function(){var e=this.isMulti?"yy-cs-muselector-item-selected":"yy-cs-selector-item-selected";this.$el.addClass(e)},unSelected:function(){var e=this.isMulti?"yy-cs-muselector-item-selected":"yy-cs-selector-item-selected";this.$el.removeClass(e)}};var n=function(e){var t=this;this.parent=e.parent,this.index=e.index,this.title=e.title,this.rootInstance=e.rootInstance,this.$el=$("<div style='font-size:"+this.rootInstance.itemFontSize+"' class='displayflex yy-cs-selector-leftitem flex-h jc-start ai-center'>"+this.title+"</div>"),this.$el.css({height:this.rootInstance.itemHeight}),this.$el.bind("touchstart",function(){t.parent.leftItemClick(t)})};n.prototype={selected:function(){this.$el.addClass("yy-cs-selector-leftitem-selected")},unSelected:function(){this.$el.removeClass("yy-cs-selector-leftitem-selected")}};var s=function(t){this.$el=$("<div class='displayflex yy-cs-multiselector flex-v'></div>"),this.listWrapper=$("<div class='displayflex yy-cs-multiselector-list flex-h'></div>"),this.btnWrapper=$("<div class='displayflex yy-cs-multiselector-bottom flex-h'></div>"),this.btnWrapper.css({height:e.getRealHeight(40)+"px"});var i=this;this.rootInstance=t.rootInstance,this.barItemInstance=t.barItemInstance,this.dropDownInstance=t.dropDownInstance,this.index=this.barItemInstance.index,this.data=t.data,this.items=[],this.selectedItems=[];var n=this.rootInstance.config["menu"+this.index+"Style"];if(n){var s=n.maxHeight||n["max-height"];s&&this.listWrapper.css({maxHeight:s})}for(var r=0,o=this.data.length;r<o;r++){var l=this.data[r],h=new a({rootInstance:this.rootInstance,barItemInstance:this.barItemInstance,dropDownInstance:this.dropDownInstance,parent:this,itemData:l,isMulti:!0});this.items.push(h),this.listWrapper.append(h.$el)}var c=$("<div class='displayflex yy-cs-btn jc-center ai-center'>重置</div>"),p=$("<div class='displayflex yy-cs-btn yy-cs-ok-btn jc-center ai-center'>确定</div>");this.btnWrapper.append(c).append(p),c.bind("click",function(){i.reset()}),this.$el.append(this.listWrapper).append(this.btnWrapper)};s.prototype={reset:function(){for(var e=0,t=this.selectedItems.length;e<t;e++)this.selectedItems[e].unSelected();this.selectedItems=[]},itemClick:function(e){var t=this.selectedItems.indexOf(e);t>=0?(e.unSelected(),this.selectedItems.splice(t,1)):(e.selected(),this.selectedItems.push(e))}};var r=function(e){this.$el=$("<div class='displayflex yy-cs-selector flex-v'></div>");this.rootInstance=e.rootInstance,this.barItemInstance=e.barItemInstance,this.dropDownInstance=e.dropDownInstance,this.index=this.barItemInstance.index,this.data=e.data,this.items=[];var t=this.rootInstance.config["menu"+this.index+"Style"];if(t){var i=t.maxHeight||t["max-height"];i&&this.$el.css({maxHeight:i})}for(var n=0,s=this.data.length;n<s;n++){var r=this.data[n],o=new a({rootInstance:this.rootInstance,barItemInstance:this.barItemInstance,dropDownInstance:this.dropDownInstance,parent:this,itemData:r});this.items.push(o),this.$el.append(o.$el)}};r.prototype={itemClick:function(e){this.curSelectedItem&&this.curSelectedItem.unSelected(),this.curSelectedItem=e,this.curSelectedItem.selected()}};var o=function(t){this.config=t,this.rootInstance=t.rootInstance,this.barItemInstance=t.barItemInstance,this.index=this.barItemInstance.index,this.dropDownInstance=t.dropDownInstance,this.$el=$("<div class='displayflex yy-cs-selector flex-h'></div>"),this.leftWrapper=$("<div class='displayflex yy-cs-selector-left flex-v'></div>"),this.rightWrapper=$("<div class='yy-cs-selector-right'></div>");var i=this.rootInstance.config["menu"+this.index+"Style"];if(i){var a=i.maxHeight||i["max-height"];a&&(this.$el.css({maxHeight:a}),this.rightWrapper.css({maxHeight:a}),this.leftWrapper.css({maxHeight:a}))}var n="menu"+t.index+"LeftStyle",s=t.rootInstance.config[n],r="menu"+t.index+"GroupKey";this.groupKey=t.rootInstance.config[r],this.groupKey||alert("程序配置错误"+this.rootInstance.config.comKey+"未配置 :"+r),s&&e.css(this.leftWrapper,s),this.leftItems=[],this.$el.append(this.leftWrapper).append(this.rightWrapper),this._processData(this.config.data),this.rightMenuWrapperDict={},this._initLeftLayout()};o.prototype={leftItemClick:function(e){this.curLeftSelectedItem&&this.curLeftSelectedItem.unSelected(),this.curLeftSelectedItem=e,e.selected(),this.showRightMenu()},itemClick:function(e){this.curSelectedItem&&this.curSelectedItem.unSelected(),this.curSelectedItem=e,this.curSelectedItem.selected()},showRightMenu:function(){var e=this.curLeftSelectedItem.index.toString(),t=this.rightMenuWrapperDict[e];t||(t=this._initRightMenuWrapper(parseInt(e)-1),this.rightMenuWrapperDict[e]=t),this.curRightMenuWrapper&&this.curRightMenuWrapper.addClass("displaynone"),this.curRightMenuWrapper=t,this.curRightMenuWrapper.removeClass("displaynone")},_initRightMenuWrapper:function(e){var t=$("<div class='displayflex flex-v yy-cs-selector-right-menuwrapper displaynone'></div>"),i=this.rightDataArrArr[e];if(i)for(var n=0,s=i.length;n<s;n++){var r=i[n],o=new a({rootInstance:this.rootInstance,barItemInstance:this.barItemInstance,dropDownInstance:this.dropDownInstance,parent:this,itemData:r});t.append(o.$el)}return this.rightWrapper.append(t),t},_initLeftLayout:function(){for(var e=["全部"].concat(this.leftDataArr),t=0,i=e.length;t<i;t++){var a=e[t],s=new n({rootInstance:this.rootInstance,barItemInstance:this.barItemInstance,dropDownInstance:this.dropDownInstance,parent:this,index:t,title:a});this.leftItems.push(s),this.leftWrapper.append(s.$el)}this.leftItemClick(this.leftItems[0])},_processData:function(e){this.leftDataArr=[],this.rightDataArrArr=[];for(var t=0,i=e.length;t<i;t++){var a=e[t],n=a[this.groupKey];if(!n){alert("程序配置错误"+this.rootInstance.config.comKey+" 数据源中 没有相关的分类字段:"+this.groupKey);break}var s=this.leftDataArr.indexOf(n);s<0&&(this.leftDataArr.push(n),s=this.leftDataArr.length-1,this.rightDataArrArr.push([]));var r=this.rightDataArrArr[s];r||(r=[],this.rightDataArrArr[s]=r),r.push(a)}}};var l=function(t){this.rootInstance=t.rootInstance,this.barItemInstance=t.barItemInstance,this.index=this.barItemInstance.index.toString(),this.DropDownWrapper=t.parent,this.hasInit=!1,this.isLoading=!1,this.$el=$("<div class='yy-cs-item-dropdown' style='min-height:100px'></div>"),this.loadWrapper=$("<div class='yy-cs-loading-wrapper displayflex jc-center ai-center displaynone'><div class='preloader'></div></div>"),this.$el.append(this.loadWrapper);var i=this.rootInstance.config["menu"+this.index+"Style"];i?e.css(this.$el,i):this.$el.css({height:"100px"}),this.DropDownWrapper.$innerWrapper.append(this.$el)};l.prototype={show:function(t){var i=this,a=t?e.processTransitionTanformStyle("transform .3s ease","translate3d(0,0,0)"):e.processTransitionTanformStyle("none","translate3d(0,0,0)");t?window.setTimeout(function(){i.$el.css(a)},0):this.$el.css(a),this.hasInit||this.isLoading||this.init()},initLoadErrorDom:function(){var e=this;this.loadErrorWrapper=this.rootInstance._createErrorDom(function(){e.init()}),this.$el.append(this.loadErrorWrapper)},init:function(){var e=this;this.isLoading||(this.isLoading=!0,this.loadWrapper.removeClass("displaynone"),e.loadErrorWrapper&&e.loadErrorWrapper.addClass("displaynone"),this.loadData(function(t){e.loadWrapper.addClass("displaynone"),e.dataSource=t,e.isLoading=!1,e.initLayout(e.dataSource)},function(t){e.loadErrorWrapper||e.initLoadErrorDom(),e.loadWrapper.addClass("displaynone"),e.loadErrorWrapper.removeClass("displaynone"),e.isLoading=!1}))},initLayout:function(e){var t="menu"+this.index+"Mode",i=this.rootInstance.config[t]||"single",a={data:e,index:this.index,rootInstance:this.rootInstance,dropDownInstance:this,barItemInstance:this.barItemInstance};"single"==i?this.selector=new r(a):"group"==i?this.selector=new o(a):"multi"==i?this.selector=new s(a):this.selector=new r(a),this.$el.append(this.selector.$el),this.hasInit=!0},loadData:function(e,t){if(this.dataSource)return void e(this.dataSource);var i=this.rootInstance.config.comKey+"_menu"+this.index+"_loaddata",a=this.rootInstance.pageview.plugin[i];a&&a.call(this.rootInstance.pageview.plugin,this,{success:e,error:t})},hide:function(t){var i=t?e.processTransitionTanformStyle("transform .3s ease","translate3d(0,-100%,0)"):e.processTransitionTanformStyle("none","translate3d(0,-100%,0)");this.$el.css(i)}};var h=function(e){var t=this;this.parent=e.parent,this.isShow=!1,this.DropDowns={},this.$el=$("<div class='yy-cs-dropdown'></div>"),this.$innerWrapper=$("<div class='yy-cs-dropdown-inner'></div>"),this.$el.append(this.$innerWrapper),this.curDropDown=null,this.$innerWrapper.bind("click",function(e){t._hideSelf(e)}),this.parent.pageview.$el.append(this.$el)};h.prototype={_hideSelf:function(e){"yy-cs-dropdown-inner"==e.target.className&&this.hide()},show:function(e){if(!this.isShow){var t=this.parent.$el[0].getBoundingClientRect(),i={top:t.bottom,left:0,bottom:0,right:0,display:"block"};this.$el.css(i),this.isShow=!0}var a=e.index.toString(),n=this.DropDowns[a];n||(n=new l({parent:this,rootInstance:this.parent,barItemInstance:e}),this.DropDowns[a]=n),this.curDropDown?this.curDropDown===n?(this.curDropDown.barItemInstance.unSelected(),this.curDropDown.hide(!0),this.curDropDown=null,this.hide()):(this.curDropDown.hide(!1),this.curDropDown.barItemInstance.unSelected(),this.curDropDown=n,this.curDropDown.show(!1),this.curDropDown.barItemInstance.selected()):(this.curDropDown=n,this.curDropDown.barItemInstance.selected(),this.curDropDown.show(!0))},hide:function(){var e=this;this.isShow&&(this.isShow=!1,this.curDropDown&&(this.curDropDown.barItemInstance.unSelected(),this.curDropDown.hide(!0)),this.curDropDown=null,window.setTimeout(function(){e.$el.css({display:"none"})},300))}};var c=function(t){c.baseConstructor.call(this,t),this.itemHeight=t.itemHeight||e.getRealHeight(40)+"px",this.itemFontSize=t.itemFontSize||e.getRealWidth(12)+"px",this.$el.addClass("displayflex yy-condition-selector flex-h"),this.items=t.items||["全部"],this.initBarItem()};return e.extends(c,t),c.prototype.showDropDown=function(e){this.dpdWrapper||(this.dpdWrapper=new h({parent:this})),this.dpdWrapper.show(e)},c.prototype.itemClick=function(e){this.showDropDown(e)},c.prototype.initBarItem=function(){for(var e=(this.config.barItemStyle,0),t=this.items.length;e<t;e++){new i({
parent:this,item:this.items[e],index:e})}},c}),define("../../components/dialog",["utils","base"],function(e,t){var i=function(t){var i=this,a=t.wrapper||$(document.body),n=t.mode||1;this.dialogBackCover=$("<div style='visibility: hidden;' class='yy-dialog-bk'></div>"),this.dialogWrapper=$("<div class='yy-dialog-wrapper yy-dialog-effect-"+n+" yy-dialog-hide'></div>");var s=$("<div class='yy-dialog-inner'></div>"),r=$("<div class='yy-dialog-body'></div>"),o="row"===t.btnDirection?"yy-fd-row":"yy-fd-column",l=$("<div class='yy-dialog-btn-wrapper displayflex "+o+"'></div>");this.dialogBackCover.bind("click",function(){i.hide()});var h=t.title||"";this.titleDom=$("<div class='yy-dialog-title'>"+h+"</div>"),this.bodyContentDom=$("<div class='yy-dialog-content'></div>");var c=t.createContent;if(c)c(this.bodyContentDom);else{var p=t.contentText;this.contentTextDom=$("<div class='yy-dialog-content-text'>"+p+"</div>"),this.bodyContentDom.append(this.contentTextDom)}if(r.append(this.titleDom).append(this.bodyContentDom),t.buttons)for(var d=0,u=t.buttons.length;d<u;d++){var f=t.buttons[d],h=f.title||"按钮",g=f.style,y=f.onClick;!function(t,i,a,n,s){var r=$("<div class='yy-dialog-btn yy-flex-1 displayflex yy-jc-center yy-ai-center'>"+t+"</div>");i&&e.css(r,i),n&&r.bind("click",function(e){n()}),a.append(r)}(h,g,l,y,this)}s.append(r).append(l),this.dialogWrapper.append(s),a.append(this.dialogWrapper).append(this.dialogBackCover)};return i.prototype.show=function(){var e=this;this.dialogWrapper.css({visibility:"visible"}),this.dialogBackCover.css({visibility:"visible"}),this.dialogBackCover.addClass("yy-dialog-bk-show"),window.setTimeout(function(){e.dialogWrapper.removeClass("yy-dialog-hide").addClass("yy-dialog-show")},1)},i.prototype.hide=function(){var e=this;this.dialogWrapper.removeClass("yy-dialog-show").addClass("yy-dialog-hide"),this.dialogBackCover.removeClass("yy-dialog-bk-show"),window.setTimeout(function(){e.dialogWrapper.css({visibility:"hidden"}),e.dialogBackCover.css({visibility:"hidden"})},200)},i}),define("../../components/icon",["utils","base"],function(e,t){var i=function(t){var a=this;i.baseConstructor.call(this,t),this.$el.addClass("displayflex yy-icon yy-ai-center yy-jc-center");var n=this.config.font||"",s=n.split("_");this.text=this.config.text;var r=(this.config.style,this.config.iconStyle),o=this.config.textStyle,l=this.config.textPos||"right";this.iconDom=null,this.textDom=null,this.title=this.config.title||"";var h,c;if(2==s.length&&(h=s[0],c=s[1],e.css(this.$el,{fontFamily:h}),this.iconDom=$('<i class="yy-icon-code" data-code="'+c+'" data-icon="&#x'+c+';"></i>'),r&&e.css(this.iconDom,r)),null!==this.config.src&&void 0!==this.config.src){var p="",d=new Image;this.iconDom=$('<div class="yy-icon-img"></div>'),r&&e.css(this.iconDom,r),d.onerror=function(){if(a.title.length>0){var i=e.getImgTitle(a.title);return a.iconDom.html(i),a.iconDom.addClass("displayflex yy-ai-center yy-jc-center"),void a.iconDom.css({color:"#fff",fontSize:e.fontSize(13),backgroundColor:e.getImgBg(i)})}if(t.defaultSrc){if(p===t.defaultSrc)return void a.img.classList.add("displaynone");p=t.defaultSrc,d.src=t.defaultSrc}},d.src=this.config.src,this.iconDom.append(d)}(this.text||0==this.text)&&(this.text=null===this.text||void 0===this.text?"":this.text,this.textDom=$("<span class='yy-icon-text yy-text-box'>"+this.text+"</span>"),this.config.numberofline&&(this.textDom[0].style["-webkit-line-clamp"]=this.config.numberofline),o&&e.css(this.textDom,o)),"left"==l||"top"==l?(this.textDom&&this.$el.append(this.textDom),this.iconDom&&this.$el.append(this.iconDom)):(this.iconDom&&this.$el.append(this.iconDom),this.textDom&&this.$el.append(this.textDom)),this.iconDom&&("left"==l||"right"==l?this.$el.addClass("flex-h"):this.$el.addClass("flex-v")),this.originalStatus={font:n,text:this.config.text}};return e.extends(i,t),i.prototype.changeStatus=function(t){var i=this.originalStatus;if(t&&""!==t&&this.config.status&&(i=this.config.status[t]||this.originalStatus),this.status=t,i.font){var a=i.font.split("_");if(2!=a.length)return;var n=a[0],s=a[1],r=$('<i class="yy-icon-code" data-code="'+s+'" data-icon="&#x'+s+';"></i>');e.css(r,{fontFamily:n}),this.iconDom.replaceWith(r),this.iconDom=r,this.config.iconStyle&&e.css(this.iconDom,this.config.iconStyle)}var o=i.text||"";this.setText(o)},i.prototype.setIcon=function(t,i){var a=t.split("_");if(2==a.length){var n=a[0],s=a[1],r=$('<i class="yy-icon-code" data-code="'+s+'" data-icon="&#x'+s+';"></i>');if(e.css(r,{fontFamily:n}),this.iconDom.replaceWith(r),this.iconDom=r,this.config.iconStyle){var o=e.clone(this.config.iconStyle);if(i)for(var l in i)o[l]=i[l];e.css(this.iconDom,o)}}},i.prototype.setText=function(e){this.text=e,this.textDom.html(e)},i.prototype.getText=function(e){return this.text},i.prototype.setAttribute=function(e,t){this.$el.attr(e,t),this.textDom&&this.textDom.attr(e,t),this.iconDom&&this.iconDom.attr(e,t)},i}),define("../../components/image",["utils","base"],function(e,t){var i=function(t){var a=this;i.baseConstructor.call(this,t),a.config.style=a.config.style||{};var n="yy-image displayflex yy-jc-center yy-ai-center";this.src=t.src||t.defaultSrc,this.title=this.config.title||"";var s=this.config.style.width;try{s=parseInt(s)}catch(e){s=null}var r=this.config.style.height;try{r=parseInt(r)}catch(e){r=null}this.img=new Image;var o="";this.img.onload=function(){var t={display:"block"};if(r&&s){var i=e.getPicSize(s,r,a.img.width,a.img.height);t.width=i.w,t.height=i.h}else t.width="100%",t.height="100%";a.config.style.borderRadius&&(t.borderRadius=a.config.style.borderRadius),e.css($(a.img),t)},this.img.onerror=function(){if(a.title.length>0){var i=e.getImgTitle(a.title);return a.$el.html(i),void a.$el.css({color:"#fff",fontSize:e.fontSize(13),backgroundColor:e.getImgBg(i)})}if(t.defaultSrc){if(o===t.defaultSrc)return void a.img.classList.add("displaynone");o=t.defaultSrc,a.img.src=t.defaultSrc}},this.img.src=this.src,a.$el.append(a.img),this.$el.addClass(n)};return e.extends(i,t),i.prototype.setSrc=function(e){this.$el.find("img").attr("src",e)},i}),define("../../components/input",["utils","base"],function(e,t){var i=function(t){var a=this;i.baseConstructor.call(this,t),this.config.style=this.config.style||{},this.$el.addClass("displayflex yy-input flex-h");var n=this.config.mode||"text",s=this.config.placeholder||"",r=t.isInForm;this.input=$("<input class='yy-flex-1' placeholder='"+s+"' type='"+n+"'></input>");var o={fontSize:this.config.style.fontSize||"13px",color:this.config.style.color||"black",textAlign:this.config.style.textAlign||"left"};(this.config.value||0===this.config.value)&&this.input.val(this.config.value),e.css(this.input,o),r===!0?(this.Form=$("<form action=''></form>"),this.Form.bind("submit",function(e){var i=t.comKey+"_formsubmit",n=a.pageview.plugin[i];return n&&!a.disabled&&n&&n.call(a.pageview.plugin,a,{e:e}),e.preventDefault(),!1}),this.Form.append(this.input),this.$el.append(this.Form)):this.$el.append(this.input);var l=t.comKey+"_compositionend",h=a.pageview.plugin[l];h&&this.$el.on("input",function(e){a.$el.prop("comStart")||!a.disabled&&h&&h.call(a.pageview.plugin,a,{e:e})}).on("compositionstart",function(){a.$el.prop("comStart",!0)}).on("compositionend",function(e){a.$el.prop("comStart",!1),!a.disabled&&h&&h.call(a.pageview.plugin,a,{e:e})});var c=t.comKey+"_keydown",p=a.pageview.plugin[c];"number"===n&&(this.$el.on("input",function(e){var t=a.input.val();return 190===e.keyCode&&t.indexOf(".")>=0?(e.stopPropagation(),e.preventDefault(),void(e.returnValue=!1)):(t=t.replace(/[^0-9\.]/g,""),void a.setValue(t))}),this.$el.bind("keydown",function(e){var t=a.input.val();return 190===e.keyCode&&t.indexOf(".")>=0?(e.stopPropagation(),e.preventDefault(),void(e.returnValue=!1)):void(!a.disabled&&p&&p.call(a.pageview.plugin,a,{e:e}))}),this.input.on("compositionstart",function(e){var t=a.input.val();t=t.replace(/[^0-9\.]/g,""),a.setValue(t)}),this.input.on("compositionend",function(e){var t=a.input.val();t=t.replace(/[^0-9\.]/g,""),a.setValue(t)})),p&&"number"!==n&&this.$el.bind("keydown",function(e){!a.disabled&&p&&p.call(a.pageview.plugin,a,{e:e})});var d=t.comKey+"_keyup",u=a.pageview.plugin[d];u&&this.$el.bind("keyup",function(e){!a.disabled&&u&&u.call(a.pageview.plugin,a,{e:e})});var f=t.comKey+"_focus",g=a.pageview.plugin[f];g&&this.input.bind("focus",function(e){!a.disabled&&g&&g.call(a.pageview.plugin,a,{e:e})});var y=t.comKey+"_blur",m=a.pageview.plugin[y];m&&this.input.bind("blur",function(e){!a.disabled&&m&&m.call(a.pageview.plugin,a,{e:e})})};return e.extends(i,t),i.prototype.getValue=function(){return $.trim(e.deleteEmoji(this.input.val()))},i.prototype.setValue=function(e){this.input.val(e)},i.prototype.setDisabled=function(e){this.disabled=e,this.disabled?(this.input.attr("disabled","disabled"),this.$el.addClass(this.disabledClassName)):(this.input.removeAttr("disabled"),this.$el.remove(this.disabledClassName))},i.prototype.focus=function(e){var t=this;t.input.focus()},i.prototype.blur=function(){var e=this;e.input.blur()},i}),define("../../components/listview",["utils","base"],function(e,t){var i=function(t){var a=this;t.style&&(t.style.flexDirection||t.style["flex-direction"]||(t.style.flexDirection="column",t.style.webkitFlexDirection="column")),t.noNeedSetStyle=!0,i.baseConstructor.call(this,t),this.parent.rowMarkSeed||(this.parent.rowMarkSeed=0),this.listview=t.listview,this.parent.rowMarkSeed+=1,this.rowindex=this.parent.rowMarkSeed,this.rowMark="row"+this.rowindex,this.contentWrapper=$("<div class='displayflex yy-row-content'></div>"),e.css(this.contentWrapper,t.style),this.SwipeDomWrapper=null,this.$$childrenWrapper=this.contentWrapper,this.$el.addClass("yy-listrow"),this.defaultSwipIconWidth=e.getRealWidth(70),this.$el.attr("row-mark",this.rowMark),this.selectedMode=t.listview.selectedMode||"m",this.contentWrapper.appendTo(this.$el),this.initLayout(t.$$datasource,null,this),this.$el.bind("click",function(e){if("edit"===a.config.listview.status)return void a.select();if(a.pageview.plugin){var t=a.config.listview.config.comKey+"_rowclick",i=a.pageview.plugin[t];i&&i.call(a.pageview.plugin,a,{e:e})}});var n=a.config.listview.config.comKey+"_getrowswipeicons";this.pliginInitSwipeIconMethod=a.pageview.plugin[n];var s=this.config.listview.config.comKey+"_selectChange";this.selectChangeMethod=this.pageview.plugin[s]};e.extends(i,t),i.prototype.select=function(){if("m"===this.selectedMode){var e=this.config.listview.selectedRows.indexOf(this);e>=0?(this.config.listview.selectedRows.splice(e,1),this.unSelected()):(this.config.listview.selectedRows.push(this),this.selected())}else{var t=this.config.listview.selectedRows[0];t&&t.unSelected(),this.config.listview.selectedRows[0]=this,this.selected()}this.selectChangeMethod&&this.selectChangeMethod.call(this.pageview.plugin,this.config.listview,{})},i.prototype.rebind=function(e){this.contentWrapper.empty(),this.datasource=e,this.initLayout(e,null,this)},i.prototype.render=function(){},i.prototype.initSwipeDom=function(){var e=this,t=this.parent.config.rowSwipeIcons;this.pliginInitSwipeIconMethod&&(t=this.pliginInitSwipeIconMethod.call(e.pageview.plugin,e,{})),this.SwipeDomWrapper||(this.SwipeDomWrapper=$("<div class='yy-row-swipwrapper displayflex flex-h'></div>"),this.SwipeDomWrapper.appendTo(this.$el),this.recreateSwipe(t))},i.prototype.recreateSwipe=function(e){var t=this;if(this.SwipeDomWrapper.empty(),!e||0==e.length)return void(this.SwipeIconsSumWidth=0);this.SwipeIconsSumWidth=0;for(var i=0,a=e.length;i<a;i++){var n=e[i],s=this.pageview.config.components[n];s.style=s.style||{};var r=s.style.width||this.defaultSwipIconWidth;r=parseInt(r),this.SwipeIconsSumWidth+=r,s.style.width=r+"px",s.style.height="100%",this.getComponentInstanceByComKey(n,this.datasource,this,function(e){e.setAttribute&&e.setAttribute("data-swipeicon","1"),t.SwipeDomWrapper.append(e.$el)},function(){})}},i.prototype.remove=function(){this.delete(!0)},i.prototype.delete=function(e){var t=this,i=this.parent.rows.indexOf(this);i>=0&&this.parent.rows.splice(i,1);var a=this.listview.selectedRows.indexOf(this);return a>=0&&this.listview.selectedRows.splice(a,1),e?(t.$el.remove(),void(t.config.listview.isGroupList&&0==t.parent.rows.length&&t.parent.remove())):(this.$el.css({height:this.$el.height()+1+"px"}),window.setTimeout(function(){t.$el.css({transition:"height .12s linear","-webkit-transition":"height .12s linear",height:"0px"})},40),void window.setTimeout(function(){t.$el.remove(),t.config.listview.isGroupList&&0==t.parent.rows.length&&t.parent.remove()},345))},i.prototype.swipeToLeft=function(t){this.contentWrapper.css(e.processTransitionTanformStyle("none","translate3d("+t+"px,0,0)"))},i.prototype.closeSwipe=function(){this.contentWrapper.css(e.processTransitionTanformStyle("transform .2s ease","translate3d(0,0,0)"))},i.prototype.setSwipeOpenPos=function(){this.contentWrapper.css(e.processTransitionTanformStyle("transform .2s ease","translate3d(-"+this.SwipeIconsSumWidth+"px,0,0)"))};var a=function(e){var t=this;a.baseConstructor.call(this,e);var i=e.isCanCollapse,n="yy-sticky displayflex";i===!0&&(this.isCollapse=!1,n+=" yy-icommon yy-listgroup-colheader",this.$el.bind("click",function(){t.isCollapse?(t.parent.expand(),t.isCollapse=!1,t.$el.removeClass("yy-listgroup-header-collapse")):(t.isCollapse=!0,t.parent.collapse(),t.$el.addClass("yy-listgroup-header-collapse"))})),this.$el.addClass(n),this.initLayout(e.$$datasource,null,this)};e.extends(a,t);var n=function(e){n.baseConstructor.call(this,e);var t=this.parent.config.isCanCollapse;this.$el.attr("data-gval",e.groupValue);var i=$("<div class='yy-listgroup-body'></div>");this.groupBodyInner=$("<div class='yy-listgroup-body-inner'></div>"),i.append(this.groupBodyInner),this.groupHeader=new a({$$datasource:e.groupHeaderData,type:"listgroupheader",isCanCollapse:t,root:this.config.rootConfig.groupHeader,style:this.config.rootConfig.groupHeaderStyle,$$pageview:this.pageview,groupValue:e.groupValue,$$parent:this}),this.display="block",this.groupValue=e.groupValue,this.$el.append(this.groupHeader.$el).append(i),this.rows=[]};e.extends(n,t),n.prototype.expand=function(){this.groupBodyInner.removeClass("displaynone")},n.prototype.collapse=function(){this.groupBodyInner.addClass("displaynone")},n.prototype.insertRow=function(e,t){this.show();var i=this.rows[t];return i?(e.$el.insertBefore(i.$el),this.rows.splice(t,0,e)):(this.rows.push(e),this.groupBodyInner.append(e.$el)),e},n.prototype.append=function(e){this.show(),this.groupBodyInner.append(e)},n.prototype.show=function(){"block"!=this.display&&"none"==this.display&&(this.$el.removeClass("displaynone"),this.display="block")},n.prototype.remove=function(e){this.parent.groups[this.groupValue]&&delete this.parent.groups[this.groupValue],e&&this.$el.remove(),this.display="none",this.$el.addClass("displaynone")};var s=function(t){t.style||(t.style={}),t.style.flexDirection||t.style["flex-direction"]||(t.style.flexDirection="column"),this.config=t,this.ajaxConfig=t.ajaxConfig,s.baseConstructor.call(this,t),this.ajaxConfig=this.ajaxConfig||t.ajaxConfig,this.initAjaxConfig(this.ajaxConfig),this.groupKey=this.config.groupKey,this.isGroupList=null!=this.groupKey,this.groups={},this.autoLoadData=t.autoLoadData||!1,this.$el.addClass("displayflex yy-listview"),this.selectedMode=t.selectedMode,this.swipeOffsetX=e.getRealWidth(25),this.selectedRows=[],this.rows=[],this.canOpenOffsetRight=e.getRealWidth(70),this.splitStyle=t.splitStyle,this.showBlockClassNameDict={};var i=this.config.comKey+"_parsedata";this.pluginParseDataMethod=this.pageview.plugin[i];var a=this.config.comKey+"_beforeload";this.pluginBeforeLoadDataMethod=this.pageview.plugin[a];var n=this.config.comKey+"_afterload";this.pluginAfterLoadDataMethod=this.pageview.plugin[n],this.init()};return e.extends(s,t),s.prototype.setLeftOpen=function(){return"edit"===this.status?void this.setLeftClose():(this.status="edit",void this.$el.addClass(this.showBlockClassNameDict.left))},s.prototype.setLeftRightOpen=function(){return"edit"===this.status?void this.setLeftRightClose():(this.status="edit",void this.$el.addClass((this.showBlockClassNameDict.left||"")+" "+(this.showBlockClassNameDict.right||"")))},s.prototype.setLeftRightClose=function(){this.status="",this.$el.removeClass((this.showBlockClassNameDict.left||"")+" "+(this.showBlockClassNameDict.right||""))},s.prototype.setLeftClose=function(){this.status="",this.$el.removeClass(this.showBlockClassNameDict.left)},s.prototype.setRightOpen=function(){return"edit"===this.status?void this.setRightClose():(this.status="edit",void this.$el.addClass(this.showBlockClassNameDict.right))},s.prototype.setRightClose=function(){this.status="",this.$el.removeClass(this.showBlockClassNameDict.right)},s.prototype.initLeftRightBlock=function(){this.initBlock(this.config.leftBlock,"left"),this.initBlock(this.config.rightBlock,"right")},s.prototype.initBlock=function(t,i){if(t){t.key&&t.width||console.error("listview 的"+i+"Block配置需要包括key和widt属性");try{t.width=parseInt(t.width)}catch(e){}isNaN(t.width)&&console.error("listview 的"+i+"Block的widt属性必须为数值"),t.width=e.getRealWidth(t.width);var a=this.getUniqueKey()+i;this.$el.addClass(a),this.showBlockClassNameDict||(this.showBlockClassNameDict={}),this.showBlockClassNameDict[i]=a+"_show"+i,e.createStyleSheet(a,"."+t.key+" {transition:width .12s ease;-webkit-transition:width .12s ease;} ."+this.showBlockClassNameDict[i]+" ."+t.key+" {width:"+t.width+"px !important;}")}},s.prototype.init=function(){var e=this;this.config.nodata&&this.getComponentInstanceByComKey(this.config.nodata,null,null,function(t){e.$el.append(t.$el),t.$el.addClass("displaynone"),e.noDataDom=t},function(){}),this.initEvent(),this.initLeftRightBlock(),this.autoLoadData&&window.setTimeout(function(){e.parent&&e.parent.setCanLoadMore&&e.parent.setPullLoadingState(),e.loadFirstPageData()},430)},s.prototype.getTargetRow=function(e){for(var t=e.target;"yy-listrow"!=t.className&&"yy-listview"!=t.className&&"BODY"!=t.tagName;)t=t.parentNode;var i=t.getAttribute("row-mark"),a=null;if(i)for(var n=0,s=this.rows.length;n<s;n++){var r=this.rows[n];if(r.rowMark===i){a=r;break}}return a},s.prototype.initEvent=function(){var t=this;this.curSwipRow=null;var i=e.getRealWidth(280);if(this.config.rowSwipeIcons){var a,n,s,r=!1;this.$el.bind("touchstart",function(n){if("edit"!==t.status){var o=n.touches[0];"1"!==n.target.getAttribute("data-swipeicon")?(t.curSwipRow&&t.curSwipRow.closeSwipe(),a=o.pageX,s=o.pageY,r=e.viewport.width-a<i,r&&(t.curSwipRow=t.getTargetRow(n),t.curSwipRow&&t.curSwipRow.initSwipeDom())):r=!1}}),this.$el.bind("touchmove",function(e){if("edit"!==t.status){if(!r||!t.curSwipRow||0==t.curSwipRow.SwipeIconsSumWidth)return void(r=!1);var i=e.touches[0],o=i.pageX;n=o-a;var l=Math.abs(n),h=s-i.pageY;return Math.abs(h)>30&&l>0?void(n=10):void(n<-10&&(l>10&&(e.preventDefault(),e.stopPropagation()),n=l>t.curSwipRow.SwipeIconsSumWidth+t.swipeOffsetX?0-t.curSwipRow.SwipeIconsSumWidth-t.swipeOffsetX:n,t.curSwipRow.swipeToLeft(n)))}}),this.$el.bind("touchend",function(){if("edit"!==t.status){if(!r||n>=0)return void(n=0);r=!1,Math.abs(n)>t.canOpenOffsetRight?t.curSwipRow&&t.curSwipRow.setSwipeOpenPos():0!=n&&t.curSwipRow&&t.curSwipRow.closeSwipe(),n=0}})}},s.prototype.getRowCount=function(){if(this.isGroupList){var e=0;return this.eachRow(function(t){e+=1}),e}return this.rows.length},s.prototype.eachRow=function(e){if(this.isGroupList)for(var t in this.groups)for(var i=this.groups[t],a=0,n=i.rows.length;a<n;a++)e(i.rows[a],a,i);else for(var s=0,r=this.rows.length;s<r;s++)e(this.rows[s],s)},s.prototype.empty=function(){if(this.isGroupList)for(var e in this.groups)this.groups[e].remove(!0),delete this.groups[e];else{for(var t=this.rows.length-1;t>=0;t--)this.rows[t].remove();this.rows=[]}},s.prototype.selectAll=function(){var e=this;"m"===this.config.selectedMode&&(this.selectedRows=[],this.eachRow(function(t){e.selectedRows.push(t),t.selected()}))},s.prototype.clearSelectAll=function(){"m"===this.config.selectedMode&&(this.selectedRows=[],this.eachRow(function(e){e.unSelected()}))},s.prototype.loadFirstPageData=function(e){var t=this;e=e||{},t.parent.setInitLoadMessage&&t.parent.setInitLoadMessage(),this.pageNumKey||(this.pageNumKey=this.ajaxConfig.pageNumKey,this.pageNumKey||console.error("listview 配置没有设置页码字段属性pageNumKey")),this.parentAnimate=e.parentAnimate,e.parentAnimate!==!1&&this.parent.setPullLoadingState(),this.ajaxConfig.data[this.pageNumKey]=1,this.loadData({success:function(e,i){t.rowMarkSeed=0,t.empty(),t.bindData(e,!0),e&&0!=e.length||t.showNodata(!0)},isAutoLoad:!1,isFirstLoad:!0})},s.prototype.loadNextPageData=function(){var e=this;this.pageNumKey||(this.pageNumKey=this.ajaxConfig.pageNumKey,this.pageNumKey||console.error("listview 配置没有设置页码字段属性pageNumKey"));var t=this.ajaxConfig.data[this.pageNumKey];t=!t||isNaN(t)?1:parseInt(t)+1,this.ajaxConfig.data[this.pageNumKey]=t,this.loadData({success:function(t){e.bindData(t)},isAutoLoad:!1,isFirstLoad:!1})},s.prototype.reload=function(){this.loadNextPageData(),this.parent.setCanLoadMore({isReload:!0})},s.prototype.showNodata=function(e){this.noDataDom&&(e?this.noDataDom.$el.removeClass("displaynone"):this.noDataDom.$el.addClass("displaynone"))},s.prototype.loadData=function(t){var i=this,a=t.isFirstLoad;if(this.pluginBeforeLoadDataMethod&&this.pluginBeforeLoadDataMethod.call(this.pageview.plugin,this,{ajaxConfig:this.ajaxConfig,isAutoLoad:t.isAutoLoad}),this.config.isStatic){var n=[];return i.pluginParseDataMethod&&(n=i.pluginParseDataMethod.call(i.pageview.plugin,i,{params:this.ajaxConfig,data:n,cancel:!1}),void 0===n&&console.error("程序错误："+i.config.comKey+"_parsedata 方法没有返回值或者返回值错误"),n===!1)?void i.setError(t):void t.success(n)}this.beforeAjaxConfig=e.copy(this.ajaxConfig);var s=this.ajaxConfig.data||{};e.ajax({type:this.ajaxConfig.type||"get",url:this.ajaxConfig.url,pageviewInstance:this.config.$$pageview,timeout:this.ajaxConfig.timeout||7e3,data:s,success:function(e){return i.showNodata(!1),i.pluginParseDataMethod&&(e=i.pluginParseDataMethod.call(i.pageview.plugin,i,{params:s,data:e,isFirstLoad:a}),void 0===e&&console.error("程序错误："+i.config.comKey+"_parsedata 方法没有返回值或者返回值错误"),e===!1)?void i.setError(t):(e instanceof Array||console.error(i.config.comKey+"返回的数据不是数组类型,或者在"+i.config.comKey+"_parsedata方法中进行预处理 "),t.success(e,a),void(i.pluginAfterLoadDataMethod&&i.pluginAfterLoadDataMethod.call(i.pageview.plugin,i,{isSuccess:!0,params:s,data:e,isFirstLoad:t.isFirstLoad})))},error:function(e){i.setError(t),t.error&&t.error(e)}})},s.prototype.setError=function(e){var t=this;window.setTimeout(function(){e.isFirstLoad?t.parent.setLoadFirstError&&t.parent.setLoadFirstError():t.parent.setLoadMoreErrorState&&t.parent.setLoadMoreErrorState(),t.ajaxConfig=t.beforeAjaxConfig,t.pluginAfterLoadDataMethod&&t.pluginAfterLoadDataMethod.call(t.pageview.plugin,t,{isSuccess:!1})},100)},s.prototype.createFragmentByDataSource=function(e){for(var t=document.createDocumentFragment(),i=0,a=e.length;i<a;i++){var n=this.createRow(e[i]);this.rows.push(n),t.appendChild(n.$el[0])}return t},s.prototype.bindData=function(e,t){var i=this;if(this.isGroupList)return void this.bindGroupListData(e,t);var a=this.createFragmentByDataSource(e);window.setTimeout(function(){i.$el[0].appendChild(a),i.setLoadStateWhenBindDone(e,t)},16)},s.prototype.setLoadStateWhenBindDone=function(e,t){var i=this;this.parentAnimate||(e.length<i.ajaxConfig.pageSize?i.parent.setHasLoadDone&&i.parent.setHasLoadDone():i.parent.setCanLoadMore&&i.parent.setCanLoadMore()),t&&(i.parent.resetPullLoadState&&i.parent.resetPullLoadState(),e&&0!==e.length||i.parent.setInitLoadMessage&&i.parent.setInitLoadMessage())},s.prototype.groupBy=function(e){this.empty();var t=this;e?(this.groupKey=e,this.isGroupList=!0,this.groups={}):(this.isGroupList=!1,this.groupKey=null,this.groups={}),t.parent&&t.parent.setCanLoadMore&&t.parent.setPullLoadingState(),t.loadFirstPageData()},s.prototype.bindGroupListData=function(e,t){for(var i=this,a={},s={},r=0,o=e.length;r<o;r++){var l=e[r],h=l[this.groupKey];h||(l[this.groupKey]=this.config.otherGroupName||"其他",h=this.config.otherGroupName||"其他"),a[h]||(a[h]=document.createDocumentFragment()),this.groups[h]||(this.groups[h]=new n({type:"listgroup",rootConfig:this.config,style:this.config.groupStyle,$$pageview:this.pageview,groupValue:h,groupHeaderData:l,$$parent:this}),s[h]=this.groups[h]);var c=this.createGroupListRow(l,this.groups[h]);a[h].appendChild(c.$el[0]),this.groups[h].rows.push(c)}window.setTimeout(function(){for(var n in a)i.groups[n].append(a[n]),s[n]&&i.$el.append(s[n].$el);i.setLoadStateWhenBindDone(e,t)},16)},s.prototype.createGroupListRow=function(e,t){var a=new i({type:"listrow",listview:this,root:this.config.root,style:this.config.rowStyle,$$pageview:this.pageview,$$datasource:e,$$parent:t});return a},s.prototype.setAjaxConfigParams=function(e){this.ajaxConfig||console.error("ListView未配置ajaxConfig属性"),this.ajaxConfig.data=this.ajaxConfig.data||{};for(var t in e)this.ajaxConfig.data[t]=e[t]},s.prototype.initAjaxConfig=function(e){return this.config.isStatic?void(this.ajaxConfig={}):(e||console.error("ListView未配置ajaxConfig属性"),e.pageSize||console.warn("ajaxConfig配置需要指定pageSize属性"),isNaN(e.pageSize)&&console.warn("ajaxConfig配置需要指定pageSize属性为number类型"),void(e.pageSize=parseInt(e.pageSize)))},s.prototype.createRow=function(e){var t=new i({type:"listrow",listview:this,root:this.config.root,style:this.config.rowStyle,$$pageview:this.pageview,$$datasource:e,$$parent:this});return t},s.prototype.insertGroup=function(e,t){if(!this.isGroupList)return this;var i=e[this.groupKey],a=this.groups[i];if(a)return this;a=new n({type:"listgroup",rootConfig:this.config,style:this.config.groupStyle,$$pageview:this.pageview,groupValue:i,groupHeaderData:e,$$parent:this}),this.groups[i]=a;var s=this.getGroupByIndex(t);return s?a.$el.insertBefore(s.$el):this.$el.append(a.$el),this},s.prototype.getGroupByIndex=function(e){var t,i=this.$el.children(),a=i[e];if(a){var n=a.getAttribute("data-gval");console.log(a),t=this.groups[n]}return t},s.prototype.insertRow=function(e,t){if(this.isGroupList){var i=e[this.groupKey],a=this.groups[i];if(a){var n=this.createGroupListRow(e,a);return this.showNodata(!1),a.insertRow(n,t)}return this.insertGroup(e,0),void this.insertRow(e,t)}var n=this.rows[t],s=this.createRow(e);this.showNodata(!1),void 0!==t&&null!=t&&t>=0&&t<this.rows.length?this.rows.splice(t,0,s):this.rows.push(s),n?s.$el.insertBefore(n.$el):this.$el.append(s.$el)},s.prototype.deleteRowByPrimaryKey=function(e){},s}),define("../../components/pageview",["utils","base"],function(e,t){function i(e){var t=this;if(this.refs={},this.componentsInitActions={},i.baseConstructor.call(this,e),this.viewpagerParams=e.viewpagerParams,e.root=e.root||[],this.params=e.$$params,this.showPageParams=e.showPageParams||{},this.prePageView=e.prePageView,this.pageManager=e.$$pageManager,this.config=e,this.innerPages={},this.innerPagesWrappers={},e.pluginClass)try{this.plugin=new e.pluginClass({pageview:this})}catch(e){console.log(e)}this.components={};var a=e.style;this.$el.addClass("yy-pageview displayflex"),this.showPageBackCover=$("<div class='yy-backcover displaynone'></div>"),this.innerWrapper=$("<div class='displayflex yy-page-inner'></div>"),this.$$childrenWrapper=this.innerWrapper,this.$el.append(this.innerWrapper).append(this.showPageBackCover),a&&this.innerWrapper.css(a),this.showPageBackCover.bind("click",function(){t.hideCurShowPage()}),this.initLayout()}var a={fromLeft1:{zIndex:5,left:"0",top:0,transform:"translate3d(-100%,0,0)","-webkit-transform":"translate3d(-100%,0,0)"},fromLeft2:{zIndex:101,left:"0",top:0,transform:"translate3d(-100%,0,0)","-webkit-transform":"translate3d(-100%,0,0)"},fromLeft3:{left:0,top:0,zIndex:5,transform:"translate3d(0,0,0)","-webkit-transform":"translate3d(0,0,0)"},fromRight1:{zIndex:5,right:"0",top:0,transform:"translate3d(100%,0,0)","-webkit-transform":"translate3d(100%,0,0)"},fromRight2:{zIndex:101,right:"0",top:0,transform:"translate3d(100%,0,0)","-webkit-transform":"translate3d(100%,0,0)"},fromRight3:{zIndex:5,right:0,top:0,transform:"translate3d(0,0,0)","-webkit-transform":"translate3d(0,0,0)"},opacity:{left:"0",top:0},fromBottom:{zIndex:101,left:"0",bottom:"0",transform:"translate3d(0,100%,0)","-webkit-transform":"translate3d(0,100%,0)"}},n={fromLeft1:"yy-init-left",fromLeft2:"yy-init-left",fromLeft3:"yy-init-left",fromRight1:"yy-init-right",fromRight2:"yy-init-right",fromRight3:"yy-init-right",opacity:"yy-init-left",fromBottom:"yy-init-bottom"};return e.extends(i,t),i.prototype.regeistPageDestory=function(){},i.prototype.destory=function(){this.$el.remove()},i.prototype.ajax=function(t){t.pageviewInstance=this,e.ajax(t)},i.prototype.Enter=function(e,t){var i=this;if(this.$el[0].className=e,t){if(i.pageManager.getPageNameFromUrl()===i.config.pageKey){var a=i.plugin.onPageEnter;a&&a.call(i.plugin)}}else this.$el[0].addEventListener("webkitAnimationEnd",function(){if(i.pageManager.getPageNameFromUrl()===i.config.pageKey){var e=i.plugin.onPageEnter;e&&e.call(i.plugin)}})},i.prototype.bindShowPageEnterEvent=function(){var e=this;this.$el[0].parentNode.addEventListener("webkitTransitionEnd",function(){if(e.$$isshow){var t=e.plugin.onPageEnter;t&&t.call(e.plugin)}})},i.prototype.hideCurShowPage=function(){var t=this;if(this.pageManager.blur(),this.showpageInstance.showpageInstance)return this.showpageInstance.hideCurShowPage(),!0;if(this.showpage_wrapper){this.showpageInstance.$$isshow=!1;var i=this.showpageInstance.plugin.onPageClose;i&&i.call(this.showpageInstance.plugin);var s=this.showpage_wrapper.attr("data-mode");this.showPageBackCover.addClass("displaynone"),this.innerWrapper[0].className="displayflex yy-page-inner "+n[s]+"-im ",window.setTimeout(function(){t.innerWrapper.css(e.processTransitionTanformStyle("none","translate3d(0,0,0)"))},300),"fromLeft1"==s||"fromLeft2"==s?this.showpage_wrapper.css(e.processTransformStyle("translate3d(-100%,0,0)")):"fromRight1"==s||"fromRight2"==s?this.showpage_wrapper.css(e.processTransformStyle("translate3d(100%,0,0)")):this.showpage_wrapper.css(a[s])}var r=this.showpageInstance.plugin.onPageResume;return r&&r.call(this.plugin),this.showpage_wrapper=null,this.showpageInstance=null,!1},i.prototype.do=function(e,t){var i=this.refs[e];i?t(i):(this.config.components[e].ref||console.error("请务必在"+e+"控件上设置ref:true"),this.componentsInitActions[e]=t)},i.prototype.delegate=function(e,t){this.do(e,t)},i.prototype.showLoadingProgressbar=function(){var e=this;this.loadingProgreessbar||(this.loadingProgreessbarWrapper=$("<div class='yy-loading-pbw displaynone'></div>"),this.loadingProgreessbar=$("<div class='yy-loading-pb'></div>"),this.loadingProgreessbarWrapper.append(this.loadingProgreessbar),this.loadingProgreessbarWrapper.appendTo(this.$el)),this.loadingProgreessbarWrapper.removeClass("displaynone"),window.setTimeout(function(){e.loadingProgreessbar.css({width:"90%"})},6)},i.prototype.hideLoadingProgressbar=function(){this.loadingProgreessbar&&(this.loadingProgreessbar.css({width:"0%"}),this.loadingProgreessbarWrapper.addClass("displaynone"))},i.prototype.close=function(){this.ownerPage&&this.ownerPage.hideCurShowPage()},i.prototype.showPage=function(t){if(t&&t.pageKey){this.pageManager.blur(),t.inRouter!==!1&&this.pageManager.regeistShowPageInRouter(this.config.pageKey);var i=this;this.showpage_wrapper=this.innerPagesWrappers[t.pageKey],this.showpageInstance=this.innerPages[t.pageKey],this.showLoadingProgressbar(),!this.showpage_wrapper||void 0!==t.nocache&&t.nocache?this.pageview.pageManager.getPageConfigByPageKey(t.pageKey,function(n){var s=t.params||{};n.showPageParams=s;var r=i.pageview.pageManager.createPageView(n);r.$el.addClass("yy-pageview-show"),r.ownerPage=i,i.hideLoadingProgressbar(),i.showpageInstance=r,i.innerPages[t.pageKey]=r,i.showpage_wrapper=$("<div class='yy-showpage'></div>");var o=n.showPageStyle||{width:"100%",height:"100%"};o&&(delete o.top,delete o.right,
delete o.left,delete o.bottom);var l=t.mode||"fromLeft1";i.showpage_wrapper.attr("data-mode",l);var h=o.width||"100%",c=o.height||"100%";o=o||{};var p=a[l]||a.fromLeft1;p=e.clone(p),i.showpage_wrapper.attr("data-width",h),i.showpage_wrapper.attr("data-height",c),i.showpage_wrapper.css(e.simpleExtendObj(o,p)),i.innerPagesWrappers[t.pageKey]=i.showpage_wrapper,i.showpage_wrapper.append(r.$el),i.$el.append(i.showpage_wrapper),r.bindShowPageEnterEvent(),i._showpageAnimate(t,i.showpage_wrapper,r)},function(){}):(this.hideLoadingProgressbar(),this._showpageAnimate(t,this.showpage_wrapper,this.showpageInstance))}},i.prototype.goBack=function(){this.pageManager.goBack()},i.prototype.go=function(e,t){t=t||{};var i=this.pageManager.appConfig.beforeGo;i&&i({params:t,pageviewInstance:this}),this.pageManager.go(e,t)},i.prototype.replaceGo=function(e,t){t=t||{};var i=this.pageManager.appConfig.beforeGo;i&&i({params:t,pageviewInstance:this}),this.pageManager.replaceGo(e,t)},i.prototype._showpageAnimate=function(t,i,a){var s=this,r=12;a.$$isshow=!0;var o=i.attr("data-width"),l=i.attr("data-mode");if(this.innerWrapper[0].className="displayflex yy-page-inner "+n[l],"fromLeft1"!=l&&"fromLeft2"!=l||(this.showPageBackCover.removeClass("displaynone").css({left:o}),window.setTimeout(function(){if("fromLeft1"==l){var t=e.processTransitionTanformStyle("transform .3s cubic-bezier(.05, .69, .14, 1)","translate3d("+o+",0,0)");t["box-shadow"]="0px 0px 13px 1px #929292",s.innerWrapper.css(t)}i.css(e.processTransitionTanformStyle("transform .3s cubic-bezier(.05, .69, .14, 1)","translate3d(0,0,0)"))},r)),"fromLeft3"==l){this.showPageBackCover.removeClass("displaynone").css({left:o});var h=e.processTransitionTanformStyle("transform .3s cubic-bezier(.05, .69, .14, 1)","translate3d("+o+",0,0)");h["box-shadow"]="0px 0px 13px 1px #929292",window.setTimeout(function(){s.innerWrapper.css(h)},r)}if("fromRight1"!=l&&"fromRight2"!=l||(this.showPageBackCover.removeClass("displaynone").css({right:o}),window.setTimeout(function(){var t=e.processTransitionTanformStyle("transform .3s cubic-bezier(.05, .69, .14, 1)","translate3d(-"+o+",0,0)");t["box-shadow"]="0px 0px 13px 1px #929292","fromRight1"==l&&s.innerWrapper.css(t),i.css(e.processTransitionTanformStyle("transform .3s cubic-bezier(.05, .69, .14, 1)","translate3d(0,0,0)"))},r)),"fromRight3"==l){this.showPageBackCover.removeClass("displaynone").css({right:o});var h=e.processTransitionTanformStyle("transform .3s cubic-bezier(.05, .69, .14, 1)","translate3d(-"+o+",0,0)");h["box-shadow"]="0px 0px 13px 1px #929292",window.setTimeout(function(){s.innerWrapper.css(h)},r)}if("fromBottom"==l){i.attr("data-height");this.showPageBackCover.removeClass("displaynone").css({left:"0",top:"0"}),window.setTimeout(function(){i.css(e.processTransitionTanformStyle("transform .2s cubic-bezier(.05, .69, .14, 1)","translate3d(0,0,0)"))},r)}},i}),define("../../components/poplayer",["utils","base"],function(e,t){var i=function(e){var t=this;i.baseConstructor.call(this,e),this.mode=e.mode||"bottom";var a="displayflex yy-poplayer yy-poplayer-"+this.mode;this.showClassName="yy-poplayer-"+this.mode+"-show",this.hideClassName="yy-poplayer-"+this.mode+"-hide",this.bkCover=$("<div class='yy-poplayer-bk displaynone'></div>"),e.bkCoverStyle&&this.bkCover.css(e.bkCoverStyle),this.bkCover.appendTo(this.pageview.$$childrenWrapper),this.bkCover.bind("click",function(){t.hide()}),this.$el.addClass(a),this.initLayout(this.datasource)};return e.extends(i,t),i.prototype.show=function(){this.bkCover.removeClass("displaynone"),this.$el.removeClass(this.hideClassName).addClass(this.showClassName)},i.prototype.hide=function(){this.bkCover.addClass("displaynone"),this.$el.removeClass(this.showClassName).addClass(this.hideClassName)},i}),define("../../components/popover",["utils","base"],function(e,t){var i=function(t){var a=this;t.noNeedSetStyle=!0,t.style=t.style||{},t.arrowStyle=t.arrowStyle||{},t.arrowStyle=t.arrowStyle||"16px",t.arrowStyle.backgroundColor=t.arrowStyle.backgroundColor||"rgba(0,0,0,.9)",t.arrowStyle.height=t.arrowStyle.height||"14px",t.arrowStyle.width=t.arrowStyle.height,t.style.width||(t.style.width="120px"),t.style.height||(t.style.height="200px"),i.baseConstructor.call(this,t),this.width_int=parseInt(this.config.style.width),this.height_int=parseInt(this.config.style.height),this.$el.addClass("yy-popover"),t.arrowStyle.transform="rotate(45deg)",t.arrowStyle["-webkit-transform"]="rotate(45deg)",this.animateAction="0",t.animate&&(this.animateAction=t.animate.mode),this.offset=t.offset||{x:0,y:0};var n=this.offset.x||0,s=this.offset.y||0;this.offset.x=parseInt(n),this.offset.y=parseInt(s),this.arrow_width_int=parseInt(t.arrowStyle.width),this.arrow=$("<div class='yy-pop-arrow'></div>"),this.bkCover=$("<div class='yy-pop-bk displaynone'></div>"),e.css(this.arrow,t.arrowStyle),this.contentWrapper=$("<div class='displayflex yy-pop-content'></div>"),this.$$childrenWrapper=this.contentWrapper,e.css(this.contentWrapper,this.config.style),this.$el.append(this.arrow).append(this.contentWrapper),t.bkCoverStyle&&e.css(this.bkCover,t.bkCoverStyle),this.bkCover.appendTo(this.pageview.$$childrenWrapper),this.bkCover.bind("click",function(){a.hide()}),this.initLayout(t.$$datasource)};return e.extends(i,t),i.prototype.getHeight=function(){return this.$el.height()},i.prototype.hide=function(){var e=this;"0"!=this.animateAction&&"1"!=this.animateAction?(this.$el.css({opacity:0}),window.setTimeout(function(){e.$el.css({visibility:"hidden"})},300)):this.$el.css(this.hidePos),e.bkCover.addClass("displaynone")},i.prototype.show=function(t,i){i=i||{};var a=this,n=i.direction;if(t){var s=t.getClientRect();n||(s.top>this.getHeight()+this.arrow_width_int?n="top":e.viewport.height-s.bottom>this.getHeight()+this.arrow_width_int&&(n="bottom"));var r={visibility:"visible",transition:"transform .3s ease"};if(this.hidePos={},"top"==n){var o=s.top-this.getHeight()-this.arrow_width_int;r.top=o+"px","0"==this.animateAction?this.hidePos.visibility="hidden":"1"==this.animateAction?(this.hidePos.transform="translate3d(0,"+(e.viewport.height-o)+"px,0)",r.transform="translate3d(0,"+(e.viewport.height-o)+"px,0)"):(r.transition="opacity .3s ease",this.hidePos.visibility="hidden",r.opacity="0",r.transform="translate3d(0,0,0)")}else if("bottom"==n){var o=s.bottom+this.arrow_width_int/2;r.top=o+"px","0"==this.animateAction?this.hidePos.visibility="hidden":"1"==this.animateAction?(this.hidePos.transform="translate3d(0,"+(0-this.getHeight()-o-10)+"px,0)",r.transform="translate3d(0,"+(0-this.getHeight()-o-10)+"px,0)"):(r.transition="opacity .3s ease",this.hidePos.visibility="hidden",r.opacity="0",r.transform="translate3d(0,0,0)")}r.left=s.left+s.width/2-this.width_int/2+this.offset.x;var l=r.left+this.width_int-e.viewport.width;l>0&&(r.left=r.left-l-6),r.left<0&&(r.left=6);var h={left:s.left+s.width/2-this.arrow_width_int/2-r.left+"px"};"bottom"==n?(h["border-top-left-radius"]="4px",h.top="-"+this.arrow_width_int/2+"px"):(h["border-bottom-right-radius"]="4px",h.bottom="-"+this.arrow_width_int/2+"px"),e.css(this.arrow,h),e.css(this.$el,r),this.bkCover.removeClass("displaynone"),"0"==this.animateAction?a.$el.css({visibility:"visible"}):"1"==this.animateAction?window.setTimeout(function(){a.$el.css({transform:"translate3d(0,0,0)"})},0):window.setTimeout(function(){a.$el.css({opacity:"1"})},0)}},i}),define("../../components/radiobox",["utils","base"],function(e,t){var i=e.getRealWidth(22),a=e.getRealWidth(14),n={width:i,height:i,border:"1px solid rgb(229, 229, 229)",backgroundColor:"#fff",fontSize:a},s={width:i,height:i,color:"#fff",border:"1px solid rgb(144, 151, 255)",backgroundColor:"rgb(144, 151, 255)",fontSize:a},r=function(t){var i=this;t.style=t.style||{},this.uss=e.simpleExtendObj(e.clone(n),t.radioStyle),this.uss=e.simpleExtendObj(this.uss,t.unSelectedRadioStyle||{}),this.ss=e.simpleExtendObj(e.clone(s),t.radioStyle||{}),this.ss=e.simpleExtendObj(this.ss,t.selectedRadioStyle||{}),this.selectedBackgroundColor=this.ss.backgroundColor||"#0093ff",r.baseConstructor.call(this,t),this.value=!!this.config.value,this.$el.addClass("yy-icommon"),this.$el.addClass("yy-radio-warpper displayflex yy-fd-row yy-jc-center yy-ai-center"),this.radioDom=$("<div class='yy-radio'></div>"),this.textDom=$("<div class='yy-radio-text'>"+(this.config.text||"")+"</div>"),this.config.textStyle&&e.css(this.textDom,this.config.textStyle),this.$el.append(this.radioDom).append(this.textDom),this.setValue(this.value),this.$el.bind("click",function(){i.change()});var a=this.config.comKey+"_change";this.changeMethod=this.pageview.plugin[a]};return e.extends(r,t),r.prototype.change=function(){this.changeMethod&&this.changeMethod.call(this.pageview.plugin,this,{value:!this.value})},r.prototype.selected=function(t){t&&this.config.disableParentSelect||(this.value=!0,e.css(this.radioDom,this.ss),this.$el.addClass("yy-radio-selected"))},r.prototype.unSelected=function(t){t&&this.config.disableParentSelect||(this.value=!1,e.css(this.radioDom,this.uss),this.$el.removeClass("yy-radio-selected"))},r.prototype.setValue=function(t){this.value=t,t?(this.$el.addClass("yy-radio-selected"),e.css(this.radioDom,this.ss)):(this.$el.removeClass("yy-radio-selected"),e.css(this.radioDom,this.uss))},r}),define("../../components/radiolist",["utils","base"],function(e,t){var i=function(t){this.itemData=t.itemData,this.parent=t.parent;this.key=this.itemData[this.parent.primaryKey],this.$el=$("<div data-key='"+this.key+"' class='yy-radiolist-item yy-icommon' style='height:"+t.parent.itemHeight+"px;line-height:"+t.parent.itemHeight+"px;font-size:"+e.fontSize13()+"px'>"+(t.itemData[t.parent.labelKey]||"")+"</div>")};i.prototype={selected:function(){this.$el.addClass("yy-radiolist-item-selected")},unSelected:function(){this.$el.removeClass("yy-radiolist-item-selected")}};var a=function(t){var i=this;a.baseConstructor.call(this,t);var n=e.getRealHeight("36");this.itemHeight=e.getRealHeight("48"),this.$el.addClass("yy-checklist"),this.items=[],this.selectedValue=[],this.primaryKey=this.config.primaryKey,this.primaryKey||console.error(this.config.comKey+"控件没有指定primaryKey数据的主键"),this.loadWrapper=$("<div class='yy-cs-loading-wrapper displayflex jc-center ai-center'><div class='preloader'></div></div>"),this.backCoverLayer=$("<div class='yy-cl-coverlayer displaynone'></div>"),this.backCoverLayer.bind("touchmove",function(e){e.preventDefault(),e.stopPropagation()});var s=$("<div style='height:"+n+"px;font-size:"+e.fontSize(14)+"px;line-height:"+n+"px' class='yy-rl-title-wrapper'>"+(t.title||"请选择")+"</div>");this.listWrapper=$("<div style='max-height:"+6.7*this.itemHeight+"px;' class='yy-cl-list-wrapper'></div>"),this.listWrapper.append(this.loadWrapper),this.$el.append(s).append(this.listWrapper),this.labelKey=this.config.labelKey||"text",this.backCoverLayer.bind("click",function(){i.hide()}),this.listWrapper.bind("click",function(e){i.itemClick(e)});var r=this.config.comKey+"_selected";this.selectedMethod=this.pageview.plugin[r],this.pageview.innerWrapper.append(this.backCoverLayer)};return e.extends(a,t),a.prototype._getPrimaryValue=function(e){var t="";if("string"==typeof this.primaryKey)t=e[this.primaryKey];else if(this.primaryKey instanceof Array){for(var i=[],a=0,n=this.primaryKey.length;a<n;a++)i.push(e[this.primaryKey[a]]);t=i.join("_")}else console.error("radiolist控件primaryKey属性 错误的数据类型");return t},a.prototype.itemClick=function(e){var t=e.target.getAttribute("data-key");if(t){for(var i=null,a=0,n=this.items.length;a<n;a++)if(t==this.items[a].key){i=this.items[a];break}i&&(this.selectedValue=[i.itemData],this.setItemSelected(this.selectedValue),this.hide(),this.selectedMethod&&this.selectedMethod.call(this.pageview.plugin,this,{selectedValue:this.selectedValue}))}},a.prototype.show=function(){this.$el.addClass("yy-checklist-show"),this.backCoverLayer.removeClass("displaynone"),this.init()},a.prototype.setItemSelected=function(e){for(var t=0,i=this.items.length;t<i;t++){var a=this.items[t];a.unSelected()}if(e.length>0){this.selectedValue=[];for(var n=0;n<1;n++)for(var s=this._getPrimaryValue(e[n]),t=0,i=this.items.length;t<i;t++){var a=this.items[t];a.key==s&&(a.selected(),this.selectedValue.push(a.itemData))}}},a.prototype.setSelectedValue=function(e){e instanceof Array||console.error("radiolist setSelectedValue方法必须是数组"),this.items&&this.items.length>0?this.setItemSelected(e):this._midSelectedValue=e},a.prototype.createItems=function(e){this.dataSource=e,this.items=[],this.listWrapper.empty();for(var t=this.dataSource.length,a=0,n=t;a<n;a++){var s=this.dataSource[a],r=new i({itemData:s,parent:this});this.listWrapper.append(r.$el),this.items.push(r),t>1&&a!=t-1&&this.listWrapper.append("<div class='yy-checklist-line'></div>")}this._midSelectedValue&&(this.setItemSelected(this._midSelectedValue),this._midSelectedValue=null),this.setSelectedValue(this.config.selectedValue||[])},a.prototype.init=function(){var e=this;this.dataSource||(e.loadWrapper.removeClass("displaynone"),e.loadErrorWrapper&&e.loadErrorWrapper.addClass("displaynone"),this.loadData(function(t){e.loadWrapper.addClass("displaynone"),e.loadErrorWrapper&&e.loadErrorWrapper.addClass("displaynone"),e.createItems(t)},function(){e.loadErrorWrapper||e.initLoadErrorDom(),e.loadErrorWrapper.removeClass("displaynone"),e.loadWrapper.addClass("displaynone")}))},a.prototype.loadData=function(e,t){if(this.dataSource)return void e(this.dataSource);var i=this.config.comKey+"_loaddata",a=this.pageview.plugin[i];a&&a.call(this.pageview.plugin,this,{success:e,error:t})},a.prototype.initLoadErrorDom=function(){var t=this,i=e.getRealWidth(11),a=e.getRealWidth(20);this.loadErrorWrapper=$("<div style='height:100px' class='yy-loadmore-wrapper displayflex jc-center ai-center flex-h'></div>");var n=$("<i style='font-size:"+a+"px' class='yy-icommon yy-loadmore-erroricon'></i>"),s=$("<span style='font-size:"+i+"px' class='yy-pull-meslabel'>网络异常,点击</span>"),r=$("<span style='font-size:"+i+"px' class='yy-loadmore-reload-babel'>重新加载</span>");r.bind("click",function(){t.init()}),this.loadErrorWrapper.append(n).append(s).append(r),this.listWrapper.append(this.loadErrorWrapper)},a.prototype.hide=function(){this.$el.removeClass("yy-checklist-show"),this.backCoverLayer.addClass("displaynone")},a}),define("../../components/repeat",["utils","base"],function(e,t){var i=function(e){var t=this;this.datasource=e.$$datasource,this.parent=e.$$parent,e.style&&(e.style.flexDirection||e.style["flex-direction"]||(e.style.flexDirection="column",e.style.webkitFlexDirection="column")),this.parent.useFloatToWrap&&(e.style.float="left",e.style.display="inline-block"),i.baseConstructor.call(this,e),this.parent.rowMarkSeed||(this.parent.rowMarkSeed=0),this.parent.rowMarkSeed+=1,this.itemMark="item"+this.parent.rowMarkSeed,this.$el.attr("data-role","repeatitem"),this.$el.attr("item-mark",this.itemMark);var a=this.parent.useFloatToWrap?"yy-repeatitem":"displayflex yy-repeatitem";this.$el.addClass(a),this.$el.bind("click",function(){"edit"!==t.parent.status&&t.parent._itemClick(t)}),this.initLayout(e.$$datasource,null,this)};e.extends(i,t),i.prototype.select=function(){if("m"===this.parent.selectedMode){var e=this.parent.selectedItems.indexOf(this);e>=0?(this.parent.selectedItems.splice(e,1),this.unSelected()):(this.parent.selectedItems.push(this),this.selected())}else{var t=this.parent.selectedItems[0];t&&t.unSelected(),this.parent.selectedItems[0]=this,this.selected()}},i.prototype.delegate=function(e,t){var i=this.refs[e];i?t(i):(this.config.components[e].ref||console.log("请务必在"+e+"控件上设置ref:true"),this.componentsInitActions[e]=t)},i.prototype.showPlaceHolder=function(){this.placeHolder||(this.placeHolder=$("<div class='yy-repeat-placeholder displaynone'></div>"),this.$el.append(this.placeHolder)),this.placeHolder.removeClass("displaynone")},i.prototype.moveTo=function(e){if(null!==e&&void 0!==e){var t=this.parent.components.indexOf(this);if(t!=e){var i=this.parent.components[e];if(i){this.$el.insertBefore(i.$el),this.parent.components.splice(t,1),this.parent.datasource.splice(t,1);var a=e;t<e&&(a-=1),this.parent.components.splice(a,0,this),this.parent.datasource.splice(a,0,this.datasource)}else this.parent.components.splice(t,1),this.parent.datasource.splice(t,1),this.parent.components.push(this),this.parent.datasource.push(this.datasource),this.parent.subComponent?this.$el.insertBefore(this.parent.subComponent.$el):this.$el.appendTo(this.parent.$el)}}},i.prototype.hidePlaceHolder=function(){this.placeHolder.addClass("displaynone")},i.prototype.remove=function(e){var t=this,i=this.parent.datasource.indexOf(this.datasource),a=this.parent.components.indexOf(this);i>=0&&this.parent.datasource.splice(i,1),a>=0&&this.parent.components.splice(a,1),this.splitLine&&this.splitLine.remove(),e?(this.$el.css({height:this.$el.height()+1+"px"}),window.setTimeout(function(){t.$el.css({transition:"height .12s linear","-webkit-transition":"height .12s linear",height:"0px"})},40),window.setTimeout(function(){t.$el.remove()},345)):t.$el.remove()},i.prototype.rebind=function(e){this.$el.empty(),this.datasource=e,this.initLayout(e,null,this)};var a=function(t){this.initSourceLength=0;var i=t.style||{};this.useFloatToWrap=!e.isSupportFlexWrap()&&("wrap"==i.flexWrap||"wrap"==i["flex-wrap"]),this.selectedItems=[],this.splitStyle=t.splitStyle,t.subComponent&&(t.$$pageview.config.components[t.subComponent].ref=!0),a.baseConstructor.call(this,t),this.subComponentInBefore=this.config.subComponentInBefore===!0,this.datasource=[];var n=this.useFloatToWrap?"yy-repeat ":"displayflex yy-repeat ";this.$el.addClass(n),this.selectedMode=t.selectedMode,this.subComponent=null,this.init(),this.hasAttachSortEvent=!1};return e.extends(a,t),a.prototype.setLeftOpen=function(){return"edit"===this.status?(this.setLeftClose(),void this.showOrHideSubComponent(!0)):(this.status="edit",this.showOrHideSubComponent(!1),void this.$el.addClass(this.showBlockClassNameDict.left))},a.prototype.eachItem=function(e){for(var t=0,i=this.components.length;t<i;t++){var a=e(this.components[t],t);if(a===!1)break}},a.prototype.clearSelectAll=function(){this.selectedItems=[],this.eachItem(function(e){e.unSelected()})},a.prototype.selectAllItems=function(){var e=this;this.selectedItems=[],this.eachItem(function(t){t.selected(),e.selectedItems.push(t)})},a.prototype.setLeftRightOpen=function(){return"edit"===this.status?(this.setLeftRightClose(),void this.showOrHideSubComponent(!0)):(this.status="edit",this.showOrHideSubComponent(!1),void this.$el.addClass((this.showBlockClassNameDict.left||"")+" "+(this.showBlockClassNameDict.right||"")))},a.prototype.setLeftRightClose=function(){this.status="",this.$el.removeClass((this.showBlockClassNameDict.left||"")+" "+(this.showBlockClassNameDict.right||""))},a.prototype.setLeftClose=function(){this.status="",this.$el.removeClass(this.showBlockClassNameDict.left)},a.prototype.setRightOpen=function(){return"edit"===this.status?(this.setRightClose(),void this.showOrHideSubComponent(!0)):(this.status="edit",this.showOrHideSubComponent(!1),void this.$el.addClass(this.showBlockClassNameDict.right))},a.prototype.setRightClose=function(){this.status="",this.$el.removeClass(this.showBlockClassNameDict.right)},a.prototype.initLeftRightBlock=function(){this.initBlock(this.config.leftBlock,"left"),this.initBlock(this.config.rightBlock,"right")},a.prototype.initBlock=function(t,i){if(t){t.key&&t.width||console.error("listview 的"+i+"Block配置需要包括key和widt属性");try{t.width=parseInt(t.width)}catch(e){}isNaN(t.width)&&console.error("listview 的"+i+"Block的widt属性必须为数值"),t.width=e.getRealWidth(t.width);var a=this.getUniqueKey()+i;this.$el.addClass(a),this.showBlockClassNameDict||(this.showBlockClassNameDict={}),this.showBlockClassNameDict[i]=a+"_show"+i,e.createStyleSheet(a,"."+t.key+" {transition:width .3s ease;-webkit-transition:width .3s ease;} ."+this.showBlockClassNameDict[i]+" ."+t.key+" {width:"+t.width+"px !important;}")}},a.prototype.init=function(){var e=this,t=this.config.items||[];this.initSourceLength=t.length;for(var i=0,a=t.length;i<a;i++)this.addItem(t[i],i,a);this.config.subComponent&&this.getComponentInstanceByComKey(this.config.subComponent,this.datasource,null,function(t){e.$el.append(t.$el),e.subComponent=t},function(){}),this.config.nodata&&this.getComponentInstanceByComKey(this.config.nodata,null,null,function(t){e.$el.append(t.$el),e.components.length>0&&t.$el.addClass("displaynone"),e.noDataDom=t},function(){}),this.initLeftRightBlock()},a.prototype.showOrHideSubComponent=function(e){this.config.subComponent&&this.pageview.do(this.config.subComponent,function(t){e?t.$el.removeClass("displaynone"):t.$el.addClass("displaynone")})},a.prototype.empty=function(){for(var e=this.components.length-1;e>=0;e--)this.components[e].remove();this.datasource=[],this.components=[]},a.prototype.bindData=function(e){if(this.empty(),e&&e instanceof Array&&e.length>0){this.noDataDom?(this.noDataDom.$el.addClass("displaynone"),this.showOrHideSubComponent(!0)):this.showOrHideSubComponent(!0),this.initSourceLength=e.length;for(var t=0,i=e.length;t<i;t++)this.addItem(e[t],t,i)}else this.noDataDom&&this.noDataDom.$el.removeClass("displaynone"),this.config.subComponentAlwaysShow?this.showOrHideSubComponent(!0):this.showOrHideSubComponent(!1)},a.prototype.getItem=function(e){for(var t=0,i=this.components.length;t<i;t++){var a=this.components[t];if(e(a))return a}return null},a.prototype.insertItem=function(e,t){this.noDataDom&&this.noDataDom.$el.addClass("displaynone"),this.addItem(e,t)},a.prototype.getTargetItem=function(e,t){var i=e.target,a=this.config.sortHandle,n=!1,s=i.getAttribute("item-mark");for(a&&(i.getAttribute("data-comname")!=a?s=null:n=!0);!s&&"BODY"!==i.tagName.toUpperCase();)if(i=i.parentNode,a&&i.getAttribute("data-comname")==a&&(n=!0),s=i.getAttribute("item-mark")){a&&(n||(s=null));break}var r=null;if(s)for(var o=0,l=this.components.length;o<l;o++){var h=this.components[o];if(h.itemMark===s){r=h;break}}return r},a.prototype.startSort=function(){var e,t,i=this,a=this.parent;if(this.pageview.plugin){var n=this.config.comKey+"_sortend";t=this.pageview.plugin[n]}this.isInSort=!0;var s,r,o,l,h,c=null;this.hasAttachSortEvent||(this.hasAttachSortEvent=!0,this.$el.bind("touchstart",function(t){if(e=i.getTargetItem(t,!0),i.repeatOffsetY=i.$el.offset().top,o=0,l=0,e&&i.isInSort){c=e.$el.position();var n=t.touches[0];s=n.pageX,r=n.pageY,h=e.$el.clone(),a&&(scrollTop=a.$el[0].scrollTop),h.css({position:"absolute",zIndex:50,left:c.left+"px",top:c.top+"px"}),e.showPlaceHolder(),i.$el.append(h)}}),this.$el.bind("touchmove",function(t){if(e&&i.isInSort){var n=t.touches[0];t.preventDefault(),t.stopPropagation();var p=n.pageX,d=n.pageY;o=p-s,l=d-r;var u=0;if(a&&(u=a.$el[0].scrollTop),Math.abs(parseInt(d))%3==1){var f=i.getItemIndexByPosY(d+u-(u+i.repeatOffsetY));e.moveTo(f)}var g=l+c.top;g=g<0?0:g,h.css({position:"absolute",zIndex:50,top:g+"px"})}}),this.$el.bind("touchend",function(a){e&&i.isInSort&&(t&&t.call(i.pageview.plugin,this,{}),e.hidePlaceHolder(),h.remove(),h=null)}))},a.prototype.endSort=function(){this.isInSort=!1},a.prototype.getItemIndexByPosY=function(e){for(var t,i=0,a=this.components.length,n=0,s=a;n<s;n++){var r=this.components[n],o=r.$el.height();if(e>i&&e<i+o/2){t=n;break}if(e>=i+o/2&&e<i+o){t=n+1;break}i+=o}return t},a.prototype.addItem=function(t,a,n){var s=!1;void 0===a||null===a||a<0||a>=this.datasource.length?(a=this.datasource.length,this.datasource.push(t)):(this.datasource.splice(a,0,t),s=!0);var r,o=new i({type:"repeatitem",root:this.config.root,style:this.config.itemStyle,$$pageview:this.pageview,$$datasource:t,$$parent:this,index:a,selectedClassName:this.config.itemSelectedClassName});if(this.splitStyle&&this.components.length>0&&(r=$("<div></div>"),o.splitLine=r,e.css(r,this.splitStyle)),s?this.components.splice(a,0,o):this.components.push(o),s){var l=this.components[a+1];0!==a&&r&&r.insertBefore(l.$el),o.$el.insertBefore(l.$el),0===a&&r&&r.insertBefore(l.$el)}else this.subComponent?this.subComponentInBefore?(r&&this.$el.append(r),this.$el.append(o.$el)):(r&&r.insertBefore(this.subComponent.$el),o.$el.insertBefore(this.subComponent.$el)):(r&&this.$el.append(r),this.$el.append(o.$el))},a.prototype._itemClick=function(e){var t=this.config.comKey+"_itemclick";if(this.pageview.plugin){var i=this.pageview.plugin[t];if(e.disabled)return;i&&i.call(this.pageview.plugin,e,{index:e.$el.index()})}this.config.$$itemClick&&this.config.$$itemClick(e)},a}),define("../../components/searchview",["utils","base"],function(e,t){var i=function(t){var a=this;i.baseConstructor.call(this,t);var n="displayflex yy-seachview yy-fd-column";this.$el.addClass(n),this.cancelBtnWidth=e.getRealWidth(60),this.inputWidth=e.getRealWidth(355);var s=e.getRealHeight(30),r=e.getRealHeight(10),o=e.getRealWidth(30);this.inputFocusWidth=this.inputWidth-this.cancelBtnWidth+r,this.searchBarClassName="yy-sv-bar yy-fd-row displayflex yy-ai-center",this.searchBar=$("<div class='"+this.searchBarClassName+" yy-sv-defalut'></div>"),this.config.searchBarStyle&&(this.config.searchBarStyle.paddingLeft||(this.config.searchBarStyle.paddingLeft=e.getRealWidth(10)),this.config.searchBarStyle.paddingRight||(this.config.searchBarStyle.paddingRight=e.getRealWidth(10)),e.css(this.searchBar,this.config.searchBarStyle)),this.form=$("<form class='yy-sv-form' style='height:"+s+"px;width:"+this.inputWidth+"px'></form>");var l=$("<div class='yy-sv-input-div' style=''></div>");this.clearBtn=$("<div class='yy-sv-clear yy-icommon displaynone' style='height:"+s+"px;width:"+s+"px'></div>");var h=this.config.placeholder||"搜索";this.input=$("<input style='font-size:"+e.fontSize(14)+"px;padding-left:"+o+"px' placeholder='"+h+"' type='search'/>"),this.input.bind("focus",function(){a._focus()}),this.input.bind("input",function(){a.inputChange()}),this.clearBtn.bind("click",function(){a.input.val(""),a.input.focus(),a.inputChange()}),l.append(this.clearBtn).append(this.input),this.form.append(l),this.form.bind("submit",function(e){return e.preventDefault(),!1});var c=$("<div style='width:"+this.cancelBtnWidth+"px;height:"+s+"px;font-size:"+e.fontSize(16)+"px' class='yy-sv-cancel displayflex yy-jc-center yy-ai-center'>取消</div>");c.bind("click",function(){a._cancelSearch()}),this.body=$("<div class='yy-flex-1 yy-sv-body'></div>"),this.config.bodyStyle&&e.css(this.body,this.config.bodyStyle);var p=this.config.comKey+"_change";this.changePluginMethod=this.pageview.plugin[p],this._init(),this.time=this.config.time,!this.time||isNaN(this.time)?this.time=1e3:this.time=parseInt(this.time),this.input.bind("keydown",function(e){13===e.keyCode&&a.input.blur()}),this.searchBar.append(this.form).append(c),this.$el.append(this.searchBar).append(this.body)};return e.extends(i,t),i.prototype.inputChange=function(e){var t=this,i=this.input.val();return""==i?this.clearBtn.addClass("displaynone"):this.clearBtn.removeClass("displaynone"),0==this.time?void(t.changePluginMethod&&t.changePluginMethod.call(t.pageview.plugin,t.input,{searchview:t,value:i})):(this.timeid&&window.clearTimeout(this.timeid),void(e?t.changePluginMethod&&t.changePluginMethod.call(t.pageview.plugin,t.input,{searchview:t,value:i}):this.timeid=window.setTimeout(function(){t.changePluginMethod&&t.changePluginMethod.call(t.pageview.plugin,t.input,{searchview:t,value:i})},this.time)))},i.prototype._cancelSearch=function(){this.form.css({width:this.inputWidth+"px"}),this.clearBtn.addClass("displaynone"),this.searchBar[0].className=this.searchBarClassName+" yy-sv-defalut",this.defaultComyWrapper&&(this.defaultComyWrapper.removeClass("displaynone"),this.resultComWrapper&&this.resultComWrapper.addClass("displaynone"))},i.prototype.search=function(e,t){this._focus(),this.input.val(e),this.inputChange(t)},i.prototype.value=function(){return $.trim(this.input.val())},i.prototype.blur=function(e){this.input.blur()},i.prototype.focus=function(e){this.input.focus()},i.prototype._focus=function(){this.form.css({width:this.inputFocusWidth+"px"}),this.input.val().length>0&&this.clearBtn.removeClass("displaynone"),this.searchBar[0].className=this.searchBarClassName+" yy-sv-active",this.resultComWrapper&&(this.resultComWrapper.removeClass("displaynone"),this.defaultComyWrapper&&this.defaultComyWrapper.addClass("displaynone"))},i.prototype._init=function(){var e=this,t=this.config.defaultComponent;t&&(this.defaultComyWrapper=$("<div class='yy-sv-body-wrapper displayflex yy-fd-column'></div>"),this.body.append(this.defaultComyWrapper),this.getComponentInstanceByComKey(t,null,null,function(t){e.defaultComyWrapper.append(t.$el)},function(){}));var i=this.config.resultComponent;i&&(this.resultComWrapper=$("<div class='yy-sv-body-wrapper displayflex yy-fd-column displaynone'></div>"),this.body.append(this.resultComWrapper),this.getComponentInstanceByComKey(i,null,null,function(t){e.resultComWrapper.append(t.$el)},function(){}))},i}),define("../../components/segment_android",["utils","base"],function(e,t){var i=function(e){var t=this;this.index=e.index,e.style=e.style||{},e.style.flexDirection||e.style["flex-direction"]||(e.style.flexDirection="column",e.style.webkitFlexDirection="column"),e.style.alignItems||e.style["align-items"]||(e.style.alignItems="center",e.style.webkitAlignItems="center"),e.style.justifyContent||e.style["justify-content"]||(e.style.justifyContent="center",e.style.webkitJustifyContent="center"),e.style.width||(e.style.flex=1,e.style.webkitFlex=1),e.style.height=e.style.height||"25px",i.baseConstructor.call(this,e),this.$el.addClass("displayflex yy-segmentitem-android"),this.$el.bind("click",function(){t.disabled||t.parent._itemClick(t)}),this.childHasInited=!1,this.initLayout(e.$$datasource,null,null,function(){t.childHasInited=!0,t.wantToSelected===!0&&(t.selected(),t.wantToSelected=!1)})};e.extends(i,t),i.prototype.initSetSelected=function(){this.childHasInited?this.selected():this.wantToSelected=!0};var a=function(e){e.itemStyle=e.itemStyle||{},e.style=e.style||{},e.style.width=e.style.width||"100%";var t=e.itemStyle.height||e.style.height||"25px";e.itemStyle.height=t,delete e.style.height,a.baseConstructor.call(this,e),this.$el.css({height:t}),this.$el.addClass("yy-sgm-android"),this.$innerWraper=$("<div class='displayflex yy-sgm-android-inner flex-h'></div>"),this.indicator=$("<div class='yy-sgm-indicator'></div>"),this.selectedMode=e.selectedMode,this.selectedIndex=parseInt(e.selectedIndex)||0,this.selectedItems,this.components=[],this.dataSource=[],this.splitStyle=e.splitStyle,this.offsetX=0,this.$innerWraper.appendTo(this.$el),this.init()};return e.extends(a,t),a.prototype.init=function(){var e=this;this.getdata(function(t){e.createItems(t)},function(){})},a.prototype.createItems=function(e){var t=this.config.indicatorStyle||{};this.itemCount=e.length,this.config.itemStyle.width?(this.itemWidth_int=parseFloat(this.config.itemStyle.width),this.itemWidth=this.itemWidth_int+"px",t.left=this.itemWidth_int*this.selectedIndex+"px",t.width=this.itemWidth_int+"px",this.maxWidth=this.itemWidth_int*this.itemCount,this.$innerWraper.css({width:this.maxWidth+3+"px"}),this.initEvent()):(this.itemWidth_int=100/e.length,this.itemWidth=this.itemWidth_int+"%",t.left=this.itemWidth_int*this.selectedIndex+"%",t.width=this.itemWidth_int+"%",this.$innerWraper.css({width:"100%"})),this.indicator.css(t),this.$innerWraper.append(this.indicator);for(var i=0,a=e.length;i<a;i++)this.addItem(e[i])},a.prototype.getdata=function(e,t){if(this.config.items)return void e(this.config.items);var i=this.config.comKey+"_getdata",a=this.pageview.plugin[i];a&&a.call(this.pageview.plugin,this,{success:function(t){e(t)},error:function(){t()}})},a.prototype.addItem=function(t){this.dataSource.push(t);var a=new i({type:"segmentitem",root:this.config.root,style:this.config.itemStyle,$$pageview:this.pageview,$$datasource:t,$$parent:this,index:this.components.length,selectedClassName:this.config.itemSelectedClassName});if(this.components.push(a),this.components.length==this.selectedIndex+1&&(this.selectedItems=a,
a.initSetSelected()),this.$innerWraper.append(a.$el),this.splitStyle&&this.components.length>0&&this.components.length<this.config.items.length){var n=$("<div></div>");e.css(n,this.splitStyle),this.$innerWraper.append(n)}},a.prototype._itemClick=function(t){var i=this.selectedItems===t,a=this.config.comKey+"_change";if(this.pageview.plugin&&this.pageview.plugin[a]){var n=this.pageview.plugin[a];if(n){var s=n.call(this.pageview.plugin,this,{item:t,nochange:i});if(s)return}}if(i);else if(this.selectedItems&&this.selectedItems.unSelected(),this.selectedItems=t,this.selectedItems.selected(),this.config.itemStyle.width){if(this.indicator.css({left:this.itemWidth_int*t.index+"px"}),t.index!=this.itemCount-1){var r=this.itemWidth_int*(t.index-2);r=r<0?0:r,0!=t.index?r+=30:r=0,this.offsetX=0-r,this.$innerWraper.css(e.processTransformStyle("translate3d(-"+r+"px,0,0)"))}}else this.indicator.css({left:this.itemWidth_int*t.index+"%"});var o=t.datasource,l=o.key,h=this.pageview.refs[this.config.viewpager];h&&l&&h.showItem(l)},a.prototype.initEvent=function(){var t,i=0,a=0,n=0,s=this,r=e.viewport.width,o=this.maxWidth-r;o=o<=0?0:o,this.$el.bind("touchstart",function(e){var n=e.touches[0];i=n.pageX,a=0,t=(new Date).valueOf()}),this.$el.bind("touchmove",function(t){var r=t.touches[0],o=r.pageX;a=o-i,n=a+s.offsetX;var l=e.processTransformStyle("translate3d("+n+"px,0,0)");l.transition="none",l.webkitTransition="none",s.$innerWraper.css(l)}),this.$el.bind("touchend",function(i){var l=(new Date).valueOf(),h=l-t,c=0;h<400&&(c=o*(1-Math.abs(a)/r)),a>0?n+=c:n-=c,n>0&&(n=0),n<0-o&&(n=0-o),s.offsetX=n,h+=200;var p=e.processTransformStyle("translate3d("+n+"px,0,0)");p.transition="transform "+h+"ms ease",p.webkitTransition="transform "+h+"ms ease",s.$innerWraper.css(p)})},a}),define("../../components/segment_ios",["utils","base"],function(e,t){var i=function(e){var t=this;e.style=e.style||{},e.style.flexDirection||e.style["flex-direction"]||(e.style.flexDirection="column"),e.style.alignItems||e.style["align-items"]||(e.style.alignItems="center"),e.style.justifyContent||e.style["justify-content"]||(e.style.justifyContent="center"),e.style.flex=1,e.style.height=e.style.height||"25px",i.baseConstructor.call(this,e),this.$el.addClass("displayflex yy-segmentitem"),this.$el.bind("click",function(){t.parent._itemClick(t)}),this.initLayout(e.$$datasource)};e.extends(i,t),i.prototype.render=function(){};var a=function(e){e.itemStyle=e.itemStyle||{},e.style=e.style||{},e.style.width=e.style.width||"300px",e.style.border=e.style.border||"1px solid rgb(0, 147, 255)",e.style.borderRadius=e.style.borderRadius||"4px";var t=e.itemStyle.height||e.style.height||"25px";e.itemStyle.height=t,delete e.style.height,a.baseConstructor.call(this,e),this.$el.addClass("displayflex yy-sgm-ios flex-h"),this.selectedMode=e.selectedMode,this.selectedIndex=e.selectedIndex||0,this.selectedItems,this.components=[],this.dataSource=[],this.splitStyle=e.splitStyle||{borderLeft:"1px solid rgb(0, 147, 255)",height:t,width:0},this.init()};return e.extends(a,t),a.prototype.init=function(){for(var e=this.config.items||[],t=0,i=e.length;t<i;t++)this.addItem(e[t])},a.prototype.addItem=function(t){this.dataSource.push(t);var a=new i({type:"segmentitem",root:this.config.root,style:this.config.itemStyle,$$pageview:this.pageview,$$datasource:t,$$parent:this,selectedClassName:this.config.itemSelectedClassName||"yy-sgm-ios-selected"});if(this.components.push(a),this.components.length==this.selectedIndex+1&&(this.selectedItems=a,a.selected()),this.$el.append(a.$el),this.components.length>0&&this.components.length<this.config.items.length){var n=$("<div></div>");e.css(n,this.splitStyle),this.$el.append(n)}},a.prototype._itemClick=function(e){if(this.selectedItems===e){var t=this.config.comKey+"_selectedagin";if(this.pageview.plugin&&this.pageview.plugin[t]){var i=this.pageview.plugin[t];i&&i.call(this.pageview.plugin,this,{item:e})}}else{this.selectedItems&&this.selectedItems.unSelected(),this.selectedItems=e,this.selectedItems.selected();var t=this.config.comKey+"_change";if(this.pageview.plugin&&this.pageview.plugin[t]){var i=this.pageview.plugin[t];i&&i.call(this.pageview.plugin,this,{item:e})}var a=e.datasource,n=a.key,s=this.pageview.refs[this.config.viewpager];s&&n&&s.showItem(n)}},a}),define("../../components/simplesearchview",["utils","base"],function(e,t){var i=function(t){var a=this;i.baseConstructor.call(this,t);var n="displayflex yy-seachview yy-fd-column";this.$el.addClass(n),this.cancelBtnWidth=e.getRealWidth(60),this.inputWidth=e.getRealWidth(355);var s=e.getRealWidth(10),r=e.getRealHeight(30),o=e.getRealHeight(10),l=e.getRealWidth(30);this.inputFocusWidth=this.inputWidth-this.cancelBtnWidth+o,this.searchBarClassName="yy-sv-bar yy-fd-row displayflex yy-ai-center",this.searchBar=$("<div class='"+this.searchBarClassName+" yy-sv-defalut'></div>"),this.config.searchBarStyle&&(this.config.searchBarStyle.paddingLeft||(this.config.searchBarStyle.paddingLeft=e.getRealWidth(10)),this.config.searchBarStyle.paddingRight||(this.config.searchBarStyle.paddingRight=e.getRealWidth(10)),e.css(this.searchBar,this.config.searchBarStyle)),this.form=$("<form class='yy-sv-form' style='margin-left:"+s+"px;height:"+r+"px;width:"+this.inputWidth+"px'></form>");var h=$("<div class='yy-sv-input-div' style=''></div>");this.clearBtn=$("<div class='yy-sv-clear yy-icommon displaynone' style='height:"+r+"px;width:"+r+"px'></div>");var c=this.config.placeholder||"搜索";this.input=$("<input style='font-size:"+e.fontSize(14)+"px;padding-left:"+l+"px' placeholder='"+c+"' type='search'/>"),this.input.bind("focus",function(){a._focus()}),this.input.bind("input",function(){a.inputChange()}),this.clearBtn.bind("click",function(){a.input.val(""),a.input.focus()}),h.append(this.clearBtn).append(this.input),this.form.append(h),this.form.bind("submit",function(e){return e.preventDefault(),!1});var p=$("<div style='width:"+this.cancelBtnWidth+"px;height:"+r+"px;font-size:"+e.fontSize(16)+"px' class='yy-sv-cancel displayflex yy-jc-center yy-ai-center'>取消</div>");this.config.cancelBtnStyle&&e.css(p,this.config.cancelBtnStyle);var d=this.config.comKey+"_cancel",u=this.pageview.plugin[d];p.bind("click",function(){a._cancelSearch(),u&&u.call(a.pageview.plugin,a,{value:a.input.val()})});var f=this.config.comKey+"_search",g=this.pageview.plugin[f];this.input.bind("keydown",function(e){13===e.keyCode&&(a._cancelSearch(),a.input.blur(),g&&g.call(a.pageview.plugin,a,{value:a.input.val()}))}),this.searchBar.append(this.form).append(p),this.$el.append(this.searchBar)};return e.extends(i,t),i.prototype.inputChange=function(e){var t=this.input.val();""==t?this.clearBtn.addClass("displaynone"):this.clearBtn.removeClass("displaynone")},i.prototype._cancelSearch=function(){this.form.css({width:this.inputWidth+"px"}),this.clearBtn.addClass("displaynone"),this.searchBar[0].className=this.searchBarClassName+" yy-sv-defalut",this.defaultComyWrapper&&(this.defaultComyWrapper.removeClass("displaynone"),this.resultComWrapper&&this.resultComWrapper.addClass("displaynone"))},i.prototype._focus=function(){this.form.css({width:this.inputFocusWidth+"px"}),this.input.val().length>0&&this.clearBtn.removeClass("displaynone"),this.searchBar[0].className=this.searchBarClassName+" yy-sv-active",this.resultComWrapper&&(this.resultComWrapper.removeClass("displaynone"),this.defaultComyWrapper&&this.defaultComyWrapper.addClass("displaynone"))},i}),define("../../components/statusview",["utils","base"],function(e,t){var i=function(e){i.baseConstructor.call(this,e),this.$el.addClass("yy-statusview displayflex"),this.selectedKey=e.selectedKey||e.defaultKey,this.components={},this.change(this.selectedKey)};return e.extends(i,t),i.prototype.change=function(e){var t=this;t.curComponent&&t.curComponent.$el.addClass("displaynone");var i=t.components[e];return i?(i.$el.removeClass("displaynone"),void(t.curComponent=i)):void(e&&"null"!=e&&(this.curStatusKey=e,this.getComponentInstanceByComKey(e,this.datasource,this.rowInstance,function(i){t.components[e]=i,t.curComponent=i,e!==t.curStatusKey&&i.$el.addClass("displaynone"),t.$el.append(i.$el)},function(){})))},i}),define("../../components/swiper",["utils","base"],function(e,t){var i=function(e){this.config=e,this.$el=$("<div style='"+e.style+"' class='yy-swiper-item-wrapper'></div>")};i.prototype={css:function(t){e.css(this.$el,t)}};var a=function(t){this.config=t||{},this.$el=$("<div class='yy-swiper-wrapper flex-1'></div>"),this.itemWrappers=[],this.posArr=[0,1,2],this.limit=e.getRealWidth(90),this.minOffsetX=t.minOffsetX||0,this.tanKeys=e.getTransitionKeys(),this.initLayout(),this.direction="h",this.config.init&&this.config.init(this)};return a.prototype={_posArrGoNext:function(){var e=this.posArr[0];this.posArr[0]=this.posArr[1],this.posArr[1]=this.posArr[2],this.posArr[2]=e},_resetPosArr:function(){this.posArr=[0,1,2]},_posArrGoPre:function(){var e=this.posArr[2];this.posArr[2]=this.posArr[1],this.posArr[1]=this.posArr[0],this.posArr[0]=e},initLayout:function(){var t=this;this.initPos=[0-e.viewport.width,0,e.viewport.width];for(var a=0;a<3;a++){var n=this.tanKeys.transform+":translate3d("+this.initPos[a]+"px,0,0)",s=new i({style:n});this.itemWrappers.push(s),this.config.initItem&&this.config.initItem(s,a),this.$el.append(s.$el)}var r,o,l;t.isIntransition=!1,this.$el.bind("touchstart",function(e){l=t.isIntransition,t.isIntransition||(r=e.touches[0].pageX)}),this.$el.bind("touchmove",function(e){if(!t.isIntransition&&!l){var i=e.touches[0];o=i.pageX-r,"h"===t.direction&&Math.abs(o)>4&&(e.preventDefault(),e.stopPropagation()),t.setPos("move",o)}}),this.$el.bind("touchend",function(e){if(!t.isIntransition&&!l&&o&&0!=o){if(Math.abs(o)<t.limit)return t.setPos(),void(t.isIntransition=!1);o>0?t.goPre():t.goNext(),o=0}})},transitionEnd:function(e){this.isIntransition=!1},goPre:function(){if(this.config.beforeGoPre){var e=this.config.beforeGoPre();if(e===!1)return this.setPos(),void(this.isIntransition=!1)}var t=this;this.isIntransition=!0,this._posArrGoPre(),this.setPos("gopre"),this.config.onChange&&this.config.onChange({swiper:this,action:"gopre",itemWrapper:this.itemWrappers[this.posArr[0]]}),window.setTimeout(function(){t.transitionEnd("gopre")},280)},goNext:function(){if(this.config.beforeGoNext){var e=this.config.beforeGoNext();if(e===!1)return this.setPos(),void(this.isIntransition=!1)}var t=this;this.isIntransition=!0,this._posArrGoNext(),this.setPos("gonext"),this.config.onChange&&this.config.onChange({swiper:this,action:"gonext",itemWrapper:this.itemWrappers[this.posArr[2]]}),window.setTimeout(function(){t.transitionEnd("gonext")},280)},reset:function(){this._resetPosArr(),this.setPos("move",0)},getMidWrapper:function(){return this.itemWrappers[this.posArr[1]]},getPreWrapper:function(){return this.itemWrappers[this.posArr[0]]},getNextWrapper:function(){return this.itemWrappers[this.posArr[2]]},setPos:function(e,t){var i=this;t=t||0;for(var a=0;a<3;a++){var n=i.posArr[a],s=i.itemWrappers[n],r={};r[i.tanKeys.transition]="move"==e?"none":this.tanKeys.transform+" .35s ease","gopre"==e&&0==a&&(r[i.tanKeys.transition]="none"),"gonext"==e&&2==a&&(r[i.tanKeys.transition]="none"),r[i.tanKeys.transform]="translate3d("+(this.initPos[a]+t)+"px,0,0)",s.css(r)}}},a}),define("../../components/switch",["utils","base"],function(e,t){var i=function(t){var a=this;t.style=t.style||{};var n=e.getRealHeight(28),s=e.getRealWidth(48),r=t.style.height||n,o=t.style.width||s;this.height=isNaN(r)?n:parseInt(r),this.width=isNaN(o)?s:parseInt(o),t.style.height=this.height+"px",t.style.width=this.width+"px",t.style.borderRadius=this.height/2+"px";var l=this.height-2;this.switchPoint=$("<div class='yy-swith-pointer'></div>"),this.pointerStartStyle={top:"1px",left:"1px",right:this.width-l-1+"px",bottom:"1px"},this.pointerEndStyle={top:"1px",left:this.width-l-1+"px",right:"1px",bottom:"1px"},i.baseConstructor.call(this,t),this.value=this.config.value,this.switchPoint.appendTo(this.$el),this.$el.addClass("yy-swith"),this.setValue(this.value),this.$el.bind("click",function(){a.change()});var h=this.config.comKey+"_change";this.changeMethod=this.pageview.plugin[h]};return e.extends(i,t),i.prototype.change=function(){this.changeMethod&&this.changeMethod.call(this.pageview.plugin,this,{value:!this.value})},i.prototype.getValue=function(){return this.value},i.prototype.setValue=function(e){this.value=e,e?(this.switchPoint.css(this.pointerEndStyle),this.$el.addClass("yy-swith-selected")):(this.switchPoint.css(this.pointerStartStyle),this.$el.removeClass("yy-swith-selected"))},i}),define("../../components/tabbarview",["utils","base"],function(e,t){var i=function(t){var a=this;i.baseConstructor.call(this,t),this.tabPages={},this.$el.addClass("yy-tabbarview"),this.tabbarWrapper=$("<div class='yy-tabbar flex-h displayflex'></div>"),this.pageWrapper=$("<div class='yy-tabbbar-pages'></div>");var n=t.tabbarStyle;n&&e.css(this.tabbarWrapper,n),this.selectedItem=null,this.curPageInstance=null;var s=this.config.root.length,r=0;this.initLayout(this.datasource,function(e){e.$el.bind("click",function(){a._itemClick(e)}),r+=1,r==s&&a.tabdidmount(),a.tabbarWrapper.append(e.$el)}),this.$el.append(this.pageWrapper),this.tabbarWrapper.appendTo(this.$el)};return e.extends(i,t),i.prototype.tabdidmount=function(){var e=this.config.root[0],t=this.pageview.params.$$pn,i=t||e,a=this.components[i]||this.components[e];this._itemClick(a,!!t)},i.prototype._itemClick=function(e,t){var i=this;return this.selectedItem===e?void alert("点了又点"):(this.selectedItem&&this.selectedItem.unSelected(),this.selectedItem=e,this.selectedItem.selected(),this.curPageInstance&&this.curPageInstance.$el.css({left:"-100%"}),this.curPageInstance=this.tabPages[e.config.comKey],this.pageview.showLoadingProgressbar(),this.curPageInstance?(this.curPageInstance.$el.css({left:"0"}),this.pageview.hideLoadingProgressbar()):this.pageview.pageManager.getPageConfigByPageKey(e.config.comKey,function(t){i.curPageInstance=i.pageview.pageManager.createPageView(t),i.tabPages[e.config.comKey]=i.curPageInstance,i.pageWrapper.append(i.curPageInstance.$el),i.pageview.hideLoadingProgressbar()}),void this.pageview.pageManager.tabSeleced(e.config.comKey,t))},i}),define("../../components/text",["utils","base"],function(e,t){var i=function(t){t.style=t.style||{},t.numberofline&&(a=t.numberofline||1),i.baseConstructor.call(this,t);var a,n=this.$el[0].className;n.indexOf("yy-ai")>=0?this.$el.addClass("yy-text displayflex "):this.$el.addClass("yy-text displayflex yy-ai-center"),this.preText=this.config.preText||"",this.preTextDom=$("<span class='yy-pretext'>"+this.preText+"</span>"),this.config.preTextStyle&&e.css(this.preTextDom,this.config.preTextStyle),this.nextText=this.config.nextText||"",this.nextTextDom=$("<span class='yy-nexttext'>"+this.nextText+"</span>"),this.config.nextTextStyle&&e.css(this.nextTextDom,this.config.nextTextStyle),t.text=0===t.text?"0":t.text,this.innerText=$("<span class='yy-inner-text yy-text-box'>"+(t.text||"")+"</span>"),a&&(this.innerText[0].style["-webkit-line-clamp"]=a,this.innerText[0].style["word-break"]="break-all"),t.textStyle&&this.innerText.css(t.textStyle),this.$el.append(this.preTextDom).append(this.innerText).append(this.nextTextDom)};return e.extends(i,t),i.prototype.setText=function(e){this.innerText.html(e)},i.prototype.getText=function(){return this.innerText.html()},i.prototype.setPreText=function(e){this.preTextDom.html(e)},i.prototype.setNextText=function(e){this.nextTextDom.html(e)},i.prototype.hideLoading=function(){this.loadingDom&&this.loadingDom.addClass("displaynone")},i.prototype.showLoading=function(){this.loadingDom||(this.loadingDom=$("<div class='preloader yy-text-loading displaynone'></div>"),this.loadingDom.insertBefore(this.preTextDom)),this.loadingDom.removeClass("displaynone")},i}),define("../../components/textarea",["utils","base"],function(e,t){var i=function(t){var a=this;i.baseConstructor.call(this,t);var n=t.placeholder||"";this.input=$("<textarea placeholder='"+n+"'></textarea>"),this.max=this.config.max,(this.config.value||0===this.config.value)&&this.input.val(this.config.value),isNaN(this.max)?this.max=null:this.max=parseInt(this.max),this.$el.addClass("yy-textarea");var s={fontSize:this.config.style.fontSize||this.config.style["font-size"]||"15px",color:this.config.style.color||this.config.style.color||"black",backgroundColor:this.config.style.backgroundColor||this.config.style["background-color"]||"white"};if(this.input.css(s),this.input.bind("input",function(e){if(a.max){var t=a.input.val(),i=t.length;i>a.max&&(t=t.substring(0,a.max),i=a.max,a.input.val(t)),a.numDom.html(i)}}),this.max){this.limitDom=$("<span class='yy-textarea-limit'></span>"),this.numDom=$("<span>0</span>"),this.config.numStyle&&e.css(this.numDom,this.config.numStyle);var r=$("<span>/</span>"),o=$("<span>"+this.max+"</span>");this.config.maxStyle&&e.css(o,this.config.maxStyle),this.config.limitStyle&&e.css(this.limitDom,this.config.limitStyle),this.limitDom.append(this.numDom).append(r).append(o),this.$el.append(this.limitDom)}this.$el.append(this.input);var l=t.comKey+"_compositionend",h=a.pageview.plugin[l];h&&this.$el.on("input",function(e){a.$el.prop("comStart")||!a.disabled&&h&&h.call(a.pageview.plugin,a,{e:e})}).on("compositionstart",function(){a.$el.prop("comStart",!0)}).on("compositionend",function(e){a.$el.prop("comStart",!1),!a.disabled&&h&&h.call(a.pageview.plugin,a,{e:e})})};return e.extends(i,t),i.prototype.getValue=function(){return this.input.val()},i.prototype.setDisabled=function(e){this.disabled=e,this.disabled?(this.input.attr("disabled","disabled"),this.$el.addClass(this.disabledClassName)):(this.input.removeAttr("disabled"),this.$el.remove(this.disabledClassName))},i.prototype.setValue=function(e){if(this.max){var t=e.length;t>this.max&&(e=e.substring(this.max),t=this.max),this.numDom.html(t)}this.input.val(e)},i.prototype.blur=function(){this.input.blur()},i.prototype.focus=function(e){var t=this;t.input.focus()},i}),define("../../components/timepicker",["utils"],function(e){var t=function(e){var t=e.root.itemHeight;this.$el=$("<div style='height:"+t+"px' class='yy-tp-cell'>1</div>")},i=function(t){this.config=t,this.itemHeight=t.root.itemHeight,this.$el=$("<div class='yy-tp-column yy-flex-1'></div>"),this.innerWrapper=$("<div data-math='"+10*Math.random()+"' class='yy-tp-column-inner'></div>"),this.innerWrapper.appendTo(this.$el),this.tanKeys=e.getTransitionKeys(),this.initLayout(),this.diff=0,this.startPosY=0,this.posY=0,this.selectedIndex=0};i.prototype={initLayout:function(){for(var e=0;e<20;e++){var i=new t(this.config);this.innerWrapper.append(i.$el)}},touchStart:function(e){this.startPosY=e.touches[0].pageY,this.diff=0},touchMove:function(e){e.preventDefault(),e.stopPropagation();var t=e.touches[0];this.diff=t.pageY-this.startPosY,this.curY=this.posY+this.diff;var i={};i[this.tanKeys.transition]="none",i[this.tanKeys.transform]="translate3d(0,"+this.curY+"px,0)",this.innerWrapper.css(i)},touchEnd:function(){this.posY=this.curY,this.diff>0?console.log("向下"):console.log("向上")}};var a=function(t){var a=t.wrapper||$(document.body);this.$el=$("<div class='yy-tp-wrapper'></div>"),this.itemHeight=parseInt(e.getRealHeight(36));var n=4*this.itemHeight;this.body=$("<div style='height:"+n+"px' class='yy-tp-body displayflex yy-fd-row'></div>"),this.columns=[];for(var s=0;s<3;s++){var r=new i({root:this});this.columns.push(r),this.body.append(r.$el)}var o=$("<div style='height:"+this.itemHeight+"px;top:"+this.itemHeight+"px' class='yy-tp-indicator'></div>");this.body.append(o),this.$el.append(this.body),a.append(this.$el),this.initEvent()};return a.prototype={initEvent:function(){var t=this;this.body.bind("touchstart",function(i){t.curTouchColumnIndex=Math.floor(i.touches[0].pageX*t.columns.length/e.viewport.width),t.columns[t.curTouchColumnIndex].touchStart(i)}),this.body.bind("touchmove",function(e){t.columns[t.curTouchColumnIndex].touchMove(e)}),this.body.bind("touchend",function(){t.columns[t.curTouchColumnIndex].touchEnd()})}},a}),define("../../components/tip",["utils"],function(e){var t=function(e){var t=this;e=e||$(document.body),this.tipWrapper=$("<div class='yy-tip displayflex jc-center ai-center displaynone'></div>"),this.textDom=$('<div class="yy-tip-text displaynone"></div>'),this.backCover=$('<div class="yy-tip-backcover displaynone"></div>'),this.backCover.bind("click",function(){t.clickBackCover()}),this.tipWrapper.append(this.textDom),e.append(this.tipWrapper).append(this.backCover),this.hideTimeoutId=null};return t.prototype={show:function(t){var i=this;this.textPos=t.textPos||"bottom","left"==this.textPos||"right"==this.textPos?this.tipWrapper.addClass("flex-h"):this.tipWrapper.addClass("flex-v");var a=t.pos||"center";this.config=t,this.hideTimeoutId&&window.clearTimeout(this.hideTimeoutId),t=t||{};var n=t.style;n&&this.tipWrapper.css(e.processStyle(n)),this._setText(t.text,t.textStyle),this._setIcon(t.font,t.iconStyle),this.config.withoutBackCover||this.backCover.removeClass("displaynone"),this.startClass="yy-tip-ani-"+a+"-start",this.tipWrapper.removeClass("displaynone").addClass(this.startClass),window.setTimeout(function(){i.endClass="yy-tip-ani-"+a+"-end",i.tipWrapper.addClass(i.endClass)},3),t.duration&&!isNaN(t.duration)&&(this.hideTimeoutId=window.setTimeout(function(){i.hide()},parseInt(t.duration)))},_setText:function(t,i){t?(this.textDom.removeClass("displaynone"),i&&this.textDom.css(e.processStyle(i)),this.textDom.html(t)):this.textDom.addClass("displaynone")},_setIcon:function(t,i){this.iconDom&&this.iconDom.remove();var a,n;t=t||"";var s=t.split("_");2==s.length?(a=s[0],n=s[1],this.iconDom=$('<i class="yy-tip-icon displayflex jc-center ai-center yy-icon-code displaynone" data-icon="&#x'+n+';"></i>'),i&&this.iconDom.css(e.processStyle(i)),this.iconDom.removeClass("displaynone"),this.iconDom.css({"font-family":a}),"top"==this.textPos||"left"==this.textPos?this.iconDom.appendTo(this.tipWrapper):this.iconDom.insertBefore(this.textDom)):this.icomDom&&this.iconDom.addClass("displaynone")},clickBackCover:function(){this.config.clickNoHide||(this.hideTimeoutId&&window.clearTimeout(this.hideTimeoutId),this.hide())},hide:function(){var e=this;this.tipWrapper.removeClass(this.endClass),window.setTimeout(function(){e.tipWrapper.addClass("displaynone").removeClass(e.startClass),e.tipWrapper.remove(),e.backCover.remove()},300),e.backCover.addClass("displaynone")}},t}),define("../../components/view",["utils","base"],function(e,t){function i(){var e=window.navigator.userAgent,t=e.match(/(iPad|iPhone|iPod)\s+OS\s([\d_\.]+)/);return t&&t[2]&&parseInt(t[2].replace(/_/g,"."),10)>=6}function a(t){var i=this;this.isIOS=e.deviceInfo().isIOS,this.hasFixed=!1,this.isSticky=!1;var n="displayflex yy-view";t.style&&(!t.style.alignItems&&!t.style["align-items"],t.style.justifyContent||t.style["justify-content"]||(n+=" yy-jc-flex-start"),t.style.flexDirection||t.style["flex-direction"]||(n+=" yy-fd-column")),this.LoadMoreWrapper=$("<div style='height:"+e.getRealHeight(36)+"px' class='yy-loadmore-wrapper displayflex yy-jc-center yy-ai-center flex-h displaynone'></div>"),a.baseConstructor.call(this,t),this.stickyHeaderIndices=this.config.stickyHeaderIndices,i.isInLoading=!1,i.canRefresh=!1;var s=this.config.comKey+"_pulltorefresh",r=this.config.comKey+"_canpulltorefresh";this.pluginCanPullToRefreshMethod=this.pageview.plugin[r];var o=this.config.comKey+"_loadmore";this.pluginPullToRefreshMethod=this.pageview.plugin[s],this.pluginLoadMoreMethod=this.pageview.plugin[o];var l=this.config.comKey+"_reload";this.pluginLoadMoreErrorToReloadMethod=this.pageview.plugin[l],this.pluginPullToRefreshMethod&&(this.innerWrapper=$("<div class='yy-view-innerwrapper yy-fd-column"+n+"'></div>"),this.$el.css({zIndex:1}),this.$$childrenWrapper=this.innerWrapper,this._initLoadFirstErrorDom(),this._initPullToRefreshDom(),this.$el.append(this.innerWrapper)),this._initTouchEvent(),this.LoadMoreOffsetBottom=e.getRealHeight(120),this.$el.addClass(n),t.root=t.root||[],this.initLayout(t.$$datasource,null,this.rowInstance,function(){i.childInitOver()})}return e.extends(a,t),a.prototype.scrollTop=function(e){return e?void this.$el.scrollTop(e):this.$el.scrollTop()},a.prototype.hideLoadMore=function(){this.LoadMoreWrapper&&this.LoadMoreWrapper.addClass("displaynone")},a.prototype.showLoadMore=function(){this.LoadMoreWrapper&&this.LoadMoreWrapper.removeClass("displaynone")},a.prototype._initPullToRefreshDom=function(){var t=e.getRealHeight(40),i=e.getRealWidth(11),a=e.getRealWidth(15);this.pullLimitHeight=e.getRealHeight(40),this.pullToRefreshWrapper=$("<div style='height:"+t+"px;margin-top:-"+t+"px' class='yy-pull-wrapper'></div>"),this.pullMessWrapper=$("<div style='height:"+this.pullLimitHeight+"px' class='displayflex yy-jc-center yy-ai-center flex-h yy-pull-mes-wrapper'></div>"),this.pullArrowIcon=$("<i style='font-size:"+a+"px' class='yy-pull-arrow'></i>"),this.pullMesLabel=$("<span style='font-size:"+i+"px' class='yy-pull-meslabel'>下拉刷新</span>");var n=$("<div class='preloader yy-pull-loadingicon'></div>");this.pullMessWrapper.append(n).append(this.pullArrowIcon).append(this.pullMesLabel).appendTo(this.pullToRefreshWrapper),this.innerWrapper.append(this.pullToRefreshWrapper)},a.prototype._initLoadMoreDom=function(){var t=(e.getRealHeight(36),e.getRealWidth(11)),i=$("<div class='preloader yy-loadmore-loadingicon'></div>");this.loadMoreLabel=$("<span style='font-size:"+t+"px' class='yy-pull-meslabel'>正在加载</span>"),this.LoadMoreWrapper.append(i).append(this.loadMoreLabel),this.$el.append(this.LoadMoreWrapper)},a.prototype._initLoadMoreErrorDom=function(){var t=this,i=e.getRealHeight(42),a=e.getRealWidth(11),n=e.getRealWidth(15);this.LoadMoreErrorWrapper=$("<div style='height:"+i+"px' class='yy-loadmore-wrapper displayflex yy-jc-center yy-ai-center flex-h displaynone'></div>");var s=$("<i style='font-size:"+n+"px' class='yy-icommon yy-loadmore-erroricon'></i>");this.loadErrorLabel=$("<span style='font-size:"+a+"px' class='yy-pull-meslabel'>网络异常,点击</span>");var r=$("<span style='font-size:"+a+"px' class='yy-loadmore-reload-babel'>重新加载</span>");r.bind("click",function(){t.pluginLoadMoreErrorToReloadMethod&&t.pluginLoadMoreErrorToReloadMethod.call(t.pageview.plugin,t,{})}),this.LoadMoreErrorWrapper.append(s).append(this.loadErrorLabel).append(r),this.$el.append(this.LoadMoreErrorWrapper)},a.prototype._initLoadFirstErrorDom=function(){var t=e.getRealHeight(36),i=e.getRealWidth(11),a=e.getRealWidth(15);this.LoadFirstErrorWrapper=$("<div data-mark='loadfirsterror' style='height:"+t+"px' class='yy-loadfirsterror-wrapper displayflex yy-jc-center yy-ai-center flex-h displaynone'></div>");var n=$("<i style='font-size:"+a+"px' class='yy-icommon yy-loadmore-erroricon'></i>");this.loadFirstErrorLabel=$("<span style='font-size:"+i+"px' class='yy-pull-meslabel'>网络异常,尝试再次下拉刷新</span>"),this.LoadFirstErrorWrapper.append(n).append(this.loadFirstErrorLabel),this.$el.append(this.LoadFirstErrorWrapper)},a.prototype._initTouchEvent=function(){var t=this;if(this.pluginPullToRefreshMethod){var i,a=0;this.$el.bind("touchstart",function(e){if(t.config.onlyForSticky!==!0&&!t.isInLoading){t.isInLoading=!1,t.canRefresh=!1;var n=e.touches[0];a=n.pageY,i=t.$el.scrollTop()}}),this.$el.bind("touchmove",function(n){if(t.config.onlyForSticky!==!0&&!t.isInLoading){var s=n.touches[0],r=s.pageY,o=r-a;if(o>0){if(t.pluginCanPullToRefreshMethod){var l=t.pluginCanPullToRefreshMethod.call(t.pageview.plugin,t);if(l!==!0)return}var h=t.$el.scrollTop();if(h<=0){t.$el.css({overflow:"hidden"}),n.preventDefault(),n.stopPropagation();var c=o-i;c>4*t.pullLimitHeight?(t.pullMesLabel.html("释放更新"),t.pullToRefreshWrapper[0].className="yy-pull-wrapper yy-release-refresh",t.canRefresh=!0):(t.pullMesLabel.html("下拉刷新"),t.pullToRefreshWrapper[0].className="yy-pull-wrapper yy-push-refresh",t.canRefresh=!1),t.innerWrapper.css(e.processTransitionTanformStyle("none","translate3d(0,"+c/3+"px,0)"))}}}}),this.$el.bind("touchend",function(e){return t.config.onlyForSticky===!0?void t.resetPullLoadState():(t.config.noScroll===!0||t.$el.css({"overflow-y":"auto"}),void(t.isInLoading||(t.canRefresh?(t.setPullLoadingState(),t.pluginPullToRefreshMethod&&t.pluginPullToRefreshMethod.call(t.pageview.plugin,t,{})):t.resetPullLoadState())))})}},a.prototype.refreshStickyHeaderIndices=function(){var e=this;this.stickyHeaderIndicesComponent&&window.setTimeout(function(){e.navOffsetY=e.stickyHeaderIndicesComponent.$el[0].offsetTop},150)},a.prototype.childInitOver=function(){var e,t=this;this.stickyHeaderIndices&&(e=this.components[this.stickyHeaderIndices],this.stickyHeaderIndicesComponent=e,this.stickyHeaderIndicesIndex=e.$el.index()),this.pluginLoadMoreMethod&&(this._initLoadMoreDom(),this._initLoadMoreErrorDom(),this.scrollTimeId=null),null==e||this.pluginLoadMoreMethod?this.pluginLoadMoreMethod&&e?(this.stickyComHeight=e.$el.height(),this.isSupportSticky=i(),this.isSupportSticky?e.$el.addClass("sticky"):t.toFixedComponent(e),this.$el.bind("scroll",function(i){t.triggerLoadMore(),t.isSupportSticky||t.toFixedComponent(e)})):this.pluginLoadMoreMethod&&this.$el.bind("scroll",function(e){t.triggerLoadMore()}):(this.stickyComHeight=e.$el.height(),t.toFixedComponent(e),this.$el.bind("scroll",function(i){t.toFixedComponent(e)}))},a.prototype.toFixedComponent=function(e){this.clientRect||(this.clientRect=this.$el[0].getBoundingClientRect()),this.hasFixed||(this.navOffsetY=e.$el[0].offsetTop),this.$el.scrollTop()>this.navOffsetY+20?(this.hasFixed=!0,e.$el.addClass("fixed")):e.$el.removeClass("fixed")},a.prototype.triggerLoadMore=function(e){var t=this;t.scrollTimeId&&window.clearTimeout(t.scrollTimeId),t.scrollTimeId=window.setTimeout(function(){t._onScroll(e)},80)},a.prototype.setPullLoadingState=function(){var t=this;t.pullMesLabel&&(t.isInLoading=!0,t.LoadMoreErrorWrapper&&t.LoadMoreErrorWrapper.addClass("displaynone"),t.LoadFirstErrorWrapper.addClass("displaynone"),this.loadErrorWrapWhenNoPullRefrsh&&this.loadErrorWrapWhenNoPullRefrsh.addClass("displaynone"),t.pullMesLabel.html("正在加载"),t.pullToRefreshWrapper[0].className="yy-pull-wrapper yy-push-refreshing",t.innerWrapper.css(e.processTransitionTanformStyle("transform .2s ease","translate3d(0,"+t.pullLimitHeight+"px,0)")))},a.prototype.resetPullLoadState=function(){var t=this;t.pullMesLabel&&(t.isInLoading=!1,t.canRefresh=!1,t.pullMesLabel.html("下拉刷新"),t.pullToRefreshWrapper[0].className="yy-pull-wrapper yy-push-refresh",t.innerWrapper.css(e.processTransitionTanformStyle("transform .3s ease","translate3d(0,0,0)")))},a.prototype.setLoadFirstError=function(){var t=this;if(this.LoadFirstErrorWrapper)this.LoadFirstErrorWrapper.removeClass("displaynone");else{if(!this.loadErrorWrapWhenNoPullRefrsh){var i=e.getRealHeight(42),a=e.getRealWidth(11),n=e.getRealWidth(15);this.loadErrorWrapWhenNoPullRefrsh=$("<div style='height:"+i+"px' class='yy-loadmore-wrapper displayflex yy-jc-center yy-ai-center flex-h displaynone'></div>");var s=$("<i style='font-size:"+n+"px' class='yy-icommon yy-loadmore-erroricon'></i>");this.loadErrorLabelWhenNoPullRefrsh=$("<span style='font-size:"+a+"px' class='yy-pull-meslabel'>网络异常,点击</span>");var r=$("<span style='font-size:"+a+"px' class='yy-loadmore-reload-babel'>重新加载</span>");r.bind("click",function(){t.pluginLoadMoreErrorToReloadMethod&&t.pluginLoadMoreErrorToReloadMethod.call(t.pageview.plugin,t,{})}),this.loadErrorWrapWhenNoPullRefrsh.append(s).append(this.loadErrorLabelWhenNoPullRefrsh).append(r),this.$el.append(this.loadErrorWrapWhenNoPullRefrsh)}this.loadErrorWrapWhenNoPullRefrsh.removeClass("displaynone")}this.resetPullLoadState()},a.prototype.setCanLoadMore=function(e){this.loadMoreLabel&&(e&&e.isReload?this.canLoadMore=!1:this.canLoadMore=!0,this.loadMoreLabel.html("正在加载"),this.LoadMoreErrorWrapper.addClass("displaynone"),this.LoadFirstErrorWrapper&&this.LoadFirstErrorWrapper.addClass("displaynone"),this.loadErrorWrapWhenNoPullRefrsh&&this.loadErrorWrapWhenNoPullRefrsh.addClass("displaynone"),
this.LoadMoreWrapper.removeClass("displaynone yy-loaddone"))},a.prototype.setHasLoadDone=function(){this.loadMoreLabel&&(this.canLoadMore=!1,this.loadMoreLabel.html("已显示所有数据"),this.LoadFirstErrorWrapper&&this.LoadFirstErrorWrapper.addClass("displaynone"),this.loadErrorWrapWhenNoPullRefrsh&&this.loadErrorWrapWhenNoPullRefrsh.addClass("displaynone"),this.LoadMoreErrorWrapper.addClass("displaynone"),this.LoadMoreWrapper.addClass("yy-loaddone").removeClass("displaynone"))},a.prototype.setHasLoadDone1=function(){var e=this;e.pullToRefreshWrapper[0].className="yy-pull-wrapper"},a.prototype.setInitLoadMessage=function(){this.loadMoreLabel&&(this.LoadFirstErrorWrapper&&this.LoadFirstErrorWrapper.addClass("displaynone"),this.loadErrorWrapWhenNoPullRefrsh&&this.loadErrorWrapWhenNoPullRefrsh.addClass("displaynone"),this.LoadMoreErrorWrapper.addClass("displaynone"),this.LoadMoreWrapper.addClass("yy-loaddone displaynone"))},a.prototype.setLoadMoreErrorState=function(){this.canLoadMore=!1,this.resetPullLoadState(),this.LoadMoreWrapper.addClass("displaynone"),this.LoadMoreErrorWrapper.removeClass("displaynone"),this.scrollToBottom()},a.prototype.scrollToBottom=function(){this.$el.scrollTop(this.$el[0].scrollHeight)},a.prototype._onScroll=function(e){this.canLoadMore&&this.$el[0].offsetHeight+this.$el.scrollTop()+this.LoadMoreOffsetBottom>=this.$el[0].scrollHeight&&(this.canLoadMore=!1,this.pluginLoadMoreMethod.call(this.pageview.plugin,this,{}))},a}),define("../../components/viewpager",["utils","base"],function(e,t){function i(e){var t=this;i.baseConstructor.call(this,e),this.autoHeight=e.autoHeight,this.$el.addClass("yy-viewpager"),this.autoHeight&&this.$el.addClass("yy-autoheight-viewpager"),this.height=0,this.items={},this.paramsDict={};var a=e.defaultKey;a||console.error("viewpager控件为提供defalutKey属性"),this.curPageViewItem=null,this._getViewPagerItem(a,this.config.params||{},function(e){t.curPageViewItem=e},function(){})}var a=function(e){a.baseConstructor.call(this,e),this.$el.addClass("displayflex yy-viewpager-item"),this.contentInstance=e.contentInstance,this.$el.append(e.contentInstance.$el)};return e.extends(a,t),a.prototype.hide=function(){e.css(this.$el,{display:"none"})},a.prototype.show=function(){e.css(this.$el,{display:"block"})},e.extends(i,t),i.prototype._createViewPagerItem=function(e,t,i,n){var s=new a({type:"viewpageritem",contentType:t,contentInstance:i,$$pageview:this.pageview,$$datasource:this.datasource,$$parent:this});this.items[e]=s,this.$el.append(s.$el),n(s)},i.prototype.showItem=function(e,t){var i=this;this.paramsDict[e]=t,this._getViewPagerItem(e,t,function(e){i.curPageViewItem&&(i.curPageViewItem.contentInstance.plugin.onHideItem&&i.curPageViewItem.contentInstance.plugin.onHideItem(i,t),i.curPageViewItem.hide()),i.curPageViewItem=e,i.curPageViewItem.contentInstance.plugin.onShowItem&&i.curPageViewItem.contentInstance.plugin.onShowItem(i,t),i.curPageViewItem.show()},function(){})},i.prototype._getViewPagerItem=function(e,t,i,a){var n=this,s=this.items[e];if(s){if(s.contentInstance.plugin){s.contentInstance.viewpagerParams=t;var r=s.contentInstance.plugin.onPageResume;r&&r.call(s.contentInstance.plugin,s.contentInstance,{})}return void i(s)}var o=e.split("_")[0];this.pageview.config.components[o];this.pageview.pageManager.getPageConfigByPageKey(o,function(a){a.viewpagerParams=t,a.viewpager=n,a.fullPageKey=e;var s=n.pageview.pageManager.createPageView(a);n._createViewPagerItem(e,"pageview",s,i)},function(){a&&a()})},i}),define("components/dayview",["utils","base"],function(e,t){function i(e,t){e.$el.find(".sec-column").empty(),this.count=0,t.forEach(function(e){(e.endTime-e.startTime)/1e3/60/60>=24&&(e.wholeDay=1)}),n(e,t);var i=t.filter(function(e){return 1===e.wholeDay});e.dialog?e.dialog.$el.remove():"",i.length>0&&(e.dialog=new l(i),e.$el.prepend(e.dialog.$el))}function a(e){var t="";return t+=2===e.role?"background:#fff9e2;border-left:1px solid#FFCF0E":"background:#e7f6ff;border-left:1px solid #37B7FD"}function n(e,t){var i,a=[],o=[],l=t.filter(function(e){return 0===e.wholeDay});l.forEach(function(t,n){if(0==n)i=s(e),r(i,t),a.push(t);else{for(var l=!0,h=0;h<a.length;h++)if(Number(t.startTime)<=Number(a[h].endTime)&&Number(t.endTime)>=Number(a[h].startTime)){o.push(t),l=!1;break}l&&(r(i,t),a.push(t))}}),e.count++,o.length>0&&e.count<20&&n(e,o)}function s(e){var t=960;return e.wraper=$("<div class='column' style='height:"+t+"px'></div>"),e.$el.find(".sec-column").append(e.wraper),e.wraper}function r(e,t){var i,n=20,s=960,r=new Date(t.startTime),o=new Date(r.getFullYear(),r.getMonth(),r.getDate(),0,0,1).getTime(),l=(t.startTime-o)/864e5,h=(t.endTime-t.startTime)/864e5;i=h*s>20?"<div class='row' id='"+t.id+"' style='padding-left:6px;padding-right:6px;width: 100%;color:#333333;font-size:12px;word-break:break-all; overflow:hidden;text-overflow:ellipsis;position: absolute;display:inline-block;text-align:center;height: "+h*s+"px;"+a(t)+";top:"+(l*s+n)+"px'><p>"+t.title+"</p></div>":"<div class='row' id='"+t.id+"' style='padding-left:6px;padding-right:6px;width: 100%;color:#333333;font-size:12px;word-break:break-all; overflow:hidden;text-overflow:ellipsis;position: absolute;display:inline-block;text-align:center;height: "+h*s+"px;"+a(t)+";top:"+(l*s+n)+"px'><p></p></div>",e.append(i)}var o={list:[]},l=function(t){var i=t,a="";i.forEach(function(t){var i="background:#37B7FD;      margin: 5px 0px;  overflow: hidden;text-overflow: ellipsis;border-radius:2px;white-space: nowrap;width: "+e.getRealWidth(323)+"px;";a+='<div id="'+t.id+'" style="'+i+'">'+t.title+"</div>"});var n='<div class="dv-dialog-wrap" style="height: '+e.getRealHeight(73)+'px;    box-shadow: #4e4e4e 0px 0px 8px;margin-bottom: 8px;"><div>全天</div><div>'+a+"</div></div> ";this.$el=$(n)},h=function(e){var t=this;this.count=0,h.baseConstructor.call(this,e);for(var a="",n=0;n<=24;n++)a+='<div class="time-cell"> '+n+"时 </div>";this.firstColumn='<div class="first-column" >'+a+"</div>",this.secColumn='<div class="sec-column" ></div>',this.$el.html('<div class="dayview">'+this.firstColumn+this.secColumn+"</div>"),i(this,o.list);var s=this.config.comKey+"_itemclick";this.itemClickNameMethod=this.pageview.plugin[s],this.$el.delegate(".row","click",function(e){var i=$(e.currentTarget).attr("id");t.itemClickNameMethod&&t.itemClickNameMethod.call(t.pageview.plugin,t,i)}),this.$el.delegate(".dv-dialog-wrap div[id]","click",function(e){var i=$(e.currentTarget).attr("id");t.itemClickNameMethod&&t.itemClickNameMethod.call(t.pageview.plugin,t,i)}),this.loadData=i};return e.extends(h,t),h}),define("components/dialog",["utils","base"],function(e,t){var i=function(t){var i=this,a=t.wrapper||$(document.body),n=t.mode||1;this.dialogBackCover=$("<div style='visibility: hidden;' class='yy-dialog-bk'></div>"),this.dialogWrapper=$("<div class='yy-dialog-wrapper yy-dialog-effect-"+n+" yy-dialog-hide' style='width: 100%'></div>");var s=$("<div class='yy-dialog-inner'></div>"),r=$("<div class='yy-dialog-body'></div>"),o="row"===t.btnDirection?"yy-fd-row":"yy-fd-column",l=$("<div class='yy-dialog-btn-wrapper displayflex "+o+"'></div>");this.dialogBackCover.bind("click",function(){i.hide()});var h=t.title||"";if(this.bodyContentDom=$("<div class='yy-dialog-content' style='padding:16px'><textarea style='font-size:16px;width: 100%;height: 225px;    border: none;outline: none;resize: none;'></textarea></div><div style='width: 100%;height: 1px;margin-left:16px;background: #EEEEEE'></div><div class='js-selecter' style='height: 50px'><div style='display: inline-block;text-align: right;line-height: 50px'>选择清单</div><div style='display: inline-block;text-align: right;line-height: 50px'>长安项目</div></div>"),r.append(this.bodyContentDom),t.buttons)for(var c=0,p=t.buttons.length;c<p;c++){var d=t.buttons[c],h=d.title||"按钮",u=d.style,f=d.onClick;!function(t,i,a,n,s){var r=$("<div class='yy-dialog-btn yy-flex-1 displayflex yy-jc-center yy-ai-center'>"+t+"</div>");i&&e.css(r,i),n&&r.bind("click",function(e){n()}),a.append(r)}(h,u,l,f,this)}s.append(r).append(l),this.dialogWrapper.append(s),a.append(this.dialogWrapper).append(this.dialogBackCover)};return i.prototype.show=function(){var e=this;this.dialogWrapper.css({visibility:"visible"}),this.dialogBackCover.css({visibility:"visible"}),this.dialogBackCover.addClass("yy-dialog-bk-show"),window.setTimeout(function(){e.dialogWrapper.removeClass("yy-dialog-hide").addClass("yy-dialog-show")},1)},i.prototype.hide=function(){var e=this;this.dialogWrapper.removeClass("yy-dialog-show").addClass("yy-dialog-hide"),this.dialogBackCover.removeClass("yy-dialog-bk-show"),window.setTimeout(function(){e.dialogWrapper.css({visibility:"hidden"}),e.dialogBackCover.css({visibility:"hidden"})},200)},i}),define("components/schedulecalendar",["utils","base","swiper"],function(e,t,i){function a(t,i){return t=e.convertToDate(t),new Date(t.setDate(t.getDate()+i))}function n(t){t=new Date(t.getTime());var i=a(t,0-e.getDateWhichDayInWeek(t)-7);return i}function s(t){t=new Date(t.getTime());var i=a(t,0-e.getDateWhichDayInWeek(t)+7);return i}function r(t){t=new Date(t.getTime());for(var i=a(t,0-e.getDateWhichDayInWeek(t)),n={preweek:[],curweek:[],nextweek:[]},s=i,r=1;r<=7;r++)r>1&&(s=a(s,1)),l(n,"curweek",s);return n.curweek}function o(t){t=new Date(t.getTime());for(var i=a(t,0-e.getDateWhichDayInWeek(t)-7),n={preweek:[],curweek:[],nextweek:[]},s=i,r=1;r<=7;r++)r>1&&(s=a(s,1)),l(n,"preweek",s);for(var o=1;o<=7;o++)s=a(s,1),l(n,"curweek",s);for(var h=1;h<=7;h++)s=a(s,1),l(n,"nextweek",s);return n}function l(t,i,a){var n=new Date(a.getTime()),s=e.getDateInfo(a),r={date:n,dateStr:e.ConvertDateToStr(a),year:s.year,month:s.month,day:s.day};t[i].push(r)}function h(t,i,a,n){var s=this;s.dateInfo=t,this.calendar=n,this.$el=$("<div date-seed='"+t.dateStr+"' date-mark='"+t.mark+"' date-day='"+t.day+"'  date-month='"+t.month+"' date-year='"+t.year+"' class='wc-calendar-day-item displayflex jc-center ai-center wc-calendar-day-item-"+t.mark+"'></div>");var r=e.ConvertDateToStr(n.selectedTime)==s.dateInfo.dateStr;r&&(this.calendar.selectedItem=this),this.dayLabel=$("<div style='font-size:"+e.fontSize12()+"px;width:"+a+"px;height:"+a+"px;line-height:"+(a-6)+"px' class='wc-calendar-day'>"+t.day+"</div>"),r&&this.selected(),this.$el.append(this.dayLabel),e.css(this.$el,i)}function c(t,i,a,n){var s=this;s.dateInfo=t,this.weekCalendar=n,this.$el=$("<div date-seed='"+t.dateStr+"' date-mark='"+t.mark+"' date-day='"+t.day+"'  date-month='"+t.month+"' date-year='"+t.year+"' class='wc-calendar-day-item displayflex jc-center ai-center'></div>");var r=e.ConvertDateToStr(this.weekCalendar.selectedTime)==s.dateInfo.dateStr;this.dayLabel=$("<div style='font-size:"+e.fontSize12()+"px;width:"+a+"px;height:"+a+"px;line-height:"+(a-6)+"px' class='wc-calendar-day'>"+t.day+"</div>"),r&&this.selected(),this.$el.append(this.dayLabel),e.css(this.$el,i)}function p(t){this.rootInstance=t.rootInstance;var i=t.labelBarHeight+t.itemHeight;this.$el=$("<div  style='top:"+t.top+"px;height:"+i+"px' class='wc-week-calendar displayflex flex-v displaynone'></div>");var a=e.getRealWidth(13),n="style='line-height:"+t.labelBarHeight+"px;font-size:"+a+"px'",s=$("<div style='height:"+t.labelBarHeight+"px' class='wc-calendar-bar'><div "+n+" class='yy-c-bar-item'>日</div><div "+n+" class='yy-c-bar-item'>一</div><div "+n+" class='yy-c-bar-item'>二</div><div "+n+" class='yy-c-bar-item'>三</div><div "+n+" class='yy-c-bar-item'>四</div><div "+n+" class='yy-c-bar-item'>五</div><div "+n+" class='yy-c-bar-item'>六</div></div>");this.$el.append(s),this.createWeekSwip(t)}function d(t){this.config=t,this.curDate=null,this.weekCalendar=t.calendar,this.itemWrapper=t.itemWrapper,this.dayInnerWidth=e.getRealWidth(36),this.weekRange={start:"",end:""},this.range={start:"",end:""},this.monthArr=[]}function u(t){this.config=t,this.itemWrapper=t.itemWrapper,this.calendar=t.calendar,this.SumDay=42,this.dayInnerWidth=e.getRealWidth(34),this.dayItems={},this.monthArr=[],this.range={start:"",end:""}}function f(t){var i=[],a=e.getMonthDayCount(t),n=e.getDateInfo(t),s=e.getMonthFirstDayWhicDayInWeek(t),r=42-s-a;if(s>0)for(var o=e.getPreMonth(t),l=e.getMonthDayCount(o),h=e.getDateInfo(o),c=0;c<s;c++){var p=l-s+c+1,d=new Date(h.year,h.month-1,p);i.push({date:d,dateStr:e.ConvertDateToStr(d),year:h.year,month:h.month,day:p,mark:"premonth"})}for(var c=1;c<=a;c++){var d=new Date(n.year,n.month-1,c);i.push({date:d,dateStr:e.ConvertDateToStr(d),year:n.year,month:n.month,day:c,mark:"curmonth"})}if(r>0)for(var u=e.getNextMonth(t),f=e.getDateInfo(u),c=1;c<=r;c++){var d=new Date(f.year,f.month-1,c);i.push({date:d,dateStr:e.ConvertDateToStr(d),year:f.year,month:f.month,day:c,mark:"nextmonth"})}return i}h.prototype={selected:function(){this.$el.addClass("wc-calendar-day-selected")},unSelected:function(){this.$el.removeClass("wc-calendar-day-selected")}},c.prototype={selected:function(){this.$el.addClass("wc-calendar-day-selected")},unSelected:function(){this.$el.removeClass("wc-calendar-day-selected")}},p.prototype={initLayout:function(e){e=new Date(e.getTime()),this.curDate=new Date(e.getTime()),this.selectedTime=e;var t=o(e);this.Swiper.reset(),this.Swiper.itemWrappers[0].weekCreator.createLaytout(t.preweek),this.Swiper.itemWrappers[1].weekCreator.createLaytout(t.curweek),this.Swiper.itemWrappers[2].weekCreator.createLaytout(t.nextweek)},createWeekSwip:function(e){var t=this;new i({onChange:function(e){if("gopre"==e.action){var i=n(t.curDate),a=n(i);t.curDate=i,e.itemWrapper.weekCreator.createLaytoutByDate(a)}else if("gonext"==e.action){var i=s(t.curDate),r=s(i);t.curDate=i,e.itemWrapper.weekCreator.createLaytoutByDate(r)}t.rootInstance.slideChangeMethod&&t.rootInstance.slideChangeMethod.call(t.rootInstance.pageview.plugin,t.rootInstance,{mode:"week",swiper:t.Swiper})},beforeGoNext:function(){},initItem:function(i,a){i.weekCreator=new d({calendar:t,itemWrapper:i,itemHeight:e.itemHeight})},init:function(e){t.Swiper=e}}),this.Swiper.$el.bind("click",function(e){for(var i=e.target,a=i.getAttribute("date-seed");null==a&&(i=i.parentNode,!(a=i.getAttribute("date-seed")))&&"BODY"!=i.tagName.toUpperCase(););t.setDateSelected(a,i)}),this.$el.append(this.Swiper.$el)},setDateSelected:function(t,i){this.rootInstance.itemClickMethod&&this.rootInstance.itemClickMethod.call(this.rootInstance.pageview.plugin,this.rootInstance,{from:"week",dateStr:t});var t=e.convertToDate(t),a=(t.getFullYear(),e.ConvertDateToStr(t));this.rootInstance.DayItemSelected({from:"week",date:t,dateStr:a}),this.selectedTime=t;for(var n=0;n<3;n++){var s=this.Swiper.itemWrappers[n].weekCreator;for(var r in s.dayItems){var o=s.dayItems[r];o.dateInfo.dateStr==a?o.selected():o.unSelected()}}}},d.prototype={createLaytoutByDate:function(e){e=new Date(e.getTime());var t=r(e);this.createLaytout(t)},createLaytout:function(t){if(t){this.monthArr=[],this.dayItems={};this.itemWrapper.$el.empty();for(var i=$("<div></div>"),a={height:this.config.itemHeight+"px","font-size":e.getRealWidth(14)+"px"},n=0,s=t.length;n<s;n++){var r=t[n];0==n&&(this.weekRange.start=r.dateStr),n==r.length-1&&(this.weekRange.end=r.dateStr);var o=new c(r,a,this.dayInnerWidth,this.weekCalendar);this.dayItems[r.dateStr]=o,i.append(o.$el)}this.itemWrapper.$el.append(i);for(var l=f(this.weekRange.start),h=0,p=l.length;h<p;h++){var d=l[h];0===h&&(this.range.start=d.dateStr),h===p-1&&(this.range.end=d.dateStr),this.monthArr.push(d.dateStr)}}}},u.prototype={createLaytout:function(t){this.dayItems={},this.monthArr=[],this.date=e.convertToDate(t),this.itemWrapper.$el.empty();for(var i=this.getDaysArr(),a={height:this.config.itemHeight+"px","font-size":e.getRealWidth(14)+"px"},n=document.createDocumentFragment(),s=0;s<this.SumDay;s++){var r=i[s];0===s&&(this.range.start=r.dateStr),s===this.SumDay-1&&(this.range.end=r.dateStr);var o=new h(r,a,this.dayInnerWidth,this.calendar);this.dayItems[r.dateStr]=o,this.monthArr.push(r.dateStr),n.appendChild(o.$el[0])}this.itemWrapper.$el[0].appendChild(n)},getDaysArr:function(){return f(this.date)}};var g=function(t){var i=this;g.baseConstructor.call(this,t),this.$el.addClass("wc-calendar-wrapper displayflex flex-1 flex-v yy-ai-center");var a=this.config.itemHeight;isNaN(a)&&(a=40),this.canChangeMode=!0,this.curDate=t.date||new Date,this.selectedTime=new Date(e.convertToDate(this.curDate).getTime()),a=parseInt(a),this.itemHeight=e.getRealHeight(a);var n=t.comKey+"_change";this.pageview&&this.pageview.plugin&&(this.pluginChangeMethod=this.pageview.plugin[n]);var s=t.comKey+"_calendarTouchChange";this.pageview&&this.pageview.plugin&&(this.CanlendarTouchChangeMethod=this.pageview.plugin[s]);var r=t.comKey+"_preventDefault";this.preventDefaultMethod=this.pageview.plugin[r],this.labelBarHeight=e.getRealHeight(27),this.innerWrapperTop=e.getRealHeight(12);var o=6*this.itemHeight+this.labelBarHeight+this.innerWrapperTop+e.getRealHeight(10);this.innerWrapper=$("<div style='height:"+o+"px;width:100%' class='wc-calendar-inner'></div>"),this.bindInnerWrapEvent(),this.innerWrapperHeight=o,this.weekWrapperHeight=this.itemHeight+this.labelBarHeight+this.innerWrapperTop,this.bottomArea=new y({type:"bottomarea",root:this.config.root,style:this.config.bottomStyle,$$pageview:this.pageview,$$parent:this});var l=this.config.isShowYearAndMonthPicker||!0;if(l){var h=e.getRealHeight(2),c=e.getRealHeight(0);this.yearAndMonthPickerHeight=e.getRealHeight(30),o+=this.yearAndMonthPickerHeight+h+c,this.initYearAndMonthPicker(this.yearAndMonthPickerHeight,o,h,c)}this.wrapperHeight=o,this.mode=t.mode||"年月日",this.curShow="day",i.createDayWraper(),this.$el.append(this.innerWrapper).append(this.bottomArea.$el);var p=this.config.comKey+"_slidechange";this.slideChangeMethod=this.pageview.plugin[p];var d=this.config.comKey+"_modechange";this.modeChangeMethod=this.pageview.plugin[d];var u=this.config.comKey+"_itemclick";this.itemClickMethod=this.pageview.plugin[u];var f=this.config.comKey+"_pulldown";this.pullDownMethod=this.pageview.plugin[f]};e.extends(g,t),g.prototype.bindInnerWrapEvent=function(){var e=this,t=0,i=0;this.innerWrapper.bind("touchstart",function(e){t=0,i=e.touches[0].pageY}),this.innerWrapper.bind("touchmove",function(e){e.preventDefault();var a=e.touches[0].pageY;t=a-i}),this.innerWrapper.bind("touchend",function(i){t>3&&e.CanlendarTouchChangeMethod&&e.CanlendarTouchChangeMethod.call(e.pageview.plugin,e,{diff:t}),t<-3&&e.CanlendarTouchChangeMethod&&e.CanlendarTouchChangeMethod.call(e.pageview.plugin,e,{diff:t})})},g.prototype.setDateSelected=function(t,i){var t=e.convertToDate(t),a=(t.getFullYear(),e.ConvertDateToStr(t));this.curDate=t,this.selectedTime=t;for(var n=0;n<3;n++){var s=this.Swiper.itemWrappers[n].daysCreator;for(var r in s.dayItems){var o=s.dayItems[r];o.dateInfo.dateStr==a?o.selected():o.unSelected()}}if(i){var l=i.getAttribute("date-mark");"premonth"==l?this.goPre():"nextmonth"==l&&this.goNext()}},g.prototype.createDayWraper=function(){var t=this;new i({onChange:function(i){if("gopre"==i.action){var a=e.getPreMonth(t.curDate),n=e.getPreMonth(a);t.curDate=e.getCurMonthFirstDay(a),t.triggerChange(),i.itemWrapper.daysCreator.createLaytout(n)}else if("gonext"==i.action){var a=e.getNextMonth(t.curDate),s=e.getNextMonth(a);t.curDate=e.getCurMonthFirstDay(a),t.triggerChange(),i.itemWrapper.daysCreator.createLaytout(s)}t.slideChangeMethod&&t.slideChangeMethod.call(t.pageview.plugin,t,{mode:"day",swiper:t.Swiper})},beforeGoNext:function(){},initItem:function(e,i){e.daysCreator=new u({calendar:t,itemWrapper:e,itemHeight:t.itemHeight})},init:function(e){t.Swiper=e}});var a=e.getRealWidth(13),n="style='line-height:"+this.labelBarHeight+"px;font-size:"+a+"px'",s=$("<div style='height:"+this.labelBarHeight+"px' class='wc-calendar-bar'><div "+n+" class='yy-c-bar-item'>日</div><div "+n+" class='yy-c-bar-item'>一</div><div "+n+" class='yy-c-bar-item'>二</div><div "+n+" class='yy-c-bar-item'>三</div><div "+n+" class='yy-c-bar-item'>四</div><div "+n+" class='yy-c-bar-item'>五</div><div "+n+" class='yy-c-bar-item'>六</div></div>");this.dayWrapper=$("<div style='top:"+this.innerWrapperTop+"px' class='wc-calendar-ymd-wrapper displayflex flex-v'></div>"),this.dayWrapper.append(s).append(this.Swiper.$el),this.Swiper.$el.bind("click",function(e){for(var i=e.target,a=i.getAttribute("date-seed");null==a&&(i=i.parentNode,!(a=i.getAttribute("date-seed")))&&"BODY"!=i.tagName.toUpperCase(););t.itemClickMethod&&t.itemClickMethod.call(t.pageview.plugin,t,{from:"day",dateStr:a}),t.setDateSelected(a,i)}),this.innerWrapper.append(this.dayWrapper),this.weekCalendar=new p({rootInstance:this,top:this.innerWrapperTop,labelBarHeight:this.labelBarHeight,itemHeight:this.itemHeight}),this.innerWrapper.append(this.dayWrapper).append(this.weekCalendar.$el),this.show()},g.prototype.DayItemSelected=function(e){},g.prototype.DaysModeToWeekMode=function(){if("week"!==this.curShow){this.curShow="week",this.SwicthWapper.css({height:"0px",visibility:"hidden"});var e=this;this.innerWrapper.css({height:this.weekWrapperHeight}),e.weekCalendar.initLayout(this.selectedTime),window.setTimeout(function(){e.dayWrapper.css({display:"none"}),e.weekCalendar.$el.removeClass("displaynone")},300),this.modeChangeMethod&&this.modeChangeMethod.call(this.pageview.plugin,this,{curmode:"week"})}},g.prototype.WeekModeToDaysMode=function(){if("day"!==this.curShow){var e=this;this.curShow="day",this.SwicthWapper.css({height:this.yearAndMonthPickerHeight+"px",visibility:"hidden"}),this.weekCalendar.$el.addClass("displaynone"),this.dayWrapper.css({display:"block"}),this.innerWrapper.css({height:this.innerWrapperHeight}),this.show(this.weekCalendar.selectedTime),this.setDateSelected(this.weekCalendar.selectedTime),window.setTimeout(function(){e.SwicthWapper.css({visibility:"visible"})},320),this.modeChangeMethod&&this.modeChangeMethod.call(this.pageview.plugin,this,{curmode:"day"})}},g.prototype.initYearAndMonthPicker=function(t,i,a,n){var s=e.getRealWidth(18),r=e.getRealWidth(2),o=this;this.SwicthWapper=$("<div style='top:"+r+"px;height:"+t+"px;margin-bottom:"+n+"px;margin-top:"+a+"px;border-radius:"+(t/2+4)+"px' class='wc-calendar-ym-picker displayflex flex-h'></div>"),this.monthLeftIcon=$("<div class='wc-calendar-picker-lefticon' style='width:"+t+"px;height:"+t+"px;line-height:"+t+"px'></div>"),this.monthLeftIcon.bind("click",function(){o.goPre()}),this.monthLabel=$("<div style='font-size:"+s+"px' class='wc-calendar-picker-label displayflex ai-center jc-center flex-1'>2013</div>"),this.monthRightIcon=$("<div class='wc-calendar-picker-righticon' style='width:"+t+"px;height:"+t+"px;line-height:"+t+"px'></div>"),this.monthRightIcon.bind("click",function(){o.goNext()}),this.SwicthWapper.append(this.monthLeftIcon).append(this.monthLabel).append(this.monthRightIcon),this.$el.append(this.SwicthWapper)},g.prototype.show=function(t,i){t=t||this.curDate||new Date,this.curDate=e.convertToDate(t),this.Swiper.reset();var a=e.getPreMonth(this.curDate);this.Swiper.itemWrappers[0].daysCreator.createLaytout(a),this.Swiper.itemWrappers[1].daysCreator.createLaytout(this.curDate);var n=e.getNextMonth(this.curDate);this.Swiper.itemWrappers[2].daysCreator.createLaytout(n),i||this.triggerChange()},g.prototype.triggerChange=function(){var t=e.getDateInfo(this.curDate);this.monthLabel.html(t.year+"年"+t.monthStr+"月"),this.pluginChangeMethod&&this.pluginChangeMethod.call(this.pageview.plugin,this,{})},g.prototype.goPre=function(){this.Swiper.goPre()},g.prototype.goNext=function(){this.Swiper.goNext()},g.prototype.setValue=function(t){t=t||new Date,t=e.convertToDate(t),this.selectedTime=t,"day"===this.curShow?this.goTo(t):"week"===this.curShow&&this.gotoInWeekMode(t)},g.prototype.gotoInWeekMode=function(e){this.weekCalendar.initLayout(e)},g.prototype.goTo=function(t){var i=this;if(t=t||new Date,t=e.convertToDate(t),e.ConvertDateToStr(this.curDate)!=e.ConvertDateToStr(t)){if(e.ConvertDateToStr(this.curDate,"yyyy-MM")==e.ConvertDateToStr(t,"yyyy-MM"))return void this.setDateSelected(t);this.curDate=t,this.curDate>t?(this.show(e.getNextMonth(t),!0),window.setTimeout(function(){i.goPre()},0)):(this.show(e.getPreMonth(t),!0),window.setTimeout(function(){i.goNext()},0))}};var y=function(e){y.baseConstructor.call(this,e),this.$el.addClass("wc-bottom-wrapper flex-1 displayflex flex-v"),this.initLayout(e.$$datasource,null,null)};return e.extends(y,t),g}),define("parts/common",["utils"],function(e){var t="#37B7FD",i="#333333",a="#999999",n="#666666",s="#f2f4f4",r="#37B7FD",o={descColor:n,backColor:s,mainColor:t,seTitleColor:a,labelColor:"#666666",titleColor:i,HeadColor:r};return o}),define("logic/../../../components/dialog",["utils","base"],function(e,t){var i=function(t){var i=this,a=t.wrapper||$(document.body),n=t.mode||1;this.dialogBackCover=$("<div style='visibility: hidden;' class='yy-dialog-bk'></div>"),this.dialogWrapper=$("<div class='yy-dialog-wrapper yy-dialog-effect-"+n+" yy-dialog-hide'></div>");var s=$("<div class='yy-dialog-inner'></div>"),r=$("<div class='yy-dialog-body'></div>"),o="row"===t.btnDirection?"yy-fd-row":"yy-fd-column",l=$("<div class='yy-dialog-btn-wrapper displayflex "+o+"'></div>");this.dialogBackCover.bind("click",function(){i.hide()});var h=t.title||"";this.titleDom=$("<div class='yy-dialog-title'>"+h+"</div>"),this.bodyContentDom=$("<div class='yy-dialog-content'></div>");var c=t.createContent;if(c)c(this.bodyContentDom);else{var p=t.contentText;this.contentTextDom=$("<div class='yy-dialog-content-text'>"+p+"</div>"),this.bodyContentDom.append(this.contentTextDom)}if(r.append(this.titleDom).append(this.bodyContentDom),t.buttons)for(var d=0,u=t.buttons.length;d<u;d++){var f=t.buttons[d],h=f.title||"按钮",g=f.style,y=f.onClick;!function(t,i,a,n,s){var r=$("<div class='yy-dialog-btn yy-flex-1 displayflex yy-jc-center yy-ai-center'>"+t+"</div>");i&&e.css(r,i),n&&r.bind("click",function(e){n()}),a.append(r)}(h,g,l,y,this)}s.append(r).append(l),this.dialogWrapper.append(s),a.append(this.dialogWrapper).append(this.dialogBackCover)};return i.prototype.show=function(){var e=this;this.dialogWrapper.css({visibility:"visible"}),this.dialogBackCover.css({visibility:"visible"}),this.dialogBackCover.addClass("yy-dialog-bk-show"),window.setTimeout(function(){e.dialogWrapper.removeClass("yy-dialog-hide").addClass("yy-dialog-show")},1)},i.prototype.hide=function(){var e=this;this.dialogWrapper.removeClass("yy-dialog-show").addClass("yy-dialog-hide"),this.dialogBackCover.removeClass("yy-dialog-bk-show"),window.setTimeout(function(){e.dialogWrapper.css({visibility:"hidden"}),e.dialogBackCover.css({visibility:"hidden"})},200)},i}),define("parts/timepicker",["utils"],function(e){function t(e){var t,i,a=window.getComputedStyle(e,null),n=!0;return n?(a=a["-webkit-transform"].split(")")[0].split(", "),t=+(a[12]||a[4]),i=+(a[13]||a[5])):(t=+a.left.replace(/[^-\d.]/g,""),i=+a.top.replace(/[^-\d.]/g,"")),{x:t,y:i}}var i=function(t){var i=this;t=t||{},i.CanTouch="ontouchend"in document;var a=document.createElement("DIV").style;"-webkit-transform"in a?(i.transitionend="webkitTransitionEnd",i.transform="-webkit-transform",i.transition="-webkit-transition"):(i.transitionend="transitionend",i.transform="transform",i.transition="transition"),i.mode="",i.Now=new Date,i.RealModeArr=[],i.rowsCount=5,i.itemHeight=e.getRealHeight(40),i.ParentContainer=document.body,i.extendArr=[],i.DTP_Obj=[],i.mapping={yyyy:{label:"年",start:1950,end:2040},MM:{label:"月",start:1,end:12},dd:{label:"日",start:1,end:31},hh:{label:"时",start:0,end:23},mm:{label:"分",start:0,end:59}},i.DTP_Conatiner=document.createElement("DIV"),i.DTP_Conatiner.className="tmpk-wrapper",i.DTP_Mid_Area=document.createElement("DIV"),i.DTP_Mid_Area.className="tmpk-mid-area",i.DTP_Mid_Area.style.height=i.itemHeight+"px",i.DTP_Mid_Area.style.top=2*i.itemHeight+"px",i.GradientLayer=document.createElement("DIV"),i.GradientLayer.className="tmpk-gradient-layer";var n=document.createElement("DIV");n.className="tmpk-top-area",n.style.height=e.getRealHeight(42)+"px";var s=document.createElement("DIV"),r=t.cancelBtnClassName||"";s.className="tmpk-top-col tmpk-cancel "+r,s.innerHTML=t.cancelText||"取消",s.addEventListener("click",function(e){i.CancelClick(e)});var o=document.createElement("DIV");o.className="tmpk-top-col tmpk-auto-col",i.TitleLabel=document.createElement("DIV"),o.appendChild(i.TitleLabel);var l=document.createElement("DIV"),h=t.okBtnClassName||"";l.className="tmpk-top-col "+h,l.innerHTML="确定",l.addEventListener("click",function(e){i.OkClick(e)});var c=document.createElement("DIV");c.className="tmpk-top-col tmpk-clear",c.innerHTML="清除",c.addEventListener("click",function(e){i.ClearClick(e)}),n.appendChild(s),n.appendChild(o),n.appendChild(c),n.appendChild(l),i.DTP_Conatiner.appendChild(n),i.DateArea_Container=document.createElement("DIV"),i.DateArea_Container.className="tmpk-date-area",i.DateArea_Container.style.height=i.rowsCount*i.itemHeight+"px",i.DateArea_Container.appendChild(i.DTP_Mid_Area),i.DateArea_Container.appendChild(i.GradientLayer),i.DTP_Conatiner.appendChild(n),i.DTP_Conatiner.appendChild(i.DateArea_Container),i.isDone=!1};return i.prototype={CancelClick:function(e){var t=this;void 0!=t.CancelMethod&&t.CancelMethod(),t.hide()},OkClick:function(e){var t=this,i=t.getValue();void 0!=t.OkMethod&&t.OkMethod(i),t.hide()},setTitle:function(e){var t=this;return t.TitleLabel.innerHTML=e||"",t},bind:function(e,t){var i=this;return"clear"==e?i.ClearMethod=t:"ok"==e?i.OkMethod=t:"cancel"==e?i.CancelMethod=t:"change"==e&&(i.ChangeMethod=t),i},ClearClick:function(e){var t=this;void 0!=t.ClearMethod&&t.ClearMethod(),t.hide()},done:function(){var e=this;return e.isDone||(e._InitLayout(),e._InitEvent(),e._InitLimit(),e.isDone=!0),e},_CompleteDateInfo:function(e){var t={Date:null,DateStr:null};return void 0==e.yyyy||void 0==e.yyyy.value?t:(e.MM=e.MM||{index:0,value:1},e.MM.value=e.MM.value||1,e.dd=e.dd||{index:0,value:1},e.dd.value=e.dd.value||1,e.hh=e.hh||{index:0,value:0},e.hh.value=e.hh.value||0,e.mm=e.mm||{index:0,value:0},e.mm.value=e.mm.value||0,t.mapping=e,t.DateStr=e.yyyy.value+"-"+e.MM.value+"-"+e.dd.value+" "+e.hh.value+":"+e.mm.value,t.Date=new Date(t.DateStr.replace("-","/").replace("-","/")),t)},setMaxValue:function(e){var t=this;if(!e||!t.isDone)return t;if(t.max_key_index_Mapping=t._getKey_IndexMappingByDateStr(e,!1),t.max_date_info=t._CompleteDateInfo(t.max_key_index_Mapping),void 0!=t.min_date_info&&t.max_date_info.Date<t.min_date_info.Date)return t.max_date_info=null,t;if(t.mapping.yyyy.show){var i=t.max_date_info.Date.getFullYear(),a=i-t.mapping.yyyy.start;t.mapping.yyyy.limit.max=t._reviseIndexByKeyByIndex(t.mapping.yyyy,a)}return t},setMinValue:function(e){var t=this;if(!e||!t.isDone)return t;if(t.min_key_index_Mapping=t._getKey_IndexMappingByDateStr(e,!1),t.min_date_info=t._CompleteDateInfo(t.min_key_index_Mapping),void 0!=t.max_date_info&&t.max_date_info.Date<t.min_date_info.Date)return t.min_date_info=null,t;if(t.mapping.yyyy.show){var i=t.min_date_info.Date.getFullYear(),a=i-t.mapping.yyyy.start;t.mapping.yyyy.limit.min=t._reviseIndexByKeyByIndex(t.mapping.yyyy,a)}return t},_InitLimit:function(){for(var e=this,t=0,i=e.RealModeArr.length;t<i;t++){var a=e.RealModeArr[t],n=e.mapping[a];void 0!=n.start?n.limit={min:0,max:n.end-n.start}:n.limit={min:0,max:_curMappingInfo.data.length-1}}},show:function(e,t){var i=this;return void 0==e||/^\s*$/.test(e)?i.setValueByDate(i.Now):i.setValueByDateStr(e),i.DTP_Width=i.GradientLayer.offsetWidth,i.DTP_Height=i.GradientLayer.offsetHeight,i.DTP_Conatiner.className="tmpk-wrapper tmpk-wrapper-show",i.BackCover.style.display="block",i.POS={left:0,top:window.innerHeight-i.DateArea_Container.offsetHeight},i},hide:function(){var e=this;return e.DTP_Conatiner.className="tmpk-wrapper",e.BackCover.style.display="none",e},_getKey_IndexMappingByDateStr:function(e,t){var i=this,a={},n=[];void 0!=e&&(n=i.getValueArr(e));for(var s=0,r=i.TimeArrModeArr.length;s<r;s++){var o=i.TimeArrModeArr[s],l=parseInt(n[s]),h=i._getValueIndexByValue(i.mapping[o],l,t);a[o]=h}return a},_getValueIndexByValue:function(e,t,i){var a=this;if(void 0!=e.start){
var n=i?e.limit.min:0,s=i?e.limit.max:a.getItemCount(e);if(isNaN(t))return{index:n,value:e.start};var r=t-e.start;return r=r<n?n:r,r=r>s?s:r,{index:r,value:r+e.start}}throw new Error("未实现")},_reviseIndexByKeyByIndex:function(e,t){var i=this;if(isNaN(t))return 0;var a=i.getItemCount(e)-1;return t>a?a:t<0?0:t},_reviseValueIndexByKeyByIndex:function(e,t){return isNaN(t)?e.limit.min:t>e.limit.max?e.limit.max:t<e.limit.min?e.limit.min:t},setPosByKeyByIndex:function(e,t){var i=this,a=i.mapping[e];t=i._reviseValueIndexByKeyByIndex(a,t);var n=a.index,s=i.DTP_Obj[n],r=s.obj,o=i.itemHeight*(-t+2);s.y=o,s.index=t,r.style[i.transition]="none",r.style[i.transform]="translate(0,"+o+"px)"},getValue:function(){for(var e=this,t=e.mode,i=0,a=e.TimeArrModeArr.length;i<a;i++){var n=e.TimeArrModeArr[i];t=t.replace(n,e.getValueByKey(n))}return t},setValueByDateStr:function(e){var t=this,i=t._getKey_IndexMappingByDateStr(e,!0);for(var a in i)t.setPosByKeyByIndex(a,i[a].index),i.MM=i.MM||{index:0,value:1},i.dd=i.dd||{index:0,value:1},i.yyyy=i.yyyy||{index:0,value:1},t.ModifyDayCount("MM",i.yyyy.value,i.MM.value,i.dd.value)},setValueByDate:function(e){var t=e.getFullYear(),i=e.getMonth()+1,a=e.getDate(),n=e.getHours(),s=e.getMinutes(),r=this;r.setValueByDateStr(t+"-"+i+"-"+a+" "+n+":"+s)},getValueByKey:function(e){var t=this,i=t.mapping[e];if(1!=i.show)return null;var a=t.DTP_Obj[i.index];if(void 0!=i.start){var n=i.start+a.index;return n=n<10?"0"+n:n}return i.data[a.index].value},setParent:function(e){var t=this;return t.ParentContainer=e,t},setMode:function(e){var t=this;return t.mode=e,t},_InitEvent:function(){function e(e){n.e=e;var i=e.touches?e.touches[0]:e;n.timeMark.start=new Date,n.touchStart.x=i.pageX,n.curListIndex=Math.ceil(n.touchStart.x/n.DTP_Width*n.RealModeArr.length)-1,n.touchEnd.y=n.touchStart.y=i.pageY;var a=n.DTP_Obj[n.curListIndex],s=t(a.obj);a.obj.style[n.transition]="",a.obj.style["-webkit-transform"]="translate(0,"+s.y+"px)",n.curPosY=a.y=s.y,n.touchleave=!1,canmove=!0}function i(e){if(!n.touchleave&&canmove){e.preventDefault();var t=e.touches?e.touches[0]:e,i=n.touchEnd.y-n.touchStart.y;n.touchEnd.y=t.pageY;var s=t.pageX,r=n.DTP_Obj[n.curListIndex],o=r.obj;return r.y=n.curPosY+i,o.style[n.transform]="translate(0,"+r.y+"px)",s<=10||s>=n.DTP_Width-10||n.touchEnd.y-n.POS.top<=10||n.touchEnd.y-n.POS.top>=n.DTP_Height-10?(a(),void(n.touchleave=!0)):void(n.touchleave=!1)}}function a(e){if(canmove=!1,!n.touchleave){n.timeMark.end=new Date;var t=n.timeMark.end-n.timeMark.start,i=n.touchEnd.y-n.touchStart.y,a=0,s=n.DTP_Obj[n.curListIndex],r=n.mapping[n.RealModeArr[n.curListIndex]],o=0;if(t<350&&Math.abs(i)>10){var l=n.getCanScrollValue(n.getCanScrollMaxHeight(r),i);a=l.value,o=l.duration}else window.setTimeout(function(){n._transitionEnd(null,!0,n.curListIndex)},20);s.y=n.getRealPosY(s.y+a,n.getLimit(r),s),s.obj.style[n.transition]=n.transform+" "+o+"s cubic-bezier(0.333333, 0.666667, 0.666667, 1)",s.obj.style[n.transform]="translate(0,"+s.y+"px)"}}var n=this;n.BackCover.addEventListener("click",function(e){n.hide()});var s=n.CanTouch?"touchstart":"mousedown",r=n.CanTouch?"touchmove":"mousemove",o=n.CanTouch?"touchend":"mouseup";n.GradientLayer.addEventListener(s,function(t){e(t)}),n.GradientLayer.addEventListener(r,function(e){i(e)}),n.GradientLayer.addEventListener(o,function(e){a(e)}),n.curListIndex=0,n.curPosY=0,n.touchleave=!1,canmove=!1,n.touchStart={x:0,Y:0},n.touchEnd={x:0,y:0},n.timeMark={start:0,end:0}},_InitLayout:function(){var e=this;0==e.RealModeArr.length&&(e.RealModeArr=e.getModeArr(),e.TimeArrModeArr=e.getModeArr()),0==e.RealModeArr.length&&(e.mode="yyyy-MM-dd",e.RealModeArr=["yyyy","MM","dd"]),e.listwidth=100/e.RealModeArr.length+"%";for(var t=0,i=e.RealModeArr.length;t<i;t++){var a=e.RealModeArr[t],n=e.mapping[a];n.show=!0,n.index=t,e._InitLayout_List(a,n,t)}e.BackCover=document.createElement("DIV"),e.BackCover.className="tmpk-back-cover",e.ParentContainer.appendChild(e.BackCover),e.ParentContainer.appendChild(e.DTP_Conatiner)},extendData:function(e){var t=this;0==t.RealModeArr.length&&(t.RealModeArr=t.getModeArr(),t.TimeArrModeArr=t.getModeArr());var i=e.key;if(void 0==i||""==i)return t;if(void 0!=t.mapping[i])throw new Error("已存在相应的key");t.mapping[i]=e;var a=e.index||0;return a=isNaN(a)||a<0?0:a,a=a>t.RealModeArr.length-1?t.RealModeArr.length:a,t.RealModeArr.splice(a,0,i),t},_InitLayout_List:function(e,t,i){var a=this,n=document.createElement("UL");if(a.DTP_Obj[i]={obj:n,y:0,index:0,key:e},void 0!=t.start)for(var s=t.start,r=t.end,o=s;o<=r;o++){var l=document.createElement("LI");l.className="tmpk-item",l.style.height=a.itemHeight+"px",l.style.lineHeight=a.itemHeight+"px",o=o<10?"0"+o:o;var h=o+t.label;l.innerHTML=h,n.appendChild(l)}else for(var c=0,p=t.data.length;c<p;c++){var d=t.data[c],l=document.createElement("LI");l.className="tmpk-item",l.style.height=a.itemHeight+"px",l.style.lineHeight=a.itemHeight+"px";var h=d.text;l.innerHTML=h,n.appendChild(l)}n.className="tmpk-list",n.setAttribute("index",i),n.setAttribute("key",e),n.style.width=a.listwidth,n.addEventListener(a.transitionend,function(e){a._transitionEnd(e)}),a.DateArea_Container.appendChild(n)},_setMaxLimitByKeyByIndex:function(e,t){},setLimit:function(){},_transitionEnd:function(e,t,i){var a,n=this;a=t===!0?n.DTP_Obj[i]:n.DTP_Obj[e.target.getAttribute("index")],a.isInTransition=!1;var s=a.key,r=n.getValueByKey("yyyy"),o=n.getValueByKey("MM")||1,l=n.getValueByKey("dd")||1,h=n.getValueByKey("hh")||0,c=n.getValueByKey("mm")||0;if(null!=r?(n.CurDateStr=r+"-"+o+"-"+l+" "+h+":"+c,n.CurDate=new Date(r,o-1,l,h,c)):(n.CurDateStr="",n.CurDate=null),n.ModifyDayCount(s,r,o,l),void 0!=n.max_date_info&&null!=n.CurDate){var p=n.max_date_info.Date;n.CurDate>p&&n.setValueByDate(p)}if(void 0!=n.min_date_info&&null!=n.min_date_info){var d=n.min_date_info.Date;n.CurDate<d&&n.setValueByDate(d)}void 0!=n.ChangeMethod&&n.ChangeMethod(n.getValue())},ModifyDayCount:function(e,t,i,a){var n=this;if(n.mapping.dd.show&&n.mapping.yyyy.show&&n.mapping.MM.show&&("MM"==e&&1!=n.getIsInTransitionByKey("yyyy")||"yyyy"==e&&1!=n.getIsInTransitionByKey("MM"))){var s=n.DayNumOfMonth(t,i),r=n.mapping.dd;r.limit.max=s-1;for(var o=r.index,l=n.DTP_Obj[o],h=l.obj,c=31-s,p=30;p>=27;p--)c>0?(h.childNodes[p].style.display="none",c-=1):h.childNodes[p].style.display="block";a>s&&n.setPosByKeyByIndex("dd",r.limit.max)}},getIsInTransitionByKey:function(e){var t=this,i=t.mapping[e].index,a=t.DTP_Obj[i];return a.isInTransition},getModeArr:function(){for(var e=this,t=[],i=(e.mode||"").split(" "),a=!1,n=0,s=i.length;n<s;n++){var r="-",o=i[n];if(o.indexOf("-")>0);else{if(!(o.indexOf(":")>0)){t.push(o);break}r=":"}var l=o.split(r);if(a)break;for(var h=0,c=l.length;h<c;h++){var p=l[h];if(!e.mapping[p]){a=!0;break}t.push(p)}}return t},getValueArr:function(e){for(var t=[],i=(e||"").split(" "),a=0,n=i.length;a<n;a++)for(var s=0==a?i[a].split("-"):i[a].split(":"),r=0,o=s.length;r<o;r++){var l=s[r];t.push(l)}return t},getCanScrollValue:function(e,t){var i=this,a=t<0?-1:1;t=Math.abs(t);var n=.5,s=3*i.itemHeight*a;return t>i.itemHeight*i.rowsCount*3/5?s=e*a*.9:t<=i.itemHeight*i.rowsCount*3/5&&t>i.itemHeight*i.rowsCount*2/5?(s=e*a*.7,n=.4):t<=i.itemHeight*i.rowsCount*2/5&&t>i.itemHeight*i.rowsCount*1/5?(s=e*a*.5,n=.3):(s=3*i.itemHeight*a,n=.3),{value:s,duration:n}},getRealPosY:function(e,t,i){var a=this,n=a.itemHeight*Math.floor(a.rowsCount/2)-t.min*a.itemHeight,s=a.itemHeight*Math.ceil(a.rowsCount/2)-(t.max+1)*a.itemHeight,r=e<n?e>s?e:s:n,o=Math.abs(Math.round(r/a.itemHeight-Math.floor(a.rowsCount/2)));return i.index=o,a.itemHeight*Math.floor(a.rowsCount/2)-o*a.itemHeight},getLimit:function(e){return e.limit},getItemCount:function(e){if(void 0!=e.start){var t=e.end-e.start+1;return t}return e.data.length},getCanScrollMaxHeight:function(e){var t=this,i=t.getItemCount(e);return i=i>20?10:i,i*t.itemHeight},DayNumOfMonth:function(e,t){var i=new Date(e,t,0);return i.getDate()}},i}),define("logic/add",["../parts/common","utils","../../../components/dialog","../parts/timepicker"],function(e,t,i,a){function n(e){this.pageview=e.pageview,this.year=(new Date).getFullYear(),this.todayDate=new Date,this.allDayvalue=!1,this.startTimePicker=null,this.endTimePicker=null,this.maxFilesNum=9,this.mode="NEW",this.data=this.pageview.showPageParams.data,this.defaultDate=this.pageview.params.currentDateStr?this.pageview.params.currentDateStr.replace(/-/g,"/"):"",this.hasModify=!1,this.isModifySuccess=!1,this.data&&(this.mode="MODIFY",this.renderData(this.data)),this.defaultDate&&(this.user=this.pageview.params.self?JSON.parse(this.pageview.params.self):"",this.mode="NEW",this.setDefaultTime());var t=this;this.allDayTimePicker=new a,this.allDayTimePicker.mapping.yyyy.start=this.year,this.allDayTimePicker.mapping.yyyy.end=this.year+4,this.allDayTimePicker.setMode("yyyy-MM-dd").setParent(this.pageview.$el[0]).done().setMinValue(this.year+"-1-1 00:00").bind("clear",function(){}).bind("ok",function(e){t.setTimeStr(e)}).bind("cancel",function(){}),this.notAllDayTimePicker=new a,this.notAllDayTimePicker.mapping.yyyy.start=this.year,this.notAllDayTimePicker.mapping.yyyy.end=this.year+4,this.notAllDayTimePicker.setMode("yyyy-MM-dd hh:mm").setParent(this.pageview.$el[0]).done().setMinValue(this.year+"-1-1 00:00").bind("clear",function(){}).bind("ok",function(e){t.setTimeStr(e)}).bind("cancel",function(){}),this.repeatTimePicker=new a,this.repeatTimePicker.mapping.yyyy.start=this.year,this.repeatTimePicker.mapping.yyyy.end=this.year+4,this.repeatTimePicker.setMode("yyyy-MM-dd").setParent(this.pageview.$el[0]).done().setMinValue(this.year+"-1-1 00:00").bind("clear",function(){}).bind("ok",function(e){t.setrepeatTimeStr(e)}).bind("cancel",function(){}),this.reminddata=this.pageview.pageManager.appConfig.remindDict,this.selectedRemindData=this.reminddata[0],this.repeatData={repeat_id:0,repeat_name:"永不"},this.participantsData=[],this.shareData=[],this.setHeader()}return n.prototype={onPageResume:function(e,t){this.setHeader()},setHeader:function(){var e="";e="MODIFY"===this.mode?"编辑":"新增日程";try{window.yyesn.ready(function(){window.yyesn.register({rightvalue:function(e){}}),window.yyesn.client.configNavBar(function(e){},{centerItems:[{title:e,titleColor:"#292f33"}],rightItems:[]})})}catch(e){}},setDefaultTime:function(){var e=this,i=6e5,a=this.defaultDate+" "+t.ConvertDateToStr(this.todayDate,"hh:mm"),n=Math.round(new Date(a).getTime()/i)*i,s=Math.round(new Date(a).getTime()/i)*i+60*i/10;this.pageview.delegate("startTime_value",function(e){var i=t.ConvertDateToStr(n,"yyyy-MM-dd hh:mm");e.setText(i)}),this.pageview.delegate("endTime_value",function(e){var i=t.ConvertDateToStr(s,"yyyy-MM-dd hh:mm");e.setText(i)}),this.pageview.delegate("repeat_startTime_value",function(t){t.setText(e.formatTimestamp(n))})},renderData:function(e){var t=this;e.user.name=e.user.userName,e.user.member_id=e.user.memberId,this.user=e.user,this.pageview.delegate("theme_title_input",function(t){t.setValue(e.title)}),this.pageview.delegate("allDay_value",function(i){1===e.wholeDay?(i.setValue(!0),t.allDayvalue=!0):(i.setValue(!1),t.allDayvalue=!1)}),this.pageview.delegate("startTime_value",function(i){1===e.wholeDay?i.setText(t.formatTimestamp(e.startTime)):i.setText(t.formatTimestamp(e.startTime,"yyyy-MM-dd hh:mm"))}),this.pageview.delegate("endTime_value",function(i){1===e.wholeDay?i.setText(t.formatTimestamp(e.endTime)):i.setText(t.formatTimestamp(e.endTime,"yyyy-MM-dd hh:mm"))}),this.pageview.delegate("important_value",function(t){1===e.importance?t.setValue(!0):t.setValue(!1)}),this.pageview.delegate("describe_textarea",function(t){t.setValue(e.describe)}),this.pageview.delegate("describe_textarea_count",function(t){t.setText(e.describe.length)}),this.pageview.delegate("remind_radiolist",function(i){var a=e.remind,n=t.reminddata[a];i.setSelectedValue([n]),t.selectedRemindData={id:a,label:t.reminddata[a].label}}),this.pageview.delegate("repeat_value",function(i){var a=e.repeat,n="";switch(a){case 0:n="永不";break;case 1:n="每天";break;case 2:n="每周";break;case 3:n="每月";break;case 4:n="每年"}t.repeatData.repeat_id=a,t.repeatData.repeat_name=n,i.setText(n)}),this.pageview.delegate("remind_value",function(i){var a=e.remind;i.setText(t.reminddata[a].label)}),this.pageview.delegate("repeat_time_group",function(t){0!==e.repeat?t.$el.removeClass("displaynone"):t.$el.addClass("displaynone")}),this.pageview.delegate("repeat_startTime_value",function(i){e.repeatStartTime?i.setText(t.formatTimestamp(e.repeatStartTime)):i.setText(t.formatTimestamp(e.startTime))}),this.pageview.delegate("repeat_endTime_value",function(i){e.repeatEndTime&&i.setText(t.formatTimestamp(e.repeatEndTime))}),this.pageview.delegate("participants_value",function(i){if(0!==e.joinUsers.length){for(var a=0;a<e.joinUsers.length;a++)e.joinUsers[a].name=e.joinUsers[a].userName,e.joinUsers[a].member_id=e.joinUsers[a].memberId;i.bindData(e.joinUsers),t.participantsData=e.joinUsers}}),this.pageview.delegate("participants_title_count",function(t){t.setText("已选"+e.joinUsers.length+"人")}),this.pageview.delegate("share_value",function(i){if(0!==e.shareUsers.length){for(var a=0;a<e.shareUsers.length;a++)e.shareUsers[a].name=e.shareUsers[a].userName,e.shareUsers[a].member_id=e.shareUsers[a].memberId;i.bindData(e.shareUsers),t.shareData=e.shareUsers}}),this.pageview.delegate("share_title_count",function(t){t.setText("已选"+e.shareUsers.length+"人")}),this.pageview.delegate("place_value",function(i){e.location&&(i.setText(e.location),t.placeData={},t.placeData.addrstr=e.location,t.placeData.latitude=e.latitude,t.placeData.longitude=e.longitude)}),this.pageview.delegate("file_repeat",function(i){for(var a=e.scheduleFiles,n=0;n<a.length;n++)a[n].path=a[n].filePath,a[n].fname=a[n].fileName,i.addItem(a[n]);t.maxFilesNum=t.maxFilesNum-a.length})},formatTimestamp:function(e,i){var a="",n=t.getDateInfo(e);return a="yyyy-MM-dd hh:mm"===i?n.year+"-"+n.monthStr+"-"+n.dayStr+" "+n.hourStr+":"+n.minStr:n.year+"-"+n.monthStr+"-"+n.dayStr+" 周"+n.weekStr},add_btn_click:function(e,t){this.pageview.go("add")},allDay_value_change:function(e,i){this.allDayvalue=i.value,e.setValue(this.allDayvalue);var a=this.startTime_value.getText(),n=this.endTime_value.getText();if(this.allDayvalue){if(""!==a){var s=t.getDateInfo(a),r=a.substr(0,a.indexOf(" ")+1)+"周"+s.weekStr;this.startTime_value.setText(r)}if(""!==n){var o=t.getDateInfo(n),l=n.substr(0,n.indexOf(" ")+1)+"周"+o.weekStr;this.endTime_value.setText(l)}}else{if(""!==a){var h=a.substr(0,a.indexOf(" ")+1);this.startTime_value.setText(h+"00:00")}if(""!==n){var c=n.substr(0,n.indexOf(" ")+1);this.endTime_value.setText(c+"00:00")}}},important_value_change:function(e,t){this.importantvalue=t.value,e.setValue(this.importantvalue)},setTimeStr:function(e){var i=t.getDateInfo(e);if(this.isSelectStart){if(this.allDayvalue)this.startTime_value.setText(e+" 周"+i.weekStr),t.compareDate(this.startTime_value.getText(),this.endTime_value.getText())>0;else{var a=t.ConvertDateToStr(i.timestamp,"yyyy-MM-dd hh:mm");this.startTime_value.setText(a)}var n=i.year+"-"+i.month+"-"+i.day+" 周"+i.weekStr;this.repeat_startTime_value.setText(n)}else if(this.allDayvalue)this.endTime_value.setText(e+" 周"+i.weekStr);else{var s=t.ConvertDateToStr(i.timestamp,"yyyy-MM-dd hh:mm");this.endTime_value.setText(s)}this.checkTime()},setrepeatTimeStr:function(e){var i=t.getDateInfo(e);this.repeat_endTime_value.setText(e+" 周"+i.weekStr)},checkTime:function(){var e=!1;if(this.startTime_value.getText()&&this.endTime_value.getText()){if(this.allDayvalue){var i=this.startTime_value.getText().substr(0,this.startTime_value.getText().indexOf(" ")),a=this.endTime_value.getText().substr(0,this.endTime_value.getText().indexOf(" "));t.compareDate(i,a)>0&&(e=!0)}else t.compareTime(this.startTime_value.getText(),this.endTime_value.getText())>0&&(e=!0);if(e&&(this.isSelectStart?this.endTime_value.setText(this.startTime_value.getText()):this.startTime_value.setText(this.endTime_value.getText())),this.repeat_endTime_value.getText()){var n=this.repeat_endTime_value.getText().substr(0,this.repeat_endTime_value.getText().indexOf(" ")),s=this.startTime_value.getText().substr(0,this.startTime_value.getText().indexOf(" "));t.compareDate(s,n)>0&&this.repeat_endTime_value.setText(this.repeat_startTime_value.getText())}}},startTime_value_init:function(e,t){this.startTime_value=e},startTime_value_click:function(e,t){this.isSelectStart=!0,this.allDayvalue?(this.allDayTimePicker.setTitle("开始时间"),this.allDayTimePicker.show(e.getText())):(this.notAllDayTimePicker.setTitle("开始时间"),this.notAllDayTimePicker.show(e.getText()))},endTime_value_init:function(e,t){this.endTime_value=e},endTime_value_click:function(e,t){this.isSelectStart=!1,this.allDayvalue?(this.allDayTimePicker.setTitle("结束时间"),this.allDayTimePicker.show(e.getText())):(this.notAllDayTimePicker.setTitle("结束时间"),this.notAllDayTimePicker.show(e.getText()))},theme_title_input_compositionend:function(e,t){e.getValue().length>50?this.pageview.refs.theme_title_tips.$el.removeClass("displaynone"):this.pageview.refs.theme_title_tips.$el.addClass("displaynone")},participants_value_click:function(e,t){var i=this;try{window.yyesn.enterprise.selectContacts(function(e){if(e.data){var t=[];i.shareData.forEach(function(e){t.push(e)}),i.user&&t.push(i.user);var a=[],n=!1;e.data.forEach(function(e,i){var s=!0;if(t.length>0)for(var r=0;r<t.length;r++){if(t[r].member_id.toString()===e.member_id.toString()){n=!0,s=!1;break}s=!0}s===!0&&a.push(e)}),i.participantsData=a;var s=i.participantsData.length,r=i.participantsData.slice(0,6);i.pageview.refs.participants_title_count.setText("已选"+s+"人"),i.pageview.delegate("participants_value",function(e){e.bindData(r)}),n&&i.pageview.showTip({text:"创建人和共享人不能同时选择同一个人,已过滤",duration:3e3})}},{nav_title:"选择参与人",nav_color:"#37B7FD",select_list:i.participantsData})}catch(e){}},more_wrapper_click:function(e,t){e.$el.addClass("displaynone"),this.pageview.refs.collapse_group.$el.removeClass("displaynone")},remind_radiolist_init:function(e,t){var i=this.reminddata[0];e.setSelectedValue([i])},remind_radiolist_loaddata:function(e,t){t.success(this.reminddata)},remind_radiolist_selected:function(e,t){this.remind_value.setText(t.selectedValue[0].label),this.selectedRemindData=t.selectedValue[0]},remind_value_click:function(e,t){this.pageview.refs.remind_radiolist.show()},remind_value_didmount:function(e,t){this.remind_value=e,e.setText(this.reminddata[0].label)},repeat_value_init:function(e,t){this.repeat_value=e},setRepeatFromSelector:function(e,t){this.repeat_value.setText(t),this.repeatData.repeat_id=e,this.repeatData.repeat_name=t,"0"===this.repeatData.repeat_id?this.pageview.refs.repeat_time_group.$el.addClass("displaynone"):this.pageview.refs.repeat_time_group.$el.removeClass("displaynone")},repeat_value_click:function(e,t){var i=this,a=this.startTime_value.getText(),n=this.endTime_value.getText();""!==a&&""!==n?this.pageview.showPage({pageKey:"repeatCycle",mode:"fromBottom",nocache:!0,params:{selectedData:i.repeatData}}):this.pageview.showTip({text:"请先选择开始时间和结束时间",duration:1e3})},repeat_startTime_value_init:function(e,t){this.repeat_startTime_value=e},repeat_endTime_value_init:function(e,t){this.repeat_endTime_value=e},repeat_endTime_value_click:function(e,t){this.repeatTimePicker.setTitle("结束重复时间"),this.repeatTimePicker.setMinValue(this.startTime_value.getText()),this.repeatTimePicker.show(e.getText())},describe_textarea_count_init:function(e,t){this.describe_textarea_count=e},describe_textarea_compositionend:function(e,t){var i=e.getValue(),a=i.length;this.describe_textarea_count.setText(a),a>1e3?this.describe_textarea_count.$el.css("color","#ff4e5b"):this.describe_textarea_count.$el.css("color","#cccccc")},place_value_click:function(e,t){var i=this;try{window.yyesn.client.selectMap(function(t){i.placeData=t.data,e.setText(t.data.addrstr)},{nav_title:"选择地点",nav_color:"#37B7FD",radius:100})}catch(e){}},share_value_click:function(e,t){var i=this;try{window.yyesn.enterprise.selectContacts(function(e){var t=[];i.participantsData.forEach(function(e){t.push(e)}),i.user&&t.push(i.user);var a=[],n=!1;e.data.forEach(function(e,i){var s=!0;if(t.length>0)for(var r=0;r<t.length;r++){if(t[r].member_id.toString()===e.member_id.toString()){n=!0,s=!1;break}s=!0}s===!0&&a.push(e)}),i.shareData=a;var s=i.shareData.length,r=i.shareData.slice(0,6);i.pageview.refs.share_title_count.setText("已选"+s+"人"),i.pageview.delegate("share_value",function(e){e.bindData(r)}),n&&i.pageview.showTip({text:"创建人和共享人不能同时选择同一个人,已过滤",duration:3e3})},{nav_title:"选择分享人",nav_color:"#37B7FD",select_list:i.shareData})}catch(e){}},getSubmitData:function(){var e={},i=0,a=0;if(e.title=this.pageview.refs.theme_title_input.getValue(),e.describe=this.pageview.refs.describe_textarea.getValue(),e.wholeDay=this.allDayvalue?1:0,e.importance=this.importantvalue?1:0,this.allDayvalue){var n=this.startTime_value.getText().substr(0,this.startTime_value.getText().indexOf(" ")),s=this.endTime_value.getText().substr(0,this.endTime_value.getText().indexOf(" "));i=t.getDateInfo(n).timestamp,a=t.getDateInfo(s).timestamp}else i=t.getDateInfo(this.startTime_value.getText()).timestamp,a=t.getDateInfo(this.endTime_value.getText()).timestamp;if(e.startTime=i,e.endTime=a,e.remind=this.selectedRemindData.id,e.repeat=this.repeatData.repeat_id,0!==parseInt(e.repeat)){var r=this.repeat_startTime_value.getText().substr(0,this.repeat_startTime_value.getText().indexOf(" "));if(e.repeatStartTime=t.getDateInfo(r).timestamp,""!==this.repeat_endTime_value.getText()){var o=this.repeat_endTime_value.getText().substr(0,this.repeat_endTime_value.getText().indexOf(" "));e.repeatEndTime=t.getDateInfo(o).timestamp}}else delete e.repeatStartTime,delete e.repeatEndTime;if(e.completeStatus=0,this.placeData&&(e.longitude=this.placeData.longitude,e.latitude=this.placeData.latitude,e.location=this.placeData.addrstr),this.participantsData.length){for(var l=[],h=0;h<this.participantsData.length;h++)l[h]=this.participantsData[h].member_id;e.joinUsers=l.join(",")}if(this.shareData.length){for(var c=[],p=0;p<this.shareData.length;p++)c[p]=this.shareData[p].member_id;e.shareUsers=c.join(",")}if(this.file_repeat.datasource.length>0){for(var d=this.file_repeat.datasource,u=[],f=0;f<d.length;f++)u[f]={},u[f].path=d[f].path,u[f].fname=d[f].fname;e.files=u}return JSON.stringify(e)},bindData:function(){},file_add_btn_click:function(e,t){var i=this;if(0===this.maxFilesNum)return void this.pageview.showTip({text:"最多上传9张图片",duration:1e3});try{window.yyesn.client.selectAttachment(function(e){i.maxFilesNum=i.maxFilesNum-e.data.length;for(var t=0;t<e.data.length;t++)i.file_repeat.addItem(e.data[t])},{maxselectnum:i.maxFilesNum,type:"1"})}catch(e){}},file_repeat_init:function(e,t){this.file_repeat=e},file_del_btn_click:function(e,t){e.rowInstance.remove(),this.maxFilesNum++},filterData:function(e,t){for(var i=!1,a=0;a<t.length;a++)for(var n=e.length-1;n>=0;n--)if(e[n].id===t[a].id){e.splice(n,1),i=!0;break}return i&&this.pageview.showTip({text:"创建人和共享人不能同时选择同一个人,已过滤",duration:3e3}),e},checkRepeat:function(){if(""!==this.endTime_value.getText()&&""!==this.startTime_value.getText()){var e=new Date(this.startTime_value.getText().replace(/-/g,"/")),i=new Date(this.endTime_value.getText().replace(/-/g,"/"));return 0===t.compareDate(e,i)||0===this.repeatData.repeat_id}},checkParams:function(){var e="",t=this.pageview.refs.theme_title_input.getValue(),i=this.pageview.refs.describe_textarea.getValue();return i.length>1e3&&(e="日程描述不能超过1000字"),""===this.endTime_value.getText()&&(e="请选择结束时间"),""===this.startTime_value.getText()&&(e="请选择开始时间"),this.checkRepeat()||(e="跨天日程不能选择重复"),""===t&&(e="请填写日程主题"),t.length>50&&(e="日程主题不能超过50字"),""===e||(this.pageview.showTip({text:e,duration:1e3}),!1)},getModifyData:function(e){var i={};i.changedRepeat=0,i.updateType=e?1:0;var a=JSON.parse(this.getSubmitData());if(this.data.title!==a.title&&(i.title=a.title,this.hasModify=!0),this.data.describe!==a.describe&&(i.describe=a.describe,this.hasModify=!0),this.data.wholeDay!==a.wholeDay&&(i.wholeDay=a.wholeDay,this.hasModify=!0),this.data.startTime!==a.startTime&&(i.startTime=a.startTime,this.hasModify=!0),this.data.endTime!==a.endTime&&(i.endTime=a.endTime,this.hasModify=!0),this.data.remind!==a.remind&&(i.remind=a.remind,this.hasModify=!0),this.data.repeat!==a.repeat&&(i.repeat=a.repeat,i.changedRepeat=1,this.hasModify=!0),0!==a.repeat&&(this.data.repeatStartTime!==a.repeatStartTime&&(i.repeatStartTime=a.repeatStartTime,i.changedRepeat=1,this.hasModify=!0),this.data.repeatEndTime!==a.repeatEndTime&&0!==t.compareDate(this.data.repeatEndTime,a.repeatEndTime)&&(i.repeatEndTime=a.repeatEndTime,i.changedRepeat=1,this.hasModify=!0)),this.data.importance!==a.importance&&(i.importance=a.importance,this.hasModify=!0),this.data.location!==a.location&&(i.location=a.location,i.longitude=a.longitude,i.latitude=a.latitude,this.hasModify=!0),this.file_repeat.datasource.length>0){for(var n=this.file_repeat.datasource,s=[],r=0;r<n.length;r++)s[r]={},s[r].path=n[r].path,s[r].fname=n[r].fname,n[r].fileId&&(s[r].id=n[r].fileId);i.files=s}else this.data.scheduleFiles.length>0&&(i.files=[],this.hasModify=!0);return i.joinUsers=a.joinUsers,i.shareUsers=a.shareUsers,this.participantsData.length!==this.data.joinUsers.length&&(this.hasModify=!0),this.shareData.length!==this.data.shareUsers.length&&(this.hasModify=!0),i.id=this.data.id,JSON.stringify(i)},file_repeat_itemclick:function(e,t){var i={function:"viewImage",parameters:{files:e.datasource.path,index:0}};window.WebViewJavascriptBridge.send(JSON.stringify(i),function(e){})},submitIcon_click:function(t,a){var n=this;if(this.checkParams())if("MODIFY"===this.mode){var s=JSON.parse(this.getModifyData());if(!this.hasModify)return void n.pageview.showTip({text:"字段未发生修改",duration:1e3});if(this.data.repeat>0)if(1===s.changedRepeat){var r="本次修改针对所有将来的重复日程,</br>确定保存修改嘛？";this.modifyDialog=new i({mode:3,wrapper:this.pageview.$el,contentText:r,btnDirection:"row",buttons:[{title:"取消",style:{height:45,fontSize:16,color:e.titleColor,borderRight:"1px solid #EEEEEE"},onClick:function(){n.modifyDialog.hide()}},{title:"确定",style:{height:45,fontSize:16,color:e.titleColor},onClick:function(){var e=n.getModifyData(!0);n.send_update(e),n.modifyDialog.hide()}}]}),this.modifyDialog.show()}else this.tips_poplayer.show();else{var o=JSON.parse(this.getModifyData(!0));o.updateType=o.changedRepeat,n.send_update(JSON.stringify(o))}}else this.pageview.showLoading({text:"正在处理中..."}),this.pageview.ajax({url:"/schedule/create?token="+this.pageview.params.token,type:"POST",timeout:1e6,contentType:"application/json;charset=utf-8",data:n.getSubmitData(),success:function(e){0===e.code&&(n.pageview.hideLoading(),n.pageview.showTip({text:"创建日程成功",duration:1e3}),setTimeout(function(){n.pageview.goBack()},1e3))},error:function(e){n.pageview.hideLoading(),n.pageview.showTip({text:"提交失败!请稍后再试",duration:3e3})}})},send_update:function(e){var t=this;this.hasModify&&(this.pageview.showLoading({text:"正在处理中..."}),this.pageview.ajax({url:"/schedule/update?token="+this.pageview.params.token,type:"POST",timeout:1e4,contentType:"application/json;charset=utf-8",data:e,success:function(e){0===e.code&&(t.isModifySuccess=!0,t.pageview.hideLoading(),t.pageview.showTip({text:"修改日程成功",duration:1e3}),setTimeout(function(){t.pageview.ownerPage.plugin.loadData(e.data.id),t.pageview.close()},1e3))},error:function(e){t.pageview.showTip({text:"提交失败!请稍后再试",duration:3e3}),t.pageview.hideLoading()}}))},tips_first_btn_click:function(e,t){var i=this.getModifyData(!1);this.send_update(i),this.tips_poplayer.hide()},tips_second_btn_click:function(e,t){var i=this.getModifyData(!0);this.send_update(i),this.tips_poplayer.hide()},tips_poplayer_init:function(e,t){this.tips_poplayer=e},tips_cancel_btn_click:function(){this.tips_poplayer.hide()},onPageClose:function(){this.isModifySuccess||this.renderData(this.data)}},n}),define("pages/add",["../logic/add","../parts/common","utils"],function(e,t,i){var a={pluginClass:e,style:{backgroundColor:t.backColor},root:["page_content","remind_radiolist","tips_poplayer"],components:{submitIcon:{type:"icon",text:"提交",style:{marginTop:20,marginBottom:20,borderRadius:5,height:45,backgroundColor:"#37b7fd",marginRight:15,marginLeft:15},textStyle:{fontSize:16,marginLeft:4,color:"#fff"},iconStyle:{fontSize:16,color:t.mainColor}},remind_radiolist:{ref:!0,type:"radiolist",primaryKey:"id",labelKey:"label"},page_content:{type:"view",style:{flex:1,overflowY:"auto",backgroundColor:"#f2f3f4"},root:["theme_title","theme_title_input","second_group","more_wrapper","collapse_group","submitIcon"]},theme_title:{type:"view",style:{flexDirection:"row",height:30,lineHeight:"30px",paddingRight:15,paddingLeft:15},root:["theme_title_name","theme_title_tips"]},theme_title_name:{type:"text",style:{color:"#999999",fontSize:14},text:"主题"},theme_title_tips:{type:"text",ref:!0,className:"displaynone",style:{flex:1,color:"#FF4E5B",fontSize:14,justifyContent:"flex-end"},text:"超过50个字"},theme_title_input:{type:"textarea",ref:!0,className:"theme_title_input",placeholder:"请输入日程主题(50个字以内)",style:{height:50,paddingRight:15,paddingLeft:15,backgroundColor:"#fff",fontSize:14,borderBottom:"1px solid #EBEFF4",marginBottom:10}},imagesRepeat:{type:"repeat",ref:!0,items:[],root:["image","imageDelIcon"],style:{flexDirection:"row",flexWrap:"wrap",marginTop:5,paddingLeft:5},itemStyle:{w:90,justifyContent:"center",alignItems:"center"},subComponent:"addImageIcon"},addImageIcon:{type:"icon",text:"＋",style:{w:80,backgroundColor:"#fff",marginTop:5,marginLeft:5,border:"1px dashed rgb(207,207,207)"},textStyle:{color:"rgb(207,207,207)",fontSize:49}},imageDelIcon:{type:"icon",font:"icomoon_e909",style:{position:"absolute",right:8,border:"2px solid #fff",borderRadius:"100%",backgroundColor:"#fff",top:8},iconStyle:{color:"#FC505F",fontSize:17}},image:{type:"image",src_bind:"src",src:"",style:{w:80,backgroundColor:"rgba(0,0,0,.1)"}},second_group:{type:"view",style:{backgroundColor:"#fff",paddingLeft:14},root:["allDay_wrapper","startTime_wrapper","endTime_wrapper","participants_wrapper"]},allDay_wrapper:{type:"view",style:{flexDirection:"row",height:50,paddingRight:15,borderBottom:"1px solid #eee"},root:["allDay_title","allDay_switch_wrapper"]},allDay_title:{type:"text",text:"全天日程",style:{width:80,fontSize:15,color:"#333"}},allDay_switch_wrapper:{type:"view",style:{flex:1,flexDirection:"row",justifyContent:"flex-end",alignItems:"center"},root:["allDay_value"]},allDay_value:{ref:!0,type:"switch",selectedBackgroundColor:t.mainColor,style:{width:58,height:30}},startTime_wrapper:{type:"view",style:{flexDirection:"row",height:50,paddingRight:15,borderBottom:"1px solid #eee"},root:["startTime_title","startTime_value","startTime_icon"]},startTime_title:{type:"text",text:"开始时间",style:{width:80,fontSize:15,color:"#333"}},startTime_value:{ref:!0,type:"text",text:"",style:{flex:1,justifyContent:"flex-end",fontSize:15,color:"#999"}},startTime_icon:{type:"icon",font:"icomoon_e913",text:"",textPos:"left",style:{justifyContent:"flex-end",color:"#ccc"}},endTime_wrapper:{type:"view",style:{flexDirection:"row",height:50,paddingRight:15,borderBottom:"1px solid #eee"},root:["endTime_title","endTime_value","endTime_icon"]},endTime_title:{type:"text",text:"结束时间",style:{width:80,fontSize:15,color:"#333"}},endTime_value:{ref:!0,type:"text",text:"",style:{flex:1,justifyContent:"flex-end",fontSize:15,color:"#999"}},endTime_icon:{type:"icon",font:"icomoon_e913",text:"",textPos:"left",style:{justifyContent:"flex-end",color:"#ccc"}},participants_wrapper:{type:"view",style:{flexDirection:"row",height:60,paddingRight:15},root:["participants_title","participants_value","participants_icon"]},participants_title:{type:"view",style:{width:80,fontSize:15,justifyContent:"center",color:"#333"},root:["participants_title_name","participants_title_count"]},participants_title_name:{type:"text",text:"参与人",style:{color:"#333333",fontSize:15,lineHeight:"16px"}},participants_title_count:{type:"text",ref:!0,text:"已选0人",style:{color:"#CCCCCC",
fontSize:12,lineHeight:"14px"}},participants_value:{ref:!0,type:"repeat",nodata:"participants_tips",style:{flex:1,justifyContent:"flex-end",fontSize:15,color:"#999"},root:["participants_item"]},participants_tips:{type:"text",style:{color:"#CCCCCC",fontSize:15},text:"请选择参与人"},participants_item:{type:"view",style:{width:40,fontSize:15,paddingTop:"3px",justifyContent:"center",alignItems:"center"},root:["participants_header","participants_name"]},participants_header:{type:"image",style:{width:30,height:30,borderRadius:"50%"},src_bind:"avatar"},participants_name:{type:"text",numberofline:1,style:{color:"#999",fontSize:10},text_bind:"name"},participants_icon:{type:"icon",font:"icomoon_e913",text:"",textPos:"left",style:{justifyContent:"flex-end",color:"#ccc"}},more_wrapper:{type:"icon",text:"展开更多",font:"sc_e90f",iconStyle:{fontSize:8,marginRight:5},style:{backgroundColor:"#fff",color:"#666666",fontSize:11,height:26,borderTop:"1px solid #EBEFF4",borderBottom:"1px solid #EBEFF4"}},collapse_group:{type:"view",className:"displaynone",ref:!0,style:{width:"100%"},root:["third_group","describe_title","fourth_group","file_group"]},third_group:{type:"view",style:{backgroundColor:"#fff",paddingLeft:15,marginTop:10},root:["remind_wrapper","repeat_wrapper","repeat_time_group","important_wrapper"]},remind_wrapper:{type:"view",style:{flexDirection:"row",height:50,paddingRight:15},root:["remind_title","remind_value","remind_icon"]},remind_title:{type:"text",text:"提醒",style:{width:80,fontSize:15,color:"#333"}},remind_value:{ref:!0,type:"text",text:"不提醒",style:{flex:1,justifyContent:"flex-end",fontSize:15,color:"#999"}},remind_icon:{type:"icon",font:"icomoon_e913",text:"",textPos:"left",style:{justifyContent:"flex-end",color:"#ccc"}},repeat_wrapper:{type:"view",style:{flexDirection:"row",height:50,paddingRight:15,borderBottom:"1px solid #eee",borderTop:"1px solid #eee"},root:["repeat_title","repeat_value","repeat_icon"]},repeat_title:{type:"text",text:"重复",style:{width:80,fontSize:15,color:"#333"}},repeat_value:{ref:!0,type:"text",text:"永不",style:{flex:1,justifyContent:"flex-end",fontSize:15,color:"#999"}},repeat_icon:{type:"icon",font:"icomoon_e913",text:"",textPos:"left",style:{justifyContent:"flex-end",color:"#ccc"}},repeat_time_group:{type:"view",ref:!0,className:"displaynone",style:{width:"100%"},root:["repeat_start_time","repeat_end_time"]},repeat_start_time:{type:"view",style:{flexDirection:"row",height:50,paddingRight:15,borderBottom:"1px solid #eee"},root:["repeat_startTime_title","repeat_startTime_value","repeat_startTime_icon"]},repeat_startTime_title:{type:"text",text:"开始重复时间",style:{width:100,fontSize:15,color:"#333"}},repeat_startTime_value:{ref:!0,type:"text",text:"",style:{flex:1,justifyContent:"flex-end",fontSize:15,color:"#999"}},repeat_startTime_icon:{type:"icon",font:"",text:"",textPos:"left",style:{justifyContent:"flex-end",color:"#ccc",paddingRight:16}},repeat_end_time:{type:"view",style:{flexDirection:"row",height:50,paddingRight:15,borderBottom:"1px solid #eee"},root:["repeat_endTime_title","repeat_endTime_value","repeat_endTime_icon"]},repeat_endTime_title:{type:"text",text:"结束重复时间",style:{width:100,fontSize:15,color:"#333"}},repeat_endTime_value:{ref:!0,type:"text",text:"",style:{flex:1,justifyContent:"flex-end",fontSize:15,color:"#999"}},repeat_endTime_icon:{type:"icon",font:"icomoon_e913",text:"",textPos:"left",style:{justifyContent:"flex-end",color:"#ccc"}},important_wrapper:{type:"view",style:{flexDirection:"row",height:50,paddingRight:15},root:["important_title","important_switch_wrapper"]},important_title:{type:"text",text:"重要",style:{width:80,fontSize:15,color:"#333"}},important_switch_wrapper:{type:"view",style:{flex:1,flexDirection:"row",justifyContent:"flex-end",alignItems:"center"},root:["important_value"]},important_value:{ref:!0,type:"switch",selectedBackgroundColor:t.mainColor,style:{width:58,height:30}},describe_title:{type:"text",style:{paddingLeft:15,fontSize:14,color:"#999999",height:30},text:"描述"},fourth_group:{type:"view",style:{paddingLeft:15,paddingRight:15,backgroundColor:"#fff"},root:["describe_textarea_area","place_wrapper","share_wrapper"]},describe_textarea_area:{type:"view",style:{},root:["describe_textarea","describe_textarea_count"]},describe_textarea:{ref:!0,type:"textarea",placeholder:"请输入日程描述",style:{fontSize:14,paddingTop:14,backgroundColor:"#fff",height:130}},describe_textarea_count:{ref:!0,type:"text",text:"0",nextText:"/1000",style:{color:"#cccccc",fontSize:12,justifyContent:"flex-end",height:20,borderBottom:"1px solid #eee"},nextTextStyle:{color:"#cccccc"}},place_wrapper:{type:"view",style:{flexDirection:"row",height:50,borderBottom:"1px solid #eee"},root:["place_title","place_value","place_icon"]},place_title:{type:"text",text:"地点",style:{width:80,fontSize:15,color:"#333"}},place_value:{ref:!0,type:"text",text:"永不",style:{flex:1,justifyContent:"flex-end",fontSize:15,color:"#999"}},place_icon:{type:"icon",font:"icomoon_e913",text:"",textPos:"left",style:{justifyContent:"flex-end",color:"#ccc"}},share_wrapper:{type:"view",style:{flexDirection:"row",height:60},root:["share_title","share_value","share_icon"]},share_title:{type:"view",style:{width:80,fontSize:15,justifyContent:"center",color:"#333"},root:["share_title_name","share_title_count"]},share_title_name:{type:"text",text:"共享人",style:{color:"#333333",fontSize:15,lineHeight:"16px"}},share_title_count:{type:"text",ref:!0,text:"已选0人",style:{color:"#CCCCCC",fontSize:12,lineHeight:"14px"}},share_value:{ref:!0,type:"repeat",nodata:"share_tips",style:{flex:1,justifyContent:"flex-end",fontSize:15,color:"#999"},root:["share_item"]},share_tips:{type:"text",style:{color:"#CCCCCC",fontSize:15},text:"请选择共享人"},share_item:{type:"view",style:{width:40,fontSize:15,paddingTop:"3px",justifyContent:"center",alignItems:"center"},root:["share_header","share_name"]},share_header:{type:"image",style:{width:30,height:30,borderRadius:"50%"},src_bind:"avatar"},share_name:{type:"text",numberofline:1,style:{color:"#999",fontSize:10},text_bind:"name"},share_icon:{type:"icon",font:"icomoon_e913",text:"",textPos:"left",style:{justifyContent:"flex-end",color:"#ccc"}},file_group:{type:"view",style:{},root:["file_group_title","file_group_area"]},file_group_title:{type:"text",text:"附件列表",style:{paddingLeft:15,height:30,flexDirection:"row",alignItems:"center",backgroundColor:"#f2f3f4",color:"#999999",fontSize:13}},file_group_area:{type:"view",style:{paddingLeft:15,paddingRight:15,backgroundColor:"#fff",color:"#333333",borderBottom:"1px solid #eee"},root:["file_repeat","file_add_btn"]},file_repeat:{type:"repeat",ref:!0,style:{flexWrap:"wrap"},itemStyle:{height:60,width:"100%",alignItems:"center",justifyContent:"flex-start",borderBottom:"1px solid #eee",flexDirection:"row"},root:["file_img","file_name","file_del_btn"]},file_img:{type:"image",style:{width:32,height:32,borderRadius:"5px",marginRight:12},src_bind:"path"},file_name:{type:"text",numberofline:1,style:{fontSize:15,flex:1,color:"#333333"},textStyle:{height:"20px",lineHeight:"20px"},text_bind:"fname"},file_del_btn:{type:"icon",font:"sc_e90a",className:"file_del_btn",style:{justifyContent:"flex-end",borderRadius:"50%",width:16,height:16,backgroundColor:"#EBEBEB"},iconStyle:{color:"#888888"}},file_add_btn:{type:"icon",font:"sc_e906",text:"新增图片",iconStyle:{marginRight:10,fontSize:20},textStyle:{fontSize:15},style:{flexDirection:"row",height:50,justifyContent:"flex-start",color:"#37B7FD"}},tips_poplayer:{type:"poplayer",mode:"bottom",bkCoverStyle:{backgroundColor:"rgba(0, 0, 0, 0.5)"},style:{width:"100%",fontSize:16,backgroundColor:"#f0f4f6",flexDirection:"column"},root:["tips_first_btn","tips_second_btn","tips_cancel_btn"]},tips_first_btn:{type:"text",style:{height:45,backgroundColor:"#fff",justifyContent:"center"},text:"仅修改当前日程"},tips_second_btn:{type:"text",style:{height:45,backgroundColor:"#fff",justifyContent:"center",borderTop:"1px solid #eee"},text:"修改所有将来重复日程"},tips_cancel_btn:{type:"text",text:"取消",style:{height:45,marginTop:10,backgroundColor:"#fff",justifyContent:"center"}}}};return a}),define("logic/commentform",["../parts/common","utils","../../../components/dialog","../parts/timepicker"],function(e,t,i,a){function n(e){this.pageview=e.pageview,this.id=this.pageview.params.scheduleId,this.setHeader()}return n.prototype={onPageLoad:function(){},onPageResume:function(e,t){this.setHeader()},setHeader:function(){try{window.yyesn.ready(function(){window.yyesn.register({rightvalue:function(e){}}),window.yyesn.client.configNavBar(function(e){},{centerItems:[{title:"回复",titleColor:"#292f33"}],rightItems:[]})})}catch(e){}},comment_input_init:function(e,t){this.comment_input=e},comment_input_compositionend:function(e,t){var i=e.getValue(),a=i.length;this.comment_count.setText(a),a>500?this.comment_count.$el.css("color","#ff4e5b"):this.comment_count.$el.css("color","#cccccc")},comment_count_init:function(e,t){this.comment_count=e},submitIcon_click:function(){var e=this,i=t.deviceInfo().isIOS?2:1,a=this.comment_input.getValue();this.pageview.showLoading({text:"正在处理中..."}),this.pageview.ajax({url:"/scheduleComment/reply",type:"POST",timeout:1e4,data:{scheduleId:e.id,content:a,replySource:i},success:function(t){0===t.code&&(e.pageview.ownerPage.plugin.setCommentRepeat(t.data),e.pageview.showTip({text:"提交回复成功",duration:1e3}),setTimeout(function(){e.pageview.close(),e.comment_input.$el.find("textarea").val(""),e.comment_count.setText("0")},1e3)),e.pageview.hideLoading()},error:function(t){e.pageview.hideLoading(),e.pageview.showTip({text:"提交失败!请稍后再试",duration:3e3})}})},onPageClose:function(){}},n}),define("pages/commentform",["../logic/commentform","../parts/common","utils"],function(e,t,i){var a={pluginClass:e,style:{backgroundColor:t.backColor},root:["page_content"],components:{page_content:{type:"view",style:{flex:1,overflowY:"auto",backgroundColor:"#f2f3f4"},root:["comment_input_area","submitIcon"]},submitIcon:{type:"icon",text:"回复",style:{marginTop:20,marginBottom:20,borderRadius:5,height:45,backgroundColor:"#37b7fd",marginRight:15,marginLeft:15},textStyle:{fontSize:16,marginLeft:4,color:"#fff"},iconStyle:{fontSize:16,color:t.mainColor}},comment_input_area:{type:"view",style:{padding:"10px 15px",backgroundColor:"#fff",wordBreak:"break-all"},root:["comment_input","comment_count"]},comment_input:{type:"textarea",placeholder:"写点什么吧. . .",style:{height:100}},comment_count:{type:"text",text:"0",nextText:"/500",style:{color:"#cccccc",fontSize:12,justifyContent:"flex-end",height:20},nextTextStyle:{color:"#cccccc"}}}};return a}),define("logic/day",["../parts/common","utils"],function(e,t){function i(e){this.pageview=e.pageview,console.log(this.pageview.config.viewpagerParams)}return i.prototype={onPageLoad:function(e){},onPageResume:function(){},add_btn_click:function(e,t){this.pageview.go("add")},mydayview_itemclick:function(e,t){this.pageview.go("detail",{scheduleId:t})},body_reload:function(){this.onShowItem(this.parentSender,this.parentData)},onShowItem:function(e,t){var i=this;this.parentSender=e,this.parentData=t,this.pageview.showLoading(),this.pageview.ajax({type:"GET",url:"/schedule/getDayList",data:{date:t.date?t.date:new Date(t.rootPage.pageview.refs.calendarlist.curDate).getTime()},success:function(e){i.pageview.hideLoading(),0===e.code&&0===e.data.length&&(i.pageview.refs.mydayview.$el.hide(),i.pageview.refs.nodata.$el.show()),0===e.code&&e.data.length>0&&(i.pageview.refs.mydayview.$el.show(),i.pageview.refs.nodata.$el.hide(),i.pageview.refs.mydayview.loadData(i.pageview.refs.mydayview,e.data))}})}},i}),define("pages/day",["../logic/day","../parts/common","utils"],function(e,t,i){var a={pluginClass:e,style:{backgroundColor:"#fff",overflowY:"scroll"},root:["mydayview","nodata"],components:{mydayview:{ref:!0,type:"dayview"},nodata:{ref:!0,type:"view",style:{flexDirection:"column",alignItems:"center",justifyContent:"center",display:"none"},root:["nodata_image"]},nodata_image:{type:"icon",style:{marginTop:40},iconStyle:{w:60},text:"您还未创建日程,赶紧去行动吧",textPos:"bottom",textStyle:{marginTop:16,fontSize:15,color:"#999999"},src:"./imgs/space_tips.png"}}};return a}),define("logic/detail",["../parts/common","utils","../../../components/dialog"],function(e,t,i){function a(e){this.pageview=e.pageview,this.topViewCloseHeight=null,this.mode="回复",this.id=this.pageview.params.scheduleId,this.loadData(this.id),this.participantsData=[],this.shareData=[],this.setHeader()}return a.prototype={setHeader:function(){try{window.yyesn.ready(function(){window.yyesn.register({rightvalue:function(e){}}),window.yyesn.client.configNavBar(function(e){},{centerItems:[{title:"日程详情",titleColor:"#292f33"}],rightItems:[]})})}catch(e){}},morePopover_init:function(e,t){this.morePopover=e},moreRepeat_itemclick:function(){console.log(arguments)},loadData:function(e){var t=this;this.pageview.showLoading({text:"正在加载...",timeout:9e3,reLoadCallBack:function(){t._loadData(e)}}),t._loadData(e)},_loadData:function(e){var t=this;this.pageview.ajax({url:"/schedule/detail/"+e,type:"GET",timeout:8e3,data:{pageSize:2e5},success:function(e){0===e.code?(t.data=e.data,t.userIds=[],t.data.joinUsers.forEach(function(e){t.userIds.push(e.memberId)}),t.data.shareUsers.forEach(function(e){t.userIds.push(e.memberId)}),t.userIds.push(e.data.user.memberId),t.loadSuccess(e.data),t.participantsData=e.data.joinUsers,t.shareData=e.data.shareUsers):10001e4===e.code&&window.yyesn.client.closePage()},error:function(e){t.pageview.hideLoading(!1)}})},joinUsers_init:function(e,t){this.joinUsers=e},shareUsers_init:function(e,t){this.shareUsers=e},getRef:function(e){return this.pageview.refs[e]},loadSuccess:function(e){this.pageview.hideLoading(!0);var i=this;this.data=e,this.pageview.delegate("name",function(t){var i=e.title;1===e.importance&&(i="<span style='position:relative;top:-2px;zoom:.6;color:#FF4E5B;line-height:13px;padding:4px 5px;margin-right:4px;border:1px solid #FF4E5B;border-radius:5px;font-size:10px'>重要</span>"+i),t.setText(i)}),this.pageview.delegate("time",function(i){var a,n,s=t.getDateInfo(new Date(e.startTime)),r=t.getDateInfo(new Date(e.endTime));s.year-r.year!==0?(a=s.year+" "+s.month+"-"+s.day+" "+s.hourStr+":"+s.minStr,n=r.year+" "+r.month+"-"+r.day+" "):(a=s.month+"-"+s.day+" "+s.hourStr+":"+s.minStr,n=r.month+"-"+r.day+" "),0===e.wholeDay?n=n+r.hourStr+":"+r.minStr:n+="23:59",i.setText(a+" 至 "+n)}),this.pageview.delegate("describe",function(t){e.describe?t.setText(e.describe.replace(/\n/g,"<br>")):t.$el.addClass("displaynone")}),this.pageview.delegate("remind",function(t){if(0!==e.remind){var a=e.remind;t.setText(i.pageview.pageManager.appConfig.remindDict[a].label)}else t.$el.addClass("displaynone")}),this.pageview.delegate("creator",function(t){t.setText(e.user.userName)}),this.pageview.delegate("repeat",function(t){var i=e.repeat,a="";switch(i){case 0:a="永不";break;case 1:a="每天";break;case 2:a="每周";break;case 3:a="每月";break;case 4:a="每年"}t.setText(a)}),this.pageview.delegate("status",function(t){var i=e.status;0===i?(t.setText("未开始"),t.$el.addClass("notStart_status")):1===i?(t.setText("进行中"),t.$el.addClass("ongoing_status")):(t.setText("已结束"),t.$el.addClass("end_status"))}),this.pageview.delegate("joinUsers",function(t){var i=e.joinUsers;if(0===i.length)t.setText("无"),t.$el.addClass("displaynone");else{t.$el.removeClass("displaynone");for(var a=[],n=0;n<i.length;n++)0===i[n].status?a[n]=i[n].userName:1===i[n].status?a[n]=i[n].userName+"(已接受)":2===i[n].status?a[n]=i[n].userName+"(已拒绝)":a[n]=i[n].userName;t.setText(a.join("，"))}}),this.pageview.delegate("shareUsers",function(t){var i=e.shareUsers;if(0===i.length)t.setText("无"),t.$el.addClass("displaynone");else{t.$el.removeClass("displaynone");for(var a=[],n=0;n<i.length;n++)0===i[n].status?a[n]=i[n].userName:1===i[n].status?a[n]=i[n].userName+"(已接受)":2===i[n].status?a[n]=i[n].userName+"(已拒绝)":a[n]=i[n].userName;t.setText(a.join("，"))}}),this.pageview.delegate("location",function(t){e.location?(t.$el.removeClass("displaynone"),t.setText(e.location)):(t.$el.addClass("displaynone"),t.setText("无"))}),this.pageview.delegate("bottom_action_repeat",function(t){var a=[],n=[{label:"接受",icon:"sc_e900"},{label:"拒绝",icon:"sc_e919"}];1===e.role?(n=[{label:"回复",icon:"sc_e91a"},{label:"编辑",icon:"sc_e90c"},{label:"微邮",icon:"sc_e92e"},{label:"",icon:"sc_e90e"}],a=[{title:"共享"},{title:"邀请"},{title:"删除"}]):2===e.role&&1==e.roleStatus?n=[{label:"回复",icon:"sc_e91a"},{label:"微邮",icon:"sc_e92e"},{label:"邀请",icon:"sc_e92f"},{label:"共享",icon:"sc_e930"}]:3===e.role&&1==e.roleStatus&&(n=[{label:"回复",icon:"sc_e91a"},{label:"微邮",icon:"sc_e92e"}]),t.bindData(n),i.pageview.delegate("moreRepeat",function(e){e.bindData(a)})}),i.pageview.delegate("viewpager",function(t){setTimeout(function(){"detailComment"===t.curPageViewItem.contentInstance.config.pageKey?(t.curPageViewItem.contentInstance.delegate("comment_repeat",function(t){t.bindData(e.scheduleComments)}),t.curPageViewItem.contentInstance.delegate("comment_nodata",function(t){0===e.scheduleComments.length?t.$el.removeClass("displaynone"):t.$el.addClass("displaynone")})):"detailActionrecords"===t.curPageViewItem.contentInstance.config.pageKey?t.curPageViewItem.contentInstance.delegate("repeat",function(t){t.bindData(e.loggers)}):t.curPageViewItem.contentInstance.delegate("repeat",function(t){t.bindData(e.scheduleFiles)})},500)})},bottom_action_repeat_itemclick:function(e,t){var i=e.datasource.label,a=this;"sc_e90e"===e.datasource.icon?this.morePopover.show(e):"编辑"===i?this.pageview.showPage({pageKey:"add",mode:"fromBottom",params:{data:this.data}}):"回复"===i?this.pageview.showPage({pageKey:"commentform",mode:"fromBottom",params:{data:this.data}}):"微邮"==i?this.pageview.ajax({url:"/schedule/users",type:"GET",timeout:8e3,data:{ids:a.userIds.join(",")},success:function(e){if(0===e.code){var t=[];e.data.forEach(function(e){t.push({avatar:e.headImgUrl,name:e.userName,member_id:e.memberId})}),t.push({avatar:a.data.user.avatar,name:a.data.user.userName,member_id:a.data.user.memberId}),window.yyesn.enterprise.sendMemail(function(){},{users:t})}}}):"邀请"==i?a._invite():"共享"==i?a._share():"接受"==i?this.handle_schedule(0):"拒绝"==i&&this.handle_schedule(1)},handle_schedule:function(e){var t=this;this.pageview.showLoading(),this.pageview.ajax({url:"/schedule/handle",type:"POST",data:{id:this.id,type:e},success:function(i){t.pageview.hideLoading(),0===i.code&&(1===e?t.pageview.showTip({text:i.data.msg,duration:1e3}):t.pageview.showTip({text:i.data.msg,duration:1e3}),setTimeout(function(){t.pageview.goBack()},1e3))},error:function(){t.pageview.hideLoading()}})},_share:function(){var e=this;window.yyesn.enterprise.selectContacts(function(t){e.addUser(t,3)},{nav_title:"选择共享人"})},_invite:function(){var e=this;window.yyesn.enterprise.selectContacts(function(t){e.addUser(t,2)},{nav_title:"选择邀请人"})},addUser:function(e,t){var i=this,a=[],n=[],s="";s=2===t?"日程邀请成功":"日程分享成功",e.data.forEach(function(e){for(var t=!0,s=0;s<i.userIds.length;s++)if(i.userIds[s].toString()===e.member_id.toString()){t=!1;break}t&&(a.push(e.member_id),n.push(e.name))}),a.length>0&&(this.pageview.showLoading({text:""}),i.pageview.ajax({url:"/schedule/addUser?token="+i.pageview.params.token,type:"POST",timeout:1e4,data:{scheduleId:i.id,ids:a.join(","),role:t},success:function(){if(i.pageview.hideLoading(),i.pageview.showTip({text:s,duration:1e3}),2===t){var a=n.join("，");i.participantsData.length>0?i.joinUsers.setText(i.joinUsers.getText()+"，"+a):n.length>0&&(i.joinUsers.$el.removeClass("displaynone"),i.joinUsers.setText(a)),i.participantsData=i.participantsData.concat(e.data)}else{var r=n.join("，");i.shareData.length>0?i.shareUsers.setText(i.shareUsers.getText()+"，"+r):n.length>0&&(i.shareUsers.$el.removeClass("displaynone"),i.shareUsers.setText(r)),i.shareData=i.shareData.concat(e.data)}},error:function(){i.pageview.hideLoading()}}))},moreRepeat_icon_init:function(e,t){"删除"===e.datasource.title&&(e.config.textStyle.color="#FF4E5B")},moreRepeat_icon_click:function(e,t){var i=this;if("删除"===e.datasource.title)this.showDelTips();else if("共享"===e.datasource.title)try{i._share()}catch(e){}else if("邀请"===e.datasource.title)try{i._invite()}catch(e){}this.morePopover.hide()},showDelTips:function(){var t=this;0===this.data.repeat?(this.deleteDialog=new i({mode:3,wrapper:this.pageview.$el,contentText:"确定要删除该日程吗？",btnDirection:"row",buttons:[{title:"取消",style:{height:45,fontSize:16,color:e.titleColor,borderRight:"1px solid #EEEEEE"},onClick:function(){t.deleteDialog.hide()}},{title:"确定",style:{height:45,fontSize:16,color:e.titleColor},onClick:function(){t.deleteSche(0),t.deleteDialog.hide()}}]}),this.deleteDialog.show()):this.tips_poplayer.show()},segment_change:function(e,t){var i=t.item.datasource.title;"操作记录"===i?(this.loadData(this.id),this.pageview.delegate("body",function(e){e.hideLoadMore(),window.setTimeout(function(){e.hideLoadMore()},500)}),this.pageview.delegate("stickyplaceholder",function(e){e.$el.removeClass("displaynone")}),this.pageview.refs.viewpager.showItem("detailActionrecords",{data:this.data.loggers||[]})):"文件"===i?(this.pageview.delegate("body",function(e){e.hideLoadMore(),window.setTimeout(function(){e.hideLoadMore()},500)}),this.pageview.delegate("stickyplaceholder",function(e){e.$el.removeClass("displaynone")}),this.pageview.refs.viewpager.showItem("detailFiles",{data:this.data.scheduleFiles||[]})):"回复"===i&&(this.pageview.refs.body.showLoadMore(),this.pageview.delegate("stickyplaceholder",function(e){e.$el.addClass("displaynone")}),this.pageview.refs.viewpager.showItem("detailComment",{data:this.data.scheduleComments||[]}),this.pageview.refs.body.canLoadMore=this.pageview.refs.viewpager.curPageViewItem.contentInstance.hasMoreData),this.mode=i},toggle_btn_click:function(e){null===this.topViewCloseHeight&&(this.topViewCloseHeight=this.pageview.refs.top_view.$el.height()),this.pageview.refs.body.refreshStickyHeaderIndices(),"展开"===e.getText()?(e.setText("收起"),e.setIcon("sc_e907"),this.pageview.refs.top_view.$el.css({height:"auto"})):(e.setText("展开"),e.setIcon("sc_e90f"),this.pageview.refs.top_view.$el.css({height:this.topViewCloseHeight}))},setCommentRepeat:function(e){this.pageview.refs.viewpager.items.detailComment.contentInstance.delegate("comment_repeat",function(t){e&&t.insertItem(e,0)}),this.pageview.refs.viewpager.items.detailComment.contentInstance.delegate("comment_nodata",function(t){e&&t.$el.addClass("displaynone")})},tips_poplayer_init:function(e,t){this.tips_poplayer=e},tips_cancel_btn_click:function(){this.tips_poplayer.hide()},tips_first_btn_click:function(e,t){this.deleteSche(0),this.tips_poplayer.hide()},tips_second_btn_click:function(e,t){this.deleteSche(1),this.tips_poplayer.hide()},tips_third_btn_click:function(e,t){this.deleteSche(2),this.tips_poplayer.hide()},deleteSche:function(e){var t=this;this.pageview.showLoading({text:"正在处理中..."}),this.pageview.ajax({url:"/schedule/delete/"+t.id,type:"POST",timeout:1e4,data:{deleteType:e},success:function(e){0===e.code&&(t.replyData=e.data,t.pageview.showTip({text:"删除日程成功",duration:1e3})),t.pageview.hideLoading(),setTimeout(function(){t.pageview.goBack()},1e3)},error:function(e){t.pageview.hideLoading(),t.pageview.showTip({text:"提交失败!请稍后再试",duration:3e3})}})},onPageResume:function(){this.setHeader()}},a}),define("pages/detail",["../logic/detail","../parts/common","utils"],function(e,t,i){var a={pluginClass:e,style:{backgroundColor:"#fff"},root:["body","bottom_action_repeat","morePopover","tips_poplayer"],components:{body:{ref:!0,className:"detail-body",type:"view",stickyHeaderIndices:"segment",style:{flex:1,overflow:"auto",backgroundColor:"#F2F3F4"},root:["top_view","toggle_btn","segment","content","stickyplaceholder"]},stickyplaceholder:{ref:!0,className:"displaynone",type:"view",style:{paddingBottom:50}},segment:{type:"segment_android",items:[{title:"回复"},{title:"文件"},{title:"操作记录"}],root:["segment_android_item"],style:{height:40,backgroundColor:"#fff"}},segment_android_item:{type:"text",text_bind:"title",selectedClassName:"yy-sgm-item-selected-android",style:{color:"#8899a6",fontSize:13}},content:{type:"view",style:{position:"relative"},root:["viewpager"]},viewpager:{ref:!0,type:"viewpager",autoHeight:!0,style:{position:"relative"},defaultKey:"detailComment"},top_view:{type:"view",ref:!0,style:{height:"auto",padding:15,lineHeight:22,backgroundColor:"#fff",overflow:"hidden"},root:["name","time_status_warp","describe","creator","joinUsers","shareUsers","location","remind","repeat"]},describe:{type:"text",ref:!0,preText:"描述 :&nbsp;",preTextStyle:{width:58},style:{marginTop:8,display:"inline-block",fontSize:"14px",color:"#999999"},text:""},remind:{type:"text",ref:!0,preText:"提醒 :&nbsp;",preTextStyle:{width:58},style:{marginTop:8,display:"inline-block",fontSize:"14px",color:"#999999"},text:"不提醒"},repeat:{type:"text",ref:!0,preText:"重复 :&nbsp;",preTextStyle:{width:58},style:{marginTop:8,display:"inline-block",fontSize:"14px",color:"#999999"},text:"不重复"},location:{type:"text",ref:!0,preText:"地点 :&nbsp;",preTextStyle:{width:58},style:{marginTop:8,display:"inline-block",fontSize:"14px",color:"#999999"},text:""},shareUsers:{type:"text",ref:!0,preTextStyle:{width:58},preText:"共享人 :&nbsp;",style:{marginTop:8,display:"inline-block",fontSize:"14px",color:"#999999"},text:""},creator:{type:"text",ref:!0,preTextStyle:{width:58},preText:"创建人 :&nbsp;",style:{marginTop:8,display:"inline-block",fontSize:"14px",color:"#999999"},text:""},joinUsers:{type:"text",ref:!0,preTextStyle:{width:58},preText:"参与人 :&nbsp;",style:{display:"inline-block",marginTop:8,fontSize:"14px",color:"#999999"},text:""},name:{type:"text",ref:!0,numberofline:3,style:{color:"#292F33",fontSize:16}},time_status_warp:{type:"view",style:{fontSize:14,marginTop:14,flexDirection:"row"},root:["time","status"]},time:{ref:!0,type:"text",style:{flex:1,color:"#37B7FD"},text:""},status:{type:"text",ref:!0,text:"",style:{fontSize:11,borderRadius:9,padding:"0 7"}},toggle_btn:{type:"icon",text:"展开",className:"displaynone",font:"sc_e90f",textPos:"left",textStyle:{marginRight:5},iconStyle:{fontSize:12},style:{borderBottom:"1px solid #EEEEEE",backgroundColor:"#fff",color:"#999999",width:"100%",height:30,justifyContent:"center"}},bottom_action_repeat:{type:"repeat",ref:!0,items:[],itemStyle:{flex:1},style:{height:50,position:"absolute",bottom:"0",width:"100%",backgroundColor:"#fff",zIndex:10,flexDirection:"row"},splitStyle:{height:15,marginTop:18,width:1,backgroundColor:"rgb(227, 227, 227)"},root:["bottom_action_item"]},bottom_action_item:{type:"icon",text_bind:"label",font_bind:"icon",iconStyle:{marginRight:6,color:"#666666",fontSize:18},textStyle:{fontSize:14,color:"#999999"},style:{flex:1}},morePopover:{type:"popover",root:["moreRepeat"],animate:{mode:"2"},bkCoverStyle:{backgroundColor:"rgba(230, 230, 230, 0.2)"},arrowStyle:{backgroundColor:"#fff",zIndex:2,"-webkit-box-shadow":"9px 8px 13px rgb(203, 203, 203)","box-shadow":"9px 8px 13px rgb(203, 203, 203)"},style:{"-webkit-box-shadow":"0px 8px 13px rgb(203, 203, 203)","box-shadow":"0px 8px 13px rgb(203, 203, 203)",width:100,backgroundColor:"#fff",height:"auto",borderRadius:"7px"}},moreRepeat:{type:"repeat",ref:!0,items:[],root:["moreRepeat_icon"],style:{flexDirection:"column",flex:1,paddingTop:4,paddingBottom:4},itemStyle:{height:40,justifyContent:"center",alignItems:"stretch"}},moreRepeat_icon:{type:"icon",text:"测试",text_bind:"title",style:{flex:1},textStyle:{fontSize:15,color:"#292f33"}},tips_poplayer:{type:"poplayer",mode:"bottom",bkCoverStyle:{backgroundColor:"rgba(0, 0, 0, 0.5)"},style:{width:"100%",fontSize:16,backgroundColor:"#f0f4f6",flexDirection:"column"},root:["tips_first_btn","tips_second_btn","tips_third_btn","tips_cancel_btn"]},tips_first_btn:{type:"text",style:{height:45,backgroundColor:"#fff",justifyContent:"center"},text:"仅删除当前日程"},tips_second_btn:{type:"text",style:{height:45,backgroundColor:"#fff",justifyContent:"center",borderTop:"1px solid #eee"},text:"删除其未来的重复日程"},tips_third_btn:{type:"text",style:{height:45,backgroundColor:"#fff",justifyContent:"center",borderTop:"1px solid #eee"},text:"所有的重复日程"},tips_cancel_btn:{type:"text",text:"取消",style:{height:45,marginTop:10,backgroundColor:"#fff",justifyContent:"center"}}}};return a}),define("logic/detailActionrecords",["../parts/common","utils"],function(e,t){function i(e){this.pageview=e.pageview,this.data=this.pageview.viewpagerParams.data,this.setData(this.data)}return i.prototype={repeat_iteminit:function(e,t){var i=e.config.index,a=e.parent.initSourceLength;0===i&&e.$el.addClass("action-record-first"),i==a-1&&e.$el.addClass("action-record-last")},record_time_init:function(e,i){var a=t.timestampToTimeStr(e.datasource.createTime);e.config.text=a},setData:function(e){this.pageview.do("repeat",function(t){t.bindData(e)})}},i}),define("pages/detailActionrecords",["../logic/detailActionrecords","../parts/common","utils"],function(e,t,i){var a={pluginClass:e,style:{backgroundColor:t.backColor,minHeight:400},root:["repeat"],components:{repeat:{ref:!0,type:"repeat",items:[{},{},{}],style:{flexDirection:"column",paddingRight:16},itemStyle:{flexDirection:"row",alignItems:"center",position:"relative"},root:["left_area","right_area"]},left_area:{type:"view",style:{width:60,height:"100%",position:"absolute"},root:["vertical_line","left_ball"]},left_ball:{type:"view"},vertical_line:{type:"view",style:{}},right_area:{type:"view",style:{flex:1,height:"100%",paddingTop:10,paddingBottom:10,paddingLeft:60},root:["popover_area"]},popover_area:{type:"view",className:"detail-popover-area",style:{flexDirection:"row",width:"100%",borderRadius:"5",justifyContent:"flex-start",alignItems:"flex-start",padding:10,backgroundColor:"#fff"},root:["user_avatar","record_main"]},user_avatar:{type:"image",style:{width:35,height:35,marginTop:5,borderRadius:"50%"},defaultSrc:"./imgs/100@3x.png",src_bind:"avatar"},record_main:{type:"view",style:{flex:1,marginLeft:10},root:["record_header","record_content"]},record_header:{type:"view",className:"record_header",style:{flexDirection:"row"},root:["user_name","record_time"]},user_name:{type:"text",numberofline:1,style:{fontSize:16,flex:1,color:"#333333"},text_bind:"userName"},record_time:{type:"text",style:{fontSize:11,justifyContent:"flex-end",color:"#999999"},text_bind:"createTime"},record_content:{type:"text",className:"record_content",style:{fontSize:14,color:"#999999"},text_bind:"reason"}}};return a}),define("logic/detailComment",["../parts/common","utils"],function(e,t){function i(e){this.pageview=e.pageview,this.hasMoreData=!0,this.data=this.pageview.viewpagerParams.data,this.parentBody=this.pageview.config.viewpager.pageview.refs.body}return i.prototype={onPageLoad:function(){},row_content_init:function(e,t){e.config.text=e.config.text.replace(/\n/g,"<br>")},comment_time_init:function(e,i){var a=t.timestampToTimeStr(e.datasource.createTime);e.config.text=a}},i}),define("pages/detailComment",["../logic/detailComment","../parts/common","utils"],function(e,t,i){var a={pluginClass:e,style:{minHeight:400,backgroundColor:"#F2F3F4"},root:["content","nodata"],components:{nodata:{className:"displaynone",type:"text",text:"nodata"},content:{type:"view",root:["comment_repeat","comment_nodata"],noScroll:!0,style:{overflow:"hidden",height:"auto"}},comment_nodata:{type:"icon",ref:!0,className:"displaynone",text:"还没有童鞋来评论哦~",style:{width:"100%",height:"100%",textAlign:"center",display:"block"},textStyle:{fontSize:16,color:"#999"},iconStyle:{width:"28%",height:"28%",paddingTop:"50px",paddingBottom:"10px",margin:"0 auto"},src:"./imgs/nocomment@2x.png"},comment_repeat:{type:"repeat",ref:!0,style:{width:"100%",flexDirection:"column",marginBottom:50},itemStyle:{flexDirection:"column",backgroundColor:"#F2F3F4",paddingLeft:15,paddingRight:15,paddingTop:10,paddingBottom:10,borderBottom:"1px solid #E3E3E3"},root:["row_header","row_content","row_attachment"]},row_header:{type:"view",style:{flex:"0 1 auto",flexDirection:"row",alignItems:"center",marginBottom:10},root:["user_avatar","user_name","comment_time"]},user_avatar:{type:"image",style:{width:30,height:30,borderRadius:"50%"},
defaultSrc:"./imgs/100@3x.png",src:"./imgs/avatar.jpg",src_bind:"avatar"},user_name:{type:"text",numberofline:1,style:{fontSize:15,flex:1,color:"#999999",marginLeft:10},text:"便便藏",text_bind:"userName"},comment_time:{type:"text",style:{justifyContent:"flex-end",fontSize:12,color:"#999999"},text:"今天 05:40"},row_content:{type:"text",style:{fontSize:15,color:"#333333",marginBottom:5},text_bind:"content"},row_attachment:{type:"view",className:"displaynone",style:{},root:["attachment_img"]},attachment_img:{type:"image",style:{width:100},src:"./imgs/keji5.jpg"}}};return a}),define("logic/detailFiles",["../parts/common","utils"],function(e,t){function i(e){this.pageview=e.pageview,this.data=this.pageview.viewpagerParams.data,this.parentBody=this.pageview.config.viewpager.pageview.refs.body}return i.prototype={onPageLoad:function(){var e=this;this.pageview.do("repeat",function(t){t.bindData(e.data)}),this.pageview.do("file_nodata",function(t){0===e.data.length?t.$el.removeClass("displaynone"):t.$el.addClass("displaynone")})},timesize_init:function(e,i){var a=t.timestampToTimeStr(e.datasource.createTime);e.config.text=a},repeat_itemclick:function(e,t){var i=[],a=0;e.parent.datasource.forEach(function(t,n){t.filePath&&i.push(t.filePath),t.filePath===e.datasource.filePath&&(a=n)});var n={function:"viewImage",parameters:{files:i.join(","),index:a}};window.WebViewJavascriptBridge.send(JSON.stringify(n),function(e){})}},i}),define("pages/detailFiles",["../logic/detailFiles","../parts/common","utils"],function(e,t,i){var a={pluginClass:e,style:{backgroundColor:t.backColor,minHeight:400},root:["content"],components:{content:{onlyForSticky:!0,type:"view",noScroll:!0,root:["repeat","file_nodata"],style:{overflow:"hidden",height:"auto"}},file_nodata:{type:"icon",ref:!0,text:"还没上传过文件哦~",className:"displaynone",style:{width:"100%",height:"100%",textAlign:"center",display:"block"},textStyle:{fontSize:16,color:"#999"},iconStyle:{width:"28%",height:"28%",paddingTop:"90px",paddingBottom:"10px",margin:"0 auto"},src:"./imgs/nofile@2x.png"},repeat:{type:"repeat",ref:!0,style:{backgroundColor:"#fff",flexDirection:"column",marginTop:10},itemStyle:{height:70,flexDirection:"row",alignItems:"center"},splitStyle:{marginLeft:77,borderTop:"1px solid #EEEEEE"},root:["item_icon","item_content"]},item_icon:{type:"image",src:"./imgs/space_tips.png",src_bind:"filePath",style:{w:48,marginLeft:15,marginRight:15}},item_content:{type:"view",style:{flex:1,paddingTop:10,height:"100%"},root:["item_name","item_bottom_wrap"]},item_name:{type:"text",style:{fontSize:16,color:"#292F33"},text_bind:"fileName",numberofline:1},item_bottom_wrap:{type:"view",style:{flexDirection:"row",paddingRight:14,paddingTop:8},root:["timesize","from"]},timesize:{type:"text",style:{fontSize:11,color:"#BEBEBE",flex:1},text:"2016-05-09 05:40 128.5KB"},from:{type:"text",style:{fontSize:11,color:"#292F33"},preTextStyle:{color:"#BBBBBB"},preText:"来自:",text_bind:"userName"}}};return a}),define("logic/index",["../parts/common","utils","../../../components/dialog"],function(e,t,i){function a(e){this.pageview=e.pageview,this.calendarResultDict={},this.sd=null,this.today=new Date,this.currentDateStr=t.ConvertDateToStr(this.today,"yyyy-MM-dd"),this.setHeader()}function n(e,t){var i=e+"/"+t+"/01 00:00:00",a=new Date(e,t,0),n=e+"/"+t+"/"+a.getDate()+" 23:59:59";return{firstDate:new Date(i).getTime(),lastDate:new Date(n).getTime()}}return a.prototype={setHeader:function(){var e=this;try{window.yyesn.ready(function(){window.yyesn.register({rightvalue:function(t){e.pageview.go("untreated")}}),window.yyesn.client.configNavBar(function(e){},{centerItems:[{title:"日程",titleColor:"#292f33"}],rightItems:[{title:"未处理",callback:"rightvalue"}]})})}catch(e){}},calendarlist_didmount:function(e,t){var i=this;window.setTimeout(function(){i.loadCalendarData(new Date)},300)},loadCalendarDataSuccess:function(){this.bindCalendarData()},bindCalendarData:function(){var e,t,i=this.pageview.refs.calendarlist.curShow;"day"===i?(e=this.pageview.refs.calendarlist.Swiper.getMidWrapper(),t=e.daysCreator.dayItems):"week"===i&&(e=this.pageview.refs.calendarlist.weekCalendar.Swiper.getMidWrapper(),t=e.weekCreator.dayItems);for(var a in t)this.calendarResultDict[a]===!0&&t[a].$el.addClass("wc-calendar-day-hasdata")},_getData:function(e,t,i){var a=this;this.pageview.ajax({type:"GET",url:"/schedule/getMonthList",data:{selectStart:e,selectEnd:t},success:function(e){if(0===e.code){for(var t=e.data,n={},s=0,r=t.length;s<r;s++)n[t[s]]=!0;for(var o=0,l=i.length;o<l;o++){var h=i[o];a.calendarResultDict[h]=n[h]||""}a.loadCalendarDataSuccess()}},error:function(e){}})},calendarlist_slidechange:function(e,t){this.loadCalendarData(e.curDate)},calendarlist_itemclick:function(e,i){var a=t.ConvertDateToStr(this.today,"yyyy-MM-dd");this.currentDateStr=i.dateStr,a===i.dateStr?this.pageview.refs.today_btn.$el.addClass("displaynone"):this.pageview.refs.today_btn.$el.removeClass("displaynone"),this.sd=new Date(i.dateStr+" 00:00:00").getTime(),this.pageview.refs.viewpager.items.month.contentInstance.refs.schedule_listview.setAjaxConfigParams({date:new Date(i.dateStr.replace(new RegExp(/(-)/g),"/")+" 00:00:00").getTime()}),this.pageview.refs.viewpager.items.month.contentInstance.refs.schedule_listview.loadFirstPageData(),this.pageview.refs.viewpager.curPageViewItem.contentInstance.refs.mydayview&&this.pageview.refs.viewpager.curPageViewItem.contentInstance.plugin.onShowItem(null,{rootPage:this.pageview,date:new Date(i.dateStr.replace(new RegExp(/(-)/g),"/")+" 00:00:00").getTime()})},loadCalendarData:function(e){var t,i,a,s,r=this,o=e.getFullYear(),l=e.getMonth()+1,h=n(o,l),c=this.pageview.refs.calendarlist.curShow;"day"===c?(t=this.pageview.refs.calendarlist.Swiper.getMidWrapper(),i=t.daysCreator):"week"===c&&(t=this.pageview.refs.calendarlist.weekCalendar.Swiper.getMidWrapper(),i=t.weekCreator),a=i.range,s=i.monthArr,this.timeID&&(window.clearTimeout(this.timeID),this.timeID=null),this.timeID=window.setTimeout(function(){r._getData(h.firstDate,h.lastDate,s)},800)},add_btn_click:function(e,t){var i=this;this.pageview.ajax({type:"GET",url:"/schedule/self",data:{},success:function(e){0===e.code&&i.pageview.go("add",{currentDateStr:i.currentDateStr,self:JSON.stringify({name:e.data.memberName,member_id:e.data.memberId})})}})},testHeader_click:function(e,t){this.pageview.go("untreated")},onPageBeforeLeave:function(e,t){if(t.isForward!==!0)return"week"===this.pageview.refs.calendarlist.curShow?(this.pageview.refs.calendarlist.canChangeMode=!0,this.pageview.refs.calendarlist.WeekModeToDaysMode(),this.pageview.refs.viewpager.showItem("month",{rootPage:this.pageview}),!1):(window.yyesn.client.closePage(),!1)},calendarlist_pulldown:function(e,t){return"week"===this.pageview.refs.calendarlist.curShow&&("month"===this.pageview.refs.viewpager.curPageViewItem.contentInstance.config.pageKey&&this.pageview.refs.viewpager.curPageViewItem.contentInstance.refs.body.$el.scrollTop()<=0)},calendarlist_calendarTouchChange:function(e,t){t.diff<0?(this.pageview.refs.calendarlist.canChangeMode=!1,this.pageview.refs.calendarlist.DaysModeToWeekMode(),this.pageview.refs.viewpager.showItem("day",{rootPage:this.pageview,date:this.sd})):(this.pageview.refs.calendarlist.canChangeMode=!0,this.pageview.refs.calendarlist.WeekModeToDaysMode(),this.pageview.refs.viewpager.showItem("month",{rootPage:this.pageview}))},calendarlist_modechange:function(e,t){this.loadCalendarData(e.curDate)},today_btn_click:function(e,t){this.pageview.refs.calendarlist.setValue(new Date),this.pageview.refs.calendarlist.$el.find(".wc-calendar-day-selected").click()},onPageResume:function(e,t){this.setHeader(),this.pageview.refs.viewpager.curPageViewItem.contentInstance.plugin.body_reload()}},a}),define("pages/index",["../logic/index","../parts/common","utils"],function(e,t,i){var a={pluginClass:e,style:{backgroundColor:t.backColor},root:["testHeader","body"],components:{testHeader:{type:"view",className:"displaynone",style:{height:20,backgroundColor:"#000"}},body:{type:"view",ref:!0,style:{flex:1},root:["calendarlist","today_btn","add_btn"]},calendarlist:{ref:!0,type:"schedulecalendar",root:["viewpager"],style:{}},viewpager:{type:"viewpager",ref:!0,defaultKey:"month",style:{backgroundColor:"#F2F3F4",flex:"1"}},today_btn:{type:"icon",text:"今",className:"displaynone",ref:!0,textStyle:{color:"#fff",fontSize:24},style:{w:46,borderRadius:"100%",position:"absolute",bottom:20,right:80,backgroundColor:"#FFCF0E",boxShadow:"0px 0px 7px #FFCF0E"}},add_btn:{type:"icon",font:"sc_e916",iconStyle:{fontSize:24},style:{w:46,color:"#fff",borderRadius:"100%",position:"absolute",bottom:20,right:20,backgroundColor:"#37B7FD",boxShadow:"0px 0px 7px #37B7FD"}}}};return a}),define("logic/month",["../parts/common","utils","../../../components/dialog"],function(e,t,i){function a(e){this.pageview=e.pageview}return a.prototype={schedule_listview_init:function(e,t){var i=new Date;e.config.ajaxConfig.data={date:i.getTime()}},onPageLoad:function(){},schedule_listview_didmount:function(e){e.loadFirstPageData()},row_top_left_init:function(e,t){3==e.datasource.role&&(e.config.iconStyle.backgroundColor="rgb(255, 207, 14)",e.config.font="sc_e91a")},row_bottom_tag_init:function(e,t){0===e.datasource.importance&&e.$el.addClass("displaynone")},row_top_right_init:function(e,t){},body_reload:function(e){this.pageview.refs.schedule_listview.loadFirstPageData()},schedule_listview_rowclick:function(e,t){this.pageview.go("detail",{scheduleId:e.datasource.id})},schedule_listview_parsedata:function(e,i){var a=i.data;if(0!==a.code)return!1;for(var n=0;n<a.data.length;n++){var s=t.getDateInfo(new Date(a.data[n].endTime)),r=t.getDateInfo(new Date(a.data[n].startTime));a.data[n].startTimeStr=r.month+"-"+r.day+" "+r.hourStr+":"+r.minStr,0===a.data[n].wholeDay?a.data[n].endTimeStr=s.month+"-"+s.day+" "+s.hourStr+":"+s.minStr+" 结束":a.data[n].endTimeStr=s.month+"-"+s.day+" 23:59 结束",r.year-s.year!==0&&(a.data[n].startTimeStr=r.year+"-"+a.data[n].startTimeStr,a.data[n].endTimeStr=s.year+"-"+a.data[n].endTimeStr)}return a.data}},a}),define("pages/month",["../logic/month","../parts/common","utils"],function(e,t,i){var a={pluginClass:e,style:{backgroundColor:t.backColor},root:["body"],components:{body:{ref:!0,type:"view",root:["schedule_listview"],style:{flex:1,overflow:"auto"}},schedule_listview:{type:"listview",ref:!0,selectedMode:"m",ajaxConfig:{url:"/schedule/getDayList",type:"GET",timeout:8e8,pageNumKey:"pageNumKey",pageSize:99999,data:{}},nodata:"nodata",rowStyle:{justifyContent:"center",padding:"0 15px",flexDirection:"column",height:"70",borderBottom:"1px solid #EEEEEE"},root:["row_top","row_bottom"]},row_top:{style:{marginBottom:10,display:"flex",flexDirection:"row",justifyContent:"space-between"},type:"view",root:["row_top_left","row_top_right"]},row_bottom:{type:"view",root:["row_bottom_tag","row_bottom_content"]},row_bottom_tag:{type:"text",text:"重要",textStyle:{fontSize:12,color:"red",border:"1px solid red",borderRadius:4,marginRight:5,padding:"0 2px"}},row_bottom_content:{type:"text",numberofline:1,style:{width:"90%",fontSize:16,lineHeight:20},text_bind:"title"},row_top_right:{style:{color:"#999999",fontSize:14},type:"text",text_bind:"endTimeStr"},row_top_left:{iconStyle:{fontSize:12,padding:4,marginRight:5,borderRadius:"100%",backgroundColor:"#37B7FD",color:"#fff"},textStyle:{color:"#999999",fontSize:14},type:"icon",font:"sc_e92c",text_bind:"startTimeStr"},nodata:{type:"view",style:{flexDirection:"column",alignItems:"center",justifyContent:"center"},root:["nodata_image"]},nodata_image:{type:"icon",style:{marginTop:40},iconStyle:{w:60},text:"您还未创建日程,赶紧去行动吧",textPos:"bottom",textStyle:{marginTop:16,fontSize:15,color:"#999999"},src:"./imgs/space_tips.png"}}};return a}),define("logic/repeatCycle",["../parts/common","utils","../../../components/dialog","../parts/timepicker"],function(e,t,i,a){function n(e){this.pageview=e.pageview,this.selectedData=this.pageview.showPageParams.selectedData,this.repaetData=[{id:"0",label:"永不"},{id:"1",label:"每天"},{id:"2",label:"每周"},{id:"3",label:"每月"},{id:"4",label:"每年"}]}return n.prototype={onPageLoad:function(){var e=this;this.pageview.do("cycle_repeat",function(t){t.bindData(e.repaetData),e.bindSelectedItemData()})},bindSelectedItemData:function(){var e=this;this.cycle_repeat.eachItem(function(t){t.datasource.id.toString()===e.selectedData.repeat_id.toString()&&t.select()})},cycle_repeat_init:function(e,t){this.cycle_repeat=e},cycle_repeat_itemclick:function(e,t){e.select(),this._selected(e.datasource.id,e.datasource.label)},_selected:function(e,t){this.selectedData={repeat_id:e,repeat_name:t},this.pageview.close()},onPageClose:function(){this.pageview.ownerPage.plugin.setRepeatFromSelector(this.selectedData.repeat_id,this.selectedData.repeat_name),this.selectedData=null}},n}),define("pages/repeatCycle",["../logic/repeatCycle","../parts/common","utils"],function(e,t,i){var a={pluginClass:e,style:{backgroundColor:t.backColor},root:["page_content"],components:{page_content:{type:"view",style:{flex:1,overflowY:"auto",backgroundColor:"#f2f3f4"},root:["cycle_repeat"]},cycle_repeat:{type:"repeat",selectedMode:"s",className:"cycle_repeat",ref:!0,itemStyle:{height:50,alignItems:"center",flexDirection:"row",overflow:"hidden",borderBottom:"1px solid #eee",width:"100%",backgroundColor:"#fff"},style:{marginTop:10,paddingLeft:15,flexDirection:"column",backgroundColor:"#fff"},root:["cycle_icon","item_select_icon"]},item_select_icon:{type:"icon",selectedClassName:"category-selected",font:"icomoon_e90a",iconStyle:{color:t.mainColor,fontSize:19},style:{width:40,opacity:0}},cycle_icon:{type:"text",text_bind:"label",style:{color:t.titleColor,fontSize:16,flex:1,justifyContent:"flex-start"}}}};return a}),define("logic/untreated",["../parts/common","utils","../../../components/dialog"],function(e,t,i){function a(e){this.pageview=e.pageview,this.setHeader()}return a.prototype={setHeader:function(){try{window.yyesn.ready(function(){window.yyesn.register({rightvalue:function(e){}}),window.yyesn.client.configNavBar(function(e){},{centerItems:[{title:"未处理",titleColor:"#292f33"}],rightItems:[]})})}catch(e){}},page_content_pulltorefresh:function(e,t){this.pageview.refs.listview.loadFirstPageData()},schedule_time_init:function(e,i){var a=t.ConvertDateToStr(e.datasource.startTime,"yyyy-MM-dd hh:mm"),n=t.ConvertDateToStr(e.datasource.endTime,"yyyy-MM-dd hh:mm");e.config.text=a+" 至 "+n},listview_parsedata:function(e,t){var i=t.data;return console.log(i),0===i.code&&i.data.data},reject_btn_click:function(e,t){this.handle_schedule(1,e.datasource.id,e)},receive_btn_click:function(e,t){this.handle_schedule(0,e.datasource.id,e)},repeat_main_click:function(e,t){this.pageview.go("detail",{scheduleId:e.datasource.id})},listview_init:function(e,t){this.listview=e},handle_schedule:function(e,t,i){var a=this;this.pageview.showLoading(),this.pageview.ajax({url:"/schedule/handle",type:"POST",data:{id:t,type:e},success:function(t){a.pageview.hideLoading(),0===t.code&&(1===e?a.pageview.showTip({text:t.data.msg,duration:1e3}):a.pageview.showTip({text:t.data.msg,duration:1e3}),i.parent.parent.remove())},error:function(){a.pageview.hideLoading()}})},onPageResume:function(e,t){this.setHeader(),this.listview.loadFirstPageData()}},a}),define("pages/untreated",["../logic/untreated","../parts/common","utils"],function(e,t,i){var a={pluginClass:e,style:{backgroundColor:t.backColor},root:["page_content"],components:{page_content:{type:"view",style:{backgroundColor:"#f2f3f4",flex:1,overflow:"auto"},root:["listview"]},listview:{ref:!0,type:"listview",autoLoadData:!0,nodata:"nodata_view",ajaxConfig:{url:"/schedule/unresolved",type:"GET",timeout:8e3,pageSize:9999999999999,pageNumKey:"-",data:{}},rowStyle:{flexDirction:"column",marginBottom:"10px"},style:{},root:["repeat_main","repeat_btn_group"]},nodata_view:{type:"view",style:{marginTop:"220px"},root:["nodata_icon","nodata_text"]},nodata_icon:{type:"icon",style:{justifyContent:"center",marginBottom:"15px"},iconStyle:{width:"70px",height:"70px"},src:"./imgs/space_tips.png"},nodata_text:{type:"text",style:{justifyContent:"center",fontSize:15,color:"#999999"},text:"暂无未处理日程"},repeat_main:{type:"view",style:{backgroundColor:"#fff",padding:"12px 15px"},root:["schedule_theme","schedule_describe","schedule_time"]},schedule_theme:{type:"text",preText:"主题:",numberofline:1,preTextStyle:{marginRight:10},style:{alignItems:"flex-start",color:"#333333",fontSize:16,paddingRight:35,flexDirection:"row"},text_bind:"title"},schedule_describe:{type:"text",preText:"描述:",numberofline:1,preTextStyle:{marginRight:10},style:{alignItems:"flex-start",color:"#999999",fontSize:14,paddingRight:35,marginTop:5},text_bind:"describe"},schedule_time:{type:"text",style:{color:"#999999",fontSize:12,marginTop:12,flexDirection:"row"}},repeat_btn_group:{type:"view",style:{flexDirection:"row",backgroundColor:"#fff",fontSize:14,justifyContent:"center",paddingTop:"12px",paddingBottom:"12px",borderTop:"1px solid #EEEEEE",borderBottom:"1px solid #EEEEEE"},root:["reject_btn","receive_btn"]},reject_btn:{type:"text",style:{flexGrow:"1",justifyContent:"center",color:"#FC4E5B",borderRight:"1px solid #eeeeee"},text:"拒绝"},receive_btn:{type:"text",style:{flexGrow:"1",justifyContent:"center",color:"#23CA79"},text:"接受"}}};return a}),define("logic/week",["../parts/common","utils","../../../components/dialog"],function(e,t,i){function a(e){this.pageview=e.pageview}return a.prototype={add_btn_click:function(e,t){this.pageview.go("add")}},a}),define("pages/week",["../logic/week","../parts/common","utils"],function(e,t,i){var a={pluginClass:e,style:{backgroundColor:t.backColor},root:["addtest"],components:{addtest:{type:"text",text:"week"}}};return a});var Brigdge=function(e){var t=window.navigator.userAgent,i={_initialized:!1,ios:/iPhone|iPad|iPod/i.test(t),android:/Android/i.test(t),readycallback:[],config:function(t){var i=e.WebViewJavascriptBridge,a={function:"permissionVerify",parameters:t};i.send(JSON.stringify(a),function(e){})},register:function(t){var a=e.WebViewJavascriptBridge;if("object"==typeof t&&i._initialized)for(var n in t)"function"==typeof t[n]?a.registerHandler(n,t[n]):alert("注册的必须为函数");else alert("请检查参数是否正确且是否已初始化")},ready:function(e){e&&(i._initialized?e():i.readycallback.push(e))}},a=function(t){var a=function(n,s,r){if(i._initialized){if(n||(n=function(e){}),"object"==typeof n&&(s=n,n=function(e){}),r&&"function"==typeof r&&t.parameters&&t.parameters.callback){var o=t.parameters.callback;e.WebViewJavascriptBridge.registerHandler(o,r)}if(r&&"function"==typeof r&&r(e.WebViewJavascriptBridge),s&&"object"==typeof s)if(t.parameters)for(var l in s)t.parameters[l]=s[l];else t.parameters=s;e.WebViewJavascriptBridge.send(JSON.stringify(t),function(e){n(JSON.parse(e))})}else i.readycallback.push({func:a,args:arguments}),console.log("js bridge has not been initialized yet.")};return a},n=function(e){var t={client:{hiddenMenu:{function:"hiddenMenu"},closePage:{function:"closePage"},setHeader:{function:"navRightItemList"},scanQRCode:{function:"scanQRCode",parameters:{type:0,callback:"scanQRCodeCallback"}},scanQRCodeMore:{function:"scanQRCode",parameters:{type:1,callback:"scanQRCodeCallback"}},openWindow:{function:"openWindow"},selectDate:{function:"selectDate"},selectList:{function:"selectList"},selectAttachment:{function:"selectAttachment"},selectCity:{function:"selectCity"},selectMap:{function:"selectMap"},copyText:{function:"copyText"},configNavigationBar:{function:"configNavigationBar"},share:{function:"share"},viewOrDeleteImage:{function:"viewOrDeleteImage"},viewImage:{function:"viewImage"},previewFile:{function:"previewFile"},getLocation:{function:"getLocation"},vibrate:{function:"vibrate"},getShaking:{function:"getShaking"},getStepCount:{function:"getStepCount"},getScreenshot:{function:"getScreenshot"},configNavBar:{function:"configNavBar"},payResult:{function:"payResult"},getStepServiceStatus:{},stopOrStartStepService:{function:"stopOrStartStepService"}},enterprise:{openApp:{function:"openAPP"},selectContacts:{function:"selectContacts"},callUer:{function:"callUer"},bindPhone:{function:"bindPhone"},feedReply:{function:"feedReply"},sendMemail:{function:"sendMemail"},sendMessage:{function:"sendMessage"},callUsers:{function:"callUsers"},selectGroup:{function:"selectGroup"},processAt:{function:"processAt"},viewUser:{function:"viewUser"},openChatWindow:{function:"openChatWindow"},createFeed:{function:"createFeed"},previewFile:{function:"previewFile"},viewTaskLog:{function:"viewTaskLog"},viewTaskUser:{function:"viewTaskUser"},createOredit:{function:"createOredit"},taskComment:{function:"taskComment"},feedDataUpdate:{function:"feedDataUpdate"}}};for(var i in t){e[i]={};for(var n in t[i]){var s=t[i][n];e[i][n]=a(s)}}},s=function(e){window.WebViewJavascriptBridge?e(WebViewJavascriptBridge):document.addEventListener("WebViewJavascriptBridgeReady",function(){e(WebViewJavascriptBridge)},!1)};return s(function(t){t.init(function(e,t){}),e.WebViewJavascriptBridge||(e.WebViewJavascriptBridge=t),i._initialized=!0,i.readycallback&&(i.readycallback.forEach(function(e){0==e.args.length?e.func():1==e.args.length?e.func(e.args[0]):2==e.args.length?e.func(e.args[0],e.args[1]):3==e.args.length&&e.func(e.args[0],e.args[1],e.args[2])}),i.readycallback=[])}),n(i),e.yyesn=i,i};Brigdge(window),define("libs/bridge",function(){});