/* Zepto v1.2.0 - zepto event ajax form ie - zeptojs.com/license */

define("utils",[],function(){function e(e){return"%"==e.substring(e.length-1)||"auto"==e}function t(e,t){e=parseInt(e);var i=t.width/m.baseSize.width;return i=i>1.5?1.5:i,t.width>1e3&&(i=1),parseInt(i*e)}function i(e,t){e=parseInt(e);var i=t.height/m.baseSize.height;return i=i<1?1:i,i=i>1.5?1.5:i,parseInt(i*e)}function o(e,o,s,a,n,r){return 1===a?"fontSize"==e||"font-size"==e?t(o,m.viewport):"width"==e||"left"==e||"right"==e||"maxWidth"==e||"marginLeft"==e||"marginRight"==e||"max-width"==e||"minWidth"==e||"min-width"==e?t(o,n):"height"==e||"top"==e||"marginBottom"==e||"marginTop"==e||"bottom"==e||"maxHeight"==e||"max-height"==e||"lineHeight"==e||"line-height"==e||"minHeight"==e||"min-height"==e?i(o,n):t(o,n):0===s||2===s?i(o,n):1===s||3===s?t(o,n):t(o,n)}function s(t,i,s,a){var n=[];if(i.length>1&&i.length<4||"padding"==t||"margin"==t)if(1==i.length){var r=i[0];i=[r,r,r,r]}else i[2]?i[3]||(i[3]=i[1]):(i[2]=i[0],i[3]=i[1]);for(var l=0,c=i.length;l<c;l++){var d=i[l];e(d)||(d=o(t,d,l,c,s,a)+"px"),n.push(d)}return n.join(" ")}var a,n,r,l,c,d={},h={},p={w:!0,borderRadius:!0,maxHeight:!0,lineHeight:!0,"line-height":!0,"max-height":!0,maxWidth:!0,"max-width":!0,minWidth:!0,"min-width":!0,minHeight:!0,"min-height":!0,fs:!0,top:!0,left:!0,right:!0,bottom:!0,fontSize:!0,"font-size":!0,width:!0,height:!0,padding:!0,paddingTop:!0,paddingRight:!0,paddingLeft:!0,paddingBottom:!0,"padding-bottom":!0,"padding-top":!0,"padding-left":!0,"padding-right":!0,margin:!0,marginTop:!0,marginRight:!0,marginLeft:!0,marginBottom:!0,"margin-bottom":!0,"margin-top":!0,"margin-left":!0,"margin-right":!0},u={flexShrink:"yy-fs-",flexDirection:"yy-fd-","flex-direction":"yy-fd-","flex-shrink":"yy-fs-",justifyContent:"yy-jc-","justify-content":"yy-jc-","align-items":"yy-ai-",alignItems:"yy-ai-",alignContent:"yy-ac-","align-content":"yy-ac-",alignSelf:"yy-as-","align-self":"yy-as-","flex-wrap":"yy-fw-",flexWrap:"yy-fw-",flex:"yy-flex-"},f=null,g=null,y={},m={isSupportFlexWrap:function(){return l||(l=document.createElement("p"),c=l.style.flexWrap||l.style.webkitFlexWrap,c=""===c),c},fontSize:function(e){return y[e.toString()]||(y[e.toString()]=this.getRealWidth(e)),y[e.toString()]},fontSize12:function(){return g||(g=this.getRealWidth(12)),g},fontSize13:function(){return a||(a=this.getRealWidth(13)),a},fontSize14:function(){return n||(n=this.getRealWidth(14)),n},fontSize15:function(){return r||(r=this.getRealWidth(15)),r},AutoResizeImage:function(e,t,i,o){var s=new Image;s.src=i.src,s.onload=function(){var a,n,r=1,l=s.width,c=s.height;if(n=e/l,a=t/c,0===e&&0===t?r=1:0===e?a<1&&(r=a):0===t?n<1&&(r=n):(n<1||a<1)&&(r=n<=a?n:a),"1"===o){r<1&&(l>=c?(l="auto",c="100%"):(l="100%",c="auto"));var d={w:"100%"===l||"auto"===l?l:l+"px",h:"100%"===c||"auto"===c?c:c+"px"};i.style.width=d.w,i.style.height=d.h}else r<1&&(l*=r,c*=r),i.height=c,i.width=l}},deviceInfo:function(){if(void 0!==this._deviceInfo)return this._deviceInfo;var e=navigator.userAgent,t=e.indexOf("Android")>-1||e.indexOf("Adr")>-1,i=!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);return this._deviceInfo={isAndroid:t,isIOS:i},this._deviceInfo},getPicSize:function(e,t,i,o){var s,a,n=1;return a=e/i,s=t/o,0===e&&0===t?n=1:0===e?s<1&&(n=s):0===t?a<1&&(n=a):(a<1||s<1)&&(n=a<=s?a:s),n<1&&(i>=o?(i="auto",o="100%"):(i="100%",o="auto")),{w:"100%"===i||"auto"===i?i:i+"px",h:"100%"===o||"auto"===o?o:o+"px"}},convertStrToDate:function(e){if(!e)return new Date;var t=e.split(" "),i=t[0],o=t[1]||"",s=o.split(":"),a=i.split("-");return 3!=a.length&&(a=i.split("/")),3!=a.length?new Date:o?new Date(a[0],parseInt(a[1])-1,a[2],s[0]||0,s[1]||0,s[2]||0):new Date(a[0],parseInt(a[1])-1,a[2])},getPreMonth:function(e){var t=this.getDateInfo(e),i=new Date(t.year,t.month-1,0);return i},getCurMonthFirstDay:function(e){e=this.convertToDate(e);var t=this.getDateInfo(e);return new Date(t.year,t.month-1,1)},getPreYear:function(e){var t=this.getDateInfo(e),i=new Date(t.year-1,t.month-1,1);return i},setDateToYear:function(e,t){var i=this.getDateInfo(e),o=new Date(t,i.month-1,1);return o},setMonthToDate:function(e,t){t=parseInt(t);var i=this.getDateInfo(e);return new Date(i.year,t-1,1)},getNextYear:function(e){var t=this.getDateInfo(e),i=new Date(t.year+1,t.month-1,1);return i},getNextMonth:function(e){var t=this.getDateInfo(e),i=new Date(t.year,t.month+1,0);return i},getMonthFirstDayWhicDayInWeek:function(e){e=this.convertToDate(e);var t=new Date(e.getFullYear(),e.getMonth(),1);return t.getDay()},ConvertDateToStr:function(e,t){e=this.convertToDate(e);var i=this.getDateInfo(e);return i.month=i.month<10?"0"+i.month:i.month,i.day=i.day<10?"0"+i.day:i.day,i.min=i.min<10?"0"+i.min:i.min,i.second=i.second<10?"0"+i.second:i.second,i.hour=i.hour<10?"0"+i.hour:i.hour,"yyyy-MM-dd"==t?i.year+"-"+i.month+"-"+i.day:"yyyy-MM"==t?i.year+"-"+i.month:"yyyy-MM-dd hh:mm:ss"==t?i.year+"-"+i.month+"-"+i.day+" "+i.hour+":"+i.min+":"+i.second:i.year+"-"+i.month+"-"+i.day},getMonthDayCount:function(e){e=this.convertToDate(e);var t=new Date(e.getFullYear(),e.getMonth()+1,0);return t.getDate()},convertToDate:function(e){return e instanceof Date?e:"string"==typeof e?this.convertStrToDate(e):new Date},_processtime:function(e){return e<10?"0"+e:e},weekArr:["日","一","二","三","四","五","六"],getDateInfo:function(e){e=this.convertToDate(e);var t=e.getMonth()+1,i=e.getDate(),o=e.getHours(),s=e.getMinutes(),a=e.getSeconds(),n=e.getDay();return{year:e.getFullYear(),month:t,weekStr:this.weekArr[n],weekFullStr:"星期"+this.weekArr[n],monthStr:this._processtime(t),day:i,dayStr:this._processtime(i),hour:o,hourStr:this._processtime(o),min:s,minStr:this._processtime(s),second:a,secondStr:this._processtime(a)}},viewport:{width:null,height:null},getUrl:function(e){if(e.indexOf("http")>=0||e.indexOf("https")>=0)return e;var t=this.appConfig.host;return t||console.error("请在app.js中指定host属性"),t=$.trim(t),e=$.trim(e),"/"==t.substring(t.length-1)&&(t=t.substring(0,t.length-1)),"/"==e.substring(0,1)&&(e=e.substring(1)),t+"/"+e},createStyleSheet:function(e,t){if(!document.getElementById(e)){var i=document.createElement("style");i.type="text/css",i.id=e,i.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(i)}},timestampToDateInfo:function(e){var t;try{e=parseFloat(e),t=new Date(e)}catch(e){t=new Date}return this.getDateInfo(t)},timestampToTimeStr:function(e){var t="";try{e=parseFloat(e);var i=new Date(e),o=new Date,s=o.getTime(),a=this.getDateInfo(i),n=this.getDateInfo(o);s=parseInt((s-e)/1e3);var r;s<60?t="刚刚":s<3600&&s>=60?(r=Math.floor(s/60),t=r+"分钟前"):t=n.year===a.year&&n.day===a.day&&n.month===a.month?"今天 "+a.hourStr+":"+a.minStr:n.year===a.year?a.monthStr+"-"+a.dayStr+" "+a.hourStr+":"+a.minStr:a.year+"-"+a.monthStr+"-"+a.dayStr+" "+a.hourStr+":"+a.minStr}catch(e){}return t},_isBadAndroid:null,isBadAndroid:function(){if(null!==this._isBadAndroid)return this._isBadAndroid;var e=window.navigator.appVersion;if(/Android/.test(e)&&!/Chrome\/\d/.test(e)){var t=e.match(/Safari\/(\d+.\d)/);t&&"object"==typeof t&&t.length>=2?this._isBadAndroid=parseFloat(t[1])<535.19:this._isBadAndroid=!0}else this._isBadAndroid=!1;return this._isBadAndroid},processHTMLMethod2:function(e){var t=$("<div></div>");t.html(e);var i=t.find("img"),o=t.html();i.replaceWith("");var s=t.text();return{originalText:o,imageDoms:i,curText:s}},processHTML:function(e,t){var i=$("<div></div>");i.html(e);var o=i.find("img"),s=$("<div></div>");s.html(e);var a=s.find("img");t&&(t(a),t(o)),o.replaceWith("");var n=i.text();return{dom:s,originalTextDom:i,imageDoms:o,curText:n}},ajax:function(e){var t=this,i=(e.pageviewInstance,t.appConfig.beforeSendAjax);i&&i(e),$.ajax({type:e.type,url:this.getUrl(e.url),timeout:e.timeout||7e3,data:e.data,success:function(i){var o=t.appConfig.onAjaxResponse;o&&o({isSuccess:!0,data:i,config:e}),e.success&&e.success(i)},error:function(i){var o=t.appConfig.onAjaxResponse;o&&o({isSuccess:!1,e:i,config:e,data:{code:-1e3,msg:"服务器错误"}}),e.error&&e.error(i)}})},concat:function(e,t,i){i||console.error("合并页面配置的时候没有指定namespace"),e.components=e.components||{};for(var o in t){var s=i+o;e.components[s]&&console.error(s+" 已经存在原有的页面中 请不要重复控件的Key");var a=t[o],n=a.root;if(n)for(var r=0,l=n.length;r<l;r++)n[r]=i+n[r];e.components[s]=t[o]}return e},getTransitionKeys:function(){if(f)return f;var e=document.createElement("DIV").style,t={};return"-webkit-transform"in e?(t.transitionend="webkitTransitionEnd",t.transform="-webkit-transform",t.transition="-webkit-transition"):(t.transitionend="transitionend",t.transform="transform",t.transition="transition"),f=t,t},baseSize:{width:375,height:667},getRealWidth:function(e){e=parseInt(e);var t=this.viewport.width/this.baseSize.width;return t=t>1.5?1.5:t,this.viewport.width>1e3&&(t=1),parseInt(t*e)},getRealHeight:function(e){e=parseInt(e);var t=this.viewport.height/this.baseSize.height;return t=t<1?1:t,t=t>1.5?1.5:t,parseInt(t*e)},_initScrennSize:function(){this.viewport.width||(this.viewport.width=window.screen.width>700?document.body.offsetWidth:window.screen.width,window.screen.width>700?this.viewport.height=document.body.offsetHeight:this.viewport.height=window.screen.height)},processStyle:function(e,i){e=this.clone(e),this._initScrennSize(),i||(i=this.viewport),e=e||{};for(var o in e){var a=e[o].toString();if(p[o]){var n=a.split(" ");"fs"==o?(e.fontSize=parseInt(a)+"px",delete e.fs):"w"==o?(delete e.width,delete e.height,e.height=e.width=t(e.w,i)+"px",delete e.w):e[o]=s(o,n,i,e)}}return e},processPageConfig:function(e){var t;if(this.viewport.width||this._initScrennSize(),e.showPageStyle){var i=e.showPageStyle.width||"100%",o=e.showPageStyle.height||"100%";i=i.toString(),o=o.toString(),i="%"==i.substring(i.length-1)?parseInt(i)/100*this.viewport.width:parseInt(i)*this.viewport.width,o="%"==o.substring(o.length-1)?parseInt(o)/100*this.viewport.height:parseInt(o)*this.viewport.height,t={width:i,height:o}}else t=this.viewport;if(e.style&&(e.style=this.processStyle(e.style,t)),e.components)for(var s in e.components){var a=this.clone(e.components[s]);for(var n in a)n.length>=5&&"STYLE"==n.substring(n.length-5).toUpperCase()&&(a[n]=this.processStyle(a[n],t));e.components[s]=a}return e},setPageConfigByPagePath:function(e,t){return t.isNoAdaptScreen||(t=this.processPageConfig(t)),h[e]=t,t},getPageConfigByPagePath:function(e){return h[e]},getComponentInstance:function(e){return d[e]},customerComponents:{},getComponentClass:function(e,t,i){var o=e.type,s=d[o];if(s)return void t(s);var a=m.customerComponents[o];a||(a="../../components/"+o),require([a],function(e){d[o]=e,t(e)},function(){i(e)})},clone:function(e){var t=JSON.stringify(e);return JSON.parse(t)},getClassByStyle:function(e){var t=[];for(var i in e){var o=u[i];if(o){var s=e[i];t.push(o+s)}}return t},css:function(e,t,i){if(t){var o=this.getClassByStyle(t);o.length>0&&e.addClass(o.join(" ")),i&&(t=this.processStyle(t)),e.css(t)}},simpleExtendObj:function(e,t){e=e||{},t=t||{};for(var i in t)e[i]=t[i];return e},processTransitionStyle:function(e){return{transition:e,"-webkit-transition":e}},processTransformStyle:function(e){return{transform:e,"-webkit-transform":e}},processTransitionTanformStyle:function(e,t){return{"-webkit-transition":e,"-webkit-transform":t}},copy:function(e,t){if(null===e||void 0===e||"object"!=typeof e)return e;if(e.constructor!=Object&&e.constructor!=Array)return e;if(e.constructor==Date||e.constructor==RegExp||e.constructor==Function||e.constructor==String||e.constructor==Number||e.constructor==Boolean)return new e.constructor(e);t=t||new e.constructor;for(var i in e)t[i]="undefined"==typeof t[i]?this.copy(e[i],null):t[i];return t},extends:function(e,t){function i(){}i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e,e.baseConstructor=t,e.superClass=t.prototype}};return m}),define("app",["utils"],function(e){return{init:function(e){e.start({host:"http://115.29.39.62/clist/",customerComponents:{},root:"index",baseSize:{width:375,height:667},beforeSendAjax:function(e){var t=e.pageviewInstance;e.data.token=t.params.token},beforeGo:function(e){var t=e.pageviewInstance;e.params.token=t.params.token},onAjaxResponse:function(t){if(t.isSuccess&&t.data){var i=t.data.code;if("100010008"===i.toString()){e.showTip({text:"操作过期,两秒后会自动退出",duration:3500,clickNoHide:!0});try{window.setTimeout(function(){window.yyesn.client.closePage()},3500)}catch(e){}}}},routerChange:function(e){e.isForward||"index"!=e.fromPage||window.yyesn.client.closePage()}})}}}),define("tip",["utils"],function(e){var t=function(e){var t=this;e=e||$(document.body),this.tipWrapper=$("<div class='yy-tip displayflex jc-center ai-center displaynone'></div>"),this.textDom=$('<div class="yy-tip-text displaynone"></div>'),this.backCover=$('<div class="yy-tip-backcover displaynone"></div>'),this.backCover.bind("click",function(){t.clickBackCover()}),this.tipWrapper.append(this.textDom),e.append(this.tipWrapper).append(this.backCover),this.hideTimeoutId=null};return t.prototype={show:function(t){var i=this;this.textPos=t.textPos||"bottom","left"==this.textPos||"right"==this.textPos?this.tipWrapper.addClass("flex-h"):this.tipWrapper.addClass("flex-v");var o=t.pos||"center";this.config=t,this.hideTimeoutId&&window.clearTimeout(this.hideTimeoutId),t=t||{};var s=t.style;s&&this.tipWrapper.css(e.processStyle(s)),this._setText(t.text,t.textStyle),this._setIcon(t.font,t.iconStyle),this.config.withoutBackCover||this.backCover.removeClass("displaynone"),this.startClass="yy-tip-ani-"+o+"-start",this.tipWrapper.removeClass("displaynone").addClass(this.startClass),window.setTimeout(function(){i.endClass="yy-tip-ani-"+o+"-end",i.tipWrapper.addClass(i.endClass)},3),t.duration&&!isNaN(t.duration)&&(this.hideTimeoutId=window.setTimeout(function(){i.hide()},parseInt(t.duration)))},_setText:function(t,i){t?(this.textDom.removeClass("displaynone"),i&&this.textDom.css(e.processStyle(i)),this.textDom.html(t)):this.textDom.addClass("displaynone")},_setIcon:function(t,i){this.iconDom&&this.iconDom.remove();var o,s;t=t||"";var a=t.split("_");2==a.length?(o=a[0],s=a[1],this.iconDom=$('<i class="yy-tip-icon displayflex jc-center ai-center yy-icon-code displaynone" data-icon="&#x'+s+';"></i>'),i&&this.iconDom.css(e.processStyle(i)),this.iconDom.removeClass("displaynone"),this.iconDom.css({"font-family":o}),"top"==this.textPos||"left"==this.textPos?this.iconDom.appendTo(this.tipWrapper):this.iconDom.insertBefore(this.textDom)):this.icomDom&&this.iconDom.addClass("displaynone")},clickBackCover:function(){this.config.clickNoHide||(this.hideTimeoutId&&window.clearTimeout(this.hideTimeoutId),this.hide())},hide:function(){var e=this;this.tipWrapper.removeClass(this.endClass),window.setTimeout(function(){e.tipWrapper.addClass("displaynone").removeClass(e.startClass),e.tipWrapper.remove(),e.backCover.remove()},300),e.backCover.addClass("displaynone")}},t}),define("base",["utils","tip"],function(e,t){function i(e,t){if(!e)return null;for(var i=e,o=0,s=t.length;o<s;o++){var a=t[o];if(i=i[a],!i&&0!=i){i=null;break}}return i}var o=function(t){var i=this;this.pageview=t.$$pageview||this,this.disabled=!1,this.parent=t.$$parent,this.datasource=t.$$datasource||[],this.rowInstance=t.$$rowInstance,t.ref&&(this.rowInstance?(this.rowInstance.refs=this.rowInstance.refs||{},this.rowInstance.refs[t.comKey]=this):this.pageview.refs[t.comKey]=this);var o=t.className||"";this.selectedClassName=t.selectedClassName,t.tagName=t.tagName||"DIV";var s=t.activeClassName?"data-activecn='"+t.activeClassName+"'":"";this.$el=$("<"+t.tagName+" "+s+" data-comname='"+t.comKey+"' class='"+o+"'></"+t.tagName+">"),t=this._processConfig(t),this.config=t,this.components={},"repeat"!=t.type&&"listview"!=t.type||(this.components=[]),t.comKey&&this.$el.addClass(t.comKey);var a=this.config.comKey+"_init";if(this.pageview.plugin&&this.pageview.plugin[a]){var n=this.pageview.plugin[a];n&&n.call(this.pageview.plugin,this)}var r=t.style;if(t.noNeedSetStyle||r&&"pageview"!=t.type&&"segment"!=t.type&&e.css(this.$el,r),this.disabledClassName=t.disabledClassName||"yy-disabled",this.disabled&&this.setDisabled(!0),t.comKey){var l=t.comKey+"_click",c=i.pageview.plugin[l];c&&this.$el.bind("click",function(e){e.preventDefault(),e.stopPropagation(),!i.disabled&&c&&c.call(i.pageview.plugin,i,{e:e})})}};return o.prototype.setDisabled=function(e){this.disabled=e,this.disabled?this.$el.addClass(this.disabledClassName):this.$el.removeClass(this.disabledClassName)},o.prototype._processConfig=function(e){for(var t in e){var o=t.split("_");if(2==o.length&&"bind"==o[1]){var s=e[t],a=o[0],n=typeof s;if("string"==n)e[a]=i(this.datasource,s.split("."));else if("object"==n)for(var r in s){var l=r,c=i(this.datasource,s[r].split("."));e[a]=e[a]||{},e[a][l]=c}}}return e},o.prototype.selected=function(e){if(!e||!this.config.disableParentSelect){this.isSelected=!0,this.selectedClassName&&""!==this.selectedClassName&&this.$el.addClass(this.selectedClassName);for(var t in this.components)this.components[t].selected(!0)}},o.prototype.unSelected=function(e){if(!e||!this.config.disableParentSelect){this.isSelected=!1,this.selectedClassName&&""!==this.selectedClassName&&this.$el.removeClass(this.selectedClassName);for(var t in this.components)this.components[t].unSelected(!0)}},o.prototype.getUniqueKey=function(){return this.pageview.config.pageKey+""+this.config.comKey},o.prototype.showTip=function(e){this.Tip=new t(this.$el),this.Tip.show(e)},o.prototype._prepareComponent=function(t,i,o){var s=e.clone(this.pageview.config.components[t]),a=s.type,n=e.getComponentInstance(a);s.$$pageview=this.pageview,s.$$rowInstance=o,s.$$parent=this,s.comKey=t,s.$$datasource=i;var r=new n(s,null),l=t+"_didmount";if(this.pageview.plugin){var c=this.pageview.plugin[l];c&&c.call(this.pageview.plugin,r)}return this.pageview.componentsInitActions[t]&&(this.pageview.componentsInitActions[t](r),delete this.pageview.componentsInitActions[t]),r},o.prototype._initComponents=function(e,t,i,o){for(var s=0,a=e.root.length;s<a;s++){var n=e.root[s],r=this._prepareComponent(n,t,o);e.isContainer||"repeat"==e.type?(this.components.push=r,i(r)):"tabbarview"==e.type?(this.components[n]=r,i(r)):this.components[n]=r}return this.components},o.prototype.getClientRect=function(){return this.$el[0].getBoundingClientRect()},o.prototype.getComponentInstanceByComKey=function(e,t,i,o,s){var a=this;this.loadFiles([e],this.pageview||this,function(){var s=a._prepareComponent(e,t,i);o(s)},function(){s&&s()})},o.prototype.initLayout=function(t,i,o,s){var a=this;this.config.root&&this.config.root.length>0&&this.loadFiles(this.config.root,this.pageview||this,function(){if(i)a._initComponents(a.config,t,i,o);else{a._initComponents(a.config,t,null,o);for(var n=0,r=a.config.root.length;n<r;n++){var l=a.components[a.config.root[n]],c=a.$$childrenWrapper||a.$el;c.append(l.$el);var d;a.config.splitStyle&&a.config.root.length>1&&n!=a.config.root.length-1&&(d=$("<div></div>"),l.splitLine=d,e.css(d,a.config.splitStyle,!0),c.append(d))}}if(s&&s(),"pageview"==a.config.type){var h=a.plugin.onPageLoad;h&&h.call(a.plugin,a)}},function(){})},o.prototype.setBadge=function(t,i){if(!this.$$badge){this.$$badge=$("<div class='displayflex jc-center ai-center yy-badge displaynone'></div>"),i=i||{};var o=i.width||i.height||16;i["min-width"]=i.height=o,delete i.width,i=e.processStyle(i),i["border-radius"]=parseInt(i.height)/2+"px",e.css(this.$$badge,i),this.$el.append(this.$$badge)}t?this.$$badge.html(t).removeClass("displaynone"):this.$$badge.addClass("displaynone")},o.prototype.showLoading=function(t){if(t=t||{},this.loadingConfig=t,!this.$$loadingWrapper){t.timeout&&!isNaN(t.timeout)||(t.timeout=7e3),this.loadingtimeout=parseInt(t.timeout)||7e3;var i="displaynone yy-loading-bk displayflex yy-jc-center yy-ai-center";t.style&&(t.style.alignItems||t.style["align-items"]||(i+="yy-ai-center")),this.$$loadingWrapper=$("<div class='"+i+"'></div>"),t.style&&e.css(this.$$loadingWrapper,t.style);var o="<div class='spinner center'><div class='spinner-blade'></div><div class='spinner-blade'></div><div class='spinner-blade'></div><div class='spinner-blade'></div><div class='spinner-blade'></div><div class='spinner-blade'></div><div class='spinner-blade'></div><div class='spinner-blade'></div><div class='spinner-blade'></div><div class='spinner-blade'></div><div class='spinner-blade'></div><div class='spinner-blade'></div></div>",s=$("<div class='yy-loading-wrapper displayflex yy-jc-center yy-ai-center'>"+o+"</div>");this.loadingText=$("<span class='yy-loading-text'></span>"),s.append(this.loadingText),this.$$loadingWrapper.append(s),this.$el.append(this.$$loadingWrapper)}this.loadingText.html(t.text||"正在努力加载"),this.startLoadingTimeout(t),this.$$loadingWrapper.removeClass("displaynone")},o.prototype.showLoadingError=function(){var e=this;if(this.$$loadingWrapper){if(this.loadingTimeId&&window.clearTimeout(this.loadingTimeId),!e.loadingConfig.reLoadCallBack)return e.pageview.showTip({text:"操作超时!",duration:1e3}),void e.hideLoading();e.loadingErrorWrapper||(e.loadingErrorWrapper=e._createErrorDom(function(){e.$$loadingWrapper.removeClass("yy-loading-wrapper-error"),e.loadingErrorWrapper.addClass("displaynone"),e.loadingTimeId=null,e.startLoadingTimeout(e.loadingConfig),e.loadingConfig.reLoadCallBack&&e.loadingConfig.reLoadCallBack()}),e.loadingErrorWrapper.appendTo(e.$$loadingWrapper)),e.$$loadingWrapper.addClass("yy-loading-wrapper-error"),e.loadingErrorWrapper.removeClass("displaynone")}},o.prototype.startLoadingTimeout=function(e){var t=this;this.loadingTimeId||(this.loadingTimeId=window.setTimeout(function(){t.showLoadingError()},this.loadingtimeout))},o.prototype._createErrorDom=function(t){var i=e.getRealWidth(11),o=e.getRealWidth(20),s=$("<div style='height:100px' class='yy-loadmore-wrapper displayflex jc-center ai-center flex-h displaynone'></div>"),a=$("<i style='font-size:"+o+"px' class='yy-icommon yy-loadmore-erroricon'></i>"),n=$("<span style='font-size:"+i+"px' class='yy-pull-meslabel'>网络异常,点击</span>"),r=$("<span style='font-size:"+i+"px' class='yy-loadmore-reload-babel'>重新加载</span>");return r.bind("click",function(){t()}),s.append(a).append(n).append(r),s},o.prototype.hideLoading=function(){this.loadingTimeId&&(window.clearTimeout(this.loadingTimeId),this.loadingTimeId=null),this.$$loadingWrapper&&this.$$loadingWrapper.addClass("displaynone")},o.prototype.loadFiles=function(t,i,o,s){for(var a=t.length,n=0,r=0;r<a;r++)!function(t,a,r){var l=i.config.components[r];e.getComponentClass(l,function(e){n+=1,n==t&&o()},function(){s()})}(a,r,t[r])},o}),define("pageview",["utils","base"],function(e,t){function i(e){var t=this;if(this.refs={},this.componentsInitActions={},i.baseConstructor.call(this,e),e.root=e.root||[],this.params=e.$$params,this.showPageParams=e.showPageParams||{},this.prePageView=e.prePageView,this.pageManager=e.$$pageManager,this.config=e,this.innerPages={},this.innerPagesWrappers={},e.pluginClass)try{this.plugin=new e.pluginClass({pageview:this})}catch(e){console.log(e)}this.components={};var o=e.style;this.$el.addClass("yy-pageview displayflex"),this.showPageBackCover=$("<div class='yy-backcover displaynone'></div>"),this.innerWrapper=$("<div class='displayflex yy-page-inner'></div>"),this.$$childrenWrapper=this.innerWrapper,this.$el.append(this.innerWrapper).append(this.showPageBackCover),o&&this.innerWrapper.css(o),this.showPageBackCover.bind("click",function(){t.hideCurShowPage()}),this.initLayout()}var o={fromLeft1:{zIndex:5,left:"0",top:0,transform:"translate3d(-100%,0,0)","-webkit-transform":"translate3d(-100%,0,0)"},fromLeft2:{zIndex:20,left:"0",top:0,transform:"translate3d(-100%,0,0)","-webkit-transform":"translate3d(-100%,0,0)"},fromLeft3:{left:0,top:0,zIndex:5,transform:"translate3d(0,0,0)","-webkit-transform":"translate3d(0,0,0)"},fromRight1:{zIndex:5,right:"0",top:0,transform:"translate3d(100%,0,0)","-webkit-transform":"translate3d(100%,0,0)"},fromRight2:{zIndex:20,right:"0",top:0,transform:"translate3d(100%,0,0)","-webkit-transform":"translate3d(100%,0,0)"},fromRight3:{zIndex:5,right:0,top:0,transform:"translate3d(0,0,0)","-webkit-transform":"translate3d(0,0,0)"},opacity:{left:"0",top:0},fromBottom:{zIndex:20,left:"0",bottom:"0",transform:"translate3d(0,100%,0)","-webkit-transform":"translate3d(0,100%,0)"}},s={fromLeft1:"yy-init-left",fromLeft2:"yy-init-left",fromLeft3:"yy-init-left",fromRight1:"yy-init-right",fromRight2:"yy-init-right",fromRight3:"yy-init-right",opacity:"yy-init-left",fromBottom:"yy-init-bottom"};return e.extends(i,t),i.prototype.destory=function(){this.$el.remove()},i.prototype.ajax=function(t){t.pageviewInstance=this,e.ajax(t)},i.prototype.Enter=function(e,t){var i=this;if(this.$el[0].className=e,t){if(i.pageManager.getPageNameFromUrl()===i.config.pageKey){var o=i.plugin.onPageEnter;o&&o.call(i.plugin)}}else this.$el[0].addEventListener("webkitAnimationEnd",function(){if(i.pageManager.getPageNameFromUrl()===i.config.pageKey){var e=i.plugin.onPageEnter;e&&e.call(i.plugin)}})},i.prototype.bindShowPageEnterEvent=function(){var e=this;this.$el[0].parentNode.addEventListener("webkitTransitionEnd",function(){if(e.$$isshow){var t=e.plugin.onPageEnter;t&&t.call(e.plugin)}})},i.prototype.hideCurShowPage=function(){var t=this;if(this.pageManager.blur(),this.showpageInstance.showpageInstance)return this.showpageInstance.hideCurShowPage(),!0;if(this.showpage_wrapper){this.showpageInstance.$$isshow=!1;var i=this.showpageInstance.plugin.onPageClose;i&&i.call(this.showpageInstance.plugin);var a=this.showpage_wrapper.attr("data-mode");this.showPageBackCover.addClass("displaynone"),this.innerWrapper[0].className="displayflex yy-page-inner "+s[a]+"-im ",window.setTimeout(function(){t.innerWrapper.css(e.processTransitionTanformStyle("none","translate3d(0,0,0)"))},300),"fromLeft1"==a||"fromLeft2"==a?this.showpage_wrapper.css(e.processTransformStyle("translate3d(-100%,0,0)")):"fromRight1"==a||"fromRight2"==a?this.showpage_wrapper.css(e.processTransformStyle("translate3d(100%,0,0)")):this.showpage_wrapper.css(o[a])}var n=this.showpageInstance.plugin.onPageResume;return n&&n.call(this.plugin),this.showpage_wrapper=null,this.showpageInstance=null,!1},i.prototype.do=function(e,t){var i=this.refs[e];i?t(i):(this.config.components[e].ref||console.error("请务必在"+e+"控件上设置ref:true"),this.componentsInitActions[e]=t)},i.prototype.showLoadingProgressbar=function(){var e=this;this.loadingProgreessbar||(this.loadingProgreessbarWrapper=$("<div class='yy-loading-pbw displaynone'></div>"),this.loadingProgreessbar=$("<div class='yy-loading-pb'></div>"),this.loadingProgreessbarWrapper.append(this.loadingProgreessbar),this.loadingProgreessbarWrapper.appendTo(this.$el)),this.loadingProgreessbarWrapper.removeClass("displaynone"),window.setTimeout(function(){e.loadingProgreessbar.css({width:"90%"})},6)},i.prototype.hideLoadingProgressbar=function(){this.loadingProgreessbar&&(this.loadingProgreessbar.css({width:"0%"}),this.loadingProgreessbarWrapper.addClass("displaynone"))},i.prototype.close=function(){this.ownerPage&&this.ownerPage.hideCurShowPage()},i.prototype.showPage=function(t){if(t&&t.pageKey){this.pageManager.blur(),t.inRouter!==!1&&this.pageManager.regeistShowPageInRouter(this.config.pageKey);var i=this;this.showpage_wrapper=this.innerPagesWrappers[t.pageKey],this.showpageInstance=this.innerPages[t.pageKey],this.showLoadingProgressbar(),!this.showpage_wrapper||void 0!==t.nocache&&t.nocache?this.pageview.pageManager.getPageConfigByPageKey(t.pageKey,function(s){var a=t.params||{};s.showPageParams=a;var n=i.pageview.pageManager.createPageView(s);n.$el.addClass("yy-pageview-show"),n.ownerPage=i,i.hideLoadingProgressbar(),i.showpageInstance=n,i.innerPages[t.pageKey]=n,i.showpage_wrapper=$("<div class='yy-showpage'></div>");var r=s.showPageStyle||{width:"100%",height:"100%"};r&&(delete r.top,delete r.right,delete r.left,delete r.bottom);var l=t.mode||"fromLeft1";i.showpage_wrapper.attr("data-mode",l);var c=r.width||"100%",d=r.height||"100%";r=r||{};var h=o[l]||o.fromLeft1;h=e.clone(h),i.showpage_wrapper.attr("data-width",c),i.showpage_wrapper.attr("data-height",d),i.showpage_wrapper.css(e.simpleExtendObj(r,h)),i.innerPagesWrappers[t.pageKey]=i.showpage_wrapper,i.showpage_wrapper.append(n.$el),i.$el.append(i.showpage_wrapper),n.bindShowPageEnterEvent(),i._showpageAnimate(t,i.showpage_wrapper,n)},function(){}):(this.hideLoadingProgressbar(),this._showpageAnimate(t,this.showpage_wrapper,this.showpageInstance))}},i.prototype.goBack=function(){this.pageManager.goBack()},i.prototype.go=function(e,t){t=t||{};var i=this.pageManager.appConfig.beforeGo;i&&i({params:t,pageviewInstance:this}),this.pageManager.go(e,t)},i.prototype._showpageAnimate=function(t,i,o){var a=this,n=12;o.$$isshow=!0;var r=i.attr("data-width"),l=i.attr("data-mode");if(this.innerWrapper[0].className="displayflex yy-page-inner "+s[l],"fromLeft1"!=l&&"fromLeft2"!=l||(this.showPageBackCover.removeClass("displaynone").css({left:r}),window.setTimeout(function(){if("fromLeft1"==l){var t=e.processTransitionTanformStyle("transform .3s cubic-bezier(.05, .69, .14, 1)","translate3d("+r+",0,0)");t["box-shadow"]="0px 0px 13px 1px #929292",a.innerWrapper.css(t)}i.css(e.processTransitionTanformStyle("transform .3s cubic-bezier(.05, .69, .14, 1)","translate3d(0,0,0)"))},n)),"fromLeft3"==l){this.showPageBackCover.removeClass("displaynone").css({left:r});var c=e.processTransitionTanformStyle("transform .3s cubic-bezier(.05, .69, .14, 1)","translate3d("+r+",0,0)");c["box-shadow"]="0px 0px 13px 1px #929292",window.setTimeout(function(){a.innerWrapper.css(c)},n)}if("fromRight1"!=l&&"fromRight2"!=l||(this.showPageBackCover.removeClass("displaynone").css({right:r}),window.setTimeout(function(){var t=e.processTransitionTanformStyle("transform .3s cubic-bezier(.05, .69, .14, 1)","translate3d(-"+r+",0,0)");t["box-shadow"]="0px 0px 13px 1px #929292","fromRight1"==l&&a.innerWrapper.css(t),i.css(e.processTransitionTanformStyle("transform .3s cubic-bezier(.05, .69, .14, 1)","translate3d(0,0,0)"))},n)),"fromRight3"==l){this.showPageBackCover.removeClass("displaynone").css({right:r});var c=e.processTransitionTanformStyle("transform .3s cubic-bezier(.05, .69, .14, 1)","translate3d(-"+r+",0,0)");c["box-shadow"]="0px 0px 13px 1px #929292",window.setTimeout(function(){a.innerWrapper.css(c)},n)}if("fromBottom"==l){i.attr("data-height");this.showPageBackCover.removeClass("displaynone").css({left:"0",top:"0"}),window.setTimeout(function(){i.css(e.processTransitionTanformStyle("transform .2s cubic-bezier(.05, .69, .14, 1)","translate3d(0,0,0)"))},n)}},i}),!function(e,t){"function"==typeof define&&define.amd?define("$",[],function(){return t(e)}):t(e)}(this,function(e){var t=function(){function t(e){return null==e?String(e):q[X.call(e)]||"object"}function i(e){return"function"==t(e)}function o(e){return null!=e&&e==e.window}function s(e){return null!=e&&e.nodeType==e.DOCUMENT_NODE}function a(e){return"object"==t(e)}function n(e){return a(e)&&!o(e)&&Object.getPrototypeOf(e)==Object.prototype}function r(e){var t=!!e&&"length"in e&&e.length,i=$.type(e);return"function"!=i&&!o(e)&&("array"==i||0===t||"number"==typeof t&&t>0&&t-1 in e)}function l(e){return P.call(e,function(e){return null!=e})}function c(e){return e.length>0?$.fn.concat.apply([],e):e}function d(e){return e.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function h(e){return e in R?R[e]:R[e]=new RegExp("(^|\\s)"+e+"(\\s|$)")}function p(e,t){return"number"!=typeof t||E[d(e)]?t:t+"px"}function u(e){var t,i;return M[e]||(t=B.createElement(e),B.body.appendChild(t),i=getComputedStyle(t,"").getPropertyValue("display"),t.parentNode.removeChild(t),"none"==i&&(i="block"),M[e]=i),M[e]}function f(e){return"children"in e?L.call(e.children):$.map(e.childNodes,function(e){return 1==e.nodeType?e:void 0})}function g(e,t){var i,o=e?e.length:0;for(i=0;o>i;i++)this[i]=e[i];this.length=o,this.selector=t||""}function y(e,t,i){for(S in t)i&&(n(t[S])||ee(t[S]))?(n(t[S])&&!n(e[S])&&(e[S]={}),ee(t[S])&&!ee(e[S])&&(e[S]=[]),y(e[S],t[S],i)):t[S]!==_&&(e[S]=t[S]);
}function m(e,t){return null==t?$(e):$(e).filter(t)}function v(e,t,o,s){return i(t)?t.call(e,o,s):t}function w(e,t,i){null==i?e.removeAttribute(t):e.setAttribute(t,i)}function x(e,t){var i=e.className||"",o=i&&i.baseVal!==_;return t===_?o?i.baseVal:i:void(o?i.baseVal=t:e.className=t)}function b(e){try{return e?"true"==e||"false"!=e&&("null"==e?null:+e+""==e?+e:/^[\[\{]/.test(e)?$.parseJSON(e):e):e}catch(t){return e}}function C(e,t){t(e);for(var i=0,o=e.childNodes.length;o>i;i++)C(e.childNodes[i],t)}var _,S,$,D,I,k,T=[],W=T.concat,P=T.filter,L=T.slice,B=e.document,M={},R={},E={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},N=/^\s*<(\w+|!)[^>]*>/,A=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,j=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,z=/^(?:body|html)$/i,K=/([A-Z])/g,H=["val","css","html","text","data","width","height","offset"],O=["after","prepend","before","append"],V=B.createElement("table"),F=B.createElement("tr"),Y={tr:B.createElement("tbody"),tbody:V,thead:V,tfoot:V,td:F,th:F,"*":B.createElement("div")},U=/complete|loaded|interactive/,G=/^[\w-]*$/,q={},X=q.toString,J={},Z=B.createElement("div"),Q={tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},ee=Array.isArray||function(e){return e instanceof Array};return J.matches=function(e,t){if(!t||!e||1!==e.nodeType)return!1;var i=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.matchesSelector;if(i)return i.call(e,t);var o,s=e.parentNode,a=!s;return a&&(s=Z).appendChild(e),o=~J.qsa(s,t).indexOf(e),a&&Z.removeChild(e),o},I=function(e){return e.replace(/-+(.)?/g,function(e,t){return t?t.toUpperCase():""})},k=function(e){return P.call(e,function(t,i){return e.indexOf(t)==i})},J.fragment=function(e,t,i){var o,s,a;return A.test(e)&&(o=$(B.createElement(RegExp.$1))),o||(e.replace&&(e=e.replace(j,"<$1></$2>")),t===_&&(t=N.test(e)&&RegExp.$1),t in Y||(t="*"),a=Y[t],a.innerHTML=""+e,o=$.each(L.call(a.childNodes),function(){a.removeChild(this)})),n(i)&&(s=$(o),$.each(i,function(e,t){H.indexOf(e)>-1?s[e](t):s.attr(e,t)})),o},J.Z=function(e,t){return new g(e,t)},J.isZ=function(e){return e instanceof J.Z},J.init=function(e,t){var o;if(!e)return J.Z();if("string"==typeof e)if(e=e.trim(),"<"==e[0]&&N.test(e))o=J.fragment(e,RegExp.$1,t),e=null;else{if(t!==_)return $(t).find(e);o=J.qsa(B,e)}else{if(i(e))return $(B).ready(e);if(J.isZ(e))return e;if(ee(e))o=l(e);else if(a(e))o=[e],e=null;else if(N.test(e))o=J.fragment(e.trim(),RegExp.$1,t),e=null;else{if(t!==_)return $(t).find(e);o=J.qsa(B,e)}}return J.Z(o,e)},$=function(e,t){return J.init(e,t)},$.extend=function(e){var t,i=L.call(arguments,1);return"boolean"==typeof e&&(t=e,e=i.shift()),i.forEach(function(i){y(e,i,t)}),e},J.qsa=function(e,t){var i,o="#"==t[0],s=!o&&"."==t[0],a=o||s?t.slice(1):t,n=G.test(a);return e.getElementById&&n&&o?(i=e.getElementById(a))?[i]:[]:1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType?[]:L.call(n&&!o&&e.getElementsByClassName?s?e.getElementsByClassName(a):e.getElementsByTagName(t):e.querySelectorAll(t))},$.contains=B.documentElement.contains?function(e,t){return e!==t&&e.contains(t)}:function(e,t){for(;t&&(t=t.parentNode);)if(t===e)return!0;return!1},$.type=t,$.isFunction=i,$.isWindow=o,$.isArray=ee,$.isPlainObject=n,$.isEmptyObject=function(e){var t;for(t in e)return!1;return!0},$.isNumeric=function(e){var t=Number(e),i=typeof e;return null!=e&&"boolean"!=i&&("string"!=i||e.length)&&!isNaN(t)&&isFinite(t)||!1},$.inArray=function(e,t,i){return T.indexOf.call(t,e,i)},$.camelCase=I,$.trim=function(e){return null==e?"":String.prototype.trim.call(e)},$.uuid=0,$.support={},$.expr={},$.noop=function(){},$.map=function(e,t){var i,o,s,a=[];if(r(e))for(o=0;o<e.length;o++)i=t(e[o],o),null!=i&&a.push(i);else for(s in e)i=t(e[s],s),null!=i&&a.push(i);return c(a)},$.each=function(e,t){var i,o;if(r(e)){for(i=0;i<e.length;i++)if(t.call(e[i],i,e[i])===!1)return e}else for(o in e)if(t.call(e[o],o,e[o])===!1)return e;return e},$.grep=function(e,t){return P.call(e,t)},e.JSON&&($.parseJSON=JSON.parse),$.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){q["[object "+t+"]"]=t.toLowerCase()}),$.fn={constructor:J.Z,length:0,forEach:T.forEach,reduce:T.reduce,push:T.push,sort:T.sort,splice:T.splice,indexOf:T.indexOf,concat:function(){var e,t,i=[];for(e=0;e<arguments.length;e++)t=arguments[e],i[e]=J.isZ(t)?t.toArray():t;return W.apply(J.isZ(this)?this.toArray():this,i)},map:function(e){return $($.map(this,function(t,i){return e.call(t,i,t)}))},slice:function(){return $(L.apply(this,arguments))},ready:function(e){return U.test(B.readyState)&&B.body?e($):B.addEventListener("DOMContentLoaded",function(){e($)},!1),this},get:function(e){return e===_?L.call(this):this[e>=0?e:e+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(e){return T.every.call(this,function(t,i){return e.call(t,i,t)!==!1}),this},filter:function(e){return i(e)?this.not(this.not(e)):$(P.call(this,function(t){return J.matches(t,e)}))},add:function(e,t){return $(k(this.concat($(e,t))))},is:function(e){return this.length>0&&J.matches(this[0],e)},not:function(e){var t=[];if(i(e)&&e.call!==_)this.each(function(i){e.call(this,i)||t.push(this)});else{var o="string"==typeof e?this.filter(e):r(e)&&i(e.item)?L.call(e):$(e);this.forEach(function(e){o.indexOf(e)<0&&t.push(e)})}return $(t)},has:function(e){return this.filter(function(){return a(e)?$.contains(this,e):$(this).find(e).size()})},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){var e=this[0];return e&&!a(e)?e:$(e)},last:function(){var e=this[this.length-1];return e&&!a(e)?e:$(e)},find:function(e){var t,i=this;return t=e?"object"==typeof e?$(e).filter(function(){var e=this;return T.some.call(i,function(t){return $.contains(t,e)})}):1==this.length?$(J.qsa(this[0],e)):this.map(function(){return J.qsa(this,e)}):$()},closest:function(e,t){var i=[],o="object"==typeof e&&$(e);return this.each(function(a,n){for(;n&&!(o?o.indexOf(n)>=0:J.matches(n,e));)n=n!==t&&!s(n)&&n.parentNode;n&&i.indexOf(n)<0&&i.push(n)}),$(i)},parents:function(e){for(var t=[],i=this;i.length>0;)i=$.map(i,function(e){return(e=e.parentNode)&&!s(e)&&t.indexOf(e)<0?(t.push(e),e):void 0});return m(t,e)},parent:function(e){return m(k(this.pluck("parentNode")),e)},children:function(e){return m(this.map(function(){return f(this)}),e)},contents:function(){return this.map(function(){return this.contentDocument||L.call(this.childNodes)})},siblings:function(e){return m(this.map(function(e,t){return P.call(f(t.parentNode),function(e){return e!==t})}),e)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(e){return $.map(this,function(t){return t[e]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=u(this.nodeName))})},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){var t=i(e);if(this[0]&&!t)var o=$(e).get(0),s=o.parentNode||this.length>1;return this.each(function(i){$(this).wrapAll(t?e.call(this,i):s?o.cloneNode(!0):o)})},wrapAll:function(e){if(this[0]){$(this[0]).before(e=$(e));for(var t;(t=e.children()).length;)e=t.first();$(e).append(this)}return this},wrapInner:function(e){var t=i(e);return this.each(function(i){var o=$(this),s=o.contents(),a=t?e.call(this,i):e;s.length?s.wrapAll(a):o.append(a)})},unwrap:function(){return this.parent().each(function(){$(this).replaceWith($(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(e){return this.each(function(){var t=$(this);(e===_?"none"==t.css("display"):e)?t.show():t.hide()})},prev:function(e){return $(this.pluck("previousElementSibling")).filter(e||"*")},next:function(e){return $(this.pluck("nextElementSibling")).filter(e||"*")},html:function(e){return 0 in arguments?this.each(function(t){var i=this.innerHTML;$(this).empty().append(v(this,e,t,i))}):0 in this?this[0].innerHTML:null},text:function(e){return 0 in arguments?this.each(function(t){var i=v(this,e,t,this.textContent);this.textContent=null==i?"":""+i}):0 in this?this.pluck("textContent").join(""):null},attr:function(e,t){var i;return"string"!=typeof e||1 in arguments?this.each(function(i){if(1===this.nodeType)if(a(e))for(S in e)w(this,S,e[S]);else w(this,e,v(this,t,i,this.getAttribute(e)))}):0 in this&&1==this[0].nodeType&&null!=(i=this[0].getAttribute(e))?i:_},removeAttr:function(e){return this.each(function(){1===this.nodeType&&e.split(" ").forEach(function(e){w(this,e)},this)})},prop:function(e,t){return e=Q[e]||e,1 in arguments?this.each(function(i){this[e]=v(this,t,i,this[e])}):this[0]&&this[0][e]},removeProp:function(e){return e=Q[e]||e,this.each(function(){delete this[e]})},data:function(e,t){var i="data-"+e.replace(K,"-$1").toLowerCase(),o=1 in arguments?this.attr(i,t):this.attr(i);return null!==o?b(o):_},val:function(e){return 0 in arguments?(null==e&&(e=""),this.each(function(t){this.value=v(this,e,t,this.value)})):this[0]&&(this[0].multiple?$(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value)},offset:function(t){if(t)return this.each(function(e){var i=$(this),o=v(this,t,e,i.offset()),s=i.offsetParent().offset(),a={top:o.top-s.top,left:o.left-s.left};"static"==i.css("position")&&(a.position="relative"),i.css(a)});if(!this.length)return null;if(B.documentElement!==this[0]&&!$.contains(B.documentElement,this[0]))return{top:0,left:0};var i=this[0].getBoundingClientRect();return{left:i.left+e.pageXOffset,top:i.top+e.pageYOffset,width:Math.round(i.width),height:Math.round(i.height)}},css:function(e,i){if(arguments.length<2){var o=this[0];if("string"==typeof e){if(!o)return;return o.style[I(e)]||getComputedStyle(o,"").getPropertyValue(e)}if(ee(e)){if(!o)return;var s={},a=getComputedStyle(o,"");return $.each(e,function(e,t){s[t]=o.style[I(t)]||a.getPropertyValue(t)}),s}}var n="";if("string"==t(e))i||0===i?n=d(e)+":"+p(e,i):this.each(function(){this.style.removeProperty(d(e))});else for(S in e)e[S]||0===e[S]?n+=d(S)+":"+p(S,e[S])+";":this.each(function(){this.style.removeProperty(d(S))});return this.each(function(){this.style.cssText+=";"+n})},index:function(e){return e?this.indexOf($(e)[0]):this.parent().children().indexOf(this[0])},hasClass:function(e){return!!e&&T.some.call(this,function(e){return this.test(x(e))},h(e))},addClass:function(e){return e?this.each(function(t){if("className"in this){D=[];var i=x(this),o=v(this,e,t,i);o.split(/\s+/g).forEach(function(e){$(this).hasClass(e)||D.push(e)},this),D.length&&x(this,i+(i?" ":"")+D.join(" "))}}):this},removeClass:function(e){return this.each(function(t){if("className"in this){if(e===_)return x(this,"");D=x(this),v(this,e,t,D).split(/\s+/g).forEach(function(e){D=D.replace(h(e)," ")}),x(this,D.trim())}})},toggleClass:function(e,t){return e?this.each(function(i){var o=$(this),s=v(this,e,i,x(this));s.split(/\s+/g).forEach(function(e){(t===_?!o.hasClass(e):t)?o.addClass(e):o.removeClass(e)})}):this},scrollTop:function(e){if(this.length){var t="scrollTop"in this[0];return e===_?t?this[0].scrollTop:this[0].pageYOffset:this.each(t?function(){this.scrollTop=e}:function(){this.scrollTo(this.scrollX,e)})}},scrollLeft:function(e){if(this.length){var t="scrollLeft"in this[0];return e===_?t?this[0].scrollLeft:this[0].pageXOffset:this.each(t?function(){this.scrollLeft=e}:function(){this.scrollTo(e,this.scrollY)})}},position:function(){if(this.length){var e=this[0],t=this.offsetParent(),i=this.offset(),o=z.test(t[0].nodeName)?{top:0,left:0}:t.offset();return i.top-=parseFloat($(e).css("margin-top"))||0,i.left-=parseFloat($(e).css("margin-left"))||0,o.top+=parseFloat($(t[0]).css("border-top-width"))||0,o.left+=parseFloat($(t[0]).css("border-left-width"))||0,{top:i.top-o.top,left:i.left-o.left}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||B.body;e&&!z.test(e.nodeName)&&"static"==$(e).css("position");)e=e.offsetParent;return e})}},$.fn.detach=$.fn.remove,["width","height"].forEach(function(e){var t=e.replace(/./,function(e){return e[0].toUpperCase()});$.fn[e]=function(i){var a,n=this[0];return i===_?o(n)?n["inner"+t]:s(n)?n.documentElement["scroll"+t]:(a=this.offset())&&a[e]:this.each(function(t){n=$(this),n.css(e,v(this,i,t,n[e]()))})}}),O.forEach(function(i,o){var s=o%2;$.fn[i]=function(){var i,a,n=$.map(arguments,function(e){var o=[];return i=t(e),"array"==i?(e.forEach(function(e){return e.nodeType!==_?o.push(e):$.zepto.isZ(e)?o=o.concat(e.get()):void(o=o.concat(J.fragment(e)))}),o):"object"==i||null==e?e:J.fragment(e)}),r=this.length>1;return n.length<1?this:this.each(function(t,i){a=s?i:i.parentNode,i=0==o?i.nextSibling:1==o?i.firstChild:2==o?i:null;var l=$.contains(B.documentElement,a);n.forEach(function(t){if(r)t=t.cloneNode(!0);else if(!a)return $(t).remove();a.insertBefore(t,i),l&&C(t,function(t){if(!(null==t.nodeName||"SCRIPT"!==t.nodeName.toUpperCase()||t.type&&"text/javascript"!==t.type||t.src)){var i=t.ownerDocument?t.ownerDocument.defaultView:e;i.eval.call(i,t.innerHTML)}})})})},$.fn[s?i+"To":"insert"+(o?"Before":"After")]=function(e){return $(e)[i](this),this}}),J.Z.prototype=g.prototype=$.fn,J.uniq=k,J.deserializeValue=b,$.zepto=J,$}();return e.Zepto=t,void 0===e.$&&(e.$=t),function(t){function i(e){return e._zid||(e._zid=u++)}function o(e,t,o,n){if(t=s(t),t.ns)var r=a(t.ns);return(m[i(e)]||[]).filter(function(e){return e&&(!t.e||e.e==t.e)&&(!t.ns||r.test(e.ns))&&(!o||i(e.fn)===i(o))&&(!n||e.sel==n)})}function s(e){var t=(""+e).split(".");return{e:t[0],ns:t.slice(1).sort().join(" ")}}function a(e){return new RegExp("(?:^| )"+e.replace(" "," .* ?")+"(?: |$)")}function n(e,t){return e.del&&!w&&e.e in x||!!t}function r(e){return b[e]||w&&x[e]||e}function l(e,o,a,l,c,h,u){var f=i(e),g=m[f]||(m[f]=[]);o.split(/\s/).forEach(function(i){if("ready"==i)return t(document).ready(a);var o=s(i);o.fn=a,o.sel=c,o.e in b&&(a=function(e){var i=e.relatedTarget;return!i||i!==this&&!t.contains(this,i)?o.fn.apply(this,arguments):void 0}),o.del=h;var f=h||a;o.proxy=function(t){if(t=d(t),!t.isImmediatePropagationStopped()){t.data=l;var i=f.apply(e,t._args==p?[t]:[t].concat(t._args));return i===!1&&(t.preventDefault(),t.stopPropagation()),i}},o.i=g.length,g.push(o),"addEventListener"in e&&e.addEventListener(r(o.e),o.proxy,n(o,u))})}function c(e,t,s,a,l){var c=i(e);(t||"").split(/\s/).forEach(function(t){o(e,t,s,a).forEach(function(t){delete m[c][t.i],"removeEventListener"in e&&e.removeEventListener(r(t.e),t.proxy,n(t,l))})})}function d(e,i){return(i||!e.isDefaultPrevented)&&(i||(i=e),t.each($,function(t,o){var s=i[t];e[t]=function(){return this[o]=C,s&&s.apply(i,arguments)},e[o]=_}),e.timeStamp||(e.timeStamp=Date.now()),(i.defaultPrevented!==p?i.defaultPrevented:"returnValue"in i?i.returnValue===!1:i.getPreventDefault&&i.getPreventDefault())&&(e.isDefaultPrevented=C)),e}function h(e){var t,i={originalEvent:e};for(t in e)S.test(t)||e[t]===p||(i[t]=e[t]);return d(i,e)}var p,u=1,f=Array.prototype.slice,g=t.isFunction,y=function(e){return"string"==typeof e},m={},v={},w="onfocusin"in e,x={focus:"focusin",blur:"focusout"},b={mouseenter:"mouseover",mouseleave:"mouseout"};v.click=v.mousedown=v.mouseup=v.mousemove="MouseEvents",t.event={add:l,remove:c},t.proxy=function(e,o){var s=2 in arguments&&f.call(arguments,2);if(g(e)){var a=function(){return e.apply(o,s?s.concat(f.call(arguments)):arguments)};return a._zid=i(e),a}if(y(o))return s?(s.unshift(e[o],e),t.proxy.apply(null,s)):t.proxy(e[o],e);throw new TypeError("expected function")},t.fn.bind=function(e,t,i){return this.on(e,t,i)},t.fn.unbind=function(e,t){return this.off(e,t)},t.fn.one=function(e,t,i,o){return this.on(e,t,i,o,1)};var C=function(){return!0},_=function(){return!1},S=/^([A-Z]|returnValue$|layer[XY]$|webkitMovement[XY]$)/,$={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};t.fn.delegate=function(e,t,i){return this.on(t,e,i)},t.fn.undelegate=function(e,t,i){return this.off(t,e,i)},t.fn.live=function(e,i){return t(document.body).delegate(this.selector,e,i),this},t.fn.die=function(e,i){return t(document.body).undelegate(this.selector,e,i),this},t.fn.on=function(e,i,o,s,a){var n,r,d=this;return e&&!y(e)?(t.each(e,function(e,t){d.on(e,i,o,t,a)}),d):(y(i)||g(s)||s===!1||(s=o,o=i,i=p),(s===p||o===!1)&&(s=o,o=p),s===!1&&(s=_),d.each(function(d,p){a&&(n=function(e){return c(p,e.type,s),s.apply(this,arguments)}),i&&(r=function(e){var o,a=t(e.target).closest(i,p).get(0);return a&&a!==p?(o=t.extend(h(e),{currentTarget:a,liveFired:p}),(n||s).apply(a,[o].concat(f.call(arguments,1)))):void 0}),l(p,e,s,o,i,r||n)}))},t.fn.off=function(e,i,o){var s=this;return e&&!y(e)?(t.each(e,function(e,t){s.off(e,i,t)}),s):(y(i)||g(o)||o===!1||(o=i,i=p),o===!1&&(o=_),s.each(function(){c(this,e,o,i)}))},t.fn.trigger=function(e,i){return e=y(e)||t.isPlainObject(e)?t.Event(e):d(e),e._args=i,this.each(function(){e.type in x&&"function"==typeof this[e.type]?this[e.type]():"dispatchEvent"in this?this.dispatchEvent(e):t(this).triggerHandler(e,i)})},t.fn.triggerHandler=function(e,i){var s,a;return this.each(function(n,r){s=h(y(e)?t.Event(e):e),s._args=i,s.target=r,t.each(o(r,e.type||e),function(e,t){return a=t.proxy(s),!s.isImmediatePropagationStopped()&&void 0})}),a},"focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(e){t.fn[e]=function(t){return 0 in arguments?this.bind(e,t):this.trigger(e)}}),t.Event=function(e,t){y(e)||(t=e,e=t.type);var i=document.createEvent(v[e]||"Events"),o=!0;if(t)for(var s in t)"bubbles"==s?o=!!t[s]:i[s]=t[s];return i.initEvent(e,o,!0),d(i)}}(t),function(t){function i(e,i,o){var s=t.Event(i);return t(e).trigger(s,o),!s.isDefaultPrevented()}function o(e,t,o,s){return e.global?i(t||x,o,s):void 0}function s(e){e.global&&0===t.active++&&o(e,null,"ajaxStart")}function a(e){e.global&&!--t.active&&o(e,null,"ajaxStop")}function n(e,t){var i=t.context;return t.beforeSend.call(i,e,t)!==!1&&o(t,i,"ajaxBeforeSend",[e,t])!==!1&&void o(t,i,"ajaxSend",[e,t])}function r(e,t,i,s){var a=i.context,n="success";i.success.call(a,e,n,t),s&&s.resolveWith(a,[e,n,t]),o(i,a,"ajaxSuccess",[t,i,e]),c(n,t,i)}function l(e,t,i,s,a){var n=s.context;s.error.call(n,i,t,e),a&&a.rejectWith(n,[i,t,e]),o(s,n,"ajaxError",[i,s,e||t]),c(t,i,s)}function c(e,t,i){var s=i.context;i.complete.call(s,t,e),o(i,s,"ajaxComplete",[t,i]),a(i)}function d(e,t,i){if(i.dataFilter==h)return e;var o=i.context;return i.dataFilter.call(o,e,t)}function h(){}function p(e){return e&&(e=e.split(";",2)[0]),e&&(e==$?"html":e==S?"json":C.test(e)?"script":_.test(e)&&"xml")||"text"}function u(e,t){return""==t?e:(e+"&"+t).replace(/[&?]{1,2}/,"?")}function f(e){e.processData&&e.data&&"string"!=t.type(e.data)&&(e.data=t.param(e.data,e.traditional)),!e.data||e.type&&"GET"!=e.type.toUpperCase()&&"jsonp"!=e.dataType||(e.url=u(e.url,e.data),e.data=void 0)}function g(e,i,o,s){return t.isFunction(i)&&(s=o,o=i,i=void 0),t.isFunction(o)||(s=o,o=void 0),{url:e,data:i,success:o,dataType:s}}function y(e,i,o,s){var a,n=t.isArray(i),r=t.isPlainObject(i);t.each(i,function(i,l){a=t.type(l),s&&(i=o?s:s+"["+(r||"object"==a||"array"==a?i:"")+"]"),!s&&n?e.add(l.name,l.value):"array"==a||!o&&"object"==a?y(e,l,o,i):e.add(i,l)})}var m,v,w=+new Date,x=e.document,b=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,C=/^(?:text|application)\/javascript/i,_=/^(?:text|application)\/xml/i,S="application/json",$="text/html",D=/^\s*$/,I=x.createElement("a");I.href=e.location.href,t.active=0,t.ajaxJSONP=function(i,o){if(!("type"in i))return t.ajax(i);var s,a,c=i.jsonpCallback,d=(t.isFunction(c)?c():c)||"Zepto"+w++,h=x.createElement("script"),p=e[d],u=function(e){t(h).triggerHandler("error",e||"abort")},f={abort:u};return o&&o.promise(f),t(h).on("load error",function(n,c){clearTimeout(a),t(h).off().remove(),"error"!=n.type&&s?r(s[0],f,i,o):l(null,c||"error",f,i,o),e[d]=p,s&&t.isFunction(p)&&p(s[0]),p=s=void 0}),n(f,i)===!1?(u("abort"),f):(e[d]=function(){s=arguments},h.src=i.url.replace(/\?(.+)=\?/,"?$1="+d),x.head.appendChild(h),i.timeout>0&&(a=setTimeout(function(){u("timeout")},i.timeout)),f)},t.ajaxSettings={type:"GET",beforeSend:h,success:h,error:h,complete:h,context:null,global:!0,xhr:function(){return new e.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:S,xml:"application/xml, text/xml",html:$,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0,dataFilter:h},t.ajax=function(i){var o,a,c=t.extend({},i||{}),g=t.Deferred&&t.Deferred();for(m in t.ajaxSettings)void 0===c[m]&&(c[m]=t.ajaxSettings[m]);s(c),c.crossDomain||(o=x.createElement("a"),o.href=c.url,o.href=o.href,c.crossDomain=I.protocol+"//"+I.host!=o.protocol+"//"+o.host),c.url||(c.url=e.location.toString()),(a=c.url.indexOf("#"))>-1&&(c.url=c.url.slice(0,a)),f(c);var y=c.dataType,w=/\?.+=\?/.test(c.url);if(w&&(y="jsonp"),c.cache!==!1&&(i&&i.cache===!0||"script"!=y&&"jsonp"!=y)||(c.url=u(c.url,"_="+Date.now())),"jsonp"==y)return w||(c.url=u(c.url,c.jsonp?c.jsonp+"=?":c.jsonp===!1?"":"callback=?")),t.ajaxJSONP(c,g);var b,C=c.accepts[y],_={},S=function(e,t){_[e.toLowerCase()]=[e,t]},$=/^([\w-]+:)\/\//.test(c.url)?RegExp.$1:e.location.protocol,k=c.xhr(),T=k.setRequestHeader;if(g&&g.promise(k),c.crossDomain||S("X-Requested-With","XMLHttpRequest"),S("Accept",C||"*/*"),(C=c.mimeType||C)&&(C.indexOf(",")>-1&&(C=C.split(",",2)[0]),k.overrideMimeType&&k.overrideMimeType(C)),(c.contentType||c.contentType!==!1&&c.data&&"GET"!=c.type.toUpperCase())&&S("Content-Type",c.contentType||"application/x-www-form-urlencoded"),c.headers)for(v in c.headers)S(v,c.headers[v]);if(k.setRequestHeader=S,k.onreadystatechange=function(){if(4==k.readyState){k.onreadystatechange=h,clearTimeout(b);var e,i=!1;if(k.status>=200&&k.status<300||304==k.status||0==k.status&&"file:"==$){if(y=y||p(c.mimeType||k.getResponseHeader("content-type")),"arraybuffer"==k.responseType||"blob"==k.responseType)e=k.response;else{e=k.responseText;try{e=d(e,y,c),"script"==y?(0,eval)(e):"xml"==y?e=k.responseXML:"json"==y&&(e=D.test(e)?null:t.parseJSON(e))}catch(e){i=e}if(i)return l(i,"parsererror",k,c,g)}r(e,k,c,g)}else l(k.statusText||null,k.status?"error":"abort",k,c,g)}},n(k,c)===!1)return k.abort(),l(null,"abort",k,c,g),k;var W=!("async"in c)||c.async;if(k.open(c.type,c.url,W,c.username,c.password),c.xhrFields)for(v in c.xhrFields)k[v]=c.xhrFields[v];for(v in _)T.apply(k,_[v]);return c.timeout>0&&(b=setTimeout(function(){k.onreadystatechange=h,k.abort(),l(null,"timeout",k,c,g)},c.timeout)),k.send(c.data?c.data:null),k},t.get=function(){return t.ajax(g.apply(null,arguments))},t.post=function(){var e=g.apply(null,arguments);return e.type="POST",t.ajax(e)},t.getJSON=function(){var e=g.apply(null,arguments);return e.dataType="json",t.ajax(e)},t.fn.load=function(e,i,o){if(!this.length)return this;var s,a=this,n=e.split(/\s/),r=g(e,i,o),l=r.success;return n.length>1&&(r.url=n[0],s=n[1]),r.success=function(e){a.html(s?t("<div>").html(e.replace(b,"")).find(s):e),l&&l.apply(a,arguments)},t.ajax(r),this};var k=encodeURIComponent;t.param=function(e,i){var o=[];return o.add=function(e,i){t.isFunction(i)&&(i=i()),null==i&&(i=""),this.push(k(e)+"="+k(i))},y(o,e,i),o.join("&").replace(/%20/g,"+")}}(t),function(e){e.fn.serializeArray=function(){var t,i,o=[],s=function(e){return e.forEach?e.forEach(s):void o.push({name:t,value:e})};return this[0]&&e.each(this[0].elements,function(o,a){i=a.type,t=a.name,t&&"fieldset"!=a.nodeName.toLowerCase()&&!a.disabled&&"submit"!=i&&"reset"!=i&&"button"!=i&&"file"!=i&&("radio"!=i&&"checkbox"!=i||a.checked)&&s(e(a).val())}),o},e.fn.serialize=function(){var e=[];return this.serializeArray().forEach(function(t){e.push(encodeURIComponent(t.name)+"="+encodeURIComponent(t.value))}),e.join("&")},e.fn.submit=function(t){if(0 in arguments)this.bind("submit",t);else if(this.length){var i=e.Event("submit");this.eq(0).trigger(i),i.isDefaultPrevented()||this.get(0).submit()}return this}}(t),function(){try{getComputedStyle(void 0)}catch(i){var t=getComputedStyle;e.getComputedStyle=function(e,i){try{return t(e,i)}catch(e){return null}}}}(),t}),define("pm",["utils","pageview","$","tip"],function(e,t,i,o){function s(){var e=this;this.pages={},this.isForward=!0,this.isInit=!0,this.pagekeySeed=0,this.isPrevent=!1,this.$el=i("<div class='yy-root-view'></div>"),this.$el.appendTo(document.body),window.onhashchange=function(){e.hashChange()};var t=null,o=null;i(document.body).bind("touchstart",function(e){for(t=e.target,o=t.getAttribute("data-activecn");t&&!o&&"BODY"!=t.tagName.toUpperCase()&&(t=t.parentNode,!(o=t.getAttribute("data-activecn"))););t&&o&&i(t).addClass(o)}),i(document.body).bind("touchend",function(){t&&o&&i(t).removeClass(o),t=null})}var a=!1;return s.prototype={blur:function(){document.activeElement&&document.activeElement.blur()},showTip:function(e){this.Tip=new o(this.$el),this.Tip.show(e)},start:function(t){e.appConfig=t,this.appConfig=t,e.customerComponents=t.customerComponents||{},t.baseSize=t.baseSize||{width:320,height:568},e.baseSize.width=t.baseSize.width,e.baseSize.height=t.baseSize.height,this.config=t;var i=this.getPageNameFromUrl();if(i){this.hashChange();var o=i.split("$$");2==o.length&&(this.pagekeySeed=parseInt(o[1]))}else this.go(t.root,this.getParamsFromUrl())},showPageKeyDict:{},regeistShowPageInRouter:function(e){this.showPageKeyDict[e]=!0},hashChange:function(){var e=this.getPageNameFromUrl(),t=this.pages[this.fromPage],i=this;if(a)return void(a=!1);if(t&&this.showPageKeyDict[this.fromPage]===!0&&t.showpage_wrapper){var o=t.hideCurShowPage();if(!o){delete this.showPageKeyDict[this.fromPage];var s=t.plugin.onPageResume;s&&s.call(t.plugin,t,{isForward:!1})}return a=!0,void window.history.go(1)}if(t){var n=t.plugin.onPageBeforeLeave;if(n){var r=n.call(t.plugin,t,{isForward:this.isForward});if(r===!1)return a=!0,void window.history.go(1)}}this.config.routerChange&&this.config.routerChange({fromPage:this.fromPage,toPage:e,isForward:this.isForward});var l=this.pages[e];t&&!l&&t.showLoadingProgressbar(),this.blur(),this._renderNextPage(e,this.fromPage,this.isForward,t,function(t,o,s){o?i.fromPage=e:window.setTimeout(function(){t&&(i.pages[t].destory(),delete i.pages[t]),i.fromPage=e},300)},function(e){a=!0,window.history.go(-1),e&&e.hideLoadingProgressbar()})},_renderNextPage:function(e,t,i,o,s,a){var n=this,r=this.pages[e],l="yy-pageview displayflex "+(i?"left-out":"right-out");if(o&&o.hideLoadingProgressbar(),r){if(!this.isForward){var c="yy-pageview displayflex left-in";r.$el[0].className=c;var d=r.plugin.onPageResume;d&&d.call(r.plugin,r,{isForward:!1})}o&&(o.$el[0].className=l),s(t,i,o),this.isForward=!1}else n.getPageConfigByPageKey(e,function(a){a.prePageView=i?o:null;var r=n.createPageView(a);n.pages[e]=r,n.$el.append(r.$el),n.isInit?(n.isForward=!1,r.Enter("yy-pageview displayflex yy-pageview-show",n.isInit),n.isInit=!1):window.setTimeout(function(){r.Enter("yy-pageview displayflex "+(n.isForward?"right-in":"left-in"),n.isInit),o&&(o.$el[0].className=l),n.isForward=!1},40),s(t,i,o)},function(e){a&&a(o)})},createPageView:function(e){return new t(e)},getPageNameFromUrl:function(){var e=window.location.hash.split("#");if(2!=e.length)return this.rootPageKey;var t=e[1],i=t.split("?");return i[0]},getParamsStrFromUrl:function(){var e=window.location.href.split("?"),t=e[e.length-1];if(!t)return null;var i=t.split("#");return i[0]},getParamsFromUrl:function(){var e=this.getParamsStrFromUrl();if(!e)return null;for(var t={},i=e.split("&"),o=0,s=i.length;o<s;o++){var a=i[o].split("=");2==a.length&&(t=t||{},t[a[0]]=a[1])}return t},tabSeleced:function(e,t){t||(a=!0);var i=this.getParamsFromUrl()||{};i.$$pn=e;var o=[];for(var s in i)o.push(s+"="+i[s]);var n=this.getPageNameFromUrl();o.length>0?location.replace(location.href.split("#")[0]+"#"+n+"?"+o.join("&")):location.replace(location.href.split("#")[0]+"#"+n)},goBack:function(){this.isForward=!1,window.history.go(-1)},go:function(e,t){this.isForward=!0,a=!1,this.isInit&&(this.rootPageKey=e),t=t||{};var i=[];for(var o in t)i.push(o+"="+t[o]);e=this._getUniquePageKey(e),i.length>0?location.hash=e+"?"+i.join("&"):location.hash=e},_getUniquePageKey:function(e){var t=!1;for(var i in this.pages){var o=i.split("$$");if(o[0]==e){this.pagekeySeed+=1,t=!0;break}}return t?e+"$$"+this.pagekeySeed:e},_getPageConfigSuccess:function(t,i,o){i=e.copy(i),i.type="pageview",i.pageKey=t,i.$$params=this.getParamsFromUrl(),i.$$pageManager=this,o(i)},getPageConfigByPageKey:function(t,i,o){var s=this,a="./pages/"+t.split("$$")[0],n=e.getPageConfigByPagePath(a);return n?void this._getPageConfigSuccess(t,n,i):void require([a],function(o){o=e.setPageConfigByPagePath(a,o),s._getPageConfigSuccess(t,o,i)},function(e){console.error(e),o&&o(t)})}},new s}),require.config({waitSeconds:0,baseUrl:"./",shim:{$:{exports:"zepto"}},paths:{$:"../../libs/zepto",utils:"../../js/utils",base:"../../components/base",pageview:"../../components/pageview",pm:"../../js/pageViewManager",swiper:"../../components/swiper",calendar:"../../../components/calendar",tip:"../../components/tip"}}),require(["app","pm","$"],function(e,t,i){e.init||console.error("app.js 未提供init方法"),e.init(t)}),define("../../js/main",function(){}),define("../../components/base",["utils","tip"],function(e,t){function i(e,t){if(!e)return null;for(var i=e,o=0,s=t.length;o<s;o++){var a=t[o];if(i=i[a],!i&&0!=i){i=null;break}}return i}var o=function(t){var i=this;this.pageview=t.$$pageview||this,this.disabled=!1,this.parent=t.$$parent,this.datasource=t.$$datasource||[],this.rowInstance=t.$$rowInstance,t.ref&&(this.rowInstance?(this.rowInstance.refs=this.rowInstance.refs||{},this.rowInstance.refs[t.comKey]=this):this.pageview.refs[t.comKey]=this);var o=t.className||"";this.selectedClassName=t.selectedClassName,t.tagName=t.tagName||"DIV";var s=t.activeClassName?"data-activecn='"+t.activeClassName+"'":"";this.$el=$("<"+t.tagName+" "+s+" data-comname='"+t.comKey+"' class='"+o+"'></"+t.tagName+">"),t=this._processConfig(t),this.config=t,this.components={},"repeat"!=t.type&&"listview"!=t.type||(this.components=[]),t.comKey&&this.$el.addClass(t.comKey);var a=this.config.comKey+"_init";if(this.pageview.plugin&&this.pageview.plugin[a]){var n=this.pageview.plugin[a];n&&n.call(this.pageview.plugin,this)}var r=t.style;if(t.noNeedSetStyle||r&&"pageview"!=t.type&&"segment"!=t.type&&e.css(this.$el,r),this.disabledClassName=t.disabledClassName||"yy-disabled",this.disabled&&this.setDisabled(!0),t.comKey){var l=t.comKey+"_click",c=i.pageview.plugin[l];c&&this.$el.bind("click",function(e){e.preventDefault(),e.stopPropagation(),!i.disabled&&c&&c.call(i.pageview.plugin,i,{e:e})})}};return o.prototype.setDisabled=function(e){this.disabled=e,this.disabled?this.$el.addClass(this.disabledClassName):this.$el.removeClass(this.disabledClassName)},o.prototype._processConfig=function(e){for(var t in e){var o=t.split("_");if(2==o.length&&"bind"==o[1]){var s=e[t],a=o[0],n=typeof s;if("string"==n)e[a]=i(this.datasource,s.split("."));else if("object"==n)for(var r in s){var l=r,c=i(this.datasource,s[r].split("."));e[a]=e[a]||{},e[a][l]=c}}}return e},o.prototype.selected=function(e){if(!e||!this.config.disableParentSelect){this.isSelected=!0,this.selectedClassName&&""!==this.selectedClassName&&this.$el.addClass(this.selectedClassName);for(var t in this.components)this.components[t].selected(!0);
}},o.prototype.unSelected=function(e){if(!e||!this.config.disableParentSelect){this.isSelected=!1,this.selectedClassName&&""!==this.selectedClassName&&this.$el.removeClass(this.selectedClassName);for(var t in this.components)this.components[t].unSelected(!0)}},o.prototype.getUniqueKey=function(){return this.pageview.config.pageKey+""+this.config.comKey},o.prototype.showTip=function(e){this.Tip=new t(this.$el),this.Tip.show(e)},o.prototype._prepareComponent=function(t,i,o){var s=e.clone(this.pageview.config.components[t]),a=s.type,n=e.getComponentInstance(a);s.$$pageview=this.pageview,s.$$rowInstance=o,s.$$parent=this,s.comKey=t,s.$$datasource=i;var r=new n(s,null),l=t+"_didmount";if(this.pageview.plugin){var c=this.pageview.plugin[l];c&&c.call(this.pageview.plugin,r)}return this.pageview.componentsInitActions[t]&&(this.pageview.componentsInitActions[t](r),delete this.pageview.componentsInitActions[t]),r},o.prototype._initComponents=function(e,t,i,o){for(var s=0,a=e.root.length;s<a;s++){var n=e.root[s],r=this._prepareComponent(n,t,o);e.isContainer||"repeat"==e.type?(this.components.push=r,i(r)):"tabbarview"==e.type?(this.components[n]=r,i(r)):this.components[n]=r}return this.components},o.prototype.getClientRect=function(){return this.$el[0].getBoundingClientRect()},o.prototype.getComponentInstanceByComKey=function(e,t,i,o,s){var a=this;this.loadFiles([e],this.pageview||this,function(){var s=a._prepareComponent(e,t,i);o(s)},function(){s&&s()})},o.prototype.initLayout=function(t,i,o,s){var a=this;this.config.root&&this.config.root.length>0&&this.loadFiles(this.config.root,this.pageview||this,function(){if(i)a._initComponents(a.config,t,i,o);else{a._initComponents(a.config,t,null,o);for(var n=0,r=a.config.root.length;n<r;n++){var l=a.components[a.config.root[n]],c=a.$$childrenWrapper||a.$el;c.append(l.$el);var d;a.config.splitStyle&&a.config.root.length>1&&n!=a.config.root.length-1&&(d=$("<div></div>"),l.splitLine=d,e.css(d,a.config.splitStyle,!0),c.append(d))}}if(s&&s(),"pageview"==a.config.type){var h=a.plugin.onPageLoad;h&&h.call(a.plugin,a)}},function(){})},o.prototype.setBadge=function(t,i){if(!this.$$badge){this.$$badge=$("<div class='displayflex jc-center ai-center yy-badge displaynone'></div>"),i=i||{};var o=i.width||i.height||16;i["min-width"]=i.height=o,delete i.width,i=e.processStyle(i),i["border-radius"]=parseInt(i.height)/2+"px",e.css(this.$$badge,i),this.$el.append(this.$$badge)}t?this.$$badge.html(t).removeClass("displaynone"):this.$$badge.addClass("displaynone")},o.prototype.showLoading=function(t){if(t=t||{},this.loadingConfig=t,!this.$$loadingWrapper){t.timeout&&!isNaN(t.timeout)||(t.timeout=7e3),this.loadingtimeout=parseInt(t.timeout)||7e3;var i="displaynone yy-loading-bk displayflex yy-jc-center yy-ai-center";t.style&&(t.style.alignItems||t.style["align-items"]||(i+="yy-ai-center")),this.$$loadingWrapper=$("<div class='"+i+"'></div>"),t.style&&e.css(this.$$loadingWrapper,t.style);var o="<div class='spinner center'><div class='spinner-blade'></div><div class='spinner-blade'></div><div class='spinner-blade'></div><div class='spinner-blade'></div><div class='spinner-blade'></div><div class='spinner-blade'></div><div class='spinner-blade'></div><div class='spinner-blade'></div><div class='spinner-blade'></div><div class='spinner-blade'></div><div class='spinner-blade'></div><div class='spinner-blade'></div></div>",s=$("<div class='yy-loading-wrapper displayflex yy-jc-center yy-ai-center'>"+o+"</div>");this.loadingText=$("<span class='yy-loading-text'></span>"),s.append(this.loadingText),this.$$loadingWrapper.append(s),this.$el.append(this.$$loadingWrapper)}this.loadingText.html(t.text||"正在努力加载"),this.startLoadingTimeout(t),this.$$loadingWrapper.removeClass("displaynone")},o.prototype.showLoadingError=function(){var e=this;if(this.$$loadingWrapper){if(this.loadingTimeId&&window.clearTimeout(this.loadingTimeId),!e.loadingConfig.reLoadCallBack)return e.pageview.showTip({text:"操作超时!",duration:1e3}),void e.hideLoading();e.loadingErrorWrapper||(e.loadingErrorWrapper=e._createErrorDom(function(){e.$$loadingWrapper.removeClass("yy-loading-wrapper-error"),e.loadingErrorWrapper.addClass("displaynone"),e.loadingTimeId=null,e.startLoadingTimeout(e.loadingConfig),e.loadingConfig.reLoadCallBack&&e.loadingConfig.reLoadCallBack()}),e.loadingErrorWrapper.appendTo(e.$$loadingWrapper)),e.$$loadingWrapper.addClass("yy-loading-wrapper-error"),e.loadingErrorWrapper.removeClass("displaynone")}},o.prototype.startLoadingTimeout=function(e){var t=this;this.loadingTimeId||(this.loadingTimeId=window.setTimeout(function(){t.showLoadingError()},this.loadingtimeout))},o.prototype._createErrorDom=function(t){var i=e.getRealWidth(11),o=e.getRealWidth(20),s=$("<div style='height:100px' class='yy-loadmore-wrapper displayflex jc-center ai-center flex-h displaynone'></div>"),a=$("<i style='font-size:"+o+"px' class='yy-icommon yy-loadmore-erroricon'></i>"),n=$("<span style='font-size:"+i+"px' class='yy-pull-meslabel'>网络异常,点击</span>"),r=$("<span style='font-size:"+i+"px' class='yy-loadmore-reload-babel'>重新加载</span>");return r.bind("click",function(){t()}),s.append(a).append(n).append(r),s},o.prototype.hideLoading=function(){this.loadingTimeId&&(window.clearTimeout(this.loadingTimeId),this.loadingTimeId=null),this.$$loadingWrapper&&this.$$loadingWrapper.addClass("displaynone")},o.prototype.loadFiles=function(t,i,o,s){for(var a=t.length,n=0,r=0;r<a;r++)!function(t,a,r){var l=i.config.components[r];e.getComponentClass(l,function(e){n+=1,n==t&&o()},function(){s()})}(a,r,t[r])},o}),define("../../components/button",["utils","base"],function(e,t){var i=function(e){i.baseConstructor.call(this,e);var t=e.title||"按钮",o=e.mode||"1",s="displayflex yy-btn yy-btn-"+o;this.$el.addClass(s),this.$el.html(t)};return e.extends(i,t),i}),define("swiper",["utils","base"],function(e,t){var i=function(e){this.config=e,this.$el=$("<div style='"+e.style+"' class='yy-swiper-item-wrapper'></div>")};i.prototype={css:function(t){e.css(this.$el,t)}};var o=function(t){this.config=t||{},this.$el=$("<div class='yy-swiper-wrapper flex-1'></div>"),this.itemWrappers=[],this.posArr=[0,1,2],this.limit=e.getRealWidth(90),this.tanKeys=e.getTransitionKeys(),this.initLayout(),this.config.init&&this.config.init(this)};return o.prototype={_posArrGoNext:function(){var e=this.posArr[0];this.posArr[0]=this.posArr[1],this.posArr[1]=this.posArr[2],this.posArr[2]=e},_resetPosArr:function(){this.posArr=[0,1,2]},_posArrGoPre:function(){var e=this.posArr[2];this.posArr[2]=this.posArr[1],this.posArr[1]=this.posArr[0],this.posArr[0]=e},initLayout:function(){var t=this;this.initPos=[0-e.viewport.width,0,e.viewport.width];for(var o=0;o<3;o++){var s=this.tanKeys.transform+":translate3d("+this.initPos[o]+"px,0,0)",a=new i({style:s});this.itemWrappers.push(a),this.config.initItem&&this.config.initItem(a,o),this.$el.append(a.$el)}var n,r,l;t.isIntransition=!1,this.$el.bind("touchstart",function(e){l=t.isIntransition,t.isIntransition||(n=e.touches[0].pageX)}),this.$el.bind("touchmove",function(e){if(e.preventDefault(),e.stopPropagation(),!t.isIntransition&&!l){var i=e.touches[0];r=i.pageX-n,t.setPos("move",r)}}),this.$el.bind("touchend",function(e){if(!t.isIntransition&&!l&&r&&0!=r){if(Math.abs(r)<t.limit)return t.setPos(),void(t.isIntransition=!1);r>0?t.goPre():t.goNext(),r=0}})},transitionEnd:function(e){this.isIntransition=!1},goPre:function(){var e=this;this.isIntransition=!0,this._posArrGoPre(),this.setPos("gopre"),this.config.onChange&&this.config.onChange({swiper:this,action:"gopre",itemWrapper:this.itemWrappers[this.posArr[0]]}),window.setTimeout(function(){e.transitionEnd("gopre")},280)},goNext:function(){var e=this;this.isIntransition=!0,this._posArrGoNext(),this.setPos("gonext"),this.config.onChange&&this.config.onChange({swiper:this,action:"gonext",itemWrapper:this.itemWrappers[this.posArr[2]]}),window.setTimeout(function(){e.transitionEnd("gonext")},280)},reset:function(){this._resetPosArr(),this.setPos("move",0)},setPos:function(e,t){var i=this;t=t||0;for(var o=0;o<3;o++){var s=i.posArr[o],a=i.itemWrappers[s],n={};n[i.tanKeys.transition]="move"==e?"none":this.tanKeys.transform+" .35s ease","gopre"==e&&0==o&&(n[i.tanKeys.transition]="none"),"gonext"==e&&2==o&&(n[i.tanKeys.transition]="none"),n[i.tanKeys.transform]="translate3d("+(this.initPos[o]+t)+"px,0,0)",a.css(n)}}},o}),define("../../components/calendar",["utils","base","swiper"],function(e,t,i){function o(t,i,o,s){var a=this;a.dateInfo=t,this.calendar=s,this.$el=$("<div date-seed='"+t.dateStr+"' date-mark='"+t.mark+"' date-day='"+t.day+"'  date-month='"+t.month+"' date-year='"+t.year+"' class='yy-calendar-day-item displayflex jc-center ai-center yy-calendar-day-item-"+t.mark+"'></div>");var n=e.ConvertDateToStr(s.selectedTime)==a.dateInfo.dateStr;this.dayLabel=$("<div style='font-size:"+e.fontSize12()+"px;width:"+o+"px;height:"+o+"px;line-height:"+o+"px' class='yy-calendar-day'>"+t.day+"</div>"),n&&this.selected(),this.$el.append(this.dayLabel),e.css(this.$el,i)}function s(e){this.config=e,this.yearItems={},this.itemWrapper=e.itemWrapper,this.calendar=e.calendar}function a(t){this.config=t,this.itemWrapper=t.itemWrapper,this.calendar=t.calendar,this.SumDay=42,this.dayInnerWidth=e.getRealWidth(23),this.dayItems={}}o.prototype={selected:function(){this.dayLabel.addClass("yy-calendar-day-selected")},unSelected:function(){this.dayLabel.removeClass("yy-calendar-day-selected")}},s.prototype={createLaytout:function(e){this.yearItems={},this.itemWrapper.$el.empty();for(var t=0;t<12;t++){var i=e+t,o=new n({calendar:this.calendar,year:i,itemHeight:this.config.itemHeight});this.yearItems[i]=o,this.itemWrapper.$el.append(o.$el)}}};var n=function(t){this.config=t,this.calendar=t.calendar;var i=e.convertToDate(this.calendar.curDate),o=i.getFullYear()==this.config.year;this.$el=$("<div  date-year-seed='"+t.year+"' style='height:"+this.config.itemHeight+";line-height:"+this.config.itemHeight+"' class='yy-calendar-year-item'></div>"),this.innnerYear=$("<span style='font-size:"+e.fontSize15()+"px' class='yy-calendar-year'>"+this.config.year+"</span>"),o&&this.selected(),this.$el.append(this.innnerYear)};n.prototype={selected:function(){this.innnerYear.addClass("yy-calendar-year-selected")},unSelected:function(){this.innnerYear.removeClass("yy-calendar-year-selected")}},a.prototype={createLaytout:function(t){this.dayItems={},this.date=e.convertToDate(t),this.itemWrapper.$el.empty();for(var i=this.getDaysArr(),s={height:this.config.itemHeight+"px","font-size":e.getRealWidth(14)+"px"},a=document.createDocumentFragment(),n=0;n<this.SumDay;n++){var r=i[n],l=new o(r,s,this.dayInnerWidth,this.calendar);this.dayItems[r.dateStr]=l,a.appendChild(l.$el[0])}this.itemWrapper.$el[0].appendChild(a)},getDaysArr:function(){var t=[],i=e.getMonthDayCount(this.date),o=e.getDateInfo(this.date),s=e.getMonthFirstDayWhicDayInWeek(this.date),a=this.SumDay-s-i;if(s>0)for(var n=e.getPreMonth(this.date),r=e.getMonthDayCount(n),l=e.getDateInfo(n),c=0;c<s;c++){var d=r-s+c+1,h=new Date(l.year,l.month-1,d);t.push({date:h,dateStr:e.ConvertDateToStr(h),year:l.year,month:l.month,day:d,mark:"premonth"})}for(var c=1;c<=i;c++){var h=new Date(o.year,o.month-1,c);t.push({date:h,dateStr:e.ConvertDateToStr(h),year:o.year,month:o.month,day:c,mark:"curmonth"})}if(a>0)for(var p=e.getNextMonth(this.date),u=e.getDateInfo(p),c=1;c<=a;c++){var h=new Date(u.year,u.month-1,c);t.push({date:h,dateStr:e.ConvertDateToStr(h),year:u.year,month:u.month,day:c,mark:"nextmonth"})}return t}};var r=["一","二","三","四","五","六","七","八","九","十","十一","十二"],l=function(t){var i=this;l.baseConstructor.call(this,t),this.$el.addClass("yy-calendar-wrapper");var o=this.config.itemHeight;isNaN(o)&&(o=45),this.curDate=t.date||new Date,this.selectedTime=new Date(e.convertToDate(this.curDate).getTime()),o=parseInt(o),this.itemHeight=e.getRealHeight(o);var s=t.comKey+"_change";this.pageview&&this.pageview.plugin&&(this.pluginChangeMethod=this.pageview.plugin[s]),this.labelBarHeight=e.getRealHeight(27);var a=6*this.itemHeight+this.labelBarHeight;this.innerWrapper=$("<div style='height:"+a+"px' class='yy-calendar-inner'></div>");var n=this.config.isShowYearAndMonthPicker||!0;if(n){var r=e.getRealHeight(36);a+=r,this.initYearAndMonthPicker(r,a)}this.mode=t.mode||"年月日","年月"==this.mode?(this.curShow="year",this.createYearWrapper(a-r),this.triggerChange()):(this.curShow="day",i.createDayWraper()),this.$el.append(this.innerWrapper)};return e.extends(l,t),l.prototype.setDateSelected=function(t,i){var t=e.convertToDate(t),o=(t.getFullYear(),e.ConvertDateToStr(t));this.selectedTime=t;for(var s=0;s<3;s++){var a=this.Swiper.itemWrappers[s].daysCreator;for(var n in a.dayItems){var r=a.dayItems[n];r.dateInfo.dateStr==o?r.selected():r.unSelected()}}if(i){var l=i.getAttribute("date-mark");"premonth"==l?this.goPre():"nextmonth"==l&&this.goNext()}},l.prototype.setYearSelected=function(){var t,i=this,o=e.getDateInfo(this.curDate),s=!1,a=o.year;if(this.yearSwiper){for(var n=0;n<3;n++){var r=this.yearSwiper.itemWrappers[this.yearSwiper.posArr[n]].yearCreator;for(var l in r.yearItems){var c=r.yearItems[l];t=c.config.year,c.config.year==a?(s=!0,c.selected(),0==n?this.yearSwiper.goPre():2==n&&this.yearSwiper.goNext()):c.unSelected()}}s||(t>a?(this.initYearWrapper(a-3+12),window.setTimeout(function(){i.yearSwiper.goPre()},0)):(this.initYearWrapper(a-3-12),window.setTimeout(function(){i.yearSwiper.goNext()},0)))}},l.prototype.createDayWraper=function(){var t=this;new i({onChange:function(i){if("gopre"==i.action){var o=e.getPreMonth(t.curDate),s=e.getPreMonth(o);t.curDate=e.getCurMonthFirstDay(o),t.triggerChange(),i.itemWrapper.daysCreator.createLaytout(s)}else if("gonext"==i.action){var o=e.getNextMonth(t.curDate),a=e.getNextMonth(o);t.curDate=e.getCurMonthFirstDay(o),t.triggerChange(),i.itemWrapper.daysCreator.createLaytout(a)}},initItem:function(e,i){e.daysCreator=new a({calendar:t,itemWrapper:e,itemHeight:t.itemHeight})},init:function(e){t.Swiper=e}});var o=e.getRealWidth(13),s="style='line-height:"+this.labelBarHeight+"px;font-size:"+o+"px'",n=$("<div style='height:"+this.labelBarHeight+"px' class='yy-calendar-bar'><div "+s+" class='yy-c-bar-item'>日</div><div "+s+" class='yy-c-bar-item'>一</div><div "+s+" class='yy-c-bar-item'>二</div><div "+s+" class='yy-c-bar-item'>三</div><div "+s+" class='yy-c-bar-item'>四</div><div "+s+" class='yy-c-bar-item'>五</div><div "+s+" class='yy-c-bar-item'>六</div></div>");this.dayWrapper=$("<div class='yy-calendar-ymd-wrapper displayflex flex-v'></div>"),this.dayWrapper.append(n).append(this.Swiper.$el),this.Swiper.$el.bind("click",function(e){for(var i=e.target,o=i.getAttribute("date-seed");null==o&&(i=i.parentNode,!(o=i.getAttribute("date-seed")))&&"BODY"!=i.tagName.toUpperCase(););t.setDateSelected(o,i)}),this.innerWrapper.append(this.dayWrapper),this.show()},l.prototype.createYearWrapper=function(t){var o=t/4+"px",a=this,n="year"==this.curShow?"":"displaynone";this.yearWrapper=$("<div class='yy-calendar-ymd-wrapper "+n+"'></div>"),new i({onChange:function(e){"gopre"==e.action?(a.curYearWrapperStartYear-=12,e.itemWrapper.yearCreator.createLaytout(a.curYearWrapperStartYear-12)):"gonext"==e.action&&(a.curYearWrapperStartYear+=12,e.itemWrapper.yearCreator.createLaytout(a.curYearWrapperStartYear+12))},initItem:function(e,t){e.yearCreator=new s({itemWrapper:e,itemHeight:o,calendar:a})},init:function(t){a.yearSwiper=t,t.$el.appendTo(a.yearWrapper);var i=e.getDateInfo(a.curDate);a.initYearWrapper(i.year)}}),this.yearWrapper.bind("click",function(t){for(var i=t.target,o=i.getAttribute("date-year-seed");null==o&&(i=i.parentNode,!(o=i.getAttribute("date-year-seed")))&&"BODY"!=i.tagName.toUpperCase(););var s=parseInt(o);a.curDate=e.setDateToYear(a.curDate,s),a.show(a.curDate,!1),a.curShow="day",a.dayWrapper&&a.dayWrapper.removeClass("displaynone"),a.yearWrapper.addClass("displaynone"),a.setYearSelected()}),this.innerWrapper.append(this.yearWrapper)},l.prototype.initYearWrapper=function(e){this.yearSwiper.reset(),this.curYearWrapperStartYear=e-4,this.yearSwiper.itemWrappers[0].yearCreator.createLaytout(e-4-12),this.yearSwiper.itemWrappers[1].yearCreator.createLaytout(e-4),this.yearSwiper.itemWrappers[2].yearCreator.createLaytout(e-4+12)},l.prototype.initYearAndMonthPicker=function(t,i){var o=e.getRealWidth(18),s=this,a=$("<div style='height:"+t+"px' class='yy-calendar-ym-picker displayflex flex-h'></div>");this.yearLeftIcon=$("<div class='yy-calendar-picker-lefticon' style='width:"+t+"px;height:"+t+"px;line-height:"+t+"px'></div>"),this.yearLabel=$("<div style='font-size:"+o+"px' class='yy-calendar-picker-label displayflex ai-center jc-center flex-1'>2013</div>"),this.yearLabel.bind("click",function(){s.yearWrapper||s.createYearWrapper(i-t),"day"==s.curShow?(s.curShow="year",s.yearWrapper.removeClass("displaynone"),s.dayWrapper&&s.dayWrapper.addClass("displaynone")):"year"==s.curShow?(s.curShow="day",s.dayWrapper&&s.dayWrapper.removeClass("displaynone"),s.yearWrapper.addClass("displaynone")):"month"==s.curShow&&(s.curShow="year",s.monthWrapper&&s.monthWrapper.addClass("displaynone"),s.yearWrapper.removeClass("displaynone"))}),this.yearLeftIcon.bind("click",function(){s.goTo(e.getPreYear(s.curDate)),s.setYearSelected()}),this.yearRightIcon=$("<div class='yy-calendar-picker-righticon' style='width:"+t+"px;height:"+t+"px;line-height:"+t+"px'></div>"),this.yearRightIcon.bind("click",function(){s.goTo(e.getNextYear(s.curDate)),s.setYearSelected()}),this.monthLeftIcon=$("<div class='yy-calendar-picker-lefticon' style='width:"+t+"px;height:"+t+"px;line-height:"+t+"px'></div>"),this.monthLeftIcon.bind("click",function(){s.goPre(),s.setMonthSelected()}),this.monthLabel=$("<div style='font-size:"+o+"px' class='yy-calendar-picker-label displayflex ai-center jc-center flex-1'>2013</div>"),this.monthLabel.bind("click",function(){s.monthWrapper||s.createMonthWrapper(i-t),"day"==s.curShow?(s.setMonthSelected(),s.curShow="month",s.monthWrapper.removeClass("displaynone"),s.dayWrapper&&s.dayWrapper.addClass("displaynone")):"year"==s.curShow?(s.setMonthSelected(),s.curShow="month",s.monthWrapper.removeClass("displaynone"),s.yearWrapper&&s.yearWrapper.addClass("displaynone")):"month"==s.curShow&&(s.curShow="day",s.monthWrapper&&s.monthWrapper.addClass("displaynone"),s.dayWrapper&&s.dayWrapper.removeClass("displaynone"))}),this.monthRightIcon=$("<div class='yy-calendar-picker-righticon' style='width:"+t+"px;height:"+t+"px;line-height:"+t+"px'></div>"),this.monthRightIcon.bind("click",function(){s.goNext(),s.setMonthSelected()}),a.append(this.yearLeftIcon).append(this.yearLabel).append(this.yearRightIcon).append(this.monthLeftIcon).append(this.monthLabel).append(this.monthRightIcon),this.$el.append(a)},l.prototype.createMonthWrapper=function(t){var i=t/4+"px",o=this;this.monthDict={},this.monthWrapper=$("<div class='yy-calendar-ymd-wrapper displaynone'></div>");for(var s=0;s<12;s++){var a=$("<div data-month-seed='"+(s+1)+"' style='height:"+i+";line-height:"+i+"' class='yy-calendar-month-item'></div>"),n=$("<span class='yy-calendar-month' style='font-size:"+e.fontSize15()+"px'>"+r[s]+"</span>");a.append(n),s+1==this.curDate.getMonth()+1&&n.addClass("yy-calendar-month-selected"),this.monthDict[(s+1).toString()]=n,this.monthWrapper.append(a)}this.monthWrapper.bind("click",function(t){for(var i=t.target,s=i.getAttribute("data-month-seed");null==s&&(i=i.parentNode,!(s=i.getAttribute("data-month-seed")))&&"BODY"!=i.tagName.toUpperCase(););s&&(o.curDate=e.setMonthToDate(o.curDate,s),o.show(o.curDate,!1),o.curShow="day",o.dayWrapper&&o.dayWrapper.removeClass("displaynone"),o.monthWrapper.addClass("displaynone"),o.setMonthSelected())}),this.innerWrapper.append(this.monthWrapper)},l.prototype.setMonthSelected=function(){var t=e.convertToDate(this.curDate).getMonth()+1;this.setYearSelected();for(var i in this.monthDict)t==parseInt(i)?this.monthDict[i].addClass("yy-calendar-month-selected"):this.monthDict[i].removeClass("yy-calendar-month-selected")},l.prototype.show=function(t,i){t=t||this.curDate||new Date,this.curDate=e.convertToDate(t),this.Swiper.reset();var o=e.getPreMonth(this.curDate);this.Swiper.itemWrappers[0].daysCreator.createLaytout(o),this.Swiper.itemWrappers[1].daysCreator.createLaytout(this.curDate);var s=e.getNextMonth(this.curDate);this.Swiper.itemWrappers[2].daysCreator.createLaytout(s),i||this.triggerChange()},l.prototype.triggerChange=function(){var t=e.getDateInfo(this.curDate);this.monthLabel.html(t.month+"月"),this.yearLabel.html(t.year),this.pluginChangeMethod&&this.pluginChangeMethod.call(this.pageview.plugin,this,{})},l.prototype.goPre=function(){this.Swiper.goPre()},l.prototype.goNext=function(){this.Swiper.goNext()},l.prototype.setValue=function(t){t=t||new Date,t=e.convertToDate(t),this.selectedTime=t,this.goTo(t)},l.prototype.goTo=function(t){var i=this;if(t=t||new Date,t=e.convertToDate(t),e.ConvertDateToStr(this.curDate)!=e.ConvertDateToStr(t)){if(e.ConvertDateToStr(this.curDate,"yyyy-MM")==e.ConvertDateToStr(t,"yyyy-MM"))return void this.setDateSelected(t);this.curDate=t,this.curDate>t?(this.show(e.getNextMonth(t),!0),window.setTimeout(function(){i.goPre()},0)):(this.show(e.getPreMonth(t),!0),window.setTimeout(function(){i.goNext()},0))}},l}),define("calendar",["utils","base","swiper"],function(e,t,i){function o(t,i,o,s){var a=this;a.dateInfo=t,this.calendar=s,this.$el=$("<div date-seed='"+t.dateStr+"' date-mark='"+t.mark+"' date-day='"+t.day+"'  date-month='"+t.month+"' date-year='"+t.year+"' class='yy-calendar-day-item displayflex jc-center ai-center yy-calendar-day-item-"+t.mark+"'></div>");var n=e.ConvertDateToStr(s.selectedTime)==a.dateInfo.dateStr;this.dayLabel=$("<div style='font-size:"+e.fontSize12()+"px;width:"+o+"px;height:"+o+"px;line-height:"+o+"px' class='yy-calendar-day'>"+t.day+"</div>"),n&&this.selected(),this.$el.append(this.dayLabel),e.css(this.$el,i)}function s(e){this.config=e,this.yearItems={},this.itemWrapper=e.itemWrapper,this.calendar=e.calendar}function a(t){this.config=t,this.itemWrapper=t.itemWrapper,this.calendar=t.calendar,this.SumDay=42,this.dayInnerWidth=e.getRealWidth(23),this.dayItems={}}o.prototype={selected:function(){this.dayLabel.addClass("yy-calendar-day-selected")},unSelected:function(){this.dayLabel.removeClass("yy-calendar-day-selected")}},s.prototype={createLaytout:function(e){this.yearItems={},this.itemWrapper.$el.empty();for(var t=0;t<12;t++){var i=e+t,o=new n({calendar:this.calendar,year:i,itemHeight:this.config.itemHeight});this.yearItems[i]=o,this.itemWrapper.$el.append(o.$el)}}};var n=function(t){this.config=t,this.calendar=t.calendar;var i=e.convertToDate(this.calendar.curDate),o=i.getFullYear()==this.config.year;this.$el=$("<div  date-year-seed='"+t.year+"' style='height:"+this.config.itemHeight+";line-height:"+this.config.itemHeight+"' class='yy-calendar-year-item'></div>"),this.innnerYear=$("<span style='font-size:"+e.fontSize15()+"px' class='yy-calendar-year'>"+this.config.year+"</span>"),o&&this.selected(),this.$el.append(this.innnerYear)};n.prototype={selected:function(){this.innnerYear.addClass("yy-calendar-year-selected")},unSelected:function(){this.innnerYear.removeClass("yy-calendar-year-selected")}},a.prototype={createLaytout:function(t){this.dayItems={},this.date=e.convertToDate(t),this.itemWrapper.$el.empty();for(var i=this.getDaysArr(),s={height:this.config.itemHeight+"px","font-size":e.getRealWidth(14)+"px"},a=document.createDocumentFragment(),n=0;n<this.SumDay;n++){var r=i[n],l=new o(r,s,this.dayInnerWidth,this.calendar);this.dayItems[r.dateStr]=l,a.appendChild(l.$el[0])}this.itemWrapper.$el[0].appendChild(a)},getDaysArr:function(){var t=[],i=e.getMonthDayCount(this.date),o=e.getDateInfo(this.date),s=e.getMonthFirstDayWhicDayInWeek(this.date),a=this.SumDay-s-i;if(s>0)for(var n=e.getPreMonth(this.date),r=e.getMonthDayCount(n),l=e.getDateInfo(n),c=0;c<s;c++){var d=r-s+c+1,h=new Date(l.year,l.month-1,d);t.push({date:h,dateStr:e.ConvertDateToStr(h),year:l.year,month:l.month,day:d,mark:"premonth"})}for(var c=1;c<=i;c++){var h=new Date(o.year,o.month-1,c);t.push({date:h,dateStr:e.ConvertDateToStr(h),year:o.year,month:o.month,day:c,mark:"curmonth"})}if(a>0)for(var p=e.getNextMonth(this.date),u=e.getDateInfo(p),c=1;c<=a;c++){var h=new Date(u.year,u.month-1,c);t.push({date:h,dateStr:e.ConvertDateToStr(h),year:u.year,month:u.month,day:c,mark:"nextmonth"})}return t}};var r=["一","二","三","四","五","六","七","八","九","十","十一","十二"],l=function(t){var i=this;l.baseConstructor.call(this,t),this.$el.addClass("yy-calendar-wrapper");var o=this.config.itemHeight;isNaN(o)&&(o=45),this.curDate=t.date||new Date,this.selectedTime=new Date(e.convertToDate(this.curDate).getTime()),o=parseInt(o),this.itemHeight=e.getRealHeight(o);var s=t.comKey+"_change";this.pageview&&this.pageview.plugin&&(this.pluginChangeMethod=this.pageview.plugin[s]),this.labelBarHeight=e.getRealHeight(27);var a=6*this.itemHeight+this.labelBarHeight;this.innerWrapper=$("<div style='height:"+a+"px' class='yy-calendar-inner'></div>");var n=this.config.isShowYearAndMonthPicker||!0;if(n){var r=e.getRealHeight(36);a+=r,this.initYearAndMonthPicker(r,a)}this.mode=t.mode||"年月日","年月"==this.mode?(this.curShow="year",this.createYearWrapper(a-r),this.triggerChange()):(this.curShow="day",i.createDayWraper()),this.$el.append(this.innerWrapper)};return e.extends(l,t),l.prototype.setDateSelected=function(t,i){var t=e.convertToDate(t),o=(t.getFullYear(),e.ConvertDateToStr(t));this.selectedTime=t;for(var s=0;s<3;s++){var a=this.Swiper.itemWrappers[s].daysCreator;for(var n in a.dayItems){var r=a.dayItems[n];r.dateInfo.dateStr==o?r.selected():r.unSelected()}}if(i){var l=i.getAttribute("date-mark");"premonth"==l?this.goPre():"nextmonth"==l&&this.goNext()}},l.prototype.setYearSelected=function(){var t,i=this,o=e.getDateInfo(this.curDate),s=!1,a=o.year;if(this.yearSwiper){for(var n=0;n<3;n++){var r=this.yearSwiper.itemWrappers[this.yearSwiper.posArr[n]].yearCreator;for(var l in r.yearItems){var c=r.yearItems[l];t=c.config.year,c.config.year==a?(s=!0,c.selected(),0==n?this.yearSwiper.goPre():2==n&&this.yearSwiper.goNext()):c.unSelected()}}s||(t>a?(this.initYearWrapper(a-3+12),window.setTimeout(function(){i.yearSwiper.goPre()},0)):(this.initYearWrapper(a-3-12),window.setTimeout(function(){i.yearSwiper.goNext()},0)))}},l.prototype.createDayWraper=function(){var t=this;new i({onChange:function(i){if("gopre"==i.action){var o=e.getPreMonth(t.curDate),s=e.getPreMonth(o);t.curDate=e.getCurMonthFirstDay(o),t.triggerChange(),i.itemWrapper.daysCreator.createLaytout(s)}else if("gonext"==i.action){var o=e.getNextMonth(t.curDate),a=e.getNextMonth(o);t.curDate=e.getCurMonthFirstDay(o),t.triggerChange(),i.itemWrapper.daysCreator.createLaytout(a)}},initItem:function(e,i){e.daysCreator=new a({calendar:t,itemWrapper:e,itemHeight:t.itemHeight})},init:function(e){t.Swiper=e}});var o=e.getRealWidth(13),s="style='line-height:"+this.labelBarHeight+"px;font-size:"+o+"px'",n=$("<div style='height:"+this.labelBarHeight+"px' class='yy-calendar-bar'><div "+s+" class='yy-c-bar-item'>日</div><div "+s+" class='yy-c-bar-item'>一</div><div "+s+" class='yy-c-bar-item'>二</div><div "+s+" class='yy-c-bar-item'>三</div><div "+s+" class='yy-c-bar-item'>四</div><div "+s+" class='yy-c-bar-item'>五</div><div "+s+" class='yy-c-bar-item'>六</div></div>");this.dayWrapper=$("<div class='yy-calendar-ymd-wrapper displayflex flex-v'></div>"),this.dayWrapper.append(n).append(this.Swiper.$el),this.Swiper.$el.bind("click",function(e){for(var i=e.target,o=i.getAttribute("date-seed");null==o&&(i=i.parentNode,!(o=i.getAttribute("date-seed")))&&"BODY"!=i.tagName.toUpperCase(););t.setDateSelected(o,i)}),this.innerWrapper.append(this.dayWrapper),this.show()},l.prototype.createYearWrapper=function(t){var o=t/4+"px",a=this,n="year"==this.curShow?"":"displaynone";this.yearWrapper=$("<div class='yy-calendar-ymd-wrapper "+n+"'></div>"),new i({onChange:function(e){"gopre"==e.action?(a.curYearWrapperStartYear-=12,e.itemWrapper.yearCreator.createLaytout(a.curYearWrapperStartYear-12)):"gonext"==e.action&&(a.curYearWrapperStartYear+=12,e.itemWrapper.yearCreator.createLaytout(a.curYearWrapperStartYear+12))},initItem:function(e,t){e.yearCreator=new s({itemWrapper:e,itemHeight:o,calendar:a})},init:function(t){a.yearSwiper=t,t.$el.appendTo(a.yearWrapper);var i=e.getDateInfo(a.curDate);a.initYearWrapper(i.year)}}),this.yearWrapper.bind("click",function(t){for(var i=t.target,o=i.getAttribute("date-year-seed");null==o&&(i=i.parentNode,!(o=i.getAttribute("date-year-seed")))&&"BODY"!=i.tagName.toUpperCase(););var s=parseInt(o);a.curDate=e.setDateToYear(a.curDate,s),a.show(a.curDate,!1),a.curShow="day",a.dayWrapper&&a.dayWrapper.removeClass("displaynone"),a.yearWrapper.addClass("displaynone"),a.setYearSelected()}),this.innerWrapper.append(this.yearWrapper)},l.prototype.initYearWrapper=function(e){this.yearSwiper.reset(),this.curYearWrapperStartYear=e-4,this.yearSwiper.itemWrappers[0].yearCreator.createLaytout(e-4-12),this.yearSwiper.itemWrappers[1].yearCreator.createLaytout(e-4),this.yearSwiper.itemWrappers[2].yearCreator.createLaytout(e-4+12)},l.prototype.initYearAndMonthPicker=function(t,i){var o=e.getRealWidth(18),s=this,a=$("<div style='height:"+t+"px' class='yy-calendar-ym-picker displayflex flex-h'></div>");this.yearLeftIcon=$("<div class='yy-calendar-picker-lefticon' style='width:"+t+"px;height:"+t+"px;line-height:"+t+"px'></div>"),this.yearLabel=$("<div style='font-size:"+o+"px' class='yy-calendar-picker-label displayflex ai-center jc-center flex-1'>2013</div>"),this.yearLabel.bind("click",function(){s.yearWrapper||s.createYearWrapper(i-t),"day"==s.curShow?(s.curShow="year",s.yearWrapper.removeClass("displaynone"),s.dayWrapper&&s.dayWrapper.addClass("displaynone")):"year"==s.curShow?(s.curShow="day",s.dayWrapper&&s.dayWrapper.removeClass("displaynone"),s.yearWrapper.addClass("displaynone")):"month"==s.curShow&&(s.curShow="year",s.monthWrapper&&s.monthWrapper.addClass("displaynone"),s.yearWrapper.removeClass("displaynone"))}),this.yearLeftIcon.bind("click",function(){s.goTo(e.getPreYear(s.curDate)),s.setYearSelected()}),this.yearRightIcon=$("<div class='yy-calendar-picker-righticon' style='width:"+t+"px;height:"+t+"px;line-height:"+t+"px'></div>"),this.yearRightIcon.bind("click",function(){s.goTo(e.getNextYear(s.curDate)),s.setYearSelected()}),this.monthLeftIcon=$("<div class='yy-calendar-picker-lefticon' style='width:"+t+"px;height:"+t+"px;line-height:"+t+"px'></div>"),this.monthLeftIcon.bind("click",function(){s.goPre(),s.setMonthSelected()}),this.monthLabel=$("<div style='font-size:"+o+"px' class='yy-calendar-picker-label displayflex ai-center jc-center flex-1'>2013</div>"),this.monthLabel.bind("click",function(){s.monthWrapper||s.createMonthWrapper(i-t),"day"==s.curShow?(s.setMonthSelected(),s.curShow="month",s.monthWrapper.removeClass("displaynone"),s.dayWrapper&&s.dayWrapper.addClass("displaynone")):"year"==s.curShow?(s.setMonthSelected(),s.curShow="month",s.monthWrapper.removeClass("displaynone"),s.yearWrapper&&s.yearWrapper.addClass("displaynone")):"month"==s.curShow&&(s.curShow="day",s.monthWrapper&&s.monthWrapper.addClass("displaynone"),s.dayWrapper&&s.dayWrapper.removeClass("displaynone"))}),this.monthRightIcon=$("<div class='yy-calendar-picker-righticon' style='width:"+t+"px;height:"+t+"px;line-height:"+t+"px'></div>"),this.monthRightIcon.bind("click",function(){s.goNext(),s.setMonthSelected()}),a.append(this.yearLeftIcon).append(this.yearLabel).append(this.yearRightIcon).append(this.monthLeftIcon).append(this.monthLabel).append(this.monthRightIcon),this.$el.append(a)},l.prototype.createMonthWrapper=function(t){var i=t/4+"px",o=this;this.monthDict={},this.monthWrapper=$("<div class='yy-calendar-ymd-wrapper displaynone'></div>");for(var s=0;s<12;s++){var a=$("<div data-month-seed='"+(s+1)+"' style='height:"+i+";line-height:"+i+"' class='yy-calendar-month-item'></div>"),n=$("<span class='yy-calendar-month' style='font-size:"+e.fontSize15()+"px'>"+r[s]+"</span>");a.append(n),s+1==this.curDate.getMonth()+1&&n.addClass("yy-calendar-month-selected"),
this.monthDict[(s+1).toString()]=n,this.monthWrapper.append(a)}this.monthWrapper.bind("click",function(t){for(var i=t.target,s=i.getAttribute("data-month-seed");null==s&&(i=i.parentNode,!(s=i.getAttribute("data-month-seed")))&&"BODY"!=i.tagName.toUpperCase(););s&&(o.curDate=e.setMonthToDate(o.curDate,s),o.show(o.curDate,!1),o.curShow="day",o.dayWrapper&&o.dayWrapper.removeClass("displaynone"),o.monthWrapper.addClass("displaynone"),o.setMonthSelected())}),this.innerWrapper.append(this.monthWrapper)},l.prototype.setMonthSelected=function(){var t=e.convertToDate(this.curDate).getMonth()+1;this.setYearSelected();for(var i in this.monthDict)t==parseInt(i)?this.monthDict[i].addClass("yy-calendar-month-selected"):this.monthDict[i].removeClass("yy-calendar-month-selected")},l.prototype.show=function(t,i){t=t||this.curDate||new Date,this.curDate=e.convertToDate(t),this.Swiper.reset();var o=e.getPreMonth(this.curDate);this.Swiper.itemWrappers[0].daysCreator.createLaytout(o),this.Swiper.itemWrappers[1].daysCreator.createLaytout(this.curDate);var s=e.getNextMonth(this.curDate);this.Swiper.itemWrappers[2].daysCreator.createLaytout(s),i||this.triggerChange()},l.prototype.triggerChange=function(){var t=e.getDateInfo(this.curDate);this.monthLabel.html(t.month+"月"),this.yearLabel.html(t.year),this.pluginChangeMethod&&this.pluginChangeMethod.call(this.pageview.plugin,this,{})},l.prototype.goPre=function(){this.Swiper.goPre()},l.prototype.goNext=function(){this.Swiper.goNext()},l.prototype.setValue=function(t){t=t||new Date,t=e.convertToDate(t),this.selectedTime=t,this.goTo(t)},l.prototype.goTo=function(t){var i=this;if(t=t||new Date,t=e.convertToDate(t),e.ConvertDateToStr(this.curDate)!=e.ConvertDateToStr(t)){if(e.ConvertDateToStr(this.curDate,"yyyy-MM")==e.ConvertDateToStr(t,"yyyy-MM"))return void this.setDateSelected(t);this.curDate=t,this.curDate>t?(this.show(e.getNextMonth(t),!0),window.setTimeout(function(){i.goPre()},0)):(this.show(e.getPreMonth(t),!0),window.setTimeout(function(){i.goNext()},0))}},l}),define("../../components/calendarpicker",["utils","calendar"],function(e,t){var i=function(i){var o=this;i=i||{};var s=i.wrapper||document.body;this.$el=$("<div class='yy-calendar-picker'></div>"),this.calendar=new t({itemHeight:38}),this.backCover=$("<div class='yy-calendar-picker-bk displaynone'></div>"),this.backCover.bind("click",function(){o.hide()});var a=e.getRealHeight("36"),n=$("<div style='height:"+a+"px' class='yy-calendar-picker-btns'></div>"),r=$("<div style='font-size:"+e.fontSize15()+"px;line-height:"+a+"px' class='yy-calendar-picker-cancelbtn'>取消</div>"),l=$("<div style='font-size:"+e.fontSize15()+"px;line-height:"+a+"px' class='yy-calendar-picker-okbtn'>确定</div>");l.bind("click",function(){i.ok&&i.ok({date:o.calendar.selectedTime,dateStr:e.ConvertDateToStr(o.calendar.selectedTime)}),o.hide()}),r.bind("click",function(){o.hide()}),n.append(r).append(l),this.$el.append(n).append(this.calendar.$el),$(s).append(this.backCover[0]).append(this.$el)};return i.prototype.show=function(e){this.calendar.setValue(e);var t=this;window.setTimeout(function(){t.$el.addClass("yy-calendar-picker-show"),t.backCover.removeClass("displaynone")},0)},i.prototype.hide=function(e){this.$el.removeClass("yy-calendar-picker-show"),this.backCover.addClass("displaynone")},i}),define("../../components/calendarrange",["utils","base","./calendar"],function(e,t,i){var o=function(e){o.baseConstructor.call(this,e)};return e.extends(o,t),o}),define("../../components/checkbox",["utils","base"],function(e,t){var i=e.getRealWidth(20),o=e.getRealWidth(4),s=e.getRealWidth(14),a={width:i,height:i,borderRadius:o,border:"1px solid rgb(229, 229, 229)",backgroundColor:"#fff",fontSize:s},n={width:i,height:i,borderRadius:o,border:"1px solid #0093ff",color:"#fff",backgroundColor:"#0093ff",fontSize:s},r=function(t){var i=this;t.style=t.style||{},this.uss=e.simpleExtendObj(e.clone(a),t.style),this.uss=e.simpleExtendObj(this.uss,t.unSelectedStyle||{}),this.ss=e.simpleExtendObj(e.clone(n),t.selectedStyle||{}),this.ss=e.simpleExtendObj(this.ss,t.selectedStyle||{}),this.value=t.value,r.baseConstructor.call(this,t),this.$el.addClass("yy-checkbox yy-icommon"),this.setValue(this.value),this.$el.bind("click",function(){i.change()});var o=this.config.comKey+"_change";this.changeMethod=this.pageview.plugin[o]};return e.extends(r,t),r.prototype.change=function(){this.changeMethod&&this.changeMethod.call(this.pageview.plugin,this,{value:!this.value})},r.prototype.selected=function(t){t&&this.config.disableParentSelect||(this.value=!0,e.css(this.$el,this.ss),this.$el.addClass("yy-checkbox-selected"))},r.prototype.unSelected=function(t){t&&this.config.disableParentSelect||(this.value=!1,e.css(this.$el,this.uss),this.$el.removeClass("yy-checkbox-selected"))},r.prototype.setValue=function(t){this.value=t,t?(this.$el.addClass("yy-checkbox-selected"),e.css(this.$el,this.ss)):(this.$el.removeClass("yy-checkbox-selected"),e.css(this.$el,this.uss))},r}),define("../../components/checklist",["utils","base"],function(e,t){var i=function(t){this.itemData=t.itemData,this.parent=t.parent;this.key=this.itemData[this.parent.primaryKey],this.$el=$("<div data-key='"+this.key+"' class='yy-checklist-item yy-icommon' style='height:"+t.parent.itemHeight+"px;line-height:"+t.parent.itemHeight+"px;font-size:"+e.fontSize13()+"px'>"+(t.itemData[t.parent.labelKey]||"")+"</div>")};i.prototype={selected:function(){this.$el.addClass("yy-checklist-item-selected")},unSelected:function(){this.$el.removeClass("yy-checklist-item-selected")}};var o=function(t){var i=this;o.baseConstructor.call(this,t);var s=e.getRealHeight("32");this.itemHeight=e.getRealHeight("40"),this.canbeNull=t.canbeNull||!1,this.$el.addClass("yy-checklist"),this.items=[],this.selectedValue=[],this.primaryKey=this.config.primaryKey,this.primaryKey||console.error(this.config.comKey+"控件没有指定primaryKey数据的主键"),this.loadWrapper=$("<div class='yy-cs-loading-wrapper displayflex jc-center ai-center'><div class='preloader'></div></div>"),this.backCoverLayer=$("<div class='yy-cl-coverlayer displaynone'></div>");var a=$("<div style='height:"+s+"px;font-size:"+e.fontSize12()+"px;line-height:"+s+"px' class='displayflex jc-between ai-center yy-cl-title-wrapper'></div>");this.CancelBtn=$("<div style='font-size:"+e.fontSize13()+"px' class='yy-checklist-btn'>取消</div>"),this.OkBtn=$("<div style='font-size:"+e.fontSize13()+"px'  class='yy-checklist-btn yy-checklist-okbtn'>确定</div>"),a.append(this.CancelBtn).append(this.OkBtn),this.CancelBtn.bind("click",function(){i.cancel()}),this.OkBtn.bind("click",function(){i.OK()}),this.listWrapper=$("<div style='max-height:"+6.7*this.itemHeight+"px;' class='yy-cl-list-wrapper'></div>"),this.listWrapper.append(this.loadWrapper),this.pageview.innerWrapper.append(this.backCoverLayer),this.$el.append(a).append(this.listWrapper),this.labelKey=this.config.labelKey||"text",this.backCoverLayer.bind("click",function(){i.cancel()}),this.listWrapper.bind("click",function(e){i.itemClick(e)});var n=this.config.comKey+"_selected";this.selectedMethod=this.pageview.plugin[n]};return e.extends(o,t),o.prototype.OK=function(){(0!=this.selectedValue.length||this.canbeNull)&&(this.originalSelectedValue=e.copy(this.selectedValue),this.hide(),this.selectedMethod&&this.selectedMethod.call(this.pageview.plugin,this,{selectedValue:this.selectedValue}))},o.prototype.cancel=function(){this.hide(),this.originalSelectedValue&&this.setItemSelected(this.originalSelectedValue,!0)},o.prototype._getPrimaryValue=function(e){var t="";if("string"==typeof this.primaryKey)t=e[this.primaryKey];else if(this.primaryKey instanceof Array){for(var i=[],o=0,s=this.primaryKey.length;o<s;o++)i.push(e[this.primaryKey[o]]);t=i.join("_")}else console.error("checklist控件primaryKey属性 错误的数据类型");return t},o.prototype.itemClick=function(e){var t=e.target.getAttribute("data-key");if(t){for(var i=null,o=0,s=this.items.length;o<s;o++)if(t==this.items[o].key){i=this.items[o];break}if(i){var a=this.selectedValue.indexOf(i.itemData);a>=0?this.selectedValue.splice(a,1):this.selectedValue.push(i.itemData),0!=this.selectedValue.length||this.canbeNull?this.OkBtn.removeClass("yy-disabled"):this.OkBtn.addClass("yy-disabled"),this.setItemSelected(this.selectedValue)}}},o.prototype.show=function(){this.$el.addClass("yy-checklist-show"),this.backCoverLayer.removeClass("displaynone"),this.init()},o.prototype.setItemSelected=function(t,i){this.selectedValue=[];for(var o=0,s=this.items.length;o<s;o++){var a=this.items[o];a.unSelected()}for(var n=0,r=t.length;n<r;n++)for(var l=this._getPrimaryValue(t[n]),o=0,s=this.items.length;o<s;o++){var a=this.items[o];a.key==l&&(a.selected(),this.selectedValue.push(a.itemData))}i&&(this.originalSelectedValue=e.copy(this.selectedValue))},o.prototype.setSelectedValue=function(e){e instanceof Array||console.error("checklist setSelectedValue方法必须是数组"),this.items?this.setItemSelected(e,!0):this._midSelectedValue=e},o.prototype.createItems=function(e){this.dataSource=e,this.items=[],this.listWrapper.empty();for(var t=this.dataSource.length,o=0,s=t;o<s;o++){var a=this.dataSource[o],n=new i({itemData:a,parent:this});this.listWrapper.append(n.$el),this.items.push(n),t>1&&o!=t-1&&this.listWrapper.append("<div class='yy-checklist-line'></div>")}this._midSelectedValue&&(this.setItemSelected(this._midSelectedValue,!0),this._midSelectedValue=null),this.selectedValue.length>0?this.OkBtn.removeClass("yy-disabled"):this.OkBtn.addClass("yy-disabled")},o.prototype.init=function(){var e=this;this.dataSource||(e.loadWrapper.removeClass("displaynone"),e.loadErrorWrapper&&e.loadErrorWrapper.addClass("displaynone"),e.OkBtn.addClass("yy-disabled"),this.loadData(function(t){e.OkBtn.removeClass("yy-disabled"),e.loadWrapper.addClass("displaynone"),e.loadErrorWrapper&&e.loadErrorWrapper.addClass("displaynone"),e.createItems(t)},function(){e.loadErrorWrapper||e.initLoadErrorDom(),e.loadErrorWrapper.removeClass("displaynone"),e.loadWrapper.addClass("displaynone")}))},o.prototype.loadData=function(e,t){if(this.dataSource)return void e(this.dataSource);var i=this.config.comKey+"_loaddata",o=this.pageview.plugin[i];o&&o.call(this.pageview.plugin,this,{success:e,error:t})},o.prototype.initLoadErrorDom=function(){var t=this,i=e.getRealWidth(11),o=e.getRealWidth(20);this.loadErrorWrapper=$("<div style='height:100px' class='yy-loadmore-wrapper displayflex jc-center ai-center flex-h'></div>");var s=$("<i style='font-size:"+o+"px' class='yy-icommon yy-loadmore-erroricon'></i>"),a=$("<span style='font-size:"+i+"px' class='yy-pull-meslabel'>网络异常,点击</span>"),n=$("<span style='font-size:"+i+"px' class='yy-loadmore-reload-babel'>重新加载</span>");n.bind("click",function(){t.init()}),this.loadErrorWrapper.append(s).append(a).append(n),this.listWrapper.append(this.loadErrorWrapper)},o.prototype.hide=function(){this.$el.removeClass("yy-checklist-show"),this.backCoverLayer.addClass("displaynone")},o}),define("../../components/conditionselector",["utils","base"],function(e,t){var i=function(e){var t=this;this.rootInstance=e.parent,this.index=e.index,this.item=e.item,this.$el=$("<div class='displayflex yy-cs-item'></div>"),this.titleDom=$("<span style='font-size:"+this.rootInstance.itemFontSize+"'>"+this.item+"</span>"),this.$el.append(this.titleDom).append("<i></i>"),this.$el.appendTo(this.rootInstance.$el),this.$el.bind("click",function(){t.rootInstance.itemClick(t)})};i.prototype={selected:function(){this.$el.addClass("yy-cs-item-selected")},unSelected:function(){this.$el.removeClass("yy-cs-item-selected")}};var o=function(e){var t=this;this.isMulti=e.isMulti,this.parent=e.parent,this.barItemInstance=e.barItemInstance,this.rootInstance=e.rootInstance,this.index=this.barItemInstance.index,this.data=e.itemData;var i="menu"+this.index+"LabelKey",o=this.rootInstance.config[i];o||alert("程序配置错误"+this.rootInstance.config.comKey+"未配置 :"+i);var s="yy-cs-selector-item";if(this.isMulti){var a="menu"+this.index+"Col",n=this.rootInstance.config[a];s="yy-cs-muselector-item",n&&(n=parseInt(n),2==n&&(s="yy-cs-muselector-item yy-cs-muselector-item2"))}this.$el=$("<div class='"+s+"'><span class='yy-cs-selector-span' style='font-size:"+this.rootInstance.itemFontSize+"'>"+(this.data[o]||"")+"</span></div>"),this.$el.css({height:this.rootInstance.itemHeight,lineHeight:this.rootInstance.itemHeight}),this.$el.bind("click",function(){t.parent.itemClick(t)})};o.prototype={selected:function(){var e=this.isMulti?"yy-cs-muselector-item-selected":"yy-cs-selector-item-selected";this.$el.addClass(e)},unSelected:function(){var e=this.isMulti?"yy-cs-muselector-item-selected":"yy-cs-selector-item-selected";this.$el.removeClass(e)}};var s=function(e){var t=this;this.parent=e.parent,this.index=e.index,this.title=e.title,this.rootInstance=e.rootInstance,this.$el=$("<div style='font-size:"+this.rootInstance.itemFontSize+"' class='displayflex yy-cs-selector-leftitem flex-h jc-start ai-center'>"+this.title+"</div>"),this.$el.css({height:this.rootInstance.itemHeight}),this.$el.bind("touchstart",function(){t.parent.leftItemClick(t)})};s.prototype={selected:function(){this.$el.addClass("yy-cs-selector-leftitem-selected")},unSelected:function(){this.$el.removeClass("yy-cs-selector-leftitem-selected")}};var a=function(t){this.$el=$("<div class='displayflex yy-cs-multiselector flex-v'></div>"),this.listWrapper=$("<div class='displayflex yy-cs-multiselector-list flex-h'></div>"),this.btnWrapper=$("<div class='displayflex yy-cs-multiselector-bottom flex-h'></div>"),this.btnWrapper.css({height:e.getRealHeight(40)+"px"});var i=this;this.rootInstance=t.rootInstance,this.barItemInstance=t.barItemInstance,this.dropDownInstance=t.dropDownInstance,this.index=this.barItemInstance.index,this.data=t.data,this.items=[],this.selectedItems=[];var s=this.rootInstance.config["menu"+this.index+"Style"];if(s){var a=s.maxHeight||s["max-height"];a&&this.listWrapper.css({maxHeight:a})}for(var n=0,r=this.data.length;n<r;n++){var l=this.data[n],c=new o({rootInstance:this.rootInstance,barItemInstance:this.barItemInstance,dropDownInstance:this.dropDownInstance,parent:this,itemData:l,isMulti:!0});this.items.push(c),this.listWrapper.append(c.$el)}var d=$("<div class='displayflex yy-cs-btn jc-center ai-center'>重置</div>"),h=$("<div class='displayflex yy-cs-btn yy-cs-ok-btn jc-center ai-center'>确定</div>");this.btnWrapper.append(d).append(h),d.bind("click",function(){i.reset()}),this.$el.append(this.listWrapper).append(this.btnWrapper)};a.prototype={reset:function(){for(var e=0,t=this.selectedItems.length;e<t;e++)this.selectedItems[e].unSelected();this.selectedItems=[]},itemClick:function(e){var t=this.selectedItems.indexOf(e);t>=0?(e.unSelected(),this.selectedItems.splice(t,1)):(e.selected(),this.selectedItems.push(e))}};var n=function(e){this.$el=$("<div class='displayflex yy-cs-selector flex-v'></div>");this.rootInstance=e.rootInstance,this.barItemInstance=e.barItemInstance,this.dropDownInstance=e.dropDownInstance,this.index=this.barItemInstance.index,this.data=e.data,this.items=[];var t=this.rootInstance.config["menu"+this.index+"Style"];if(t){var i=t.maxHeight||t["max-height"];i&&this.$el.css({maxHeight:i})}for(var s=0,a=this.data.length;s<a;s++){var n=this.data[s],r=new o({rootInstance:this.rootInstance,barItemInstance:this.barItemInstance,dropDownInstance:this.dropDownInstance,parent:this,itemData:n});this.items.push(r),this.$el.append(r.$el)}};n.prototype={itemClick:function(e){this.curSelectedItem&&this.curSelectedItem.unSelected(),this.curSelectedItem=e,this.curSelectedItem.selected()}};var r=function(t){this.config=t,this.rootInstance=t.rootInstance,this.barItemInstance=t.barItemInstance,this.index=this.barItemInstance.index,this.dropDownInstance=t.dropDownInstance,this.$el=$("<div class='displayflex yy-cs-selector flex-h'></div>"),this.leftWrapper=$("<div class='displayflex yy-cs-selector-left flex-v'></div>"),this.rightWrapper=$("<div class='yy-cs-selector-right'></div>");var i=this.rootInstance.config["menu"+this.index+"Style"];if(i){var o=i.maxHeight||i["max-height"];o&&(this.$el.css({maxHeight:o}),this.rightWrapper.css({maxHeight:o}),this.leftWrapper.css({maxHeight:o}))}var s="menu"+t.index+"LeftStyle",a=t.rootInstance.config[s],n="menu"+t.index+"GroupKey";this.groupKey=t.rootInstance.config[n],this.groupKey||alert("程序配置错误"+this.rootInstance.config.comKey+"未配置 :"+n),a&&e.css(this.leftWrapper,a),this.leftItems=[],this.$el.append(this.leftWrapper).append(this.rightWrapper),this._processData(this.config.data),this.rightMenuWrapperDict={},this._initLeftLayout()};r.prototype={leftItemClick:function(e){this.curLeftSelectedItem&&this.curLeftSelectedItem.unSelected(),this.curLeftSelectedItem=e,e.selected(),this.showRightMenu()},itemClick:function(e){this.curSelectedItem&&this.curSelectedItem.unSelected(),this.curSelectedItem=e,this.curSelectedItem.selected()},showRightMenu:function(){var e=this.curLeftSelectedItem.index.toString(),t=this.rightMenuWrapperDict[e];t||(t=this._initRightMenuWrapper(parseInt(e)-1),this.rightMenuWrapperDict[e]=t),this.curRightMenuWrapper&&this.curRightMenuWrapper.addClass("displaynone"),this.curRightMenuWrapper=t,this.curRightMenuWrapper.removeClass("displaynone")},_initRightMenuWrapper:function(e){var t=$("<div class='displayflex flex-v yy-cs-selector-right-menuwrapper displaynone'></div>"),i=this.rightDataArrArr[e];if(i)for(var s=0,a=i.length;s<a;s++){var n=i[s],r=new o({rootInstance:this.rootInstance,barItemInstance:this.barItemInstance,dropDownInstance:this.dropDownInstance,parent:this,itemData:n});t.append(r.$el)}return this.rightWrapper.append(t),t},_initLeftLayout:function(){for(var e=["全部"].concat(this.leftDataArr),t=0,i=e.length;t<i;t++){var o=e[t],a=new s({rootInstance:this.rootInstance,barItemInstance:this.barItemInstance,dropDownInstance:this.dropDownInstance,parent:this,index:t,title:o});this.leftItems.push(a),this.leftWrapper.append(a.$el)}this.leftItemClick(this.leftItems[0])},_processData:function(e){this.leftDataArr=[],this.rightDataArrArr=[];for(var t=0,i=e.length;t<i;t++){var o=e[t],s=o[this.groupKey];if(!s){alert("程序配置错误"+this.rootInstance.config.comKey+" 数据源中 没有相关的分类字段:"+this.groupKey);break}var a=this.leftDataArr.indexOf(s);a<0&&(this.leftDataArr.push(s),a=this.leftDataArr.length-1,this.rightDataArrArr.push([]));var n=this.rightDataArrArr[a];n||(n=[],this.rightDataArrArr[a]=n),n.push(o)}}};var l=function(t){this.rootInstance=t.rootInstance,this.barItemInstance=t.barItemInstance,this.index=this.barItemInstance.index.toString(),this.DropDownWrapper=t.parent,this.hasInit=!1,this.isLoading=!1,this.$el=$("<div class='yy-cs-item-dropdown' style='min-height:100px'></div>"),this.loadWrapper=$("<div class='yy-cs-loading-wrapper displayflex jc-center ai-center displaynone'><div class='preloader'></div></div>"),this.$el.append(this.loadWrapper);var i=this.rootInstance.config["menu"+this.index+"Style"];i?e.css(this.$el,i):this.$el.css({height:"100px"}),this.DropDownWrapper.$innerWrapper.append(this.$el)};l.prototype={show:function(t){var i=this,o=t?e.processTransitionTanformStyle("transform .3s ease","translate3d(0,0,0)"):e.processTransitionTanformStyle("none","translate3d(0,0,0)");t?window.setTimeout(function(){i.$el.css(o)},0):this.$el.css(o),this.hasInit||this.isLoading||this.init()},initLoadErrorDom:function(){var e=this;this.loadErrorWrapper=this.rootInstance._createErrorDom(function(){e.init()}),this.$el.append(this.loadErrorWrapper)},init:function(){var e=this;this.isLoading||(this.isLoading=!0,this.loadWrapper.removeClass("displaynone"),e.loadErrorWrapper&&e.loadErrorWrapper.addClass("displaynone"),this.loadData(function(t){e.loadWrapper.addClass("displaynone"),e.dataSource=t,e.isLoading=!1,e.initLayout(e.dataSource)},function(t){e.loadErrorWrapper||e.initLoadErrorDom(),e.loadWrapper.addClass("displaynone"),e.loadErrorWrapper.removeClass("displaynone"),e.isLoading=!1}))},initLayout:function(e){var t="menu"+this.index+"Mode",i=this.rootInstance.config[t]||"single",o={data:e,index:this.index,rootInstance:this.rootInstance,dropDownInstance:this,barItemInstance:this.barItemInstance};"single"==i?this.selector=new n(o):"group"==i?this.selector=new r(o):"multi"==i?this.selector=new a(o):this.selector=new n(o),this.$el.append(this.selector.$el),this.hasInit=!0},loadData:function(e,t){if(this.dataSource)return void e(this.dataSource);var i=this.rootInstance.config.comKey+"_menu"+this.index+"_loaddata",o=this.rootInstance.pageview.plugin[i];o&&o.call(this.rootInstance.pageview.plugin,this,{success:e,error:t})},hide:function(t){var i=t?e.processTransitionTanformStyle("transform .3s ease","translate3d(0,-100%,0)"):e.processTransitionTanformStyle("none","translate3d(0,-100%,0)");this.$el.css(i)}};var c=function(e){var t=this;this.parent=e.parent,this.isShow=!1,this.DropDowns={},this.$el=$("<div class='yy-cs-dropdown'></div>"),this.$innerWrapper=$("<div class='yy-cs-dropdown-inner'></div>"),this.$el.append(this.$innerWrapper),this.curDropDown=null,this.$innerWrapper.bind("click",function(e){t._hideSelf(e)}),this.parent.pageview.$el.append(this.$el)};c.prototype={_hideSelf:function(e){"yy-cs-dropdown-inner"==e.target.className&&this.hide()},show:function(e){if(!this.isShow){var t=this.parent.$el[0].getBoundingClientRect(),i={top:t.bottom,left:0,bottom:0,right:0,display:"block"};this.$el.css(i),this.isShow=!0}var o=e.index.toString(),s=this.DropDowns[o];s||(s=new l({parent:this,rootInstance:this.parent,barItemInstance:e}),this.DropDowns[o]=s),this.curDropDown?this.curDropDown===s?(this.curDropDown.barItemInstance.unSelected(),this.curDropDown.hide(!0),this.curDropDown=null,this.hide()):(this.curDropDown.hide(!1),this.curDropDown.barItemInstance.unSelected(),this.curDropDown=s,this.curDropDown.show(!1),this.curDropDown.barItemInstance.selected()):(this.curDropDown=s,this.curDropDown.barItemInstance.selected(),this.curDropDown.show(!0))},hide:function(){var e=this;this.isShow&&(this.isShow=!1,this.curDropDown&&(this.curDropDown.barItemInstance.unSelected(),this.curDropDown.hide(!0)),this.curDropDown=null,window.setTimeout(function(){e.$el.css({display:"none"})},300))}};var d=function(t){d.baseConstructor.call(this,t),this.itemHeight=t.itemHeight||e.getRealHeight(40)+"px",this.itemFontSize=t.itemFontSize||e.getRealWidth(12)+"px",this.$el.addClass("displayflex yy-condition-selector flex-h"),this.items=t.items||["全部"],this.initBarItem()};return e.extends(d,t),d.prototype.showDropDown=function(e){this.dpdWrapper||(this.dpdWrapper=new c({parent:this})),this.dpdWrapper.show(e)},d.prototype.itemClick=function(e){this.showDropDown(e)},d.prototype.initBarItem=function(){for(var e=(this.config.barItemStyle,0),t=this.items.length;e<t;e++){new i({parent:this,item:this.items[e],index:e})}},d}),define("../../components/dialog",["utils","base"],function(e,t){var i=function(t){var i=this,o=t.wrapper||$(document.body),s=t.mode||1;this.dialogBackCover=$("<div style='visibility: hidden;' class='yy-dialog-bk'></div>"),this.dialogWrapper=$("<div class='yy-dialog-wrapper yy-dialog-effect-"+s+" yy-dialog-hide'></div>");var a=$("<div class='yy-dialog-inner'></div>"),n=$("<div class='yy-dialog-body'></div>"),r="row"===t.btnDirection?"yy-fd-row":"yy-fd-column",l=$("<div class='yy-dialog-btn-wrapper displayflex "+r+"'></div>");this.dialogBackCover.bind("click",function(){i.hide()});var c=t.title||"";this.titleDom=$("<div class='yy-dialog-title'>"+c+"</div>"),this.bodyContentDom=$("<div class='yy-dialog-content'></div>");var d=t.createContent;if(d)d(this.bodyContentDom);else{var h=t.contentText;this.contentTextDom=$("<div class='yy-dialog-content-text'>"+h+"</div>"),this.bodyContentDom.append(this.contentTextDom)}if(n.append(this.titleDom).append(this.bodyContentDom),t.buttons)for(var p=0,u=t.buttons.length;p<u;p++){var f=t.buttons[p],c=f.title||"按钮",g=f.style,y=f.onClick;!function(t,i,o,s,a){var n=$("<div class='yy-dialog-btn yy-flex-1 displayflex yy-jc-center yy-ai-center'>"+t+"</div>");i&&e.css(n,i),s&&n.bind("click",function(e){s()}),o.append(n)}(c,g,l,y,this)}a.append(n).append(l),this.dialogWrapper.append(a),o.append(this.dialogWrapper).append(this.dialogBackCover)};return i.prototype.show=function(){var e=this;this.dialogWrapper.css({visibility:"visible"}),this.dialogBackCover.css({visibility:"visible"}),this.dialogBackCover.addClass("yy-dialog-bk-show"),window.setTimeout(function(){e.dialogWrapper.removeClass("yy-dialog-hide").addClass("yy-dialog-show")},1)},i.prototype.hide=function(){var e=this;this.dialogWrapper.removeClass("yy-dialog-show").addClass("yy-dialog-hide"),this.dialogBackCover.removeClass("yy-dialog-bk-show"),window.setTimeout(function(){e.dialogWrapper.css({visibility:"hidden"}),e.dialogBackCover.css({visibility:"hidden"})},200)},i}),define("../../components/icon",["utils","base"],function(e,t){var i=function(t){i.baseConstructor.call(this,t),this.$el.addClass("displayflex yy-icon yy-ai-center yy-jc-center");var o=this.config.font||"",s=o.split("_");this.text=this.config.text;var a=(this.config.style,this.config.iconStyle),n=this.config.textStyle,r=this.config.textPos||"right";this.iconDom=null,this.textDom=null;var l,c;2==s.length&&(l=s[0],c=s[1],e.css(this.$el,{fontFamily:l}),this.iconDom=$('<i class="yy-icon-code" data-code="'+c+'" data-icon="&#x'+c+';"></i>'),a&&e.css(this.iconDom,a)),this.config.src&&(this.iconDom=$('<div class="yy-icon-img"><img src="'+this.config.src+'"/></div>'),a&&e.css(this.iconDom,a)),(this.text||0==this.text)&&(this.text=null===this.text||void 0===this.text?"":this.text,this.textDom=$("<span class='yy-icon-text yy-text-box'>"+this.text+"</span>"),this.config.numberofline&&(this.textDom[0].style["-webkit-line-clamp"]=this.config.numberofline),n&&e.css(this.textDom,n)),"left"==r||"top"==r?(this.textDom&&this.$el.append(this.textDom),this.iconDom&&this.$el.append(this.iconDom)):(this.iconDom&&this.$el.append(this.iconDom),this.textDom&&this.$el.append(this.textDom)),this.iconDom&&("left"==r||"right"==r?this.$el.addClass("flex-h"):this.$el.addClass("flex-v")),this.originalStatus={font:o,text:this.config.text}};return e.extends(i,t),i.prototype.changeStatus=function(t){var i=this.originalStatus;if(t&&""!==t&&this.config.status&&(i=this.config.status[t]||this.originalStatus),this.status=t,i.font){var o=i.font.split("_");if(2!=o.length)return;var s=o[0],a=o[1];e.css(this.$el,{fontFamily:s});var n=$('<i class="yy-icon-code" data-code="'+a+'" data-icon="&#x'+a+';"></i>');this.iconDom.replaceWith(n),this.iconDom=n,this.config.iconStyle&&e.css(this.iconDom,this.config.iconStyle)}var r=i.text||"";this.setText(r)},i.prototype.setText=function(e){this.text=e,this.textDom.html(e)},i.prototype.getText=function(e){return this.text},i.prototype.setAttribute=function(e,t){this.$el.attr(e,t),this.textDom&&this.textDom.attr(e,t),this.iconDom&&this.iconDom.attr(e,t)},i}),define("../../components/image",["utils","base"],function(e,t){var i=function(t){var o=this;i.baseConstructor.call(this,t),o.config.style=o.config.style||{};var s="yy-image displayflex yy-jc-center yy-ai-center";this.src=t.src||t.defaultSrc;var a=this.config.style.width;try{a=parseInt(a)}catch(e){a=null}var n=this.config.style.height;try{n=parseInt(n)}catch(e){n=null}this.img=new Image;var r="";this.img.src=this.src,this.img.onload=function(){var t={display:"block"};if(n&&a){var i=e.getPicSize(a,n,o.img.width,o.img.height);t.width=i.w,t.height=i.h}else t.width="100%",t.height="100%";o.config.style.borderRadius&&(t.borderRadius=o.config.style.borderRadius),e.css($(o.img),t)},this.img.onerror=function(){if(t.defaultSrc){if(r===t.defaultSrc)return void o.img.classList.add("displaynone");r=t.defaultSrc,o.img.src=t.defaultSrc}},o.$el.append(o.img),this.$el.addClass(s)};return e.extends(i,t),i}),define("../../components/input",["utils","base"],function(e,t){var i=function(t){var o=this;i.baseConstructor.call(this,t),this.config.style=this.config.style||{},this.$el.addClass("displayflex yy-input flex-h");var s=this.config.mode||"text",a=this.config.placeholder||"",n=t.isInForm;this.input=$("<input  class='yy-flex-1' placeholder='"+a+"' type='"+s+"'></input>");var r={fontSize:this.config.style.fontSize||"13px",color:this.config.style.color||"black"};e.css(this.input,r),n===!0?(this.Form=$("<form action=''></form>"),this.Form.bind("submit",function(e){var i=t.comKey+"_formsubmit",s=o.pageview.plugin[i];return s&&!this.disabled&&s&&s.call(o.pageview.plugin,o,{e:e}),e.preventDefault(),!1}),this.Form.append(this.input),this.$el.append(this.Form)):this.$el.append(this.input);var l=t.comKey+"_keydown",c=o.pageview.plugin[l];c&&this.$el.bind("keydown",function(e){!this.disabled&&c&&c.call(o.pageview.plugin,o,{e:e})});var d=t.comKey+"_keyup",h=o.pageview.plugin[d];h&&this.$el.bind("keyup",function(e){!this.disabled&&h&&h.call(o.pageview.plugin,o,{e:e})});var p=t.comKey+"_focus",u=o.pageview.plugin[p];u&&this.input.bind("focus",function(e){!this.disabled&&u&&u.call(o.pageview.plugin,o,{e:e})})};return e.extends(i,t),i.prototype.getValue=function(){return $.trim(this.input.val())},i.prototype.setValue=function(e){this.input.val(e)},i.prototype.setDisabled=function(e){this.disabled=e,this.disabled?(this.input.attr("disabled","disabled"),this.$el.addClass(this.disabledClassName)):(this.input.removeAttr("disabled"),this.$el.remove(this.disabledClassName))},i.prototype.focus=function(e){var t=this;t.input.focus()},i.prototype.blur=function(){var e=this;e.input.blur()},i}),define("../../components/listview",["utils","base"],function(e,t){var i=function(t){var o=this;t.style&&(t.style.flexDirection||t.style["flex-direction"]||(t.style.flexDirection="column",t.style.webkitFlexDirection="column")),t.noNeedSetStyle=!0,i.baseConstructor.call(this,t),this.parent.rowMarkSeed||(this.parent.rowMarkSeed=0),this.listview=t.listview,this.parent.rowMarkSeed+=1,this.rowindex=this.parent.rowMarkSeed,this.rowMark="row"+this.rowindex,this.contentWrapper=$("<div class='displayflex yy-row-content'></div>"),e.css(this.contentWrapper,t.style),this.SwipeDomWrapper=null,this.$$childrenWrapper=this.contentWrapper,this.$el.addClass("yy-listrow"),this.defaultSwipIconWidth=e.getRealWidth(70),this.$el.attr("row-mark",this.rowMark),this.selectedMode=t.listview.selectedMode||"m",this.contentWrapper.appendTo(this.$el),this.initLayout(t.$$datasource,null,this),this.$el.bind("click",function(e){if("edit"===o.config.listview.status)return void o.select();if(o.pageview.plugin){var t=o.config.listview.config.comKey+"_rowclick",i=o.pageview.plugin[t];i&&i.call(o.pageview.plugin,o,{e:e})}});var s=o.config.listview.config.comKey+"_getrowswipeicons";this.pliginInitSwipeIconMethod=o.pageview.plugin[s];var a=this.config.listview.config.comKey+"_selectChange";this.selectChangeMethod=this.pageview.plugin[a]};e.extends(i,t),i.prototype.select=function(){if("m"===this.selectedMode){var e=this.config.listview.selectedRows.indexOf(this);e>=0?(this.config.listview.selectedRows.splice(e,1),this.unSelected()):(this.config.listview.selectedRows.push(this),this.selected())}else{var t=this.config.listview.selectedRows[0];t&&t.unSelected(),this.config.listview.selectedRows[0]=this,this.selected()}this.selectChangeMethod&&this.selectChangeMethod.call(this.pageview.plugin,this.config.listview,{})},i.prototype.rebind=function(e){this.contentWrapper.empty(),this.datasource=e,this.initLayout(e,null,this)},i.prototype.render=function(){},i.prototype.initSwipeDom=function(){var e=this,t=this.parent.config.rowSwipeIcons;this.pliginInitSwipeIconMethod&&(t=this.pliginInitSwipeIconMethod.call(e.pageview.plugin,e,{})),this.SwipeDomWrapper||(this.SwipeDomWrapper=$("<div class='yy-row-swipwrapper displayflex flex-h'></div>"),this.SwipeDomWrapper.appendTo(this.$el),this.recreateSwipe(t))},i.prototype.recreateSwipe=function(e){var t=this;if(this.SwipeDomWrapper.empty(),!e||0==e.length)return void(this.SwipeIconsSumWidth=0);this.SwipeIconsSumWidth=0;for(var i=0,o=e.length;i<o;i++){var s=e[i],a=this.pageview.config.components[s];a.style=a.style||{};var n=a.style.width||this.defaultSwipIconWidth;n=parseInt(n),this.SwipeIconsSumWidth+=n,a.style.width=n+"px",
a.style.height="100%",this.getComponentInstanceByComKey(s,this.datasource,this,function(e){e.setAttribute&&e.setAttribute("data-swipeicon","1"),t.SwipeDomWrapper.append(e.$el)},function(){})}},i.prototype.remove=function(){this.delete(!0)},i.prototype.delete=function(e){var t=this,i=this.parent.rows.indexOf(this);i>=0&&this.parent.rows.splice(i,1);var o=this.listview.selectedRows.indexOf(this);return o>=0&&this.listview.selectedRows.splice(o,1),e?(t.$el.remove(),void(t.config.listview.isGroupList&&0==t.parent.rows.length&&t.parent.remove())):(this.$el.css({height:this.$el.height()+1+"px"}),window.setTimeout(function(){t.$el.css({transition:"height .12s linear","-webkit-transition":"height .12s linear",height:"0px"})},40),void window.setTimeout(function(){t.$el.remove(),t.config.listview.isGroupList&&0==t.parent.rows.length&&t.parent.remove()},345))},i.prototype.swipeToLeft=function(t){this.contentWrapper.css(e.processTransitionTanformStyle("none","translate3d("+t+"px,0,0)"))},i.prototype.closeSwipe=function(){this.contentWrapper.css(e.processTransitionTanformStyle("transform .2s ease","translate3d(0,0,0)"))},i.prototype.setSwipeOpenPos=function(){this.contentWrapper.css(e.processTransitionTanformStyle("transform .2s ease","translate3d(-"+this.SwipeIconsSumWidth+"px,0,0)"))};var o=function(e){var t=this;o.baseConstructor.call(this,e);var i=e.isCanCollapse,s="yy-sticky displayflex";i===!0&&(this.isCollapse=!1,s+=" yy-icommon yy-listgroup-colheader",this.$el.bind("click",function(){t.isCollapse?(t.parent.expand(),t.isCollapse=!1,t.$el.removeClass("yy-listgroup-header-collapse")):(t.isCollapse=!0,t.parent.collapse(),t.$el.addClass("yy-listgroup-header-collapse"))})),this.$el.addClass(s),this.initLayout(e.$$datasource,null,this)};e.extends(o,t);var s=function(e){s.baseConstructor.call(this,e);var t=this.parent.config.isCanCollapse;this.$el.attr("data-gval",e.groupValue);var i=$("<div class='yy-listgroup-body'></div>");this.groupBodyInner=$("<div class='yy-listgroup-body-inner'></div>"),i.append(this.groupBodyInner),this.groupHeader=new o({$$datasource:e.groupHeaderData,type:"listgroupheader",isCanCollapse:t,root:this.config.rootConfig.groupHeader,style:this.config.rootConfig.groupHeaderStyle,$$pageview:this.pageview,groupValue:e.groupValue,$$parent:this}),this.display="block",this.groupValue=e.groupValue,this.$el.append(this.groupHeader.$el).append(i),this.rows=[]};e.extends(s,t),s.prototype.expand=function(){this.groupBodyInner.removeClass("displaynone")},s.prototype.collapse=function(){this.groupBodyInner.addClass("displaynone")},s.prototype.insertRow=function(e,t){this.show();var i=this.rows[t];i?(e.$el.insertBefore(i.$el),this.rows.splice(t,0,e)):(this.rows.push(e),this.groupBodyInner.append(e.$el))},s.prototype.append=function(e){this.show(),this.groupBodyInner.append(e)},s.prototype.show=function(){"block"!=this.display&&"none"==this.display&&(this.$el.removeClass("displaynone"),this.display="block")},s.prototype.remove=function(e){this.parent.groups[this.groupValue]&&delete this.parent.groups[this.groupValue],e&&this.$el.remove(),this.display="none",this.$el.addClass("displaynone")};var a=function(t){t.style||(t.style={}),t.style.flexDirection||t.style["flex-direction"]||(t.style.flexDirection="column"),this.config=t,this.initAjaxConfig(t.ajaxConfig),a.baseConstructor.call(this,t),this.groupKey=this.config.groupKey,this.isGroupList=null!=this.groupKey,this.groups={},this.autoLoadData=t.autoLoadData||!1,this.$el.addClass("displayflex yy-listview"),this.selectedMode=t.selectedMode,this.swipeOffsetX=e.getRealWidth(25),this.selectedRows=[],this.rows=[],this.canOpenOffsetRight=e.getRealWidth(70),this.splitStyle=t.splitStyle,this.showBlockClassNameDict={};var i=this.config.comKey+"_parsedata";this.pluginParseDataMethod=this.pageview.plugin[i];var o=this.config.comKey+"_beforeload";this.pluginBeforeLoadDataMethod=this.pageview.plugin[o];var s=this.config.comKey+"_afterload";this.pluginAfterLoadDataMethod=this.pageview.plugin[s],this.init()};return e.extends(a,t),a.prototype.setLeftOpen=function(){return"edit"===this.status?void this.setLeftClose():(this.status="edit",void this.$el.addClass(this.showBlockClassNameDict.left))},a.prototype.setLeftRightOpen=function(){return"edit"===this.status?void this.setLeftRightClose():(this.status="edit",void this.$el.addClass((this.showBlockClassNameDict.left||"")+" "+(this.showBlockClassNameDict.right||"")))},a.prototype.setLeftRightClose=function(){this.status="",this.$el.removeClass((this.showBlockClassNameDict.left||"")+" "+(this.showBlockClassNameDict.right||""))},a.prototype.setLeftClose=function(){this.status="",this.$el.removeClass(this.showBlockClassNameDict.left)},a.prototype.setRightOpen=function(){return"edit"===this.status?void this.setRightClose():(this.status="edit",void this.$el.addClass(this.showBlockClassNameDict.right))},a.prototype.setRightClose=function(){this.status="",this.$el.removeClass(this.showBlockClassNameDict.right)},a.prototype.initLeftRightBlock=function(){this.initBlock(this.config.leftBlock,"left"),this.initBlock(this.config.rightBlock,"right")},a.prototype.initBlock=function(t,i){if(t){t.key&&t.width||console.error("listview 的"+i+"Block配置需要包括key和widt属性");try{t.width=parseInt(t.width)}catch(e){}isNaN(t.width)&&console.error("listview 的"+i+"Block的widt属性必须为数值"),t.width=e.getRealWidth(t.width);var o=this.getUniqueKey()+i;this.$el.addClass(o),this.showBlockClassNameDict||(this.showBlockClassNameDict={}),this.showBlockClassNameDict[i]=o+"_show"+i,e.createStyleSheet(o,"."+t.key+" {transition:width .3s ease;-webkit-transition:width .3s ease;} ."+this.showBlockClassNameDict[i]+" ."+t.key+" {width:"+t.width+"px !important;}")}},a.prototype.init=function(){var e=this;this.config.nodata&&this.getComponentInstanceByComKey(this.config.nodata,null,null,function(t){e.$el.append(t.$el),e.components.length>0&&t.$el.addClass("displaynone"),e.noDataDom=t},function(){}),this.initEvent(),this.initLeftRightBlock(),this.autoLoadData&&window.setTimeout(function(){e.parent&&e.parent.setCanLoadMore&&e.parent.setPullLoadingState(),e.loadFirstPageData()},200)},a.prototype.getTargetRow=function(e){for(var t=e.target;"yy-listrow"!=t.className&&"yy-listview"!=t.className&&"BODY"!=t.tagName;)t=t.parentNode;var i=t.getAttribute("row-mark"),o=null;if(i)for(var s=0,a=this.rows.length;s<a;s++){var n=this.rows[s];if(n.rowMark===i){o=n;break}}return o},a.prototype.initEvent=function(){var t=this;this.curSwipRow=null;var i=e.getRealWidth(280);if(this.config.rowSwipeIcons){var o,s,a,n=!1;this.$el.bind("touchstart",function(s){if("edit"!==t.status){var r=s.touches[0];"1"!==s.target.getAttribute("data-swipeicon")?(t.curSwipRow&&t.curSwipRow.closeSwipe(),o=r.pageX,a=r.pageY,n=e.viewport.width-o<i,n&&(t.curSwipRow=t.getTargetRow(s),t.curSwipRow&&t.curSwipRow.initSwipeDom())):n=!1}}),this.$el.bind("touchmove",function(e){if("edit"!==t.status){if(!n||!t.curSwipRow||0==t.curSwipRow.SwipeIconsSumWidth)return void(n=!1);var i=e.touches[0],r=i.pageX;s=r-o;var l=Math.abs(s),c=a-i.pageY;return Math.abs(c)>30&&l>0?void(s=10):void(s<-10&&(l>10&&(e.preventDefault(),e.stopPropagation()),s=l>t.curSwipRow.SwipeIconsSumWidth+t.swipeOffsetX?0-t.curSwipRow.SwipeIconsSumWidth-t.swipeOffsetX:s,t.curSwipRow.swipeToLeft(s)))}}),this.$el.bind("touchend",function(){if("edit"!==t.status){if(!n||s>=0)return void(s=0);n=!1,Math.abs(s)>t.canOpenOffsetRight?t.curSwipRow&&t.curSwipRow.setSwipeOpenPos():0!=s&&t.curSwipRow&&t.curSwipRow.closeSwipe(),s=0}})}},a.prototype.getRowCount=function(){if(this.isGroupList){var e=0;return this.eachRow(function(t){e+=1}),e}return this.rows.length},a.prototype.eachRow=function(e){if(this.isGroupList)for(var t in this.groups)for(var i=this.groups[t],o=0,s=i.rows.length;o<s;o++)e(i.rows[o],o,i);else for(var o=0,s=this.rows.length;o<s;o++)e(this.rows[o],o)},a.prototype.empty=function(){if(this.isGroupList)for(var e in this.groups)this.groups[e].remove(!0),delete this.groups[e];else{for(var t=this.rows.length-1;t>=0;t--)this.rows[t].remove();this.rows=[]}},a.prototype.selectAll=function(){var e=this;"m"===this.config.selectedMode&&(this.selectedRows=[],this.eachRow(function(t){e.selectedRows.push(t),t.selected()}))},a.prototype.clearSelectAll=function(){"m"===this.config.selectedMode&&(this.selectedRows=[],this.eachRow(function(e){e.unSelected()}))},a.prototype.loadFirstPageData=function(){var e=this;e.parent.setInitLoadMessage&&e.parent.setInitLoadMessage(),this.pageNumKey||(this.pageNumKey=this.ajaxConfig.pageNumKey,this.pageNumKey||console.error("listview 配置没有设置页码字段属性pageNumKey")),this.ajaxConfig.data[this.pageNumKey]=1,this.loadData({success:function(t,i){e.rowMarkSeed=0,e.empty(),e.bindData(t,!0),t&&0!=t.length||e.showNodata(!0)},isAutoLoad:!1,isFirstLoad:!0})},a.prototype.loadNextPageData=function(){var e=this;this.pageNumKey||(this.pageNumKey=this.ajaxConfig.pageNumKey,this.pageNumKey||console.error("listview 配置没有设置页码字段属性pageNumKey"));var t=this.ajaxConfig.data[this.pageNumKey];t=!t||isNaN(t)?1:parseInt(t)+1,this.ajaxConfig.data[this.pageNumKey]=t,this.loadData({success:function(t){e.bindData(t)},isAutoLoad:!1,isFirstLoad:!1})},a.prototype.reload=function(){this.loadNextPageData(),this.parent.setCanLoadMore({isReload:!0})},a.prototype.showNodata=function(e){this.noDataDom&&(e?this.noDataDom.$el.removeClass("displaynone"):this.noDataDom.$el.addClass("displaynone"))},a.prototype.loadData=function(t){var i=this,o=t.isFirstLoad;if(this.pluginBeforeLoadDataMethod&&this.pluginBeforeLoadDataMethod.call(this.pageview.plugin,this,{ajaxConfig:this.ajaxConfig,isAutoLoad:t.isAutoLoad}),this.config.isStatic){var s=[];return i.pluginParseDataMethod&&(s=i.pluginParseDataMethod.call(i.pageview.plugin,i,{params:this.ajaxConfig,data:s,cancel:!1}),void 0===s&&console.error("程序错误："+i.config.comKey+"_parsedata 方法没有返回值或者返回值错误"),s===!1)?void i.setError(t):void t.success(s)}this.beforeAjaxConfig=e.copy(this.ajaxConfig);var a=this.ajaxConfig.data||{};e.ajax({type:this.ajaxConfig.type||"get",url:this.ajaxConfig.url,pageviewInstance:this.config.$$pageview,timeout:this.ajaxConfig.timeout||7e3,data:a,success:function(e){return i.showNodata(!1),i.pluginParseDataMethod&&(e=i.pluginParseDataMethod.call(i.pageview.plugin,i,{params:a,data:e,isFirstLoad:o}),void 0===e&&console.error("程序错误："+i.config.comKey+"_parsedata 方法没有返回值或者返回值错误"),e===!1)?void i.setError(t):(e instanceof Array||console.error(i.config.comKey+"返回的数据不是数组类型,或者在"+i.config.comKey+"_parsedata方法中进行预处理 "),t.success(e,o),void(i.pluginAfterLoadDataMethod&&i.pluginAfterLoadDataMethod.call(i.pageview.plugin,i,{params:a,data:e,isFirstLoad:t.isFirstLoad})))},error:function(e){i.setError(t),t.error&&t.error(e)}})},a.prototype.setError=function(e){var t=this;window.setTimeout(function(){e.isFirstLoad?t.parent.setLoadFirstError&&t.parent.setLoadFirstError():t.parent.setLoadMoreErrorState&&t.parent.setLoadMoreErrorState(),t.ajaxConfig=t.beforeAjaxConfig,t.pluginAfterLoadDataMethod&&t.pluginAfterLoadDataMethod.call(t.pageview.plugin,t,{isSuccess:!1})},100)},a.prototype.createFragmentByDataSource=function(e){for(var t=document.createDocumentFragment(),i=0,o=e.length;i<o;i++){var s=this.createRow(e[i]);this.rows.push(s),t.appendChild(s.$el[0])}return t},a.prototype.bindData=function(e,t){var i=this;if(this.isGroupList)return void this.bindGroupListData(e,t);var o=this.createFragmentByDataSource(e);window.setTimeout(function(){i.$el[0].appendChild(o),i.setLoadStateWhenBindDone(e,t)},16)},a.prototype.setLoadStateWhenBindDone=function(e,t){var i=this;e.length<i.ajaxConfig.pageSize?i.parent.setHasLoadDone&&i.parent.setHasLoadDone():i.parent.setCanLoadMore&&i.parent.setCanLoadMore(),t&&(i.parent.resetPullLoadState&&i.parent.resetPullLoadState(),e&&0!=e.length||i.parent.setInitLoadMessage&&i.parent.setInitLoadMessage())},a.prototype.bindGroupListData=function(e,t){for(var i=this,o={},a={},n=0,r=e.length;n<r;n++){var l=e[n],c=l[this.groupKey];c||(l[this.groupKey]="其他",c="其他"),o[c]||(o[c]=document.createDocumentFragment()),this.groups[c]||(this.groups[c]=new s({type:"listgroup",rootConfig:this.config,style:this.config.groupStyle,$$pageview:this.pageview,groupValue:c,groupHeaderData:l,$$parent:this}),a[c]=this.groups[c]);var d=this.createGroupListRow(l,this.groups[c]);o[c].appendChild(d.$el[0]),this.groups[c].rows.push(d)}window.setTimeout(function(){for(var s in o)i.groups[s].append(o[s]),a[s]&&i.$el.append(a[s].$el);i.setLoadStateWhenBindDone(e,t)},16)},a.prototype.createGroupListRow=function(e,t){var o=new i({type:"listrow",listview:this,root:this.config.root,style:this.config.rowStyle,$$pageview:this.pageview,$$datasource:e,$$parent:t});return o},a.prototype.setAjaxConfigParams=function(e){this.ajaxConfig||console.error("ListView未配置ajaxConfig属性"),this.ajaxConfig.data=this.ajaxConfig.data||{};for(var t in e)this.ajaxConfig.data[t]=e[t]},a.prototype.initAjaxConfig=function(e){return this.config.isStatic?void(this.ajaxConfig={}):(e||console.error("ListView未配置ajaxConfig属性"),e.pageSize||console.warn("ajaxConfig配置需要指定pageSize属性"),isNaN(e.pageSize)&&console.warn("ajaxConfig配置需要指定pageSize属性为number类型"),e.pageSize=parseInt(e.pageSize),void(this.ajaxConfig=e))},a.prototype.createRow=function(e){var t=new i({type:"listrow",listview:this,root:this.config.root,style:this.config.rowStyle,$$pageview:this.pageview,$$datasource:e,$$parent:this});return t},a.prototype.insertGroup=function(e,t){if(!this.isGroupList)return this;var i=e[this.groupKey],o=this.groups[i];if(o)return this;o=new s({type:"listgroup",rootConfig:this.config,style:this.config.groupStyle,$$pageview:this.pageview,groupValue:i,groupHeaderData:e,$$parent:this}),this.groups[i]=o;var a=this.getGroupByIndex(t);return a?o.$el.insertBefore(a.$el):this.$el.append(o.$el),this},a.prototype.getGroupByIndex=function(e){var t,i=this.$el.children(),o=i[e];if(o){var s=o.getAttribute("data-gval");console.log(o),t=this.groups[s]}return t},a.prototype.insertRow=function(e,t){if(this.isGroupList){var i=e[this.groupKey],o=this.groups[i];if(o){var s=this.createGroupListRow(e,o);o.insertRow(s,t)}}else{var s=this.rows[t],a=this.createRow(e);this.showNodata(!1),void 0!==t&&null!=t&&t>=0&&t<this.rows.length?this.rows.splice(t,0,a):this.rows.push(a),s?a.$el.insertBefore(s.$el):this.$el.append(a.$el)}},a.prototype.deleteRowByPrimaryKey=function(e){},a}),define("../../components/pageview",["utils","base"],function(e,t){function i(e){var t=this;if(this.refs={},this.componentsInitActions={},i.baseConstructor.call(this,e),e.root=e.root||[],this.params=e.$$params,this.showPageParams=e.showPageParams||{},this.prePageView=e.prePageView,this.pageManager=e.$$pageManager,this.config=e,this.innerPages={},this.innerPagesWrappers={},e.pluginClass)try{this.plugin=new e.pluginClass({pageview:this})}catch(e){console.log(e)}this.components={};var o=e.style;this.$el.addClass("yy-pageview displayflex"),this.showPageBackCover=$("<div class='yy-backcover displaynone'></div>"),this.innerWrapper=$("<div class='displayflex yy-page-inner'></div>"),this.$$childrenWrapper=this.innerWrapper,this.$el.append(this.innerWrapper).append(this.showPageBackCover),o&&this.innerWrapper.css(o),this.showPageBackCover.bind("click",function(){t.hideCurShowPage()}),this.initLayout()}var o={fromLeft1:{zIndex:5,left:"0",top:0,transform:"translate3d(-100%,0,0)","-webkit-transform":"translate3d(-100%,0,0)"},fromLeft2:{zIndex:20,left:"0",top:0,transform:"translate3d(-100%,0,0)","-webkit-transform":"translate3d(-100%,0,0)"},fromLeft3:{left:0,top:0,zIndex:5,transform:"translate3d(0,0,0)","-webkit-transform":"translate3d(0,0,0)"},fromRight1:{zIndex:5,right:"0",top:0,transform:"translate3d(100%,0,0)","-webkit-transform":"translate3d(100%,0,0)"},fromRight2:{zIndex:20,right:"0",top:0,transform:"translate3d(100%,0,0)","-webkit-transform":"translate3d(100%,0,0)"},fromRight3:{zIndex:5,right:0,top:0,transform:"translate3d(0,0,0)","-webkit-transform":"translate3d(0,0,0)"},opacity:{left:"0",top:0},fromBottom:{zIndex:20,left:"0",bottom:"0",transform:"translate3d(0,100%,0)","-webkit-transform":"translate3d(0,100%,0)"}},s={fromLeft1:"yy-init-left",fromLeft2:"yy-init-left",fromLeft3:"yy-init-left",fromRight1:"yy-init-right",fromRight2:"yy-init-right",fromRight3:"yy-init-right",opacity:"yy-init-left",fromBottom:"yy-init-bottom"};return e.extends(i,t),i.prototype.destory=function(){this.$el.remove()},i.prototype.ajax=function(t){t.pageviewInstance=this,e.ajax(t)},i.prototype.Enter=function(e,t){var i=this;if(this.$el[0].className=e,t){if(i.pageManager.getPageNameFromUrl()===i.config.pageKey){var o=i.plugin.onPageEnter;o&&o.call(i.plugin)}}else this.$el[0].addEventListener("webkitAnimationEnd",function(){if(i.pageManager.getPageNameFromUrl()===i.config.pageKey){var e=i.plugin.onPageEnter;e&&e.call(i.plugin)}})},i.prototype.bindShowPageEnterEvent=function(){var e=this;this.$el[0].parentNode.addEventListener("webkitTransitionEnd",function(){if(e.$$isshow){var t=e.plugin.onPageEnter;t&&t.call(e.plugin)}})},i.prototype.hideCurShowPage=function(){var t=this;if(this.pageManager.blur(),this.showpageInstance.showpageInstance)return this.showpageInstance.hideCurShowPage(),!0;if(this.showpage_wrapper){this.showpageInstance.$$isshow=!1;var i=this.showpageInstance.plugin.onPageClose;i&&i.call(this.showpageInstance.plugin);var a=this.showpage_wrapper.attr("data-mode");this.showPageBackCover.addClass("displaynone"),this.innerWrapper[0].className="displayflex yy-page-inner "+s[a]+"-im ",window.setTimeout(function(){t.innerWrapper.css(e.processTransitionTanformStyle("none","translate3d(0,0,0)"))},300),"fromLeft1"==a||"fromLeft2"==a?this.showpage_wrapper.css(e.processTransformStyle("translate3d(-100%,0,0)")):"fromRight1"==a||"fromRight2"==a?this.showpage_wrapper.css(e.processTransformStyle("translate3d(100%,0,0)")):this.showpage_wrapper.css(o[a])}var n=this.showpageInstance.plugin.onPageResume;return n&&n.call(this.plugin),this.showpage_wrapper=null,this.showpageInstance=null,!1},i.prototype.do=function(e,t){var i=this.refs[e];i?t(i):(this.config.components[e].ref||console.error("请务必在"+e+"控件上设置ref:true"),this.componentsInitActions[e]=t)},i.prototype.showLoadingProgressbar=function(){var e=this;this.loadingProgreessbar||(this.loadingProgreessbarWrapper=$("<div class='yy-loading-pbw displaynone'></div>"),this.loadingProgreessbar=$("<div class='yy-loading-pb'></div>"),this.loadingProgreessbarWrapper.append(this.loadingProgreessbar),this.loadingProgreessbarWrapper.appendTo(this.$el)),this.loadingProgreessbarWrapper.removeClass("displaynone"),window.setTimeout(function(){e.loadingProgreessbar.css({width:"90%"})},6)},i.prototype.hideLoadingProgressbar=function(){this.loadingProgreessbar&&(this.loadingProgreessbar.css({width:"0%"}),this.loadingProgreessbarWrapper.addClass("displaynone"))},i.prototype.close=function(){this.ownerPage&&this.ownerPage.hideCurShowPage()},i.prototype.showPage=function(t){if(t&&t.pageKey){this.pageManager.blur(),t.inRouter!==!1&&this.pageManager.regeistShowPageInRouter(this.config.pageKey);var i=this;this.showpage_wrapper=this.innerPagesWrappers[t.pageKey],this.showpageInstance=this.innerPages[t.pageKey],this.showLoadingProgressbar(),!this.showpage_wrapper||void 0!==t.nocache&&t.nocache?this.pageview.pageManager.getPageConfigByPageKey(t.pageKey,function(s){var a=t.params||{};s.showPageParams=a;var n=i.pageview.pageManager.createPageView(s);n.$el.addClass("yy-pageview-show"),n.ownerPage=i,i.hideLoadingProgressbar(),i.showpageInstance=n,i.innerPages[t.pageKey]=n,i.showpage_wrapper=$("<div class='yy-showpage'></div>");var r=s.showPageStyle||{width:"100%",height:"100%"};r&&(delete r.top,delete r.right,delete r.left,delete r.bottom);var l=t.mode||"fromLeft1";i.showpage_wrapper.attr("data-mode",l);var c=r.width||"100%",d=r.height||"100%";r=r||{};var h=o[l]||o.fromLeft1;h=e.clone(h),i.showpage_wrapper.attr("data-width",c),i.showpage_wrapper.attr("data-height",d),i.showpage_wrapper.css(e.simpleExtendObj(r,h)),i.innerPagesWrappers[t.pageKey]=i.showpage_wrapper,i.showpage_wrapper.append(n.$el),i.$el.append(i.showpage_wrapper),n.bindShowPageEnterEvent(),i._showpageAnimate(t,i.showpage_wrapper,n)},function(){}):(this.hideLoadingProgressbar(),this._showpageAnimate(t,this.showpage_wrapper,this.showpageInstance))}},i.prototype.goBack=function(){this.pageManager.goBack()},i.prototype.go=function(e,t){t=t||{};var i=this.pageManager.appConfig.beforeGo;i&&i({params:t,pageviewInstance:this}),this.pageManager.go(e,t)},i.prototype._showpageAnimate=function(t,i,o){var a=this,n=12;o.$$isshow=!0;var r=i.attr("data-width"),l=i.attr("data-mode");if(this.innerWrapper[0].className="displayflex yy-page-inner "+s[l],"fromLeft1"!=l&&"fromLeft2"!=l||(this.showPageBackCover.removeClass("displaynone").css({left:r}),window.setTimeout(function(){if("fromLeft1"==l){var t=e.processTransitionTanformStyle("transform .3s cubic-bezier(.05, .69, .14, 1)","translate3d("+r+",0,0)");t["box-shadow"]="0px 0px 13px 1px #929292",a.innerWrapper.css(t)}i.css(e.processTransitionTanformStyle("transform .3s cubic-bezier(.05, .69, .14, 1)","translate3d(0,0,0)"))},n)),"fromLeft3"==l){this.showPageBackCover.removeClass("displaynone").css({left:r});var c=e.processTransitionTanformStyle("transform .3s cubic-bezier(.05, .69, .14, 1)","translate3d("+r+",0,0)");c["box-shadow"]="0px 0px 13px 1px #929292",window.setTimeout(function(){a.innerWrapper.css(c)},n)}if("fromRight1"!=l&&"fromRight2"!=l||(this.showPageBackCover.removeClass("displaynone").css({right:r}),window.setTimeout(function(){var t=e.processTransitionTanformStyle("transform .3s cubic-bezier(.05, .69, .14, 1)","translate3d(-"+r+",0,0)");t["box-shadow"]="0px 0px 13px 1px #929292","fromRight1"==l&&a.innerWrapper.css(t),i.css(e.processTransitionTanformStyle("transform .3s cubic-bezier(.05, .69, .14, 1)","translate3d(0,0,0)"))},n)),"fromRight3"==l){this.showPageBackCover.removeClass("displaynone").css({right:r});var c=e.processTransitionTanformStyle("transform .3s cubic-bezier(.05, .69, .14, 1)","translate3d(-"+r+",0,0)");c["box-shadow"]="0px 0px 13px 1px #929292",window.setTimeout(function(){a.innerWrapper.css(c)},n)}if("fromBottom"==l){i.attr("data-height");this.showPageBackCover.removeClass("displaynone").css({left:"0",top:"0"}),window.setTimeout(function(){i.css(e.processTransitionTanformStyle("transform .2s cubic-bezier(.05, .69, .14, 1)","translate3d(0,0,0)"))},n)}},i}),define("../../components/poplayer",["utils","base"],function(e,t){var i=function(e){var t=this;i.baseConstructor.call(this,e),this.mode=e.mode||"bottom";var o="displayflex yy-poplayer yy-poplayer-"+this.mode;this.showClassName="yy-poplayer-"+this.mode+"-show",this.hideClassName="yy-poplayer-"+this.mode+"-hide",this.bkCover=$("<div class='yy-poplayer-bk displaynone'></div>"),e.bkCoverStyle&&this.bkCover.css(e.bkCoverStyle),this.bkCover.appendTo(this.pageview.$$childrenWrapper),this.bkCover.bind("click",function(){t.hide()}),this.$el.addClass(o),this.initLayout(this.datasource)};return e.extends(i,t),i.prototype.show=function(){this.bkCover.removeClass("displaynone"),this.$el.removeClass(this.hideClassName).addClass(this.showClassName)},i.prototype.hide=function(){this.bkCover.addClass("displaynone"),this.$el.removeClass(this.showClassName).addClass(this.hideClassName)},i}),define("../../components/popover",["utils","base"],function(e,t){var i=function(t){var o=this;t.noNeedSetStyle=!0,t.style=t.style||{},t.arrowStyle=t.arrowStyle||{},t.arrowStyle=t.arrowStyle||"16px",t.arrowStyle.backgroundColor=t.arrowStyle.backgroundColor||"rgba(0,0,0,.9)",t.arrowStyle.height=t.arrowStyle.height||"14px",t.arrowStyle.width=t.arrowStyle.height,t.style.width||(t.style.width="120px"),t.style.height||(t.style.height="200px"),i.baseConstructor.call(this,t),this.width_int=parseInt(this.config.style.width),this.height_int=parseInt(this.config.style.height),this.$el.addClass("yy-popover"),t.arrowStyle.transform="rotate(45deg)",t.arrowStyle["-webkit-transform"]="rotate(45deg)",this.animateAction="0",t.animate&&(this.animateAction=t.animate.mode),this.offset=t.offset||{x:0,y:0};var s=this.offset.x||0,a=this.offset.y||0;this.offset.x=parseInt(s),this.offset.y=parseInt(a),this.arrow_width_int=parseInt(t.arrowStyle.width),this.arrow=$("<div class='yy-pop-arrow'></div>"),this.bkCover=$("<div class='yy-pop-bk displaynone'></div>"),e.css(this.arrow,t.arrowStyle),this.contentWrapper=$("<div class='displayflex yy-pop-content'></div>"),this.$$childrenWrapper=this.contentWrapper,e.css(this.contentWrapper,this.config.style),this.$el.append(this.arrow).append(this.contentWrapper),t.bkCoverStyle&&e.css(this.bkCover,t.bkCoverStyle),this.bkCover.appendTo(this.pageview.$$childrenWrapper),this.bkCover.bind("click",function(){o.hide()}),this.initLayout(t.$$datasource)};return e.extends(i,t),i.prototype.hide=function(){var e=this;"0"!=this.animateAction&&"1"!=this.animateAction?(this.$el.css({opacity:0}),window.setTimeout(function(){e.$el.css({display:"none"})},300)):this.$el.css(this.hidePos),e.bkCover.addClass("displaynone")},i.prototype.show=function(t,i){i=i||{};var o=this,s=i.direction;if(t){var a=t.getClientRect();s||(a.top>this.height_int+this.arrow_width_int?s="top":e.viewport.height-a.bottom>this.height_int+this.arrow_width_int&&(s="bottom"));var n={display:"block",transition:"transform .3s ease"};if(this.hidePos={},"top"==s){var r=a.top-this.height_int-this.arrow_width_int;n.top=r+"px","0"==this.animateAction?this.hidePos.display="none":"1"==this.animateAction?(this.hidePos.transform="translate3d(0,"+(e.viewport.height-r)+"px,0)",n.transform="translate3d(0,"+(e.viewport.height-r)+"px,0)"):(n.transition="opacity .3s ease",this.hidePos.display="none",n.opacity="0",n.transform="translate3d(0,0,0)")}else if("bottom"==s){var r=a.bottom+this.arrow_width_int/2;n.top=r+"px","0"==this.animateAction?this.hidePos.display="none":"1"==this.animateAction?(this.hidePos.transform="translate3d(0,"+(0-this.height_int-r-10)+"px,0)",n.transform="translate3d(0,"+(0-this.height_int-r-10)+"px,0)"):(n.transition="opacity .3s ease",this.hidePos.display="none",n.opacity="0",n.transform="translate3d(0,0,0)")}n.left=a.left+a.width/2-this.width_int/2+this.offset.x;var l=n.left+this.width_int-e.viewport.width;l>0&&(n.left=n.left-l-6),n.left<0&&(n.left=6);var c={left:a.left+a.width/2-this.arrow_width_int/2-n.left+"px"};"bottom"==s?(c["border-top-left-radius"]="4px",c.top="-"+this.arrow_width_int/2+"px"):(c["border-bottom-right-radius"]="4px",c.bottom="-"+this.arrow_width_int/2+"px"),e.css(this.arrow,c),e.css(this.$el,n),this.bkCover.removeClass("displaynone"),"0"==this.animateAction?o.$el.css({display:"block"}):"1"==this.animateAction?window.setTimeout(function(){o.$el.css({transform:"translate3d(0,0,0)"})},0):window.setTimeout(function(){o.$el.css({opacity:"1"})},0)}},i}),define("../../components/radiobox",["utils","base"],function(e,t){var i=e.getRealWidth(22),o=e.getRealWidth(14),s={width:i,height:i,border:"1px solid rgb(229, 229, 229)",backgroundColor:"#fff",fontSize:o},a={width:i,height:i,color:"#fff",border:"1px solid rgb(144, 151, 255)",backgroundColor:"rgb(144, 151, 255)",fontSize:o},n=function(t){var i=this;t.style=t.style||{},this.uss=e.simpleExtendObj(e.clone(s),t.radioStyle),this.uss=e.simpleExtendObj(this.uss,t.unSelectedRadioStyle||{}),this.ss=e.simpleExtendObj(e.clone(a),t.radioStyle||{}),this.ss=e.simpleExtendObj(this.ss,t.selectedRadioStyle||{}),this.selectedBackgroundColor=this.ss.backgroundColor||"#0093ff",n.baseConstructor.call(this,t),this.value=!!this.config.value,this.$el.addClass("yy-icommon"),this.$el.addClass("yy-radio-warpper displayflex yy-fd-row yy-jc-center yy-ai-center"),this.radioDom=$("<div class='yy-radio'></div>"),this.textDom=$("<div class='yy-radio-text'>"+(this.config.text||"")+"</div>"),this.config.textStyle&&e.css(this.textDom,this.config.textStyle),this.$el.append(this.radioDom).append(this.textDom),this.setValue(this.value),this.$el.bind("click",function(){i.change()});var o=this.config.comKey+"_change";this.changeMethod=this.pageview.plugin[o]};return e.extends(n,t),n.prototype.change=function(){this.changeMethod&&this.changeMethod.call(this.pageview.plugin,this,{value:!this.value})},n.prototype.selected=function(t){t&&this.config.disableParentSelect||(this.value=!0,e.css(this.radioDom,this.ss),this.$el.addClass("yy-radio-selected"))},n.prototype.unSelected=function(t){t&&this.config.disableParentSelect||(this.value=!1,e.css(this.radioDom,this.uss),this.$el.removeClass("yy-radio-selected"))},n.prototype.setValue=function(t){this.value=t,t?(this.$el.addClass("yy-radio-selected"),e.css(this.radioDom,this.ss)):(this.$el.removeClass("yy-radio-selected"),e.css(this.radioDom,this.uss))},n}),define("../../components/radiolist",["utils","base"],function(e,t){var i=function(t){this.itemData=t.itemData,this.parent=t.parent;this.key=this.itemData[this.parent.primaryKey],this.$el=$("<div data-key='"+this.key+"' class='yy-radiolist-item yy-icommon' style='height:"+t.parent.itemHeight+"px;line-height:"+t.parent.itemHeight+"px;font-size:"+e.fontSize13()+"px'>"+(t.itemData[t.parent.labelKey]||"")+"</div>")};i.prototype={selected:function(){this.$el.addClass("yy-radiolist-item-selected")},unSelected:function(){this.$el.removeClass("yy-radiolist-item-selected")}};var o=function(t){var i=this;o.baseConstructor.call(this,t);var s=e.getRealHeight("22");this.itemHeight=e.getRealHeight("40"),this.$el.addClass("yy-checklist"),this.items=[],this.primaryKey=this.config.primaryKey,this.primaryKey||console.error(this.config.comKey+"控件没有指定primaryKey数据的主键"),this.loadWrapper=$("<div class='yy-cs-loading-wrapper displayflex jc-center ai-center'><div class='preloader'></div></div>"),this.backCoverLayer=$("<div class='yy-cl-coverlayer displaynone'></div>");var a=$("<div style='height:"+s+"px;font-size:"+e.fontSize12()+"px;line-height:"+s+"px' class='yy-rl-title-wrapper'>"+(t.title||"请选择")+"</div>");this.listWrapper=$("<div style='max-height:"+6.7*this.itemHeight+"px;' class='yy-cl-list-wrapper'></div>"),this.listWrapper.append(this.loadWrapper),this.pageview.innerWrapper.append(this.backCoverLayer),this.$el.append(a).append(this.listWrapper),this.labelKey=this.config.labelKey||"text",this.backCoverLayer.bind("click",function(){i.hide()}),this.listWrapper.bind("click",function(e){i.itemClick(e)});var n=this.config.comKey+"_selected";this.selectedMethod=this.pageview.plugin[n]};return e.extends(o,t),o.prototype._getPrimaryValue=function(e){var t="";if("string"==typeof this.primaryKey)t=e[this.primaryKey];else if(this.primaryKey instanceof Array){for(var i=[],o=0,s=this.primaryKey.length;o<s;o++)i.push(e[this.primaryKey[o]]);t=i.join("_")}else console.error("radiolist控件primaryKey属性 错误的数据类型");return t},o.prototype.itemClick=function(e){var t=e.target.getAttribute("data-key");if(t){for(var i=null,o=0,s=this.items.length;o<s;o++)if(t==this.items[o].key){i=this.items[o];break}i&&(this.selectedValue=[i.itemData],this.setItemSelected(this.selectedValue),this.hide(),this.selectedMethod&&this.selectedMethod.call(this.pageview.plugin,this,{selectedValue:this.selectedValue}))}},o.prototype.show=function(){this.$el.addClass("yy-checklist-show"),this.backCoverLayer.removeClass("displaynone"),this.init()},o.prototype.setItemSelected=function(e){this.selectedValue=[];for(var t=0,i=this.items.length;t<i;t++){var o=this.items[t];o.unSelected()}for(var s=0;s<1;s++)for(var a=this._getPrimaryValue(e[s]),t=0,i=this.items.length;t<i;t++){var o=this.items[t];o.key==a&&(o.selected(),this.selectedValue.push(o.itemData))}},o.prototype.setSelectedValue=function(e){e instanceof Array||console.error("radiolist setSelectedValue方法必须是数组"),this.items?this.setItemSelected(e):this._midSelectedValue=e},o.prototype.createItems=function(e){this.dataSource=e,this.items=[],this.listWrapper.empty();for(var t=this.dataSource.length,o=0,s=t;o<s;o++){var a=this.dataSource[o],n=new i({itemData:a,parent:this});this.listWrapper.append(n.$el),this.items.push(n),t>1&&o!=t-1&&this.listWrapper.append("<div class='yy-checklist-line'></div>")}this._midSelectedValue&&(this.setItemSelected(this._midSelectedValue),this._midSelectedValue=null);
},o.prototype.init=function(){var e=this;this.dataSource||(e.loadWrapper.removeClass("displaynone"),e.loadErrorWrapper&&e.loadErrorWrapper.addClass("displaynone"),this.loadData(function(t){e.loadWrapper.addClass("displaynone"),e.loadErrorWrapper&&e.loadErrorWrapper.addClass("displaynone"),e.createItems(t)},function(){e.loadErrorWrapper||e.initLoadErrorDom(),e.loadErrorWrapper.removeClass("displaynone"),e.loadWrapper.addClass("displaynone")}))},o.prototype.loadData=function(e,t){if(this.dataSource)return void e(this.dataSource);var i=this.config.comKey+"_loaddata",o=this.pageview.plugin[i];o&&o.call(this.pageview.plugin,this,{success:e,error:t})},o.prototype.initLoadErrorDom=function(){var t=this,i=e.getRealWidth(11),o=e.getRealWidth(20);this.loadErrorWrapper=$("<div style='height:100px' class='yy-loadmore-wrapper displayflex jc-center ai-center flex-h'></div>");var s=$("<i style='font-size:"+o+"px' class='yy-icommon yy-loadmore-erroricon'></i>"),a=$("<span style='font-size:"+i+"px' class='yy-pull-meslabel'>网络异常,点击</span>"),n=$("<span style='font-size:"+i+"px' class='yy-loadmore-reload-babel'>重新加载</span>");n.bind("click",function(){t.init()}),this.loadErrorWrapper.append(s).append(a).append(n),this.listWrapper.append(this.loadErrorWrapper)},o.prototype.hide=function(){this.$el.removeClass("yy-checklist-show"),this.backCoverLayer.addClass("displaynone")},o}),define("../../components/repeat",["utils","base"],function(e,t){var i=function(e){var t=this;this.datasource=e.$$datasource,this.parent=e.$$parent,e.style&&(e.style.flexDirection||e.style["flex-direction"]||(e.style.flexDirection="column",e.style.webkitFlexDirection="column")),this.parent.useFloatToWrap&&(e.style.float="left",e.style.display="inline-block"),i.baseConstructor.call(this,e),this.parent.rowMarkSeed||(this.parent.rowMarkSeed=0),this.parent.rowMarkSeed+=1,this.itemMark="item"+this.parent.rowMarkSeed,this.$el.attr("data-role","repeatitem"),this.$el.attr("item-mark",this.itemMark);var o=this.parent.useFloatToWrap?"yy-repeatitem":"displayflex yy-repeatitem";this.$el.addClass(o),this.$el.bind("click",function(){"edit"!==t.parent.status&&t.parent._itemClick(t)}),this.initLayout(e.$$datasource,null,this)};e.extends(i,t),i.prototype.select=function(){if("m"===this.parent.selectedMode){var e=this.parent.selectedItems.indexOf(this);e>=0?(this.parent.selectedItems.splice(e,1),this.unSelected()):(this.parent.selectedItems.push(this),this.selected())}else{var t=this.parent.selectedItems[0];t&&t.unSelected(),this.parent.selectedItems[0]=this,this.selected()}},i.prototype.showPlaceHolder=function(){this.placeHolder||(this.placeHolder=$("<div class='yy-repeat-placeholder displaynone'></div>"),this.$el.append(this.placeHolder)),this.placeHolder.removeClass("displaynone")},i.prototype.moveTo=function(e){if(null!==e&&void 0!==e){var t=this.parent.components.indexOf(this);if(t!=e){var i=this.parent.components[e];if(i){this.$el.insertBefore(i.$el),this.parent.components.splice(t,1),this.parent.datasource.splice(t,1);var o=e;t<e&&(o-=1),this.parent.components.splice(o,0,this),this.parent.datasource.splice(o,0,this.datasource)}else this.parent.components.splice(t,1),this.parent.datasource.splice(t,1),this.parent.components.push(this),this.parent.datasource.push(this.datasource),this.parent.subComponent?this.$el.insertBefore(this.parent.subComponent.$el):this.$el.append(item_instance.$el)}}},i.prototype.hidePlaceHolder=function(){this.placeHolder.addClass("displaynone")},i.prototype.remove=function(e){var t=this,i=this.parent.datasource.indexOf(this.datasource),o=this.parent.components.indexOf(this);i>=0&&this.parent.datasource.splice(i,1),o>=0&&this.parent.components.splice(o,1),this.splitLine&&this.splitLine.remove(),e?(this.$el.css({height:this.$el.height()+1+"px"}),window.setTimeout(function(){t.$el.css({transition:"height .12s linear","-webkit-transition":"height .12s linear",height:"0px"})},40),window.setTimeout(function(){t.$el.remove()},345)):t.$el.remove()},i.prototype.rebind=function(e){this.$el.empty(),this.datasource=e,this.initLayout(e,null,this)};var o=function(t){var i=t.style||{};this.useFloatToWrap=!e.isSupportFlexWrap()&&("wrap"==i.flexWrap||"wrap"==i["flex-wrap"]),this.selectedItems=[],this.splitStyle=t.splitStyle,t.subComponent&&(t.$$pageview.config.components[t.subComponent].ref=!0),o.baseConstructor.call(this,t),this.datasource=[];var s=this.useFloatToWrap?"yy-repeat ":"displayflex yy-repeat ";this.$el.addClass(s),this.selectedMode=t.selectedMode,this.subComponent=null,this.init(),this.hasAttachSortEvent=!1};return e.extends(o,t),o.prototype.setLeftOpen=function(){return"edit"===this.status?(this.setLeftClose(),void this.showOrHideSubComponent(!0)):(this.status="edit",this.showOrHideSubComponent(!1),void this.$el.addClass(this.showBlockClassNameDict.left))},o.prototype.eachItem=function(e){for(var t=0,i=this.components.length;t<i;t++){var o=e(this.components[t],t);if(o===!1)break}},o.prototype.clearSelectAll=function(){this.selectedRows=[],this.eachItem(function(e){e.unSelected()})},o.prototype.setLeftRightOpen=function(){return"edit"===this.status?(this.setLeftRightClose(),void this.showOrHideSubComponent(!0)):(this.status="edit",this.showOrHideSubComponent(!1),void this.$el.addClass((this.showBlockClassNameDict.left||"")+" "+(this.showBlockClassNameDict.right||"")))},o.prototype.setLeftRightClose=function(){this.status="",this.$el.removeClass((this.showBlockClassNameDict.left||"")+" "+(this.showBlockClassNameDict.right||""))},o.prototype.setLeftClose=function(){this.status="",this.$el.removeClass(this.showBlockClassNameDict.left)},o.prototype.setRightOpen=function(){return"edit"===this.status?(this.setRightClose(),void this.showOrHideSubComponent(!0)):(this.status="edit",this.showOrHideSubComponent(!1),void this.$el.addClass(this.showBlockClassNameDict.right))},o.prototype.setRightClose=function(){this.status="",this.$el.removeClass(this.showBlockClassNameDict.right)},o.prototype.initLeftRightBlock=function(){this.initBlock(this.config.leftBlock,"left"),this.initBlock(this.config.rightBlock,"right")},o.prototype.initBlock=function(t,i){if(t){t.key&&t.width||console.error("listview 的"+i+"Block配置需要包括key和widt属性");try{t.width=parseInt(t.width)}catch(e){}isNaN(t.width)&&console.error("listview 的"+i+"Block的widt属性必须为数值"),t.width=e.getRealWidth(t.width);var o=this.getUniqueKey()+i;this.$el.addClass(o),this.showBlockClassNameDict||(this.showBlockClassNameDict={}),this.showBlockClassNameDict[i]=o+"_show"+i,e.createStyleSheet(o,"."+t.key+" {transition:width .3s ease;-webkit-transition:width .3s ease;} ."+this.showBlockClassNameDict[i]+" ."+t.key+" {width:"+t.width+"px !important;}")}},o.prototype.init=function(){for(var e=this,t=this.config.items||[],i=0,o=t.length;i<o;i++)this.addItem(t[i]);this.config.subComponent&&this.getComponentInstanceByComKey(this.config.subComponent,this.datasource,null,function(t){e.$el.append(t.$el),e.subComponent=t},function(){}),this.config.nodata&&this.getComponentInstanceByComKey(this.config.nodata,null,null,function(t){e.$el.append(t.$el),e.components.length>0&&t.$el.addClass("displaynone"),e.noDataDom=t},function(){}),this.initLeftRightBlock()},o.prototype.showOrHideSubComponent=function(e){this.config.subComponent&&this.pageview.do(this.config.subComponent,function(t){e?t.$el.removeClass("displaynone"):t.$el.addClass("displaynone")})},o.prototype.empty=function(){for(var e=this.components.length-1;e>=0;e--)this.components[e].remove();this.datasource=[],this.components=[]},o.prototype.bindData=function(e){if(this.empty(),e&&e instanceof Array&&e.length>0){this.noDataDom?(this.noDataDom.$el.addClass("displaynone"),this.showOrHideSubComponent(!0)):this.showOrHideSubComponent(!0);for(var t=0,i=e.length;t<i;t++)this.addItem(e[t])}else this.noDataDom&&this.noDataDom.$el.removeClass("displaynone"),this.config.subComponentAlwaysShow?this.showOrHideSubComponent(!0):this.showOrHideSubComponent(!1)},o.prototype.getItem=function(e){for(var t=0,i=this.components.length;t<i;t++){var o=this.components[t];if(e(o))return o}return null},o.prototype.insertItem=function(e,t){this.noDataDom&&this.noDataDom.$el.addClass("displaynone"),this.addItem(e,t)},o.prototype.getTargetItem=function(e,t){var i=e.target,o=this.config.sortHandle,s=!1,a=i.getAttribute("item-mark");for(o&&(i.getAttribute("data-comname")!=o?a=null:s=!0);!a&&"BODY"!==i.tagName.toUpperCase();)if(i=i.parentNode,o&&i.getAttribute("data-comname")==o&&(s=!0),a=i.getAttribute("item-mark")){o&&(s||(a=null));break}var n=null;if(a)for(var r=0,l=this.components.length;r<l;r++){var c=this.components[r];if(c.itemMark===a){n=c;break}}return n},o.prototype.startSort=function(){var e,t,i=this,o=this.parent;if(this.pageview.plugin){var s=this.config.comKey+"_sortend";t=this.pageview.plugin[s]}this.isInSort=!0;var a,n,r,l,c,d=null;this.hasAttachSortEvent||(this.hasAttachSortEvent=!0,this.$el.bind("touchstart",function(t){if(e=i.getTargetItem(t,!0),i.repeatOffsetY=i.$el.offset().top,r=0,l=0,e&&i.isInSort){d=e.$el.position();var s=t.touches[0];a=s.pageX,n=s.pageY,c=e.$el.clone(),o&&(scrollTop=o.$el[0].scrollTop),c.css({position:"absolute",zIndex:50,left:d.left+"px",top:d.top+"px"}),e.showPlaceHolder(),i.$el.append(c)}}),this.$el.bind("touchmove",function(t){if(e&&i.isInSort){var s=t.touches[0];t.preventDefault(),t.stopPropagation();var h=s.pageX,p=s.pageY;r=h-a,l=p-n;var u=0;if(o&&(u=o.$el[0].scrollTop),Math.abs(parseInt(p))%3==1){var f=i.getItemIndexByPosY(p+u-(u+i.repeatOffsetY));e.moveTo(f)}c.css({position:"absolute",zIndex:50,top:l+d.top+"px"})}}),this.$el.bind("touchend",function(o){e&&i.isInSort&&(t&&t.call(i.pageview.plugin,this,{}),e.hidePlaceHolder(),c.remove(),c=null)}))},o.prototype.endSort=function(){this.isInSort=!1},o.prototype.getItemIndexByPosY=function(e){for(var t,i=0,o=this.components.length,s=0,a=o;s<a;s++){var n=this.components[s],r=n.$el.height();if(e>i&&e<i+r/2){t=s;break}if(e>=i+r/2&&e<i+r){t=s+1;break}i+=r}return t},o.prototype.addItem=function(t,o){var s=!1;void 0===o||null===o||o<0||o>=this.datasource.length?this.datasource.push(t):(this.datasource.splice(o,0,t),s=!0);var a,n=new i({type:"repeatitem",root:this.config.root,style:this.config.itemStyle,$$pageview:this.pageview,$$datasource:t,$$parent:this,selectedClassName:this.config.itemSelectedClassName});if(this.splitStyle&&this.components.length>0&&(a=$("<div></div>"),n.splitLine=a,e.css(a,this.splitStyle)),s?this.components.splice(o,0,n):this.components.push(n),s){var r=this.components[o+1];0!==o&&a&&a.insertBefore(r.$el),n.$el.insertBefore(r.$el),0===o&&a&&a.insertBefore(r.$el)}else this.subComponent?(a&&a.insertBefore(this.subComponent.$el),n.$el.insertBefore(this.subComponent.$el)):(a&&this.$el.append(a),this.$el.append(n.$el))},o.prototype._itemClick=function(e){var t=this.config.comKey+"_itemclick";if(this.pageview.plugin){var i=this.pageview.plugin[t];if(e.disabled)return;i&&i.call(this.pageview.plugin,e,{index:e.$el.index()})}this.config.$$itemClick&&this.config.$$itemClick(e)},o}),define("../../components/searchview",["utils","base"],function(e,t){var i=function(t){var o=this;i.baseConstructor.call(this,t);var s="displayflex yy-seachview yy-fd-column";this.$el.addClass(s),this.cancelBtnWidth=e.getRealWidth(60),this.inputWidth=e.getRealWidth(355);var a=e.getRealHeight(30),n=e.getRealHeight(10),r=e.getRealWidth(30);this.inputFocusWidth=this.inputWidth-this.cancelBtnWidth+n,this.searchBarClassName="yy-sv-bar yy-fd-row displayflex yy-ai-center",this.searchBar=$("<div class='"+this.searchBarClassName+" yy-sv-defalut'></div>"),this.config.searchBarStyle&&(this.config.searchBarStyle.paddingLeft||(this.config.searchBarStyle.paddingLeft=e.getRealWidth(10)),this.config.searchBarStyle.paddingRight||(this.config.searchBarStyle.paddingRight=e.getRealWidth(10)),e.css(this.searchBar,this.config.searchBarStyle)),this.form=$("<form class='yy-sv-form' style='height:"+a+"px;width:"+this.inputWidth+"px'></form>");var l=$("<div class='yy-sv-input-div' style=''></div>");this.clearBtn=$("<div class='yy-sv-clear yy-icommon displaynone' style='height:"+a+"px;width:"+a+"px'></div>");var c=this.config.placeholder||"搜索";this.input=$("<input style='font-size:"+e.fontSize(14)+"px;padding-left:"+r+"px' placeholder='"+c+"' type='search'/>"),this.input.bind("focus",function(){o._focus()}),this.input.bind("input",function(){o.inputChange()}),this.clearBtn.bind("click",function(){o.input.val(""),o.input.focus(),o.inputChange()}),l.append(this.clearBtn).append(this.input),this.form.append(l),this.form.bind("submit",function(e){return e.preventDefault(),!1});var d=$("<div style='width:"+this.cancelBtnWidth+"px;height:"+a+"px;font-size:"+e.fontSize(16)+"px' class='yy-sv-cancel displayflex yy-jc-center yy-ai-center'>取消</div>");d.bind("click",function(){o._cancelSearch()}),this.body=$("<div class='yy-flex-1 yy-sv-body'></div>"),this.config.bodyStyle&&e.css(this.body,this.config.bodyStyle);var h=this.config.comKey+"_change";this.changePluginMethod=this.pageview.plugin[h],this._init(),this.time=this.config.time,!this.time||isNaN(this.time)?this.time=1e3:this.time=parseInt(this.time),this.input.bind("keydown",function(e){13===e.keyCode&&o.input.blur()}),this.searchBar.append(this.form).append(d),this.$el.append(this.searchBar).append(this.body)};return e.extends(i,t),i.prototype.inputChange=function(e){var t=this,i=this.input.val();return""==i?this.clearBtn.addClass("displaynone"):this.clearBtn.removeClass("displaynone"),0==this.time?void(t.changePluginMethod&&t.changePluginMethod.call(t.pageview.plugin,t.input,{searchview:t,value:i})):(this.timeid&&window.clearTimeout(this.timeid),void(e?t.changePluginMethod&&t.changePluginMethod.call(t.pageview.plugin,t.input,{searchview:t,value:i}):this.timeid=window.setTimeout(function(){t.changePluginMethod&&t.changePluginMethod.call(t.pageview.plugin,t.input,{searchview:t,value:i})},this.time)))},i.prototype._cancelSearch=function(){this.form.css({width:this.inputWidth+"px"}),this.clearBtn.addClass("displaynone"),this.searchBar[0].className=this.searchBarClassName+" yy-sv-defalut",this.defaultComyWrapper&&(this.defaultComyWrapper.removeClass("displaynone"),this.resultComWrapper&&this.resultComWrapper.addClass("displaynone"))},i.prototype.search=function(e,t){this._focus(),this.input.val(e),this.inputChange(t)},i.prototype.value=function(){return $.trim(this.input.val())},i.prototype.blur=function(e){this.input.blur()},i.prototype.focus=function(e){this.input.focus()},i.prototype._focus=function(){this.form.css({width:this.inputFocusWidth+"px"}),this.input.val().length>0&&this.clearBtn.removeClass("displaynone"),this.searchBar[0].className=this.searchBarClassName+" yy-sv-active",this.resultComWrapper&&(this.resultComWrapper.removeClass("displaynone"),this.defaultComyWrapper&&this.defaultComyWrapper.addClass("displaynone"))},i.prototype._init=function(){var e=this,t=this.config.defaultComponent;t&&(this.defaultComyWrapper=$("<div class='yy-sv-body-wrapper displayflex yy-fd-column'></div>"),this.body.append(this.defaultComyWrapper),this.getComponentInstanceByComKey(t,null,null,function(t){e.defaultComyWrapper.append(t.$el)},function(){}));var i=this.config.resultComponent;i&&(this.resultComWrapper=$("<div class='yy-sv-body-wrapper displayflex yy-fd-column displaynone'></div>"),this.body.append(this.resultComWrapper),this.getComponentInstanceByComKey(i,null,null,function(t){e.resultComWrapper.append(t.$el)},function(){}))},i}),define("../../components/segment_android",["utils","base"],function(e,t){var i=function(e){var t=this;this.index=e.index,e.style=e.style||{},e.style.flexDirection||e.style["flex-direction"]||(e.style.flexDirection="column",e.style.webkitFlexDirection="column"),e.style.alignItems||e.style["align-items"]||(e.style.alignItems="center",e.style.webkitAlignItems="center"),e.style.justifyContent||e.style["justify-content"]||(e.style.justifyContent="center",e.style.webkitJustifyContent="center"),e.style.width||(e.style.flex=1,e.style.webkitFlex=1),e.style.height=e.style.height||"25px",i.baseConstructor.call(this,e),this.$el.addClass("displayflex yy-segmentitem-android"),this.$el.bind("click",function(){t.disabled||t.parent._itemClick(t)}),this.initLayout(e.$$datasource)};e.extends(i,t),i.prototype.render=function(){};var o=function(e){e.itemStyle=e.itemStyle||{},e.style=e.style||{},e.style.width=e.style.width||"100%";var t=e.itemStyle.height||e.style.height||"25px";e.itemStyle.height=t,delete e.style.height,o.baseConstructor.call(this,e),this.$el.addClass("yy-sgm-android"),this.$innerWraper=$("<div class='displayflex yy-sgm-android-inner flex-h'></div>"),this.indicator=$("<div class='yy-sgm-indicator'></div>"),this.selectedMode=e.selectedMode,this.selectedIndex=parseInt(e.selectedIndex)||0,this.selectedItems,this.components=[],this.dataSource=[],this.itemCount=this.config.items.length,this.splitStyle=e.splitStyle;var i=this.config.indicatorStyle||{};e.itemStyle.width?(this.itemWidth_int=parseFloat(e.itemStyle.width),this.itemWidth=this.itemWidth_int+"px",i.left=this.itemWidth_int*this.selectedIndex+"px",i.width=this.itemWidth_int+"px",this.$innerWraper.css({width:this.itemWidth_int*this.itemCount+20+"px"})):(this.itemWidth_int=100/this.config.items.length,this.itemWidth=this.itemWidth_int+"%",i.left=this.itemWidth_int*this.selectedIndex+"%",i.width=this.itemWidth_int+"%",this.$innerWraper.css({width:"100%"})),this.indicator.css(i),this.$innerWraper.append(this.indicator),this.$innerWraper.appendTo(this.$el),this.init()};return e.extends(o,t),o.prototype.init=function(){for(var e=this.config.items||[],t=0,i=e.length;t<i;t++)this.addItem(e[t])},o.prototype.addItem=function(t){this.dataSource.push(t);var o=new i({type:"segmentitem",root:this.config.root,style:this.config.itemStyle,$$pageview:this.pageview,$$datasource:t,$$parent:this,index:this.components.length,selectedClassName:this.config.itemSelectedClassName});if(this.components.push(o),this.components.length==this.selectedIndex+1&&(this.selectedItems=o,o.selected()),this.$innerWraper.append(o.$el),this.splitStyle&&this.components.length>0&&this.components.length<this.config.items.length){var s=$("<div></div>");e.css(s,this.splitStyle),this.$innerWraper.append(s)}},o.prototype._itemClick=function(t){var i=this.selectedItems===t,o=this.config.comKey+"_change";if(this.pageview.plugin&&this.pageview.plugin[o]){var s=this.pageview.plugin[o];if(s){var a=s.call(this.pageview.plugin,this,{item:t,nochange:i});if(a)return}}if(i);else if(this.selectedItems&&this.selectedItems.unSelected(),this.selectedItems=t,this.selectedItems.selected(),this.config.itemStyle.width){if(this.indicator.css({left:this.itemWidth_int*t.index+"px"}),t.index!=this.itemCount-1){var n=this.itemWidth_int*(t.index-1);0!=t.index?n+=10:n=0,this.$innerWraper.css(e.processTransformStyle("translate3d(-"+n+"px,0,0)"))}}else this.indicator.css({left:this.itemWidth_int*t.index+"%"});var r=t.datasource,l=r.key,c=this.pageview.refs[this.config.viewpager];c&&l&&c.showItem(l)},o}),define("../../components/segment_ios",["utils","base"],function(e,t){var i=function(e){var t=this;e.style=e.style||{},e.style.flexDirection||e.style["flex-direction"]||(e.style.flexDirection="column"),e.style.alignItems||e.style["align-items"]||(e.style.alignItems="center"),e.style.justifyContent||e.style["justify-content"]||(e.style.justifyContent="center"),e.style.flex=1,e.style.height=e.style.height||"25px",i.baseConstructor.call(this,e),this.$el.addClass("displayflex yy-segmentitem"),this.$el.bind("click",function(){t.parent._itemClick(t)}),this.initLayout(e.$$datasource)};e.extends(i,t),i.prototype.render=function(){};var o=function(e){e.itemStyle=e.itemStyle||{},e.style=e.style||{},e.style.width=e.style.width||"300px",e.style.border=e.style.border||"1px solid rgb(0, 147, 255)",e.style.borderRadius=e.style.borderRadius||"4px";var t=e.itemStyle.height||e.style.height||"25px";e.itemStyle.height=t,delete e.style.height,o.baseConstructor.call(this,e),this.$el.addClass("displayflex yy-sgm-ios flex-h"),this.selectedMode=e.selectedMode,this.selectedIndex=e.selectedIndex||0,this.selectedItems,this.components=[],this.dataSource=[],this.splitStyle=e.splitStyle||{borderLeft:"1px solid rgb(0, 147, 255)",height:t,width:0},this.init()};return e.extends(o,t),o.prototype.init=function(){for(var e=this.config.items||[],t=0,i=e.length;t<i;t++)this.addItem(e[t])},o.prototype.addItem=function(t){this.dataSource.push(t);var o=new i({type:"segmentitem",root:this.config.root,style:this.config.itemStyle,$$pageview:this.pageview,$$datasource:t,$$parent:this,selectedClassName:this.config.itemSelectedClassName||"yy-sgm-ios-selected"});if(this.components.push(o),this.components.length==this.selectedIndex+1&&(this.selectedItems=o,o.selected()),this.$el.append(o.$el),this.components.length>0&&this.components.length<this.config.items.length){var s=$("<div></div>");e.css(s,this.splitStyle),this.$el.append(s)}},o.prototype._itemClick=function(e){if(this.selectedItems===e){var t=this.config.comKey+"_selectedagin";if(this.pageview.plugin&&this.pageview.plugin[t]){var i=this.pageview.plugin[t];i&&i.call(this.pageview.plugin,this,{item:e})}}else{this.selectedItems&&this.selectedItems.unSelected(),this.selectedItems=e,this.selectedItems.selected();var t=this.config.comKey+"_change";if(this.pageview.plugin&&this.pageview.plugin[t]){var i=this.pageview.plugin[t];i&&i.call(this.pageview.plugin,this,{item:e})}var o=e.datasource,s=o.key,a=this.pageview.refs[this.config.viewpager];a&&s&&a.showItem(s)}},o}),define("../../components/statusview",["utils","base"],function(e,t){var i=function(e){i.baseConstructor.call(this,e),this.$el.addClass("yy-statusview displayflex"),this.selectedKey=e.selectedKey||e.defaultKey,this.components={},this.change(this.selectedKey)};return e.extends(i,t),i.prototype.change=function(e){var t=this;t.curComponent&&t.curComponent.$el.addClass("displaynone");var i=t.components[e];return i?(i.$el.removeClass("displaynone"),void(t.curComponent=i)):void(e&&"null"!=e&&(this.curStatusKey=e,this.getComponentInstanceByComKey(e,this.datasource,this.rowInstance,function(i){t.components[e]=i,t.curComponent=i,e!==t.curStatusKey&&i.$el.addClass("displaynone"),t.$el.append(i.$el)},function(){})))},i}),define("../../components/swiper",["utils","base"],function(e,t){var i=function(e){this.config=e,this.$el=$("<div style='"+e.style+"' class='yy-swiper-item-wrapper'></div>")};i.prototype={css:function(t){e.css(this.$el,t)}};var o=function(t){this.config=t||{},this.$el=$("<div class='yy-swiper-wrapper flex-1'></div>"),this.itemWrappers=[],this.posArr=[0,1,2],this.limit=e.getRealWidth(90),this.tanKeys=e.getTransitionKeys(),this.initLayout(),this.config.init&&this.config.init(this)};return o.prototype={_posArrGoNext:function(){var e=this.posArr[0];this.posArr[0]=this.posArr[1],this.posArr[1]=this.posArr[2],this.posArr[2]=e},_resetPosArr:function(){this.posArr=[0,1,2]},_posArrGoPre:function(){var e=this.posArr[2];this.posArr[2]=this.posArr[1],this.posArr[1]=this.posArr[0],this.posArr[0]=e},initLayout:function(){var t=this;this.initPos=[0-e.viewport.width,0,e.viewport.width];for(var o=0;o<3;o++){var s=this.tanKeys.transform+":translate3d("+this.initPos[o]+"px,0,0)",a=new i({style:s});this.itemWrappers.push(a),this.config.initItem&&this.config.initItem(a,o),this.$el.append(a.$el)}var n,r,l;t.isIntransition=!1,this.$el.bind("touchstart",function(e){l=t.isIntransition,t.isIntransition||(n=e.touches[0].pageX)}),this.$el.bind("touchmove",function(e){if(e.preventDefault(),e.stopPropagation(),!t.isIntransition&&!l){var i=e.touches[0];r=i.pageX-n,t.setPos("move",r)}}),this.$el.bind("touchend",function(e){if(!t.isIntransition&&!l&&r&&0!=r){if(Math.abs(r)<t.limit)return t.setPos(),void(t.isIntransition=!1);r>0?t.goPre():t.goNext(),r=0}})},transitionEnd:function(e){this.isIntransition=!1},goPre:function(){var e=this;this.isIntransition=!0,this._posArrGoPre(),this.setPos("gopre"),this.config.onChange&&this.config.onChange({swiper:this,action:"gopre",itemWrapper:this.itemWrappers[this.posArr[0]]}),window.setTimeout(function(){e.transitionEnd("gopre")},280)},goNext:function(){var e=this;this.isIntransition=!0,this._posArrGoNext(),this.setPos("gonext"),this.config.onChange&&this.config.onChange({swiper:this,action:"gonext",itemWrapper:this.itemWrappers[this.posArr[2]]}),window.setTimeout(function(){e.transitionEnd("gonext")},280)},reset:function(){this._resetPosArr(),this.setPos("move",0)},setPos:function(e,t){var i=this;t=t||0;for(var o=0;o<3;o++){var s=i.posArr[o],a=i.itemWrappers[s],n={};n[i.tanKeys.transition]="move"==e?"none":this.tanKeys.transform+" .35s ease","gopre"==e&&0==o&&(n[i.tanKeys.transition]="none"),"gonext"==e&&2==o&&(n[i.tanKeys.transition]="none"),n[i.tanKeys.transform]="translate3d("+(this.initPos[o]+t)+"px,0,0)",a.css(n)}}},o}),define("../../components/switch",["utils","base"],function(e,t){var i=function(t){var o=this;t.style=t.style||{};var s=e.getRealHeight(28),a=e.getRealWidth(48),n=t.style.height||s,r=t.style.width||a;this.height=isNaN(n)?s:parseInt(n),this.width=isNaN(r)?a:parseInt(r),t.style.height=this.height+"px",t.style.width=this.width+"px",t.style.borderRadius=this.height/2+"px";var l=this.height-2;this.switchPoint=$("<div class='yy-swith-pointer'></div>"),this.pointerStartStyle={top:"1px",left:"1px",right:this.width-l-1+"px",bottom:"1px"},this.pointerEndStyle={top:"1px",left:this.width-l-1+"px",right:"1px",bottom:"1px"},i.baseConstructor.call(this,t),this.value=this.config.value,this.switchPoint.appendTo(this.$el),this.$el.addClass("yy-swith"),this.setValue(this.value),this.$el.bind("click",function(){o.change()});var c=this.config.comKey+"_change";this.changeMethod=this.pageview.plugin[c]};return e.extends(i,t),i.prototype.change=function(){this.changeMethod&&this.changeMethod.call(this.pageview.plugin,this,{value:!this.value})},i.prototype.getValue=function(){return this.value},i.prototype.setValue=function(e){this.value=e,e?(this.switchPoint.css(this.pointerEndStyle),this.$el.addClass("yy-swith-selected")):(this.switchPoint.css(this.pointerStartStyle),this.$el.removeClass("yy-swith-selected"))},i}),define("../../components/tabbarview",["utils","base"],function(e,t){var i=function(t){var o=this;i.baseConstructor.call(this,t),this.tabPages={},this.$el.addClass("yy-tabbarview"),this.tabbarWrapper=$("<div class='yy-tabbar flex-h displayflex'></div>"),this.pageWrapper=$("<div class='yy-tabbbar-pages'></div>");var s=t.tabbarStyle;s&&e.css(this.tabbarWrapper,s),this.selectedItem=null,this.curPageInstance=null;var a=this.config.root.length,n=0;this.initLayout(this.datasource,function(e){e.$el.bind("click",function(){o._itemClick(e)}),n+=1,n==a&&o.tabdidmount(),o.tabbarWrapper.append(e.$el)}),this.$el.append(this.pageWrapper),this.tabbarWrapper.appendTo(this.$el)};return e.extends(i,t),i.prototype.tabdidmount=function(){var e=this.config.root[0],t=this.pageview.params.$$pn,i=t||e,o=this.components[i]||this.components[e];this._itemClick(o,!!t)},i.prototype._itemClick=function(e,t){var i=this;return this.selectedItem===e?void alert("点了又点"):(this.selectedItem&&this.selectedItem.unSelected(),this.selectedItem=e,this.selectedItem.selected(),this.curPageInstance&&this.curPageInstance.$el.css({left:"-100%"}),this.curPageInstance=this.tabPages[e.config.comKey],this.pageview.showLoadingProgressbar(),this.curPageInstance?(this.curPageInstance.$el.css({left:"0"}),this.pageview.hideLoadingProgressbar()):this.pageview.pageManager.getPageConfigByPageKey(e.config.comKey,function(t){i.curPageInstance=i.pageview.pageManager.createPageView(t),i.tabPages[e.config.comKey]=i.curPageInstance,i.pageWrapper.append(i.curPageInstance.$el),i.pageview.hideLoadingProgressbar()}),void this.pageview.pageManager.tabSeleced(e.config.comKey,t))},i}),define("../../components/text",["utils","base"],function(e,t){var i=function(t){t.style=t.style||{},t.numberofline&&(o=t.numberofline||1),i.baseConstructor.call(this,t);var o;this.$el.addClass("yy-text displayflex ai-center"),this.preText=this.config.preText||"",this.preTextDom=$("<span class='yy-pretext'>"+this.preText+"</span>"),this.config.preTextStyle&&e.css(this.preTextDom,this.config.preTextStyle),this.nextText=this.config.nextText||"",this.nextTextDom=$("<span class='yy-nexttext'>"+this.nextText+"</span>"),this.config.nextTextStyle&&e.css(this.nextTextDom,this.config.nextTextStyle),t.text=0===t.text?"0":t.text,this.innerText=$("<span class='yy-inner-text yy-text-box'>"+(t.text||"")+"</span>"),o&&(this.innerText[0].style["-webkit-line-clamp"]=o,this.innerText[0].style["word-break"]="break-all"),this.$el.append(this.preTextDom).append(this.innerText).append(this.nextTextDom)};return e.extends(i,t),i.prototype.setText=function(e){this.innerText.html(e)},i.prototype.getText=function(){return this.innerText.html()},i.prototype.setPreText=function(e){this.preTextDom.html(e)},i.prototype.hideLoading=function(){this.loadingDom&&this.loadingDom.addClass("displaynone")},i.prototype.showLoading=function(){this.loadingDom||(this.loadingDom=$("<div class='preloader yy-text-loading displaynone'></div>"),this.loadingDom.insertBefore(this.preTextDom)),this.loadingDom.removeClass("displaynone")},i}),define("../../components/textarea",["utils","base"],function(e,t){var i=function(t){var o=this,s=t.placeholder||"";this.input=$("<textarea placeholder='"+s+"'></textarea>"),i.baseConstructor.call(this,t),this.max=this.config.max,isNaN(this.max)?this.max=null:this.max=parseInt(this.max),this.$el.addClass("yy-textarea");var a={fontSize:this.config.style.fontSize||this.config.style["font-size"]||"15px",color:this.config.style.color||this.config.style.color||"black",backgroundColor:this.config.style.backgroundColor||this.config.style["background-color"]||"white"};if(this.input.css(a),this.input.bind("input",function(e){if(o.max){var t=o.input.val(),i=t.length;i>o.max&&(t=t.substring(0,o.max),i=o.max,o.input.val(t)),o.numDom.html(i)}}),this.max){this.limitDom=$("<span class='yy-textarea-limit'></span>"),this.numDom=$("<span>0</span>"),this.config.numStyle&&e.css(this.numDom,this.config.numStyle);var n=$("<span>/</span>"),r=$("<span>"+this.max+"</span>");this.config.maxStyle&&e.css(r,this.config.maxStyle),this.config.limitStyle&&e.css(this.limitDom,this.config.limitStyle),this.limitDom.append(this.numDom).append(n).append(r),this.$el.append(this.limitDom)}this.$el.append(this.input)};return e.extends(i,t),i.prototype.getValue=function(){return this.input.val()},i.prototype.setDisabled=function(e){this.disabled=e,this.disabled?(this.input.attr("disabled","disabled"),this.$el.addClass(this.disabledClassName)):(this.input.removeAttr("disabled"),this.$el.remove(this.disabledClassName))},i.prototype.setValue=function(e){if(this.max){var t=e.length;t>this.max&&(e=e.substring(this.max),t=this.max),this.numDom.html(t)}this.input.val(e)},i.prototype.blur=function(){this.input.blur()},i.prototype.focus=function(e){var t=this;t.input.focus()},i}),define("../../components/timepicker",["utils"],function(e){var t=function(e){var t=e.root.itemHeight;this.$el=$("<div style='height:"+t+"px' class='yy-tp-cell'>1</div>")},i=function(t){this.config=t,this.itemHeight=t.root.itemHeight,this.$el=$("<div class='yy-tp-column yy-flex-1'></div>"),this.innerWrapper=$("<div data-math='"+10*Math.random()+"' class='yy-tp-column-inner'></div>"),this.innerWrapper.appendTo(this.$el),this.tanKeys=e.getTransitionKeys(),this.initLayout(),this.diff=0,this.startPosY=0,this.posY=0,this.selectedIndex=0};i.prototype={initLayout:function(){for(var e=0;e<20;e++){var i=new t(this.config);this.innerWrapper.append(i.$el)}},touchStart:function(e){this.startPosY=e.touches[0].pageY,this.diff=0},touchMove:function(e){e.preventDefault(),e.stopPropagation();var t=e.touches[0];this.diff=t.pageY-this.startPosY,this.curY=this.posY+this.diff;var i={};i[this.tanKeys.transition]="none",i[this.tanKeys.transform]="translate3d(0,"+this.curY+"px,0)",this.innerWrapper.css(i)},touchEnd:function(){this.posY=this.curY,this.diff>0?console.log("向下"):console.log("向上")}};var o=function(t){var o=t.wrapper||$(document.body);
this.$el=$("<div class='yy-tp-wrapper'></div>"),this.itemHeight=parseInt(e.getRealHeight(36));var s=4*this.itemHeight;this.body=$("<div style='height:"+s+"px' class='yy-tp-body displayflex yy-fd-row'></div>"),this.columns=[];for(var a=0;a<3;a++){var n=new i({root:this});this.columns.push(n),this.body.append(n.$el)}var r=$("<div style='height:"+this.itemHeight+"px;top:"+this.itemHeight+"px' class='yy-tp-indicator'></div>");this.body.append(r),this.$el.append(this.body),o.append(this.$el),this.initEvent()};return o.prototype={initEvent:function(){var t=this;this.body.bind("touchstart",function(i){t.curTouchColumnIndex=Math.floor(i.touches[0].pageX*t.columns.length/e.viewport.width),t.columns[t.curTouchColumnIndex].touchStart(i)}),this.body.bind("touchmove",function(e){t.columns[t.curTouchColumnIndex].touchMove(e)}),this.body.bind("touchend",function(){t.columns[t.curTouchColumnIndex].touchEnd()})}},o}),define("../../components/tip",["utils"],function(e){var t=function(e){var t=this;e=e||$(document.body),this.tipWrapper=$("<div class='yy-tip displayflex jc-center ai-center displaynone'></div>"),this.textDom=$('<div class="yy-tip-text displaynone"></div>'),this.backCover=$('<div class="yy-tip-backcover displaynone"></div>'),this.backCover.bind("click",function(){t.clickBackCover()}),this.tipWrapper.append(this.textDom),e.append(this.tipWrapper).append(this.backCover),this.hideTimeoutId=null};return t.prototype={show:function(t){var i=this;this.textPos=t.textPos||"bottom","left"==this.textPos||"right"==this.textPos?this.tipWrapper.addClass("flex-h"):this.tipWrapper.addClass("flex-v");var o=t.pos||"center";this.config=t,this.hideTimeoutId&&window.clearTimeout(this.hideTimeoutId),t=t||{};var s=t.style;s&&this.tipWrapper.css(e.processStyle(s)),this._setText(t.text,t.textStyle),this._setIcon(t.font,t.iconStyle),this.config.withoutBackCover||this.backCover.removeClass("displaynone"),this.startClass="yy-tip-ani-"+o+"-start",this.tipWrapper.removeClass("displaynone").addClass(this.startClass),window.setTimeout(function(){i.endClass="yy-tip-ani-"+o+"-end",i.tipWrapper.addClass(i.endClass)},3),t.duration&&!isNaN(t.duration)&&(this.hideTimeoutId=window.setTimeout(function(){i.hide()},parseInt(t.duration)))},_setText:function(t,i){t?(this.textDom.removeClass("displaynone"),i&&this.textDom.css(e.processStyle(i)),this.textDom.html(t)):this.textDom.addClass("displaynone")},_setIcon:function(t,i){this.iconDom&&this.iconDom.remove();var o,s;t=t||"";var a=t.split("_");2==a.length?(o=a[0],s=a[1],this.iconDom=$('<i class="yy-tip-icon displayflex jc-center ai-center yy-icon-code displaynone" data-icon="&#x'+s+';"></i>'),i&&this.iconDom.css(e.processStyle(i)),this.iconDom.removeClass("displaynone"),this.iconDom.css({"font-family":o}),"top"==this.textPos||"left"==this.textPos?this.iconDom.appendTo(this.tipWrapper):this.iconDom.insertBefore(this.textDom)):this.icomDom&&this.iconDom.addClass("displaynone")},clickBackCover:function(){this.config.clickNoHide||(this.hideTimeoutId&&window.clearTimeout(this.hideTimeoutId),this.hide())},hide:function(){var e=this;this.tipWrapper.removeClass(this.endClass),window.setTimeout(function(){e.tipWrapper.addClass("displaynone").removeClass(e.startClass),e.tipWrapper.remove(),e.backCover.remove()},300),e.backCover.addClass("displaynone")}},t}),define("../../components/view",["utils","base"],function(e,t){function i(t){var o=this,s="displayflex yy-view";t.style&&(t.style.alignItems||t.style["align-items"]||(s+=" yy-ai-stretch"),t.style.justifyContent||t.style["justify-content"]||(s+=" yy-jc-flex-start"),t.style.flexDirection||t.style["flex-direction"]||(s+=" yy-fd-column")),i.baseConstructor.call(this,t),o.isInLoading=!1,o.canRefresh=!1;var a=this.config.comKey+"_pulltorefresh",n=this.config.comKey+"_loadmore";this.pluginPullToRefreshMethod=this.pageview.plugin[a],this.pluginLoadMoreMethod=this.pageview.plugin[n];var r=this.config.comKey+"_reload";this.pluginLoadMoreErrorToReloadMethod=this.pageview.plugin[r],this.pluginPullToRefreshMethod&&(this.innerWrapper=$("<div class='yy-view-innerwrapper "+s+"'></div>"),this.$el.css({zIndex:1}),this.$$childrenWrapper=this.innerWrapper,this._initLoadFirstErrorDom(),this._initPullToRefreshDom(),this.$el.append(this.innerWrapper)),this._initTouchEvent(),this.LoadMoreOffsetBottom=e.getRealHeight(120),this.$el.addClass(s),t.root=t.root||[],this.initLayout(t.$$datasource,null,this.rowInstance,function(){o.childInitOver()})}return e.extends(i,t),i.prototype.scrollTop=function(e){return e?void this.$el.scrollTop(e):this.$el.scrollTop()},i.prototype._initPullToRefreshDom=function(){var t=e.getRealHeight(40),i=e.getRealWidth(11),o=e.getRealWidth(15);this.pullLimitHeight=e.getRealHeight(40),this.pullToRefreshWrapper=$("<div style='height:"+t+"px;margin-top:-"+t+"px' class='yy-pull-wrapper'></div>"),this.pullMessWrapper=$("<div style='height:"+this.pullLimitHeight+"px' class='displayflex yy-jc-center yy-ai-center flex-h yy-pull-mes-wrapper'></div>"),this.pullArrowIcon=$("<i style='font-size:"+o+"px' class='yy-pull-arrow'></i>"),this.pullMesLabel=$("<span style='font-size:"+i+"px' class='yy-pull-meslabel'>下拉刷新</span>");var s=$("<div class='preloader yy-pull-loadingicon'></div>");this.pullMessWrapper.append(s).append(this.pullArrowIcon).append(this.pullMesLabel).appendTo(this.pullToRefreshWrapper),this.innerWrapper.append(this.pullToRefreshWrapper)},i.prototype._initLoadMoreDom=function(){var t=e.getRealHeight(36),i=e.getRealWidth(11);this.LoadMoreWrapper=$("<div style='height:"+t+"px' class='yy-loadmore-wrapper displayflex yy-jc-center yy-ai-center flex-h displaynone'></div>");var o=$("<div class='preloader yy-loadmore-loadingicon'></div>");this.loadMoreLabel=$("<span style='font-size:"+i+"px' class='yy-pull-meslabel'>正在加载</span>"),this.LoadMoreWrapper.append(o).append(this.loadMoreLabel),this.$el.append(this.LoadMoreWrapper)},i.prototype._initLoadMoreErrorDom=function(){var t=this,i=e.getRealHeight(42),o=e.getRealWidth(11),s=e.getRealWidth(15);this.LoadMoreErrorWrapper=$("<div style='height:"+i+"px' class='yy-loadmore-wrapper displayflex yy-jc-center yy-ai-center flex-h displaynone'></div>");var a=$("<i style='font-size:"+s+"px' class='yy-icommon yy-loadmore-erroricon'></i>");this.loadErrorLabel=$("<span style='font-size:"+o+"px' class='yy-pull-meslabel'>网络异常,点击</span>");var n=$("<span style='font-size:"+o+"px' class='yy-loadmore-reload-babel'>重新加载</span>");n.bind("click",function(){t.pluginLoadMoreErrorToReloadMethod&&t.pluginLoadMoreErrorToReloadMethod.call(t.pageview.plugin,t,{})}),this.LoadMoreErrorWrapper.append(a).append(this.loadErrorLabel).append(n),this.$el.append(this.LoadMoreErrorWrapper)},i.prototype._initLoadFirstErrorDom=function(){var t=e.getRealHeight(36),i=e.getRealWidth(11),o=e.getRealWidth(15);this.LoadFirstErrorWrapper=$("<div data-mark='loadfirsterror' style='height:"+t+"px' class='yy-loadfirsterror-wrapper displayflex yy-jc-center yy-ai-center flex-h displaynone'></div>");var s=$("<i style='font-size:"+o+"px' class='yy-icommon yy-loadmore-erroricon'></i>");this.loadFirstErrorLabel=$("<span style='font-size:"+i+"px' class='yy-pull-meslabel'>网络异常,尝试再次下拉刷新</span>"),this.LoadFirstErrorWrapper.append(s).append(this.loadFirstErrorLabel),this.$el.append(this.LoadFirstErrorWrapper)},i.prototype._initTouchEvent=function(){var t=this;if(this.pluginPullToRefreshMethod){var i,o=0;this.$el.bind("touchstart",function(e){if(!t.isInLoading){t.isInLoading=!1,t.canRefresh=!1;var s=e.touches[0];o=s.pageY,i=t.$el.scrollTop()}}),this.$el.bind("touchmove",function(s){if(!t.isInLoading){var a=s.touches[0],n=a.pageY,r=n-o;if(r>0){var l=t.$el.scrollTop();if(l<=0){t.$el.css({overflow:"hidden"}),s.preventDefault(),s.stopPropagation();var c=r-i;c>4*t.pullLimitHeight?(t.pullMesLabel.html("释放更新"),t.pullToRefreshWrapper[0].className="yy-pull-wrapper yy-release-refresh",t.canRefresh=!0):(t.pullMesLabel.html("下拉刷新"),t.pullToRefreshWrapper[0].className="yy-pull-wrapper yy-push-refresh",t.canRefresh=!1),t.innerWrapper.css(e.processTransitionTanformStyle("none","translate3d(0,"+c/3+"px,0)"))}}}}),this.$el.bind("touchend",function(e){t.$el.css({"overflow-y":"auto"}),t.isInLoading||(t.canRefresh?(t.setPullLoadingState(),t.pluginPullToRefreshMethod&&t.pluginPullToRefreshMethod.call(t.pageview.plugin,t,{})):t.resetPullLoadState())})}},i.prototype.childInitOver=function(){var e=this;if(this.pluginLoadMoreMethod){this._initLoadMoreDom(),this._initLoadMoreErrorDom();var t=null;this.$el.bind("scroll",function(i){t&&window.clearTimeout(t),t=window.setTimeout(function(){e._onScroll(i)},80)})}},i.prototype.setPullLoadingState=function(){var t=this;t.pullMesLabel&&(t.isInLoading=!0,t.LoadMoreErrorWrapper&&t.LoadMoreErrorWrapper.addClass("displaynone"),t.LoadFirstErrorWrapper.addClass("displaynone"),t.pullMesLabel.html("正在加载"),t.pullToRefreshWrapper[0].className="yy-pull-wrapper yy-push-refreshing",t.innerWrapper.css(e.processTransitionTanformStyle("transform .2s ease","translate3d(0,"+t.pullLimitHeight+"px,0)")))},i.prototype.resetPullLoadState=function(){var t=this;t.pullMesLabel&&(t.isInLoading=!1,t.canRefresh=!1,t.pullMesLabel.html("下拉刷新"),t.pullToRefreshWrapper[0].className="yy-pull-wrapper yy-push-refresh",t.innerWrapper.css(e.processTransitionTanformStyle("transform .3s ease","translate3d(0,0,0)")))},i.prototype.setLoadFirstError=function(){this.LoadFirstErrorWrapper&&this.LoadFirstErrorWrapper.removeClass("displaynone"),this.resetPullLoadState()},i.prototype.setCanLoadMore=function(e){this.loadMoreLabel&&(e&&e.isReload?this.canLoadMore=!1:this.canLoadMore=!0,this.loadMoreLabel.html("正在加载"),this.LoadMoreErrorWrapper.addClass("displaynone"),this.LoadFirstErrorWrapper&&this.LoadFirstErrorWrapper.addClass("displaynone"),this.LoadMoreWrapper.removeClass("displaynone yy-loaddone"))},i.prototype.setHasLoadDone=function(){this.loadMoreLabel&&(this.canLoadMore=!1,this.loadMoreLabel.html("已显示所有数据"),this.LoadFirstErrorWrapper&&this.LoadFirstErrorWrapper.addClass("displaynone"),this.LoadMoreErrorWrapper.addClass("displaynone"),this.LoadMoreWrapper.addClass("yy-loaddone").removeClass("displaynone"))},i.prototype.setInitLoadMessage=function(){this.loadMoreLabel&&(this.LoadFirstErrorWrapper&&this.LoadFirstErrorWrapper.addClass("displaynone"),this.LoadMoreErrorWrapper.addClass("displaynone"),this.LoadMoreWrapper.addClass("yy-loaddone displaynone"))},i.prototype.setLoadMoreErrorState=function(){this.canLoadMore=!1,this.resetPullLoadState(),this.LoadMoreWrapper.addClass("displaynone"),this.LoadMoreErrorWrapper.removeClass("displaynone"),this.scrollToBottom()},i.prototype.scrollToBottom=function(){this.$el.scrollTop(this.$el[0].scrollHeight)},i.prototype._onScroll=function(e){this.canLoadMore&&this.$el[0].offsetHeight+this.$el.scrollTop()+this.LoadMoreOffsetBottom>=this.$el[0].scrollHeight&&(this.canLoadMore=!1,this.pluginLoadMoreMethod.call(this.pageview.plugin,this,{}))},i}),define("../../components/viewpager",["utils","base"],function(e,t){function i(e){var t=this;i.baseConstructor.call(this,e),this.$el.addClass("yy-viewpager"),this.items={};var o=e.defaultKey;o||console.error("viewpager控件为提供defalutKey属性"),this.curPageViewItem=null,this._getViewPagerItem(o,function(e){t.curPageViewItem=e},function(){})}var o=function(e){o.baseConstructor.call(this,e),this.$el.addClass("displayflex yy-viewpager-item"),this.$el.append(e.contentInstance.$el)};return e.extends(o,t),o.prototype.hide=function(){e.css(this.$el,{left:"-100%"})},o.prototype.show=function(){e.css(this.$el,{left:"0"})},e.extends(i,t),i.prototype._createViewPagerItem=function(e,t,i,s){var a=new o({type:"viewpageritem",contentType:t,contentInstance:i,$$pageview:this.pageview,$$datasource:this.datasource,$$parent:this});this.items[e]=a,this.$el.append(a.$el),s(a)},i.prototype.showItem=function(e){var t=this;this.curPageViewItem&&this.curPageViewItem.hide(),this._getViewPagerItem(e,function(e){t.curPageViewItem=e,t.curPageViewItem.show()},function(){})},i.prototype._getViewPagerItem=function(e,t,i){var o=this,s=this.items[e];if(s)return void t(s);e=this.config[e]||e;var a=this.pageview.config.components[e];a?this.getComponentInstanceByComKey(e,this.datasource,this.rowInstance,function(i){o._createViewPagerItem(e,"component",i,t)},function(){i&&i()}):this.pageview.pageManager.getPageConfigByPageKey(e,function(i){var s=o.pageview.pageManager.createPageView(i);o._createViewPagerItem(e,"pageview",s,t)},function(){i&&i()})},i}),define("components/commonDialog",function(){}),define("parts/common",["utils"],function(e){var t="#8991FF",i="#333333",o="#999999",s="#666666",a="#f2f4f4",n={descColor:s,backColor:a,mainColor:t,seTitleColor:o,labelColor:"#666666",titleColor:i,smartTimestamp:function(t){var i="";try{t=parseFloat(t);var o=new Date(t),s=new Date,a=s.getTime(),n=e.getDateInfo(o),r=e.getDateInfo(s);a=parseInt((a-t)/1e3),i=r.year===n.year&&r.day===n.day&&r.month===n.month?"今天":n.year+"-"+n.monthStr+"-"+n.dayStr}catch(e){}return i},customTimestamp:function(t,i,o){var s="";try{t=parseFloat(t);var a=new Date(t),n=new Date,r=n.getTime(),l=e.getDateInfo(a),c=e.getDateInfo(n);r=parseInt((r-t)/1e3),s=c.year===l.year&&c.day===l.day&&c.month===l.month&&o?"今天 "+this.formatTime(a,"hh:mm"):i?this.formatTime(a,i):this.formatTime(a,"yyyy-MM-dd hh:mm")}catch(e){}return s},formatTime:function(e,t){var i={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));for(var o in i)new RegExp("("+o+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?i[o]:("00"+i[o]).substr((""+i[o]).length)));return t},selectAttachment:function(e,t){var i=e;if(i.imagesRepeat.datasource.length>=5)return void i.pageview.showTip({text:"最多上传5张图片",duration:1e3,style:{width:"220px"}});try{var o=5-i.imagesRepeat.datasource.length;window.yyesn.client.selectAttachment(function(e){var t=e.data;t.length>o&&i.pageview.showTip({text:"最多上传5张图片",duration:1e3,style:{width:"220px"}});for(var s=0,a=o;s<a;s++)i.imagesRepeat.addItem({src:t[s].path})},{type:t||1,maxselectnum:o})}catch(e){}}};return n}),define("parts/timepicker",["utils"],function(e){function t(e){var t,i,o=window.getComputedStyle(e,null),s=!0;return s?(o=o["-webkit-transform"].split(")")[0].split(", "),t=+(o[12]||o[4]),i=+(o[13]||o[5])):(t=+o.left.replace(/[^-\d.]/g,""),i=+o.top.replace(/[^-\d.]/g,"")),{x:t,y:i}}var i=function(){var e=this;e.CanTouch="ontouchend"in document;var t=document.createElement("DIV").style;"-webkit-transform"in t?(e.transitionend="webkitTransitionEnd",e.transform="-webkit-transform",e.transition="-webkit-transition"):(e.transitionend="transitionend",e.transform="transform",e.transition="transition"),e.mode="",e.Now=new Date,e.RealModeArr=[],e.rowsCount=5,e.itemHeight=34,e.ParentContainer=document.body,e.extendArr=[],e.DTP_Obj=[],e.mapping={yyyy:{label:"年",start:1950,end:2040},MM:{label:"月",start:1,end:12},dd:{label:"日",start:1,end:31},hh:{label:"时",start:0,end:23},mm:{label:"分",start:0,end:59}},e.DTP_Conatiner=document.createElement("DIV"),e.DTP_Conatiner.className="tmpk-wrapper",e.DTP_Mid_Area=document.createElement("DIV"),e.DTP_Mid_Area.className="tmpk-mid-area",e.GradientLayer=document.createElement("DIV"),e.GradientLayer.className="tmpk-gradient-layer";var i=document.createElement("DIV");i.className="tmpk-top-area";var o=document.createElement("DIV");o.className="tmpk-top-col tmpk-cancel",o.innerHTML="取消",o.addEventListener("click",function(t){e.CancelClick(t)});var s=document.createElement("DIV");s.className="tmpk-top-col tmpk-auto-col",e.TitleLabel=document.createElement("DIV"),s.appendChild(e.TitleLabel);var a=document.createElement("DIV");a.className="tmpk-top-col",a.innerHTML="确定",a.addEventListener("click",function(t){e.OkClick(t)});var n=document.createElement("DIV");n.className="tmpk-top-col tmpk-clear",n.innerHTML="清除",n.addEventListener("click",function(t){e.ClearClick(t)}),i.appendChild(o),i.appendChild(s),i.appendChild(n),i.appendChild(a),e.DTP_Conatiner.appendChild(i),e.DateArea_Container=document.createElement("DIV"),e.DateArea_Container.className="tmpk-date-area",e.DateArea_Container.appendChild(e.DTP_Mid_Area),e.DateArea_Container.appendChild(e.GradientLayer),e.DTP_Conatiner.appendChild(i),e.DTP_Conatiner.appendChild(e.DateArea_Container),e.isDone=!1};return i.prototype={CancelClick:function(e){var t=this;void 0!=t.CancelMethod&&t.CancelMethod(),t.hide()},OkClick:function(e){var t=this,i=t.getValue();void 0!=t.OkMethod&&t.OkMethod(i),t.hide()},setTitle:function(e){var t=this;return t.TitleLabel.innerHTML=e||"",t},bind:function(e,t){var i=this;return"clear"==e?i.ClearMethod=t:"ok"==e?i.OkMethod=t:"cancel"==e?i.CancelMethod=t:"change"==e&&(i.ChangeMethod=t),i},ClearClick:function(e){var t=this;void 0!=t.ClearMethod&&t.ClearMethod(),t.hide()},done:function(){var e=this;return e.isDone||(e._InitLayout(),e._InitEvent(),e._InitLimit(),e.isDone=!0),e},_CompleteDateInfo:function(e){var t={Date:null,DateStr:null};return void 0==e.yyyy||void 0==e.yyyy.value?t:(e.MM=e.MM||{index:0,value:1},e.MM.value=e.MM.value||1,e.dd=e.dd||{index:0,value:1},e.dd.value=e.dd.value||1,e.hh=e.hh||{index:0,value:0},e.hh.value=e.hh.value||0,e.mm=e.mm||{index:0,value:0},e.mm.value=e.mm.value||0,t.mapping=e,t.DateStr=e.yyyy.value+"-"+e.MM.value+"-"+e.dd.value+" "+e.hh.value+":"+e.mm.value,t.Date=new Date(t.DateStr.replace("-","/").replace("-","/")),t)},setMaxValue:function(e){var t=this;if(!e||!t.isDone)return t;if(t.max_key_index_Mapping=t._getKey_IndexMappingByDateStr(e,!1),t.max_date_info=t._CompleteDateInfo(t.max_key_index_Mapping),void 0!=t.min_date_info&&t.max_date_info.Date<t.min_date_info.Date)return t.max_date_info=null,t;if(t.mapping.yyyy.show){var i=t.max_date_info.Date.getFullYear(),o=i-t.mapping.yyyy.start;t.mapping.yyyy.limit.max=t._reviseIndexByKeyByIndex(t.mapping.yyyy,o)}return t},setMinValue:function(e){var t=this;if(!e||!t.isDone)return t;if(t.min_key_index_Mapping=t._getKey_IndexMappingByDateStr(e,!1),t.min_date_info=t._CompleteDateInfo(t.min_key_index_Mapping),void 0!=t.max_date_info&&t.max_date_info.Date<t.min_date_info.Date)return t.min_date_info=null,t;if(t.mapping.yyyy.show){var i=t.min_date_info.Date.getFullYear(),o=i-t.mapping.yyyy.start;t.mapping.yyyy.limit.min=t._reviseIndexByKeyByIndex(t.mapping.yyyy,o)}return t},_InitLimit:function(){for(var e=this,t=0,i=e.RealModeArr.length;t<i;t++){var o=e.RealModeArr[t],s=e.mapping[o];void 0!=s.start?s.limit={min:0,max:s.end-s.start}:s.limit={min:0,max:_curMappingInfo.data.length-1}}},show:function(e,t){var i=this;return void 0==e||/^\s*$/.test(e)?i.setValueByDate(i.Now):i.setValueByDateStr(e),i.DTP_Width=i.GradientLayer.offsetWidth,i.DTP_Height=i.GradientLayer.offsetHeight,i.DTP_Conatiner.className="tmpk-wrapper tmpk-wrapper-show",i.BackCover.style.display="block",i.POS={left:0,top:window.innerHeight-i.DateArea_Container.offsetHeight},i},hide:function(){var e=this;return e.DTP_Conatiner.className="tmpk-wrapper",e.BackCover.style.display="none",e},_getKey_IndexMappingByDateStr:function(e,t){var i=this,o={},s=[];void 0!=e&&(s=i.getValueArr(e));for(var a=0,n=i.TimeArrModeArr.length;a<n;a++){var r=i.TimeArrModeArr[a],l=parseInt(s[a]),c=i._getValueIndexByValue(i.mapping[r],l,t);o[r]=c}return o},_getValueIndexByValue:function(e,t,i){var o=this;if(void 0!=e.start){var s=i?e.limit.min:0,a=i?e.limit.max:o.getItemCount(e);if(isNaN(t))return{index:s,value:e.start};var n=t-e.start;return n=n<s?s:n,n=n>a?a:n,{index:n,value:n+e.start}}throw new Error("未实现")},_reviseIndexByKeyByIndex:function(e,t){var i=this;if(isNaN(t))return 0;var o=i.getItemCount(e)-1;return t>o?o:t<0?0:t},_reviseValueIndexByKeyByIndex:function(e,t){return isNaN(t)?e.limit.min:t>e.limit.max?e.limit.max:t<e.limit.min?e.limit.min:t},setPosByKeyByIndex:function(e,t){var i=this,o=i.mapping[e];t=i._reviseValueIndexByKeyByIndex(o,t);var s=o.index,a=i.DTP_Obj[s],n=a.obj,r=i.itemHeight*(-t+2);a.y=r,a.index=t,n.style[i.transition]="none",n.style[i.transform]="translate(0,"+r+"px)"},getValue:function(){for(var e=this,t=e.mode,i=0,o=e.TimeArrModeArr.length;i<o;i++){var s=e.TimeArrModeArr[i];t=t.replace(s,e.getValueByKey(s))}return t},setValueByDateStr:function(e){var t=this,i=t._getKey_IndexMappingByDateStr(e,!0);for(var o in i)t.setPosByKeyByIndex(o,i[o].index),i.MM=i.MM||{index:0,value:1},i.dd=i.dd||{index:0,value:1},i.yyyy=i.yyyy||{index:0,value:1},t.ModifyDayCount("MM",i.yyyy.value,i.MM.value,i.dd.value)},setValueByDate:function(e){var t=e.getFullYear(),i=e.getMonth()+1,o=e.getDate(),s=e.getHours(),a=e.getMinutes(),n=this;n.setValueByDateStr(t+"-"+i+"-"+o+" "+s+":"+a)},getValueByKey:function(e){var t=this,i=t.mapping[e];if(1!=i.show)return null;var o=t.DTP_Obj[i.index];if(void 0!=i.start){var s=i.start+o.index;return s=s<10?"0"+s:s}return i.data[o.index].value},setParent:function(e){var t=this;return t.ParentContainer=e,t},setMode:function(e){var t=this;return t.mode=e,t},_InitEvent:function(){function e(e){var i=e.touches?e.touches[0]:e;s.timeMark.start=new Date,s.touchStart.x=i.pageX,s.curListIndex=Math.ceil(s.touchStart.x/s.DTP_Width*s.RealModeArr.length)-1,s.touchEnd.y=s.touchStart.y=i.pageY;var o=s.DTP_Obj[s.curListIndex],a=t(o.obj);o.obj.style[s.transition]="",o.obj.style["-webkit-transform"]="translate(0,"+a.y+"px)",s.curPosY=o.y=a.y,s.touchleave=!1,canmove=!0}function i(e){if(e.preventDefault(),!s.touchleave&&canmove){var t=e.touches?e.touches[0]:e,i=s.touchEnd.y-s.touchStart.y;s.touchEnd.y=t.pageY;var a=t.pageX,n=s.DTP_Obj[s.curListIndex],r=n.obj;return n.y=s.curPosY+i,r.style[s.transform]="translate(0,"+n.y+"px)",a<=10||a>=s.DTP_Width-10||s.touchEnd.y-s.POS.top<=10||s.touchEnd.y-s.POS.top>=s.DTP_Height-10?(o(),void(s.touchleave=!0)):void(s.touchleave=!1)}}function o(e){if(canmove=!1,!s.touchleave){s.timeMark.end=new Date;var t=s.timeMark.end-s.timeMark.start,i=s.touchEnd.y-s.touchStart.y,o=0,a=s.DTP_Obj[s.curListIndex],n=s.mapping[s.RealModeArr[s.curListIndex]];t<350&&Math.abs(i)>10&&(o=s.getCanScrollValue(s.getCanScrollMaxHeight(n),i)),a.y=s.getRealPosY(a.y+o,s.getLimit(n),a),a.obj.style[s.transition]=s.transform+" .5s cubic-bezier(0.333333, 0.666667, 0.666667, 1) 0s",a.obj.style[s.transform]="translate(0,"+a.y+"px)"}}var s=this;s.BackCover.addEventListener("click",function(e){s.hide()});var a=s.CanTouch?"touchstart":"mousedown",n=s.CanTouch?"touchmove":"mousemove",r=s.CanTouch?"touchend":"mouseup";s.GradientLayer.addEventListener(a,function(t){e(t)}),s.GradientLayer.addEventListener(n,function(e){i(e)}),s.GradientLayer.addEventListener(r,function(e){o(e)}),s.curListIndex=0,s.curPosY=0,s.touchleave=!1,canmove=!1,s.touchStart={x:0,Y:0},s.touchEnd={x:0,y:0},s.timeMark={start:0,end:0}},_InitLayout:function(){var e=this;0==e.RealModeArr.length&&(e.RealModeArr=e.getModeArr(),e.TimeArrModeArr=e.getModeArr()),0==e.RealModeArr.length&&(e.mode="yyyy-MM-dd",e.RealModeArr=["yyyy","MM","dd"]),e.listwidth=100/e.RealModeArr.length+"%";for(var t=0,i=e.RealModeArr.length;t<i;t++){var o=e.RealModeArr[t],s=e.mapping[o];s.show=!0,s.index=t,e._InitLayout_List(o,s,t)}e.BackCover=document.createElement("DIV"),e.BackCover.className="tmpk-back-cover",e.ParentContainer.appendChild(e.BackCover),e.ParentContainer.appendChild(e.DTP_Conatiner)},extendData:function(e){var t=this;0==t.RealModeArr.length&&(t.RealModeArr=t.getModeArr(),t.TimeArrModeArr=t.getModeArr());var i=e.key;if(void 0==i||""==i)return t;if(void 0!=t.mapping[i])throw new Error("已存在相应的key");t.mapping[i]=e;var o=e.index||0;return o=isNaN(o)||o<0?0:o,o=o>t.RealModeArr.length-1?t.RealModeArr.length:o,t.RealModeArr.splice(o,0,i),t},_InitLayout_List:function(e,t,i){var o=this,s=document.createElement("UL");if(o.DTP_Obj[i]={obj:s,y:0,index:0,key:e},void 0!=t.start)for(var a=t.start,n=t.end,r=a;r<=n;r++){var l=document.createElement("LI");l.className="tmpk-item",r=r<10?"0"+r:r;var c=r+t.label;l.innerHTML=c,s.appendChild(l)}else for(var d=0,h=t.data.length;d<h;d++){var p=t.data[d],l=document.createElement("LI");l.className="tmpk-item";var c=p.text;l.innerHTML=c,s.appendChild(l)}s.className="tmpk-list",s.setAttribute("index",i),s.setAttribute("key",e),s.style.width=o.listwidth,s.addEventListener(o.transitionend,function(e){o._transitionEnd(e)}),o.DateArea_Container.appendChild(s)},_setMaxLimitByKeyByIndex:function(e,t){},setLimit:function(){},_transitionEnd:function(e){var t=this,i=t.DTP_Obj[e.target.getAttribute("index")];i.isInTransition=!1;var o=e.target.getAttribute("key"),s=t.getValueByKey("yyyy"),a=t.getValueByKey("MM")||1,n=t.getValueByKey("dd")||1,r=t.getValueByKey("hh")||0,l=t.getValueByKey("mm")||0;if(null!=s?(t.CurDateStr=s+"-"+a+"-"+n+" "+r+":"+l,t.CurDate=new Date(s,a-1,n,r,l)):(t.CurDateStr="",t.CurDate=null),t.ModifyDayCount(o,s,a,n),void 0!=t.max_date_info&&null!=t.CurDate){var c=t.max_date_info.Date;t.CurDate>c&&t.setValueByDate(c)}if(void 0!=t.min_date_info&&null!=t.min_date_info){var d=t.min_date_info.Date;t.CurDate<d&&t.setValueByDate(d)}void 0!=t.ChangeMethod&&t.ChangeMethod(t.getValue())},ModifyDayCount:function(e,t,i,o){var s=this;if(s.mapping.dd.show&&s.mapping.yyyy.show&&s.mapping.MM.show&&("MM"==e&&1!=s.getIsInTransitionByKey("yyyy")||"yyyy"==e&&1!=s.getIsInTransitionByKey("MM"))){var a=s.DayNumOfMonth(t,i),n=s.mapping.dd;n.limit.max=a-1;for(var r=n.index,l=s.DTP_Obj[r],c=l.obj,d=31-a,h=30;h>=27;h--)d>0?(c.childNodes[h].style.display="none",d-=1):c.childNodes[h].style.display="block";o>a&&s.setPosByKeyByIndex("dd",n.limit.max)}},getIsInTransitionByKey:function(e){var t=this,i=t.mapping[e].index,o=t.DTP_Obj[i];return o.isInTransition},getModeArr:function(){for(var e=this,t=[],i=(e.mode||"").split(" "),o=!1,s=0,a=i.length;s<a;s++){var n="-",r=i[s];if(r.indexOf("-")>0);else{if(!(r.indexOf(":")>0)){t.push(r);break}n=":"}var l=r.split(n);if(o)break;for(var c=0,d=l.length;c<d;c++){var h=l[c];if(!e.mapping[h]){o=!0;break}t.push(h)}}return t},getValueArr:function(e){for(var t=[],i=(e||"").split(" "),o=0,s=i.length;o<s;o++)for(var a=0==o?i[o].split("-"):i[o].split(":"),n=0,r=a.length;n<r;n++){var l=a[n];t.push(l)}return t},getCanScrollValue:function(e,t){var i=this,o=t<0?-1:1;return t=Math.abs(t),t>i.itemHeight*i.rowsCount*3/4?e*o*.9:t<=i.itemHeight*i.rowsCount*3/4&&t>i.itemHeight*i.rowsCount*2/4?e*o*.7:t<=i.itemHeight*i.rowsCount*2/4&&t>i.itemHeight*i.rowsCount*1/4?2*i.itemHeight*o:i.itemHeight*o},getRealPosY:function(e,t,i){var o=this,s=o.itemHeight*Math.floor(o.rowsCount/2)-t.min*o.itemHeight,a=o.itemHeight*Math.ceil(o.rowsCount/2)-(t.max+1)*o.itemHeight,n=e<s?e>a?e:a:s,r=Math.abs(Math.round(n/o.itemHeight-Math.floor(o.rowsCount/2)));return i.index=r,o.itemHeight*Math.floor(o.rowsCount/2)-r*o.itemHeight},getLimit:function(e){return e.limit},getItemCount:function(e){if(void 0!=e.start){var t=e.end-e.start+1;return t}return e.data.length},getCanScrollMaxHeight:function(e){var t=this,i=t.getItemCount(e);return i=i>20?10:i,i*t.itemHeight},DayNumOfMonth:function(e,t){var i=new Date(e,t,0);return i.getDate()}},i}),define("logic/add",["../parts/common","utils","../parts/timepicker"],function(e,t,i){function o(e){this.pageview=e.pageview,this.classId=this.pageview.params.classId||0,this.className=this.pageview.params.className||"未分类",this.editMode=this.pageview.params.mode,this.id=this.pageview.params.id,this.remidTimePicker=null,this.deadlineTimePicker=null,this.year=(new Date).getFullYear(),this.setHeader()}return o.prototype={todo_listview_init:function(e,t){this.todo_listview=e},getDataWhenEdit:function(e){var t=this;this.pageview.ajax({url:"/list/getListDetail",type:"GET",timeout:7e3,data:{id:this.id},success:function(i){0===i.code?(t.pageview.hideLoading(),e.success(i.data)):t.pageview.showLoadingError()},error:function(){t.pageview.showLoadingError()}})},getInitData:function(t){var i=this;if("edit"===this.editMode)this.pageview.showLoading({text:"正在加载...",timeout:8e3,reLoadCallBack:function(){i.getDataWhenEdit(t)}}),this.getDataWhenEdit(t);else{var o,s=new Date;s=s.setDate(s.getDate()+1),o={id:null,content:"",classId:i.classId,className:i.className,remindTime:"",endTime:e.formatTime(new Date(s),"yyyy-MM-dd"),important:!1,remark:"",imgs:[]},t.success(o)}},setCategoryFromSelector:function(e,t){this.data.classId=e,this.data.className=t,this.category_value.setText(t)},category_value_init:function(e){this.category_value=e},category_wrapper_click:function(){this.pageview.showPage({pageKey:"category",mode:"fromBottom",params:{className:this.data.className,classId:this.data.classId}})},bindData:function(t){var i=this;if(this.data=t,t.images)for(var o=t.images.split(","),s=0;s<o.length;s++)i.imagesRepeat.addItem({src:o[s]});this.pageview.do("remindtime_value",function(t){i.data.remindTime&&t.setText(e.formatTime(new Date(i.data.remindTime),"yyyy-MM-dd hh:mm"))}),this.pageview.do("category_value",function(e){e.setText(i.data.className)}),this.pageview.do("deadline_value",function(t){t.setText(e.formatTime(new Date(i.data.endTime),"yyyy-MM-dd"))}),this.pageview.do("todo_title",function(e){e.setValue(i.data.content)}),this.pageview.do("rmark_textarea",function(e){e.setValue(i.data.remark)}),this.pageview.do("important_value",function(e){e.setValue(i.data.importance)})},onPageLoad:function(){var e=this;this.getInitData({success:function(t){e.bindData(t)}})},onPageEnter:function(e){},onPageResume:function(e,t){this.setHeader()},setHeader:function(){var e="创建清单";"edit"===this.editMode&&(e="清单详情");try{window.yyesn.client.setHeader(function(){},{type:2,title:e,rightTitle:"",rightValues:[]},function(e){})}catch(e){}},deadline_value_init:function(e,t){this.deadline=e},todo_title_init:function(e,t){this.todotitle=e},rmark_textarea_init:function(e,t){this.todoremark=e},remindtime_value_init:function(e,t){this.todoremindtime=e},page_content_init:function(e,t){this.page_content=e},submitIcon_click:function(e,t){var i=null,o=this,s=$.trim(this.todotitle.getValue()),a=$.trim(this.deadline.innerText.html()),n=$.trim(this.todoremindtime.innerText.html()),r=$.trim(this.todoremark.getValue());return""===s?i="请输入清单内容":""===a&&(i="请选择到期时间"),null!==i?void this.pageview.showTip({text:i,withoutBackCover:!0,style:{width:160},duration:1800}):(this._handlerImgs(),void("edit"===this.editMode?(this.page_content.showLoading({text:"提交中...",timeout:11e3,reLoadCallBack:function(){o.submitUpdateRequest(s,n,a,r)}}),this.submitUpdateRequest(s,n,a,r)):(this.page_content.showLoading({text:"提交中...",timeout:11e3,reLoadCallBack:function(){o.submitRequest(s,n,a,r)}}),this.submitRequest(s,n,a,r))))},submitRequest:function(e,t,i,o){var s=this;this.importantvalue=this.importantvalue?"1":"0",t=t?t+":00":"",this.pageview.ajax({url:"/list/add",type:"POST",timeout:1e4,data:{content:e,classId:s.data.classId,className:s.data.className,importance:s.importantvalue,remindTime:t,endTime:i,remark:o,images:s.ImagStr,token:s.token},success:function(e){0===e.code?(s.pageview.showTip({text:"新增成功",withoutBackCover:!0,style:{width:160},duration:1e3}),window.setTimeout(function(){s.pageview.goBack()},1e3)):s.pageview.showTip({text:e.msg,duration:4e3}),s.page_content.hideLoading()},error:function(e){s.pageview.showTip({text:"提交失败!请稍后再试",duration:3e3}),s.page_content.hideLoading()}})},submitUpdateRequest:function(e,t,i,o){var s=this;this.importantvalue=this.importantvalue?"1":"0",t=t?t+":00":"",this.pageview.ajax({url:"/list/update",type:"POST",timeout:1e4,data:{id:s.id,content:e,classId:s.data.classId,className:s.data.className,importance:s.importantvalue,remindTime:t,endTime:i,remark:o,images:s.ImagStr,token:s.token},success:function(e){0===e.code?(s.pageview.showTip({text:"修改成功",withoutBackCover:!0,style:{width:160},duration:1e3}),window.setTimeout(function(){s.pageview.goBack()},1e3)):s.pageview.showTip({text:e.msg,duration:4e3}),s.page_content.hideLoading()},error:function(e){s.pageview.showTip({text:"提交失败!请稍后再试",duration:3e3}),s.page_content.hideLoading()}})},_handlerImgs:function(){for(var e=[],t=0;t<this.imagesRepeat.datasource.length;t++)e.push(this.imagesRepeat.datasource[t].src);this.ImagStr=e.join(",")},deadline_value_click:function(e,t){
null===this.deadlineTimePicker&&(this.deadlineTimePicker=new i,this.deadlineTimePicker.mapping.yyyy.start=this.year,this.deadlineTimePicker.mapping.yyyy.end=this.year+4,this.deadlineTimePicker.setMode("yyyy-MM-dd").setParent(this.pageview.$el[0]).done().setMinValue(this.year+"-1-1 00:00").bind("clear",function(){}).bind("ok",function(t){e.setText(t)}).bind("cancel",function(){}).setTitle("到期时间")),this.deadlineTimePicker.show(e.getText())},remindtime_value_click:function(e,t){null===this.remidTimePicker&&(this.remidTimePicker=new i,this.remidTimePicker.mapping.yyyy.start=this.year,this.remidTimePicker.mapping.yyyy.end=this.year+4,this.remidTimePicker.setMode("yyyy-MM-dd hh:mm").setParent(this.pageview.$el[0]).done().setMinValue(this.year+"-1-1 00:00").bind("clear",function(){}).bind("ok",function(t){e.setText(t)}).bind("cancel",function(){}).setTitle("提醒时间")),this.remidTimePicker.show(e.getText())},todo_listview_parsedata:function(e,t){var i=t.data;return 0===i.code&&i.data},important_value_change:function(e,t){this.importantvalue=t.value,e.setValue(this.importantvalue)},row_time_init:function(e,i){e.config.text=t.timestampToTimeStr(e.datasource.createTime)},imagesRepeat_init:function(e){this.imagesRepeat=e},imagesRepeat_itemclick:function(e,t){for(var i=[],o=0,s=e.parent.datasource.length;o<s;o++)i.push(e.parent.datasource[o].src);try{window.yyesn.client.viewImage({files:i.join(","),index:parseInt(t.index)})}catch(e){}},addImageIcon_click:function(e,t){var i=1,o=this;if(o.imagesRepeat.datasource.length>=5)return void o.pageview.showTip({text:"最多上传5张图片",duration:1e3,style:{width:"220px"}});try{var s=5-o.imagesRepeat.datasource.length;window.yyesn.client.selectAttachment(function(e){var t=e.data;t.length>s&&o.pageview.showTip({text:"最多上传5张图片",duration:1e3,style:{width:"220px"}});for(var i=0,a=s;i<a;i++)o.imagesRepeat.addItem({src:t[i].path})},{type:i||1,maxselectnum:s})}catch(e){}},imageDelIcon_click:function(e,t){e.rowInstance.remove()}},o}),define("pages/add",["../logic/add","../parts/common","utils"],function(e,t,i){var o=new Date,s=t.formatTime(o,"yyyy-MM-dd"),a={pluginClass:e,style:{backgroundColor:t.backColor},root:["page_content","submitIcon"],components:{submitIcon:{type:"icon",text:"提交",style:{height:50,backgroundColor:"#fff"},textStyle:{fontSize:16,marginLeft:4,color:t.mainColor},iconStyle:{fontSize:16,color:t.mainColor}},page_content:{type:"view",style:{flex:1,overflowY:"auto"},root:["todo_title","second_group","rmark_textarea","imagesRepeat"]},imagesRepeat:{type:"repeat",ref:!0,items:[],root:["image","imageDelIcon"],style:{flexDirection:"row",flexWrap:"wrap",marginTop:5,paddingLeft:5},itemStyle:{w:90,justifyContent:"center",alignItems:"center"},subComponent:"addImageIcon"},addImageIcon:{type:"icon",text:"＋",style:{w:80,backgroundColor:"#fff",marginTop:5,marginLeft:5,border:"1px dashed rgb(207,207,207)"},textStyle:{color:"rgb(207,207,207)",fontSize:49}},imageDelIcon:{type:"icon",font:"icomoon_e909",style:{position:"absolute",right:8,border:"2px solid #fff",borderRadius:"100%",backgroundColor:"#fff",top:8},iconStyle:{color:"#FC505F",fontSize:17}},image:{type:"image",src_bind:"src",src:"",style:{w:80,backgroundColor:"rgba(0,0,0,.1)"}},todo_title:{ref:!0,type:"input",placeholder:"输入清单内容",style:{backgroundColor:"#fff",height:50,marginTop:10,paddingLeft:14,fontSize:16}},second_group:{type:"view",style:{backgroundColor:"#fff",marginTop:10,paddingLeft:14},root:["category_wrapper","remindtime_wrapper","deadline_wrapper","important_wrapper"]},category_wrapper:{type:"view",style:{flexDirection:"row",height:50,paddingRight:14,borderBottom:"1px solid #eee"},root:["category_title","category_value","category_icon"]},category_title:{type:"text",text:"选择分类",style:{width:80,fontSize:15,color:"#333"}},category_value:{type:"text",ref:!0,text:"未分类",style:{flex:1,justifyContent:"flex-end",fontSize:15,color:"#999"}},category_icon:{type:"icon",font:"icomoon_e913",text:"",textPos:"left",style:{justifyContent:"flex-end",color:"#ccc"}},remindtime_wrapper:{type:"view",style:{flexDirection:"row",height:50,paddingRight:14,borderBottom:"1px solid #eee"},root:["remindtime_title","remindtime_value","remindtime_icon"]},remindtime_title:{type:"text",text:"提醒时间",style:{width:80,fontSize:15,color:"#333"}},remindtime_value:{ref:!0,type:"text",text:"",style:{flex:1,justifyContent:"flex-end",fontSize:15,color:"#999"}},remindtime_icon:{type:"icon",font:"icomoon_e913",text:"",textPos:"left",style:{justifyContent:"flex-end",color:"#ccc"}},deadline_wrapper:{type:"view",style:{flexDirection:"row",height:50,paddingRight:14,borderBottom:"1px solid #eee"},root:["deadline_title","deadline_value","deadline_icon"]},deadline_title:{type:"text",text:"到期时间",style:{width:80,fontSize:15,color:"#333"}},deadline_value:{ref:!0,type:"text",text:s,style:{flex:1,justifyContent:"flex-end",fontSize:15,color:"#999"}},deadline_icon:{type:"icon",font:"icomoon_e913",text:"",textPos:"left",style:{justifyContent:"flex-end",color:"#ccc"}},important_wrapper:{type:"view",style:{flexDirection:"row",height:50,paddingRight:14},root:["important_title","important_switch_wrapper"]},important_title:{type:"text",text:"标记重要",style:{width:80,fontSize:15,color:"#333"}},important_switch_wrapper:{type:"view",style:{flex:1,flexDirection:"row",justifyContent:"flex-end",alignItems:"center"},root:["important_value"]},important_value:{ref:!0,type:"switch",selectedBackgroundColor:t.mainColor,style:{width:58,height:30}},rmark_textarea:{ref:!0,type:"textarea",placeholder:"备注",style:{marginTop:10,fontSize:14,paddingLeft:14,paddingRight:14,paddingTop:14,backgroundColor:"#fff",height:130}}}};return a}),define("logic/../../../components/dialog",["utils","base"],function(e,t){var i=function(t){var i=this,o=t.wrapper||$(document.body),s=t.mode||1;this.dialogBackCover=$("<div style='visibility: hidden;' class='yy-dialog-bk'></div>"),this.dialogWrapper=$("<div class='yy-dialog-wrapper yy-dialog-effect-"+s+" yy-dialog-hide'></div>");var a=$("<div class='yy-dialog-inner'></div>"),n=$("<div class='yy-dialog-body'></div>"),r="row"===t.btnDirection?"yy-fd-row":"yy-fd-column",l=$("<div class='yy-dialog-btn-wrapper displayflex "+r+"'></div>");this.dialogBackCover.bind("click",function(){i.hide()});var c=t.title||"";this.titleDom=$("<div class='yy-dialog-title'>"+c+"</div>"),this.bodyContentDom=$("<div class='yy-dialog-content'></div>");var d=t.createContent;if(d)d(this.bodyContentDom);else{var h=t.contentText;this.contentTextDom=$("<div class='yy-dialog-content-text'>"+h+"</div>"),this.bodyContentDom.append(this.contentTextDom)}if(n.append(this.titleDom).append(this.bodyContentDom),t.buttons)for(var p=0,u=t.buttons.length;p<u;p++){var f=t.buttons[p],c=f.title||"按钮",g=f.style,y=f.onClick;!function(t,i,o,s,a){var n=$("<div class='yy-dialog-btn yy-flex-1 displayflex yy-jc-center yy-ai-center'>"+t+"</div>");i&&e.css(n,i),s&&n.bind("click",function(e){s()}),o.append(n)}(c,g,l,y,this)}a.append(n).append(l),this.dialogWrapper.append(a),o.append(this.dialogWrapper).append(this.dialogBackCover)};return i.prototype.show=function(){var e=this;this.dialogWrapper.css({visibility:"visible"}),this.dialogBackCover.css({visibility:"visible"}),this.dialogBackCover.addClass("yy-dialog-bk-show"),window.setTimeout(function(){e.dialogWrapper.removeClass("yy-dialog-hide").addClass("yy-dialog-show")},1)},i.prototype.hide=function(){var e=this;this.dialogWrapper.removeClass("yy-dialog-show").addClass("yy-dialog-hide"),this.dialogBackCover.removeClass("yy-dialog-bk-show"),window.setTimeout(function(){e.dialogWrapper.css({visibility:"hidden"}),e.dialogBackCover.css({visibility:"hidden"})},200)},i}),define("logic/category",["../parts/common","utils","../../../components/dialog"],function(e,t,i){function o(e){this.pageview=e.pageview;this.setHeader(),this.category=this.pageview.showPageParams.className,this.categoryid=this.pageview.showPageParams.classId,this.delArr=[],this.action=this.pageview.showPageParams.action,this.ids=this.pageview.showPageParams.ids}return o.prototype={addCategoryBtn_click:function(e,t){this.addCategoryDialog.show(),this.category_input&&this.category_input.focus()},onPageResume:function(e,t){this.setHeader()},setHeader:function(){try{window.yyesn.client.setHeader(function(){},{type:2,title:"清单",rightTitle:"",rightValues:[]},function(e){})}catch(e){}},_loaddata:function(){var e=this;this.pageview.ajax({url:"/listClass/list",type:"GET",data:{},timeout:8100,success:function(t){0===t.code?(t.data.splice(0,1),e.pageview.hideLoading(),e._loadDataSuccess(t.data)):e.pageview.showLoadingError()},error:function(t){e.pageview.showLoadingError()}})},_loadDataSuccess:function(e){this.pageview.do("category_repeat",function(t){t.bindData(e)}),this.bindSelectedItemData()},bindSelectedItemData:function(){if("moveto"!==this.action){var e=this;if("未分类"===this.category)this.pageview.do("noCategory_Item",function(e){e.selected()});else{var t=!1;this.category_repeat.eachItem(function(i){if(i.datasource.id.toString()===e.categoryid.toString())return i.select(),t=!0,!1}),t||this.pageview.do("noCategory_Item",function(e){e.selected()})}}},noCategory_Item_init:function(e){this.noCategory_Item=e},noCategory_Item_click:function(e,t){"edit"!==this.category_repeat.status&&(e.selected(),this.category_repeat.clearSelectAll(),this._selected(0,"未分类"))},category_repeat_itemclick:function(e,t){e.select(),this.noCategory_Item.unSelected(),this._selected(e.datasource.id,e.datasource.name)},_selected:function(e,t){this.selectedData={id:e,name:t};var i=this;"moveto"!==this.action&&window.setTimeout(function(){i.pageview.close()},40)},onPageClose:function(){"moveto"===this.action?this.selectedData&&this.pageview.ownerPage.plugin.moveItemTo(this.selectedData.id,this.selectedData.name):(this.selectedData||(this.selectedData={id:0,name:"未分类"}),this.pageview.ownerPage.plugin.setCategoryFromSelector(this.selectedData.id,this.selectedData.name),this.selectedData=null)},onPageLoad:function(){var t=this;this.pageview.showLoading({text:"正在加载...",timeout:7e3,reLoadCallBack:function(){t._loaddata()}}),this._loaddata(),this.addCategoryDialog=new i({mode:3,wrapper:this.pageview.$el,title:"添加分类",createContent:function(e){t.pageview.getComponentInstanceByComKey("category_input",null,null,function(i){e.append(i.$el),t.category_input=i},function(){})},btnDirection:"row",buttons:[{title:"取消",style:{height:45,fontSize:16,color:e.titleColor,borderRight:"1px solid #EEEEEE"},onClick:function(){t.addCategoryDialog.hide()}},{title:"添加",style:{height:45,fontSize:16,color:e.mainColor},onClick:function(){t.addCategory()}}]})},addCategory:function(){var e=this;this.pageview.ajax({url:"/listClass/add",type:"POST",timeout:1e4,data:{name:e.category_input.getValue(),token:e.token},success:function(t){0===t.code?(e.category_repeat.insertItem(t.data,e.category_repeat.datasource.length+1),e.pageview.showTip({text:"添加成功",withoutBackCover:!0,style:{width:160},duration:1e3})):e.pageview.showTip({text:t.msg,duration:1e3})},error:function(t){e.pageview.showTip({text:"添加失败!请稍后再试",duration:3e3})}}),this.addCategoryDialog.hide()},item_del_icon_click:function(e,t){e.rowInstance.remove(!0),this.editicon.setText("保存"),this.delArr.push(e.rowInstance.datasource.id),this.delId=this.delArr.join(",")},_selectRepeatMove:function(){var e=this;this.pageview.ajax({url:"list/changeClass",type:"POST",timeout:7e3,data:{ids:e.ids,classId:e.selectedData.id},success:function(t){0===t.code?window.setTimeout(function(){e.pageview.close()},40):e.pageview.showLoadingError()},error:function(t){e.pageview.showLoadingError()}})},_saveRepeatChange:function(){var e=this,t=!1,i=this.category_repeat.datasource;this.totalSort=[],this.pageview.showLoading();for(var o=0;o<i.length;o++)for(var s=0;s<this.originalRepeatDataSource.length;s++)if(o===s){var a={};a.id=i[o].id,a.sort=this.originalRepeatDataSource[o].sort,this.totalSort.push(a)}this.totalSort&&(e.totalSort=JSON.stringify(e.totalSort),this.pageview.ajax({url:"/listClass/sort",type:"POST",timeout:1e4,data:{sort:e.totalSort},success:function(i){0===i.code?t||(e.pageview.showTip({text:"保存成功",duration:1e3}),t=!0):e.pageview.showTip({text:i.msg,duration:1e3}),e.pageview.hideLoading()},error:function(t){e.pageview.showTip({text:"操作失败!请稍后再试",duration:3e3}),e.pageview.hideLoading()}})),e.delId&&this.pageview.ajax({url:"/listClass/delete?ids="+e.delId,type:"DELETE",timeout:1e4,data:{},success:function(i){0===i.code?t||(e.pageview.showTip({text:"保存成功",duration:1e3}),t=!0):e.pageview.showTip({text:i.msg,duration:1e3}),e.pageview.hideLoading()},error:function(t){e.pageview.showTip({text:"操作失败!请稍后再试",duration:3e3}),e.pageview.hideLoading()}})},category_repeat_init:function(e,t){this.category_repeat=e},addCategoryBtn_init:function(e,t){"moveto"===this.action&&(e.config.style.display="none")},category_repeat_sortend:function(e,t){this.editicon.setText("保存")},editIcon_init:function(e,t){"moveto"===this.action&&(e.config.text="保存",e.config.iconStyle.display="none")},editIcon_click:function(e,i){this.editicon=e,"moveto"===this.action?this._selectRepeatMove():(this.category_repeat.setLeftRightOpen(),this.category_repeat.isInSort?(this.category_repeat.endSort(),"保存"===e.text&&this._saveRepeatChange(),e.setText("编辑"),e.iconDom.show()):(this.category_repeat.startSort(),this.originalRepeatDataSource=t.copy(this.category_repeat.datasource),e.setText("取消"),e.iconDom.hide()))}},o}),define("pages/category",["../logic/category","../parts/common","utils"],function(e,t,i){var o={pluginClass:e,style:{backgroundColor:t.backColor},root:["page_content","editIcon"],components:{testEditor:{type:"button",title:"编辑",mode:2},editIcon:{type:"icon",text:"编辑",font:"icomoon_e904",style:{height:50,borderTop:"1px solid #eee",backgroundColor:"#fff"},textStyle:{fontSize:16,marginLeft:4,color:t.mainColor},iconStyle:{fontSize:16,color:t.mainColor}},page_content:{type:"view",style:{overflowY:"auto",flex:1},root:["noCategory_Item","category_repeat"]},noCategory_Item:{type:"view",ref:"true",root:["noCategory_icon","noCategory_selecticon"],style:{height:50,alignItems:"center",flexDirection:"row",overflow:"hidden",backgroundColor:"#fff",justifyContent:"flex-start",borderBottom:"1px solid #eee"}},noCategory_icon:{type:"icon",font:"todo_e907",text:"未分类",iconStyle:{color:"#06CF86",opacity:.6,fontSize:17,paddingRight:6,paddingLeft:6},style:{flex:1,justifyContent:"flex-start"},textStyle:{color:t.titleColor,fontSize:16}},noCategory_selecticon:{type:"icon",selectedClassName:"category-selected",font:"icomoon_e90a",iconStyle:{color:t.mainColor,fontSize:19},style:{width:40,opacity:0}},category_repeat:{type:"repeat",selectedMode:"s",ref:!0,leftBlock:{key:"item_del_icon",width:40},rightBlock:{key:"item_sort_icon",width:70},sortHandle:"item_sort_icon",itemStyle:{height:50,alignItems:"center",flexDirection:"row",overflow:"hidden",borderBottom:"1px solid #eee",width:"100%",backgroundColor:"#fff"},style:{flexDirection:"column",backgroundColor:"#fff"},subComponent:"addCategoryBtn",root:["item_del_icon","category_icon","item_select_icon","item_sort_icon"]},item_select_icon:{type:"icon",selectedClassName:"category-selected",font:"icomoon_e90a",iconStyle:{color:t.mainColor,fontSize:19},style:{width:40,opacity:0}},item_sort_icon:{type:"icon",font:"todo_e908",iconStyle:{fontSize:17},style:{overflow:"hidden",width:0,height:"100%"}},category_icon:{type:"icon",font:"todo_e907",text:"分类",text_bind:"name",iconStyle:{color:"#06CF86",opacity:.6,fontSize:17,paddingRight:6,paddingLeft:6},textStyle:{color:t.titleColor,fontSize:16},style:{flex:1,justifyContent:"flex-start"}},item_del_icon:{type:"icon",font:"todo_e90b",iconStyle:{color:"red",fontSize:17},style:{overflow:"hidden",width:0,height:"100%"}},addCategoryBtn:{type:"icon",text:"添加分类",font:"todo_e902",style:{height:50,backgroundColor:"#fff"},textStyle:{fontSize:16,marginLeft:4,color:t.titleColor},iconStyle:{fontSize:16,color:t.mainColor}},category_input:{type:"input",ref:!0,placeholder:"输入分类(2-10个字以内)",style:{width:"92%",paddingLeft:10,margin:"auto",fontSize:16,height:45,border:"none",backgroundColor:"#F2F3F4",borderRadius:"4px"}},category_title:{type:"text",text:"分类",text_bind:"title",style:{flex:1,color:t.titleColor}}}};return o}),define("logic/donelist",["../parts/common","utils","../../../components/dialog"],function(e,t,i){function o(e){this.pageview=e.pageview,this.token=this.pageview.params.token||"",this.headRightValue="编辑",this.setHeader()}return o.prototype={todo_listview_init:function(e,t){this.todo_listview=e},onPageResume:function(e,t){this.setHeader()},setHeader:function(){var e=this;try{window.yyesn.client.setHeader(function(){},{type:2,title:"已完成",rightTitle:e.headRightValue,rightValues:[{key:"edit",value:e.headRightValue}]},function(t){t.registerHandler("edit",function(t,i){e._editOrCancel()})})}catch(e){}},addInput_keydown:function(t,i){if(13===i.e.keyCode){var o=this,s=new Date,a=t.getValue();this.pageview.ajax({url:"list/add",type:"POST",timeout:7e3,data:{content:a,classId:0,className:"未分类",importance:0,completed:0,remark:"",endTime:e.formatTime(s,"yyyy-MM-dd")},success:function(e){0===e.code?(t.setValue(""),o.pageview.showTip({text:"创建成功",withoutBackCover:!0,style:{width:160},duration:1800})):o.pageview.showTip({text:e.msg,withoutBackCover:!0,style:{width:160},duration:1800})},error:function(e){o.pageview.showTip({text:"网络正在开小差",withoutBackCover:!0,style:{width:160},duration:1800})}})}},todo_listview_selectChange:function(e,t){var i=this.todo_listview.selectedRows.length;i===e.getRowCount()?this.selectedAll.selected():this.selectedAll.unSelected(),i>0?this._setToolbarDisabled(!1):this._setToolbarDisabled(!0)},todo_listview_rowclick:function(e,t){this.curSelectedRow=e,this.pageview.go("add",{id:e.datasource.id,token:this.token,mode:"edit"})},row_flag_click:function(e,t){var i=this;"edit"!==this.todo_listview.status&&(e.isSelected?this.pageview.ajax({url:"/list/setUnImportance",type:"POST",timeout:7e3,data:{ids:e.datasource.id},success:function(t){0===t.code?(e.rowInstance.datasource.importance=0,e.unSelected()):i.pageview.showLoadingError()},error:function(e){i.pageview.showLoadingError()}}):this.setImportant(e.datasource.id,e))},completeBtn_click:function(e,t){var i=this.getSelectedIds();this.setUnComplete(i)},deleteBtn_click:function(e,t){this.showDeleteDialog()},moveToBtn_click:function(e,t){for(var i=this.todo_listview.selectedRows,o=[],s=0;s<i.length;s++)o.push(i[s].datasource.id);o.join(","),this.pageview.showPage({pageKey:"category",mode:"fromBottom",params:{action:"moveto",ids:o.toString(),className:"",classId:""}})},row_flag_init:function(e,t){1===e.datasource.importance&&e.selected(),1===e.datasource.completed&&e.$el.addClass("todo-flag-completed")},row_checkbox_init:function(e,t){1===e.datasource.completed&&(e.selected(),e.$el.addClass("todo-checkbox-completed"))},row_category_init:function(e,t){1===e.datasource.completed&&e.$el.addClass("todo-category-completed")},row_title_init:function(e,t){1===e.datasource.completed&&e.$el.addClass("todo-text-completed")},row_time_init:function(t,i){1===t.datasource.completed&&t.$el.addClass("todo-time-completed"),t.config.text="完成于 "+e.customTimestamp(t.datasource.completedTime,"",!0)},selectedAll_init:function(e){this.selectedAll=e},completeBtn_init:function(e,t){this.completeBtn=e,e.setDisabled(!0)},moveToBtn_init:function(e,t){this.moveToBtn=e,e.setDisabled(!0)},deleteBtn_init:function(e){this.deleteBtn=e,e.config.style.color="#FF4E5B",e.setDisabled(!0)},row_checkbox_wrapper_init:function(e){"edit"===this.todo_listview.status&&e.$el.addClass("displaynone")},row_checkbox_click:function(e,t){var i=e.datasource;e.value?this.setUnComplete(i.id,e):this.setComplete(i.id,e)},selectedAll_click:function(e,t){e.value?(e.unSelected(),this.todo_listview.clearSelectAll(),this._setToolbarDisabled(!0)):(e.selected(),this.todo_listview.selectAll(),this._setToolbarDisabled(!1))},todo_listview_parsedata:function(e,t){var i=t.data;return 0===i.code&&i.data},ToolBar_init:function(e){this.ToolBar=e},page_content_pulltorefresh:function(e,t){this.todo_listview.loadFirstPageData()},page_content_loadmore:function(e,t){this.todo_listview.loadNextPageData()},testEditor_click:function(e,t){"edit"===this.todo_listview.status?(this.ToolBar.$el.addClass("displaynone"),this.todo_listview.eachRow(function(e){e.refs.row_checkbox_wrapper.$el.removeClass("displaynone")})):(this.ToolBar.$el.removeClass("displaynone"),this.todo_listview.eachRow(function(e){e.refs.row_checkbox_wrapper.$el.addClass("displaynone")}),this._clearSelectEditInfo()),this.todo_listview.setLeftOpen()},_editOrCancel:function(){"edit"===this.todo_listview.status?(this.ToolBar.$el.addClass("displaynone"),this.todo_listview.eachRow(function(e){e.refs.row_checkbox_wrapper.$el.removeClass("displaynone")}),this.headRightValue="编辑",this._clearSelectEditInfo()):(this.ToolBar.$el.removeClass("displaynone"),this.todo_listview.eachRow(function(e){e.refs.row_checkbox_wrapper.$el.addClass("displaynone")}),this.headRightValue="取消"),this.setHeader(),this.todo_listview.setLeftOpen()},_clearSelectEditInfo:function(){this.todo_listview.clearSelectAll(),this.selectedAll.unSelected(),this._setToolbarDisabled(!0)},setImportant:function(e,t){var i=this;this.pageview.ajax({url:"list/setImportance",type:"POST",timeout:7e3,data:{ids:e},success:function(e){if(0===e.code){if(t&&(t.selected(),t.rowInstance.datasource.importance=1),!i.ToolBar.$el.hasClass("displaynone")){for(var o=i.todo_listview.selectedRows,s=0;s<o.length;s++)o[s].datasource.importance=1,o[s].rebind(o[s].datasource);i.todo_listview.selectedRows=[],i._setToolbarDisabled(!0),i.selectedAll.unSelected()}}else i.pageview.showLoadingError()},error:function(e){i.pageview.showLoadingError()}})},setComplete:function(e,t){var i=this;this.pageview.ajax({url:"list/setCompleted",type:"POST",timeout:7e3,data:{ids:e},success:function(e){if(0===e.code){if(t&&(t.selected(),t.datasource.completed=1,t.rowInstance.rebind(t.datasource)),!i.ToolBar.$el.hasClass("displaynone")){for(var o=i.todo_listview.selectedRows,s=0;s<o.length;s++)o[s].datasource.completed=1,o[s].rebind(o[s].datasource);i.todo_listview.selectedRows=[],i._setToolbarDisabled(!0),i.selectedAll.unSelected()}i.pageview.showTip({text:"清单已完成，已完成订单可内查看",duration:1500})}else i.pageview.showLoadingError()},error:function(e){i.pageview.showLoadingError()}})},setUnComplete:function(e,t){var i=this;this.pageview.ajax({url:"list/setUnCompleted",type:"POST",timeout:7e3,data:{ids:e},success:function(e){if(0===e.code){if(t&&(t.unSelected(),t.datasource.completed=0,t.rowInstance.rebind(t.datasource)),!i.ToolBar.$el.hasClass("displaynone")){for(var o=i.todo_listview.selectedRows,s=0;s<o.length;s++)o[s].datasource.completed=0,o[s].rebind(o[s].datasource);i.todo_listview.selectedRows=[],i._setToolbarDisabled(!0),i.selectedAll.unSelected()}i.pageview.showTip({text:"已转为待办",duration:1e3})}else i.pageview.showLoadingError()},error:function(e){i.pageview.showLoadingError()}})},deleteSelectedRows:function(){var e=this,t=this.getSelectedIds();this.pageview.ajax({url:"list/delete",type:"POST",timeout:7e3,data:{ids:t,_method:"delete"},success:function(t){if(0===t.code){for(var i=e.todo_listview.selectedRows,o=i.length-1;o>=0;o--)i[o].remove();e._setToolbarDisabled(!0),e.deleteDialog.hide(),e.pageview.showTip({text:"删除成功",duration:1e3})}else e.pageview.showTip({text:t.msg,withoutBackCover:!0,style:{width:160},duration:1800})},error:function(t){e.pageview.showLoadingError()}})},_setToolbarDisabled:function(e){this.completeBtn.setDisabled(e),this.deleteBtn.setDisabled(e),this.moveToBtn.setDisabled(e)},getSelectedIds:function(){for(var e,t=[],i=this.todo_listview.selectedRows,o=0;o<i.length;o++)t[o]=i[o].datasource.id;return e=t.join(",")},showDeleteDialog:function(){var t=this;this.deleteDialog||(this.deleteDialog=new i({mode:3,wrapper:this.pageview.$el,contentText:"确定要删除所选清单吗？",btnDirection:"row",buttons:[{title:"确定",style:{height:45,fontSize:16,borderRight:"1px solid #EEEEEE",color:e.mainColor},onClick:function(){t.deleteSelectedRows()}},{title:"取消",style:{height:45,fontSize:16,color:e.titleColor},onClick:function(){t.deleteDialog.hide()}}]})),this.deleteDialog.show()},moveItemTo:function(e,t){this.todo_listview.setAjaxConfigParams({pageNo:1,pageSize:20}),this.todo_listview.loadFirstPageData()}},o}),define("pages/donelist",["../logic/donelist","../parts/common","utils"],function(e,t,i){var o={pluginClass:e,style:{backgroundColor:t.backColor},root:["testEditor","addInputWrapper","page_content","ToolBar"],components:{testEditor:{type:"button",title:"编辑",mode:2,style:{display:"none"}},addInputWrapper:{type:"view",style:{height:50,marginTop:10,backgroundColor:"#fff",flexDirection:"row"},root:["addIcon","addInput"]},addIcon:{type:"icon",font:"todo_e902",style:{width:50,fontSize:35,justifyContent:"center",alignItems:"center",color:"#9097ff"}},addInput:{type:"input",placeholder:"输入清单内容",style:{flex:1,height:50,fontSize:16}},ToolBar:{type:"view",className:"displaynone",style:{flexDirection:"row",height:50,backgroundColor:"#fff",borderTop:"1px solid #eee",alignItems:"center"},splitStyle:{height:15,borderLeft:"1px solid #ccc"},root:["selectedAll","completeBtn","moveToBtn","deleteBtn"]},selectedAll:{type:"radiobox",text:"全选",style:{flex:1,fontSize:15,justifyContent:"center"},textStyle:{marginLeft:8}},completeBtn:{type:"text",text:"转待办",style:{flex:1,height:48,justifyContent:"center",fontSize:15,color:t.mainColor}},moveToBtn:{type:"text",text:"移动",style:{flex:1,justifyContent:"center",fontSize:15,height:48,color:t.mainColor}},deleteBtn:{type:"text",text:"删除",style:{flex:1,justifyContent:"center",fontSize:15,height:48,color:t.mainColor}},page_content:{type:"view",style:{flex:1,marginTop:10},root:["todo_listview"]},todo_listview:{type:"listview",selectedMode:"m",leftBlock:{key:"row_radiobox_wraper",width:40},autoLoadData:!0,ajaxConfig:{url:"/list/getCompletedList",type:"GET",pageSize:20,pageNumKey:"pageNo",data:{pageNo:1,pageSize:20}},rowStyle:{flexDirection:"row",alignItems:"stretch"},root:["row_radiobox_wraper","row_checkbox_wrapper","row_main_wrapper"]},row_checkbox_wrapper:{type:"view",disableParentSelect:!0,root:["row_checkbox"],ref:!0,style:{justifyContent:"center",overflow:"hidden",alignItems:"center",width:40}},row_checkbox:{type:"checkbox",selectedStyle:{backgroundColor:"#ccc",border:"1px solid #ccc"}},row_radiobox_wraper:{type:"view",root:["row_radiobox"],style:{justifyContent:"center",overflow:"hidden",alignItems:"center",width:0}},row_radiobox:{type:"radiobox"},row_main_wrapper:{type:"view",style:{flexDirection:"row",alignItems:"stretch",flex:1},root:["row_left","row_right"]},row_left:{type:"view",style:{flex:1,paddingLeft:5},root:["row_title","row_center_wrapper"]},row_title:{type:"text",text_bind:"content",numberofline:1,style:{paddingTop:16,paddingBottom:4,fontSize:14,color:"#333333"}},row_center_wrapper:{type:"view",style:{flexDirection:"row",alignItems:"stretch"},root:["row_category","row_time"]},row_category:{type:"text",text_bind:"className",style:{height:20,padding:"1 7 0 7",marginRight:5,borderRadius:4,color:"#999999",border:"1px solid #999999",fontSize:13}},row_time:{type:"text",text_bind:"completedTime",style:{paddingTop:2,paddingBottom:10,color:"#999",fontSize:13}},row_right:{type:"view",style:{width:50,justifyContent:"center",alignItems:"center"},root:["row_flag"]},row_flag:{type:"icon",font:"todo_e906",disableParentSelect:!0,selectedClassName:"flag-selected",iconStyle:{color:"#CCCCCC"}}}};return o}),define("logic/filterlist",["../parts/common","utils","../../../components/dialog"],function(e,t,i){function o(e){this.pageview=e.pageview,this.token=this.pageview.params.token||"",this.listid=this.pageview.params.listid,this.name=decodeURI(this.pageview.params.name),this.headRightValue="编辑",this.setHeader()}return o.prototype={todo_listview_init:function(e,t){this.todo_listview=e,this.todo_listview.setAjaxConfigParams({id:+this.listid,sort:1})},completeBtn_init:function(e,t){this.completeBtn=e,e.setDisabled(!0)},setImportantBtn_init:function(e,t){this.setImportantBtn=e,e.setDisabled(!0)},moreBtn_init:function(e){this.moreBtn=e,e.setDisabled(!0)},onPageResume:function(e,t){this.setHeader()},onPageLoad:function(e,t){},setHeader:function(){var e=this;try{window.yyesn.client.setHeader(function(){},{type:2,title:e.name,rightTitle:e.headRightValue,rightValues:[{key:"edit",value:e.headRightValue}]},function(t){t.registerHandler("edit",function(t,i){e._editOrCancel()})})}catch(e){}},addInput_keydown:function(t,i){var o=t.getValue();if(13===i.e.keyCode){var s=this,a=new Date;this.pageview.ajax({url:"list/add",type:"POST",timeout:7e3,data:{content:o,classId:s.listid,className:s.name,importance:0,completed:0,remark:"",endTime:e.formatTime(a,"yyyy-MM-dd")},success:function(e){0===e.code?(s.todo_listview.insertRow(e.data,0),t.setValue("")):s.pageview.showLoadingError()},error:function(e){s.pageview.showLoadingError()}})}},todo_listview_selectChange:function(e,t){this.isAllImportant()?this.setImportantBtn.setText("撤销重要"):this.setImportantBtn.setText("标记重要");var i=this.todo_listview.selectedRows.length;i===e.getRowCount()?this.selectedAll.selected():this.selectedAll.unSelected(),i>0?this._setToolbarDisabled(!1):this._setToolbarDisabled(!0)},_setToolbarDisabled:function(e){this.completeBtn.setDisabled(e),this.moreBtn.setDisabled(e),this.setImportantBtn.setDisabled(e)},todo_listview_rowclick:function(e,t){this.curSelectedRow=e,this.pageview.go("add",{id:e.datasource.id,classId:e.datasource.classId,className:e.datasource.className,mode:"edit"})},row_flag_click:function(e,t){var i=this;"edit"!==this.todo_listview.status&&(e.isSelected?this.pageview.ajax({url:"/list/setUnImportance",type:"POST",timeout:7e3,data:{ids:e.datasource.id},success:function(t){0===t.code?(e.rowInstance.datasource.importance=0,e.unSelected()):i.pageview.showLoadingError()},error:function(e){i.pageview.showLoadingError()}}):this.setImportant(e.datasource.id,e))},row_flag_init:function(e,t){1===e.datasource.importance&&e.selected(),1===e.datasource.completed&&e.$el.addClass("todo-flag-completed")},row_checkbox_init:function(e,t){1===e.datasource.completed&&(e.selected(),e.$el.addClass("todo-checkbox-completed"))},row_title_init:function(e,t){1===e.datasource.completed&&e.$el.addClass("todo-text-completed")},row_time_init:function(t,i){1===t.datasource.completed&&t.$el.addClass("todo-time-completed"),1===t.datasource.expired&&t.$el.addClass("todo-time-limit"),t.config.text=e.smartTimestamp(t.datasource.endTime)},selectedAll_init:function(e){this.selectedAll=e},page_segment_change:function(e,t){var i=this;switch(t.item.index){case 0:this.todo_listview.setAjaxConfigParams({id:+i.listid,sort:1});break;case 1:this.todo_listview.setAjaxConfigParams({id:+i.listid,sort:2});break;case 2:this.todo_listview.setAjaxConfigParams({id:+i.listid,sort:3})}this.todo_listview.loadFirstPageData()},row_checkbox_click:function(e,t){var i=e.datasource,o=this;e.value?this.pageview.ajax({url:"list/setUnCompleted",type:"POST",timeout:7e3,data:{ids:i.id},success:function(t){0===t.code?(e.unSelected(),i.completed=0,e.rowInstance.rebind(i)):o.pageview.showLoadingError()},error:function(e){o.pageview.showLoadingError()}}):this.setComplete(i.id,e)},selectedAll_click:function(e,t){e.value?(e.unSelected(),this._setToolbarDisabled(!0),this.todo_listview.clearSelectAll()):(this.isAllImportant()?this.setImportantBtn.setText("撤销重要"):this.setImportantBtn.setText("标记重要"),e.selected(),this._setToolbarDisabled(!1),this.todo_listview.selectAll())},todo_listview_parsedata:function(e,t){var i=t.data;return 0===i.code&&i.data},ToolBar_init:function(e){this.ToolBar=e},addIcon_click:function(e,t){this.pageview.go("add")},moreBtn_click:function(e){this.morePopover.show(e)},morePopover_init:function(e){this.morePopover=e},moreRepeat_icon_init:function(e,t){"删除"==e.datasource.title&&(e.config.textStyle.color="#FF4E5B")},showDeleteDialog:function(){var t=this;this.deleteDialog||(this.deleteDialog=new i({mode:3,wrapper:this.pageview.$el,contentText:"确定要删除所选清单吗？",btnDirection:"row",buttons:[{
title:"确定",style:{height:45,fontSize:16,borderRight:"1px solid #EEEEEE",color:e.mainColor},onClick:function(){t.deleteSelectedRows()}},{title:"取消",style:{height:45,fontSize:16,color:e.titleColor},onClick:function(){t.deleteDialog.hide()}}]})),this.deleteDialog.show()},moreRepeat_icon_click:function(e,t){var i=this.todo_listview.selectedRows,o=[];if("删除"==e.text)this.showDeleteDialog();else{for(var s=0;s<i.length;s++)o.push(i[s].datasource.id);o.join(","),this.pageview.showPage({pageKey:"category",mode:"fromBottom",params:{action:"moveto",ids:o.toString(),className:"",classId:""}})}this.morePopover.hide()},moveItemTo:function(e,t){var i=this;this.todo_listview.setAjaxConfigParams({id:+i.listid,sort:1}),this.todo_listview.loadFirstPageData()},deleteSelectedRows:function(){var e=this,t=this.getSelectedIds();this.pageview.ajax({url:"list/delete",type:"POST",timeout:7e3,data:{ids:t,_method:"delete"},success:function(t){if(0===t.code){e.pageview.showTip({text:"删除清单成功",duration:1e3});for(var i=e.todo_listview.selectedRows,o=i.length-1;o>=0;o--)i[o].remove();e._setToolbarDisabled(!0),e.deleteDialog.hide()}else e.pageview.showLoadingError()},error:function(t){e.pageview.showLoadingError()}})},page_content_pulltorefresh:function(e,t){this.todo_listview.loadFirstPageData()},testEditor_click:function(e,t){"edit"===this.todo_listview.status?(this.ToolBar.$el.addClass("displaynone"),this.todo_listview.eachRow(function(e){e.refs.row_checkbox_wrapper.$el.removeClass("displaynone")})):(this.ToolBar.$el.removeClass("displaynone"),this.todo_listview.eachRow(function(e){e.refs.row_checkbox_wrapper.$el.addClass("displaynone")}),this._clearSelectEditInfo()),this.todo_listview.setLeftOpen()},_editOrCancel:function(){"edit"===this.todo_listview.status?(this.ToolBar.$el.addClass("displaynone"),this.todo_listview.eachRow(function(e){e.refs.row_checkbox_wrapper.$el.removeClass("displaynone")}),this.headRightValue="编辑",this._clearSelectEditInfo()):(this.ToolBar.$el.removeClass("displaynone"),this.todo_listview.eachRow(function(e){e.refs.row_checkbox_wrapper.$el.addClass("displaynone")}),this.headRightValue="取消"),this.setHeader(),this.todo_listview.setLeftOpen()},_clearSelectEditInfo:function(){this.todo_listview.clearSelectAll(),this.selectedAll.unSelected(),this._setToolbarDisabled(!0)},completeBtn_click:function(){var e=this.getSelectedIds();this.setComplete(e)},row_checkbox_wrapper_init:function(e){"edit"===this.todo_listview.status&&e.$el.addClass("displaynone")},setImportantBtn_click:function(e,t){var i=this.getSelectedIds();"标记重要"==e.getText()?this.setImportant(i):this.setUnimportant(i)},setComplete:function(e,t){var i=this;this.pageview.ajax({url:"list/setCompleted",type:"POST",timeout:7e3,data:{ids:e},success:function(e){if(0===e.code){if(i.pageview.showTip({text:"清单已完成，已完成订单可内查看",duration:1e3}),t&&(t.selected(),t.datasource.completed=1,t.rowInstance.rebind(t.datasource)),!i.ToolBar.$el.hasClass("displaynone")){for(var o=i.todo_listview.selectedRows,s=0;s<o.length;s++)o[s].datasource.completed=1,o[s].rebind(o[s].datasource);i.todo_listview.selectedRows=[],i._setToolbarDisabled(!0),i.selectedAll.unSelected()}}else i.pageview.showLoadingError()},error:function(e){i.pageview.showLoadingError()}})},setUnimportant:function(e){var t=this;this.pageview.ajax({url:"/list/setUnImportance",type:"POST",timeout:7e3,data:{ids:e},success:function(e){if(0===e.code){if(!t.ToolBar.$el.hasClass("displaynone")){for(var i=t.todo_listview.selectedRows,o=0;o<i.length;o++)i[o].datasource.importance=0,i[o].rebind(i[o].datasource);t.todo_listview.selectedRows=[],t._setToolbarDisabled(!0),t.selectedAll.unSelected()}}else t.pageview.showLoadingError()},error:function(e){t.pageview.showLoadingError()}})},setImportant:function(e,t){var i=this;this.pageview.ajax({url:"list/setImportance",type:"POST",timeout:7e3,data:{ids:e},success:function(e){if(0===e.code){if(t&&(t.selected(),t.rowInstance.datasource.importance=1),!i.ToolBar.$el.hasClass("displaynone")){for(var o=i.todo_listview.selectedRows,s=0;s<o.length;s++)o[s].datasource.importance=1,o[s].rebind(o[s].datasource);i.todo_listview.selectedRows=[],i._setToolbarDisabled(!0),i.selectedAll.unSelected()}}else i.pageview.showLoadingError()},error:function(e){i.pageview.showLoadingError()}})},getSelectedIds:function(){for(var e,t=[],i=this.todo_listview.selectedRows,o=0;o<i.length;o++)t[o]=i[o].datasource.id;return e=t.join(",")},isAllImportant:function(){var e=this.todo_listview.selectedRows,t=!0;return 0===e.length&&(t=!1),e.forEach(function(e){0===e.datasource.importance&&(t=!1)}),t}},o}),define("pages/filterlist",["../logic/filterlist","../parts/common","utils"],function(e,t,i){var o={pluginClass:e,style:{backgroundColor:t.backColor},root:["testEditor","page_segment","addInputWrapper","page_content","ToolBar","morePopover"],components:{testEditor:{type:"button",title:"编辑",mode:2,style:{display:"none"}},page_segment:{type:"segment_android",items:[{title:"按创建时间",key:"new_wrapper"},{title:"按到期时间",key:"recommend_wrapper"},{title:"按字母",key:"hot_wrapper"}],root:["segment_android_item"],itemSelectedClassName:"todo-sgm-selected",indicatorStyle:{backgroundColor:t.mainColor},style:{backgroundColor:"#fff",height:43,borderBottom:"1px solid #EBEFF4"}},segment_android_item:{type:"text",text_bind:"title",style:{color:t.labelColor,fontSize:15}},addInputWrapper:{type:"view",style:{height:50,marginTop:10,backgroundColor:"#fff",flexDirection:"row"},root:["addIcon","addInput"]},addIcon:{type:"icon",font:"todo_e902",style:{width:50,fontSize:35,justifyContent:"center",alignItems:"center",color:"#9097ff"}},addInput:{type:"input",placeholder:"输入清单内容",style:{flex:1,height:50,fontSize:16}},ToolBar:{type:"view",className:"displaynone",style:{flexDirection:"row",height:50,backgroundColor:"#fff",borderTop:"1px solid #eee",alignItems:"center"},splitStyle:{height:15,borderLeft:"1px solid #ccc"},root:["selectedAll","completeBtn","setImportantBtn","moreBtn"]},selectedAll:{type:"radiobox",text:"全选",style:{flex:1,fontSize:15,justifyContent:"center"},textStyle:{marginLeft:8}},completeBtn:{type:"text",text:"完成本单",style:{flex:1,height:48,justifyContent:"center",fontSize:15,color:t.mainColor}},setImportantBtn:{type:"text",text:"标记重要",style:{flex:1,justifyContent:"center",fontSize:15,height:48,color:t.mainColor}},moreBtn:{type:"icon",font:"icomoon_e90d",style:{flex:1,height:48,justifyContent:"center",fontSize:18,color:t.mainColor}},morePopover:{type:"popover",root:["moreRepeat"],animate:{mode:"2"},bkCoverStyle:{backgroundColor:"rgba(230, 230, 230, 0.2)"},offset:{x:10},arrowStyle:{backgroundColor:"#fff",zIndex:2,"-webkit-box-shadow":"9px 8px 13px #9C9C9C","box-shadow":"9px 8px 13px #9C9C9C"},style:{"-webkit-box-shadow":"0px 8px 13px #9C9C9C","box-shadow":"0px 8px 13px #9C9C9C",width:90,backgroundColor:"#fff",height:"80",paddingTop:5,paddingBottom:4,borderRadius:"7px"}},moreRepeat:{type:"repeat",items:[{title:"移动至"},{title:"删除"}],root:["moreRepeat_icon"],style:{flexDirection:"column",flex:1},itemStyle:{flex:1,justifyContent:"center",alignItems:"stretch"}},moreRepeat_icon:{type:"icon",text:"",text_bind:"title",style:{flex:1},textStyle:{fontSize:16,color:"#292f33"}},page_content:{type:"view",style:{flex:1,marginTop:10},root:["todo_listview"]},todo_listview:{type:"listview",selectedMode:"m",leftBlock:{key:"row_radiobox_wraper",width:40},autoLoadData:!0,ajaxConfig:{url:"/list/getListByClass",type:"GET",pageSize:20,pageNumKey:"pageNo",data:{}},nodata:"nodata",rowStyle:{flexDirection:"row",alignItems:"stretch"},root:["row_radiobox_wraper","row_checkbox_wrapper","row_main_wrapper"]},nodata:{type:"view",style:{flexDirection:"column",alignItems:"center",flex:500,justifyContent:"center"},root:["nodata_image"]},nodata_image:{type:"icon",iconStyle:{width:70,height:80},text:"该分类创建清单,赶紧去行动吧",textPos:"bottom",textStyle:{marginTop:16,fontSize:15,color:"#999999"},src:"./imgs/space_tips.png"},row_checkbox_wrapper:{type:"view",disableParentSelect:!0,root:["row_checkbox"],ref:!0,style:{justifyContent:"center",overflow:"hidden",alignItems:"center",width:40}},row_checkbox:{type:"checkbox",selectedStyle:{backgroundColor:"#ccc",border:"1px solid #ccc"}},row_radiobox_wraper:{type:"view",root:["row_radiobox"],style:{justifyContent:"center",overflow:"hidden",alignItems:"center",width:0}},row_radiobox:{type:"radiobox"},row_main_wrapper:{type:"view",style:{flexDirection:"row",alignItems:"stretch",flex:1},root:["row_left","row_right"]},row_left:{type:"view",style:{flex:1,paddingLeft:5},root:["row_title","row_time"]},row_title:{type:"text",text_bind:"content",numberofline:1,style:{paddingTop:16,paddingBottom:4,fontSize:14,color:"#333333"}},row_time:{type:"text",text_bind:"endTime",style:{paddingTop:2,paddingBottom:10,color:"#999",fontSize:13}},row_right:{type:"view",style:{width:50,justifyContent:"center",alignItems:"center"},root:["row_flag"]},row_flag:{type:"icon",font:"todo_e906",disableParentSelect:!0,selectedClassName:"flag-selected",iconStyle:{color:"#CCCCCC"}}}};return o}),define("logic/index",["../parts/common","utils"],function(e,t){function i(e){this.pageview=e.pageview,this.accountId=this.pageview.params.accountId,this.setHeader()}return i.prototype={createIcon_click:function(){this.pageview.go("add",{mode:"add"})},onPageResume:function(e,t){this._loadData(),this.setHeader()},setHeader:function(){var e=this;try{window.yyesn.client.setHeader(function(){},{type:2,title:"清单",rightTitle:"已完成",rightValues:[{key:"done",value:"已完成"}]},function(t){t.registerHandler("done",function(t,i){e.pageview.go("donelist")})})}catch(e){}},onPageLoad:function(){var e=this;this.pageview.showLoading({text:"正在加载...",timeout:9e3,reLoadCallBack:function(){e._loadData()}}),this._loadData()},_loadData:function(){var e=this;this.pageview.ajax({type:"GET",url:"/list/entryStatistics",timeout:8e4,data:{},success:function(t){if(0===t.code){e.pageview.hideLoading();var i=t.data.normal,o=t.data.class;e.pageview.do("first_repeat",function(e){e.bindData(i)}),e.pageview.do("second_repeat",function(e){e.bindData(o)})}else e.pageview.showLoadingError()},error:function(t){e.pageview.showLoadingError()}})},first_repeat_itemclick:function(e,t){var i=e.datasource.name;switch(i){case"重要":this.pageview.go("todaylist",{listtype:1002});break;case"全部":this.pageview.go("todaylist",{listtype:1003});break;case"今日":this.pageview.go("todaylist",{listtype:1e3});break;case"最近七天":this.pageview.go("recentlylist",{listtype:1001})}},second_repeat_itemclick:function(e,t){var i=e.datasource.code,o=encodeURI(e.datasource.name);this.pageview.go("filterlist",{listid:i,name:o})}},i}),define("pages/index",["../logic/index","../parts/common","utils"],function(e,t,i){var o={pluginClass:e,style:{backgroundColor:t.backColor},root:["page_content","createIcon"],components:{createIcon:{type:"icon",text:"创建清单",font:"icomoon_e904",style:{height:50,backgroundColor:"#fff"},textStyle:{fontSize:16,marginLeft:4,color:t.mainColor},iconStyle:{fontSize:16,color:t.mainColor}},page_content:{type:"view",style:{flex:1,overflowY:"auto"},root:["first_repeat","mid_label","second_repeat"]},first_repeat:{type:"repeat",ref:!0,root:["first_repeat_label","first_repeat_val"],itemStyle:{flexDirection:"row",height:50,borderBottom:"1px solid #eee"},style:{flexDirection:"column",backgroundColor:"#fff"}},first_repeat_label:{type:"text",text_bind:"name",style:{flex:1,marginLeft:10,fontSize:16,color:t.titleColor}},first_repeat_val:{type:"text",text_bind:"count",style:{flex:1,marginRight:10,justifyContent:"flex-end",color:"#999",fontSize:15}},mid_label:{type:"text",text:"分类待办",style:{height:30,paddingLeft:10,fontSize:13,backgroundColor:"#F2F3F4",color:"#666"}},second_repeat:{type:"repeat",ref:!0,style:{flexDirection:"column",backgroundColor:"#fff",paddingLeft:10},itemStyle:{flexDirection:"row",height:50,borderBottom:"1px solid #eee"},root:["second_repeat_icon","second_repeat_val"]},second_repeat_icon:{type:"icon",font:"todo_e907",text_bind:"name",style:{flex:1,justifyContent:"flex-start"},textStyle:{color:"#333",fontSize:15,marginLeft:8},iconStyle:{color:"#06CF86",fontSize:18,opacity:.6}},second_repeat_val:{type:"text",style:{flex:1,marginRight:10,justifyContent:"flex-end",color:"#999",fontSize:15},text_bind:"count"}}};return o}),define("logic/recentlylist",["../parts/common","utils","../../../components/dialog"],function(e,t,i){function o(e){this.pageview=e.pageview,this.token=this.pageview.params.token||"",this.listtype=this.pageview.params.listtype||1001,this.NowDate=t.getDateInfo(new Date),this.headRightValue="编辑",this.setHeader()}return o.prototype={list_group_headertitle_init:function(e,t){},todo_listview_init:function(e,t){this.todo_listview=e},onPageResume:function(e,t){this.setHeader()},completeBtn_init:function(e,t){this.completeBtn=e,e.setDisabled(!0)},setImportantBtn_init:function(e,t){this.setImportantBtn=e,e.setDisabled(!0)},moreBtn_init:function(e){this.moreBtn=e,e.setDisabled(!0)},setHeader:function(){var e=this;try{window.yyesn.client.setHeader(function(){},{type:2,title:"最近七天",rightTitle:e.headRightValue,rightValues:[{key:"edit",value:e.headRightValue}]},function(t){t.registerHandler("edit",function(t,i){e._editOrCancel()})})}catch(e){}},todo_listview_selectChange:function(e,t){this.isAllImportant()?this.setImportantBtn.setText("撤销重要"):this.setImportantBtn.setText("标记重要");var i=this.todo_listview.selectedRows.length;i===e.getRowCount()?this.selectedAll.selected():this.selectedAll.unSelected(),i>0?this._setToolbarDisabled(!1):this._setToolbarDisabled(!0)},_setToolbarDisabled:function(e){this.completeBtn.setDisabled(e),this.moreBtn.setDisabled(e),this.setImportantBtn.setDisabled(e)},addInput_keydown:function(t,i){var o=t.getValue();if(13===i.e.keyCode){var s=this,a=new Date;this.pageview.ajax({url:"list/add",type:"POST",timeout:7e3,data:{content:o,classId:0,className:"未分类",importance:0,completed:0,remark:"",endTime:e.formatTime(a,"yyyy-MM-dd")},success:function(e){0===e.code?(t.setValue(""),s.todo_listview.setAjaxConfigParams({}),s.todo_listview.loadFirstPageData()):s.pageview.showLoadingError()},error:function(e){s.pageview.showLoadingError()}})}},row_flag_click:function(e,t){var i=this;"edit"!==this.todo_listview.status&&(e.isSelected?this.pageview.ajax({url:"/list/setUnImportance",type:"POST",timeout:7e3,data:{ids:e.datasource.id},success:function(t){0===t.code?(e.rowInstance.datasource.importance=0,e.unSelected()):i.pageview.showLoadingError()},error:function(e){i.pageview.showLoadingError()}}):this.setImportant(e.datasource.id,e))},selectedAll_init:function(e){this.selectedAll=e},selectedAll_click:function(e,t){e.value?(e.unSelected(),this._setToolbarDisabled(!0),this.todo_listview.clearSelectAll()):(this.isAllImportant()?this.setImportantBtn.setText("撤销重要"):this.setImportantBtn.setText("标记重要"),e.selected(),this._setToolbarDisabled(!1),this.todo_listview.selectAll())},todo_listview_rowclick:function(e,t){this.curSelectedRow=e,this.pageview.go("add",{id:e.datasource.id,token:this.token,mode:"edit"})},todo_listview_parsedata:function(e,i){var o=i.data;if(0!==o.code)return!1;for(var s=0,a=o.data.length;s<a;s++){var n="",r=o.data[s].endTime,l=t.timestampToDateInfo(r);n=l.year===this.NowDate.year&&l.month===this.NowDate.month&&l.day==this.NowDate.day?"今天":l.year+"-"+l.monthStr+"-"+l.dayStr+" "+l.weekFullStr,o.data[s].endTime=n}return o.data},row_flag_init:function(e,t){1===e.datasource.importance&&e.selected(),1===e.datasource.completed&&e.$el.addClass("todo-flag-completed")},row_checkbox_init:function(e,t){1===e.datasource.completed&&(e.selected(),e.$el.addClass("todo-checkbox-completed"))},row_category_init:function(e,t){1===e.datasource.completed&&e.$el.addClass("todo-category-completed")},row_checkbox_click:function(e,t){var i=e.datasource,o=this;e.value?this.pageview.ajax({url:"list/setUnCompleted",type:"POST",timeout:7e3,data:{ids:i.id},success:function(t){0===t.code?(e.unSelected(),i.completed=0,e.rowInstance.rebind(i)):o.pageview.showLoadingError()},error:function(e){o.pageview.showLoadingError()}}):this.setComplete(i.id,e)},row_title_init:function(e,t){1===e.datasource.completed&&e.$el.addClass("todo-text-completed")},ToolBar_init:function(e){this.ToolBar=e},addIcon_click:function(e,t){this.pageview.go("add")},moreBtn_click:function(e){this.morePopover.show(e)},morePopover_init:function(e){this.morePopover=e},moreRepeat_icon_init:function(e,t){"删除"==e.datasource.title&&(e.config.textStyle.color="#FF4E5B")},moreRepeat_itemclick:function(e,t){var i=this.todo_listview.selectedRows,o=[];if("删除"==e.datasource.title)this.showDeleteDialog();else{for(var s=0;s<i.length;s++)o.push(i[s].datasource.id);o.join(","),this.pageview.showPage({pageKey:"category",mode:"fromBottom",params:{action:"moveto",ids:o.toString(),className:"",classId:""}})}this.morePopover.hide()},deleteSelectedRows:function(){var e=this,t=this.getSelectedIds();this.pageview.ajax({url:"list/delete",type:"POST",timeout:7e3,data:{ids:t,_method:"delete"},success:function(t){if(0===t.code){e.pageview.showTip({text:"删除清单成功",duration:1e3});for(var i=e.todo_listview.selectedRows,o=i.length-1;o>=0;o--)i[o].remove();e._setToolbarDisabled(!0),e.deleteDialog.hide()}else e.pageview.showLoadingError()},error:function(t){e.pageview.showLoadingError()}})},showDeleteDialog:function(){var t=this;this.deleteDialog||(this.deleteDialog=new i({mode:3,wrapper:this.pageview.$el,contentText:"确定要删除所选清单吗？",btnDirection:"row",buttons:[{title:"确定",style:{height:45,fontSize:16,borderRight:"1px solid #EEEEEE",color:e.mainColor},onClick:function(){t.deleteSelectedRows()}},{title:"取消",style:{height:45,fontSize:16,color:e.titleColor},onClick:function(){t.deleteDialog.hide()}}]})),this.deleteDialog.show()},moveItemTo:function(e,t){var i=this;this.todo_listview.setAjaxConfigParams({code:i.listtype}),this.todo_listview.loadFirstPageData()},completeBtn_click:function(){var e=this.getSelectedIds();this.setComplete(e)},page_content_pulltorefresh:function(e,t){this.todo_listview.loadFirstPageData()},testEditor_click:function(e,t){"edit"===this.todo_listview.status?(this.ToolBar.$el.addClass("displaynone"),this.todo_listview.eachRow(function(e){e.refs.row_checkbox_wrapper.$el.removeClass("displaynone")})):(this.ToolBar.$el.removeClass("displaynone"),this.todo_listview.eachRow(function(e){e.refs.row_checkbox_wrapper.$el.addClass("displaynone")}),this._clearSelectEditInfo()),this.todo_listview.setLeftOpen()},_editOrCancel:function(){"edit"===this.todo_listview.status?(this.ToolBar.$el.addClass("displaynone"),this.todo_listview.eachRow(function(e){e.refs.row_checkbox_wrapper.$el.removeClass("displaynone")}),this.headRightValue="编辑",this._clearSelectEditInfo()):(this.ToolBar.$el.removeClass("displaynone"),this.todo_listview.eachRow(function(e){e.refs.row_checkbox_wrapper.$el.addClass("displaynone")}),this.headRightValue="取消"),this.setHeader(),this.todo_listview.setLeftOpen()},_clearSelectEditInfo:function(){this.todo_listview.clearSelectAll(),this.selectedAll.unSelected(),this._setToolbarDisabled(!0)},row_time_init:function(t,i){t.config.text=e.smartTimestamp(t.datasource.endTime)},setImportantBtn_click:function(e,t){var i=this.getSelectedIds();"标记重要"==e.getText()?this.setImportant(i):this.setUnimportant(i)},setComplete:function(e,t){var i=this;this.pageview.ajax({url:"list/setCompleted",type:"POST",timeout:7e3,data:{ids:e},success:function(e){if(0===e.code){if(i.pageview.showTip({text:"清单已完成，已完成订单可内查看",duration:1e3}),t&&(t.selected(),t.datasource.completed=1,t.rowInstance.rebind(t.datasource)),!i.ToolBar.$el.hasClass("displaynone")){for(var o=i.todo_listview.selectedRows,s=0;s<o.length;s++)o[s].datasource.completed=1,o[s].rebind(o[s].datasource);i.todo_listview.selectedRows=[],i._setToolbarDisabled(!0),i.selectedAll.unSelected()}}else i.pageview.showLoadingError()},error:function(e){i.pageview.showLoadingError()}})},setUnimportant:function(e){var t=this;this.pageview.ajax({url:"/list/setUnImportance",type:"POST",timeout:7e3,data:{ids:e},success:function(e){if(0===e.code){if(!t.ToolBar.$el.hasClass("displaynone")){for(var i=t.todo_listview.selectedRows,o=0;o<i.length;o++)i[o].datasource.importance=0,i[o].rebind(i[o].datasource);t.todo_listview.selectedRows=[],t._setToolbarDisabled(!0),t.selectedAll.unSelected()}}else t.pageview.showLoadingError()},error:function(e){t.pageview.showLoadingError()}})},setImportant:function(e,t){var i=this;this.pageview.ajax({url:"list/setImportance",type:"POST",timeout:7e3,data:{ids:e},success:function(e){if(0===e.code){t&&(t.selected(),t.rowInstance.datasource.importance=1);var o=i.todo_listview.selectedRows;if(!i.ToolBar.$el.hasClass("displaynone")){o=i.todo_listview.selectedRows;for(var s=0;s<o.length;s++)o[s].datasource.importance=1,o[s].rebind(o[s].datasource);i.todo_listview.selectedRows=[],i._setToolbarDisabled(!0),i.selectedAll.unSelected()}}else i.pageview.showLoadingError()},error:function(e){i.pageview.showLoadingError()}})},getSelectedIds:function(){for(var e,t=[],i=this.todo_listview.selectedRows,o=0;o<i.length;o++)t[o]=i[o].datasource.id;return e=t.join(",")},row_checkbox_wrapper_init:function(e){"edit"===this.todo_listview.status&&e.$el.addClass("displaynone")},isAllImportant:function(){var e=this.todo_listview.selectedRows,t=!0;return 0===e.length&&(t=!1),e.forEach(function(e){0===e.datasource.importance&&(t=!1)}),t}},o}),define("pages/recentlylist",["../logic/recentlylist","../parts/common","utils"],function(e,t,i){var o={pluginClass:e,style:{backgroundColor:t.backColor},root:["testEditor","addInputWrapper","page_content","ToolBar","morePopover"],components:{testEditor:{type:"button",title:"编辑",mode:2,style:{display:"none"}},addInputWrapper:{type:"view",style:{height:50,backgroundColor:"#fff",flexDirection:"row"},root:["addIcon","addInput"]},addIcon:{type:"icon",font:"todo_e902",iconStyle:{fontSize:18},style:{width:50,justifyContent:"center",alignItems:"center",color:"#9097ff"}},addInput:{type:"input",placeholder:"输入清单内容",style:{flex:1,height:50,fontSize:16}},ToolBar:{type:"view",className:"displaynone",style:{flexDirection:"row",height:50,backgroundColor:"#fff",borderTop:"1px solid #eee",alignItems:"center"},splitStyle:{height:15,borderLeft:"1px solid #ccc"},root:["selectedAll","completeBtn","setImportantBtn","moreBtn"]},selectedAll:{type:"radiobox",text:"全选",style:{flex:1,fontSize:15,justifyContent:"center"},textStyle:{marginLeft:8}},completeBtn:{type:"text",text:"完成本单",style:{flex:1,height:48,justifyContent:"center",fontSize:15,color:t.mainColor}},setImportantBtn:{type:"text",text:"标记重要",style:{flex:1,justifyContent:"center",fontSize:15,height:48,color:t.mainColor}},moreBtn:{type:"icon",font:"icomoon_e90d",style:{flex:1,height:48,justifyContent:"center",fontSize:18,color:t.mainColor}},morePopover:{type:"popover",root:["moreRepeat"],animate:{mode:"2"},bkCoverStyle:{backgroundColor:"rgba(230, 230, 230, 0.2)"},offset:{x:10},arrowStyle:{backgroundColor:"#fff",zIndex:2,"-webkit-box-shadow":"9px 8px 13px #9C9C9C","box-shadow":"9px 8px 13px #9C9C9C"},style:{"-webkit-box-shadow":"0px 8px 13px #9C9C9C","box-shadow":"0px 8px 13px #9C9C9C",width:90,backgroundColor:"#fff",height:"80",paddingTop:5,paddingBottom:4,borderRadius:"7px"}},moreRepeat:{type:"repeat",items:[{title:"移动至"},{title:"删除"}],root:["moreRepeat_icon"],style:{flexDirection:"column",flex:1},itemStyle:{flex:1,justifyContent:"center",alignItems:"stretch"}},moreRepeat_icon:{type:"icon",text:"",text_bind:"title",style:{flex:1},textStyle:{fontSize:16,color:"#292f33"}},page_content:{type:"view",style:{flex:1},root:["todo_listview"]},todo_listview:{type:"listview",selectedMode:"m",groupKey:"endTime",leftBlock:{key:"row_radiobox_wraper",width:40},groupHeaderStyle:{height:30,justifyContent:"center",alignItems:"center",backgroundColor:"#F2F3F4"},groupHeader:["list_group_headertitle"],autoLoadData:!0,ajaxConfig:{url:"/list/getListByCondition",type:"GET",pageSize:20,pageNumKey:"pageNo",data:{code:1001,pageNo:1,pageSize:20}},nodata:"nodata",rowStyle:{flexDirection:"row",alignItems:"stretch",borderBottom:"1px solid #eee"},root:["row_radiobox_wraper","row_checkbox_wrapper","row_main_wrapper"]},nodata:{type:"view",style:{flexDirection:"column",alignItems:"center",flex:500,justifyContent:"center"},root:["nodata_image"]},nodata_image:{type:"icon",iconStyle:{width:70,height:80},text:"最近未创建清单,赶紧去行动吧",textPos:"bottom",textStyle:{marginTop:16,fontSize:15,color:"#999999"},src:"../ToDoList/imgs/space_tips.png"},row_checkbox_wrapper:{type:"view",disableParentSelect:!0,root:["row_checkbox"],ref:!0,style:{justifyContent:"center",overflow:"hidden",alignItems:"center",width:40}},row_checkbox:{type:"checkbox",selectedStyle:{backgroundColor:"#ccc",border:"1px solid #ccc"}},row_radiobox_wraper:{type:"view",root:["row_radiobox"],style:{justifyContent:"center",overflow:"hidden",alignItems:"center",width:0}},row_radiobox:{type:"radiobox"},row_main_wrapper:{type:"view",style:{flexDirection:"row",alignItems:"stretch",flex:1,paddingBottom:10},root:["row_left","row_right"]},row_left:{type:"view",style:{flex:1,paddingLeft:5,alignItems:"flex-start"},root:["row_title","row_category"]},row_title:{type:"text",text_bind:"content",numberofline:1,style:{paddingTop:16,paddingBottom:4,fontSize:14,width:"100%",color:"#333333"}},list_group_headertitle:{type:"text",style:{fontSize:13},text_bind:"endTime"},row_category:{type:"text",text_bind:"className",style:{height:20,padding:"0 7",borderRadius:4,color:"#36d18d",border:"1px solid #36d18d",fontSize:13}},row_right:{type:"view",style:{width:50,justifyContent:"center",alignItems:"center"},root:["row_flag"]},row_flag:{type:"icon",font:"todo_e906",disableParentSelect:!0,selectedClassName:"flag-selected",iconStyle:{color:"#CCCCCC"}}}};return o}),define("logic/todaylist",["../parts/common","utils","../../../components/dialog"],function(e,t,i){function o(e){this.pageview=e.pageview,this.listtype=this.pageview.params.listtype,this.type=this.pageview.params.listtype,this.headRightValue="编辑",this.setHeader()}return o.prototype={completeBtn_init:function(e,t){this.completeBtn=e,e.setDisabled(!0)},setImportantBtn_init:function(e,t){this.setImportantBtn=e,e.setDisabled(!0)},moreBtn_init:function(e){this.moreBtn=e,e.setDisabled(!0)},_setToolbarDisabled:function(e){this.completeBtn.setDisabled(e),this.moreBtn.setDisabled(e),this.setImportantBtn.setDisabled(e)},todo_listview_init:function(e,t){this.todo_listview=e,this.todo_listview.setAjaxConfigParams({code:+this.listtype})},onPageResume:function(e,t){this.setHeader()},onPageLoad:function(e,t){},setHeader:function(){var e=this,t="";switch(this.listtype){case"1002":t="重要";break;case"1003":t="全部";break;case"1000":t="今日"}try{window.yyesn.client.setHeader(function(){},{type:2,title:t,rightTitle:e.headRightValue,rightValues:[{key:"edit",value:e.headRightValue}]},function(t){t.registerHandler("edit",function(t,i){e._editOrCancel()})})}catch(e){}},addInput_keydown:function(t,i){var o=t.getValue(),s=0;if(s="1002"===this.listtype?1:0,13===i.e.keyCode){var a=this,n=new Date;this.pageview.ajax({url:"list/add",type:"POST",timeout:7e3,data:{content:o,classId:0,className:"未分类",importance:s,completed:0,remark:"",endTime:e.formatTime(n,"yyyy-MM-dd")},success:function(e){0===e.code?(t.setValue(""),a.todo_listview.setAjaxConfigParams({}),a.todo_listview.loadFirstPageData()):a.pageview.showLoadingError()},error:function(e){a.pageview.showLoadingError()}})}},nodata_image_init:function(e,t){"1000"===this.type?e.config.text="今日未创建清单,赶紧去行动吧":"1002"===this.type?e.config.text="未创建重要清单,赶紧去行动吧":e.config.text="未创建任何清单,赶紧去行动吧"},todo_listview_selectChange:function(e,t){this.isAllImportant()?this.setImportantBtn.setText("撤销重要"):this.setImportantBtn.setText("标记重要");var i=this.todo_listview.selectedRows.length;i===e.getRowCount()?this.selectedAll.selected():this.selectedAll.unSelected(),i>0?this._setToolbarDisabled(!1):this._setToolbarDisabled(!0)},todo_listview_rowclick:function(e,t){this.curSelectedRow=e,this.pageview.go("add",{id:e.datasource.id,mode:"edit"})},row_flag_init:function(e,t){1===e.datasource.importance&&e.selected(),1===e.datasource.completed&&e.$el.addClass("todo-flag-completed")},row_checkbox_init:function(e,t){1===e.datasource.completed&&(e.selected(),e.$el.addClass("todo-checkbox-completed"))},row_title_init:function(e,t){1===e.datasource.completed&&e.$el.addClass("todo-text-completed")},row_time_init:function(t,i){1===t.datasource.completed&&t.$el.addClass("todo-time-completed"),1===t.datasource.expired&&t.$el.addClass("todo-time-limit"),t.config.text=e.smartTimestamp(t.datasource.endTime)},row_checkbox_click:function(e,t){var i=e.datasource;e.value?this.pageview.ajax({url:"list/setUnCompleted",type:"POST",timeout:7e3,data:{ids:i.id},success:function(t){0===t.code?(e.unSelected(),i.completed=0,e.rowInstance.rebind(i)):_this.pageview.showLoadingError()},error:function(e){_this.pageview.showLoadingError()}}):this.setComplete(i.id,e)},row_flag_click:function(e,t){var i=this;"edit"!==this.todo_listview.status&&(e.isSelected?this.pageview.ajax({url:"/list/setUnImportance",type:"POST",timeout:7e3,data:{ids:e.datasource.id},success:function(t){0===t.code?(e.rowInstance.datasource.importance=0,e.unSelected()):i.pageview.showLoadingError()},error:function(e){i.pageview.showLoadingError()}}):this.setImportant(e.datasource.id,e))},setImportantBtn_click:function(e,t){var i=this.getSelectedIds();"标记重要"==e.getText()?this.setImportant(i):this.setUnimportant(i)},completeBtn_click:function(e,t){var i=this.getSelectedIds();this.setComplete(i)},selectedAll_init:function(e){this.selectedAll=e},selectedAll_click:function(e,t){e.value?(e.unSelected(),this._setToolbarDisabled(!0),this.todo_listview.clearSelectAll()):(this.isAllImportant()?this.setImportantBtn.setText("撤销重要"):this.setImportantBtn.setText("标记重要"),e.selected(),this._setToolbarDisabled(!1),this.todo_listview.selectAll())},todo_listview_parsedata:function(e,t){var i=t.data;return 0===i.code&&i.data},ToolBar_init:function(e){this.ToolBar=e},moreBtn_click:function(e){this.morePopover.show(e)},morePopover_init:function(e){this.morePopover=e},moreRepeat_icon_init:function(e,t){"删除"==e.datasource.title&&(e.config.textStyle.color="#FF4E5B")},moreRepeat_itemclick:function(e,t){var i=this.todo_listview.selectedRows,o=[];if("删除"==e.datasource.title)this.showDeleteDialog();else{for(var s=0;s<i.length;s++)o.push(i[s].datasource.id);o.join(","),this.pageview.showPage({pageKey:"category",mode:"fromBottom",params:{action:"moveto",ids:o.toString(),className:"",classId:""}})}this.morePopover.hide()},deleteSelectedRows:function(){var e=this,t=this.getSelectedIds();this.pageview.ajax({url:"list/delete",type:"POST",timeout:7e3,data:{ids:t,_method:"delete"},success:function(t){if(0===t.code){e.pageview.showTip({text:"删除清单成功",duration:1e3});for(var i=e.todo_listview.selectedRows,o=i.length-1;o>=0;o--)i[o].remove();e._setToolbarDisabled(!0),e.deleteDialog.hide()}else e.pageview.showLoadingError()},error:function(t){e.pageview.showLoadingError()}})},showDeleteDialog:function(){var t=this;this.deleteDialog||(this.deleteDialog=new i({mode:3,wrapper:this.pageview.$el,contentText:"确定要删除所选清单吗？",btnDirection:"row",buttons:[{title:"确定",style:{height:45,fontSize:16,borderRight:"1px solid #EEEEEE",color:e.mainColor},onClick:function(){t.deleteSelectedRows()}},{title:"取消",style:{height:45,fontSize:16,color:e.titleColor},onClick:function(){t.deleteDialog.hide()}}]})),this.deleteDialog.show()},moveItemTo:function(e,t){var i=this;this.todo_listview.setAjaxConfigParams({code:i.listtype}),this.todo_listview.loadFirstPageData()},page_content_pulltorefresh:function(e,t){this.todo_listview.loadFirstPageData()},testEditor_click:function(e,t){"edit"===this.todo_listview.status?(this.ToolBar.$el.addClass("displaynone"),this.todo_listview.eachRow(function(e){e.refs.row_checkbox_wrapper.$el.removeClass("displaynone")})):(this.ToolBar.$el.removeClass("displaynone"),this.todo_listview.eachRow(function(e){e.refs.row_checkbox_wrapper.$el.addClass("displaynone")}),this._clearSelectEditInfo()),this.todo_listview.setLeftOpen()},row_checkbox_wrapper_init:function(e){"edit"===this.todo_listview.status&&e.$el.addClass("displaynone");
},_editOrCancel:function(){"edit"===this.todo_listview.status?(this.ToolBar.$el.addClass("displaynone"),this.todo_listview.eachRow(function(e){e.refs.row_checkbox_wrapper.$el.removeClass("displaynone")}),this.headRightValue="编辑",this._clearSelectEditInfo()):(this.ToolBar.$el.removeClass("displaynone"),this.todo_listview.eachRow(function(e){e.refs.row_checkbox_wrapper.$el.addClass("displaynone")}),this.headRightValue="取消"),this.setHeader(),this.todo_listview.setLeftOpen()},_clearSelectEditInfo:function(){this.todo_listview.clearSelectAll(),this.selectedAll.unSelected(),this._setToolbarDisabled(!0)},setComplete:function(e,t){var i=this;this.pageview.ajax({url:"list/setCompleted",type:"POST",timeout:7e3,data:{ids:e},success:function(e){if(0===e.code){if(i.pageview.showTip({text:"清单已完成，已完成订单可内查看",duration:1e3}),t&&(t.selected(),t.datasource.completed=1,t.rowInstance.rebind(t.datasource)),!i.ToolBar.$el.hasClass("displaynone")){for(var o=i.todo_listview.selectedRows,s=0;s<o.length;s++)o[s].datasource.completed=1,o[s].rebind(o[s].datasource);i.todo_listview.selectedRows=[],i._setToolbarDisabled(!0),i.selectedAll.unSelected()}}else i.pageview.showLoadingError()},error:function(e){i.pageview.showLoadingError()}})},setUnimportant:function(e){var t=this;this.pageview.ajax({url:"/list/setUnImportance",type:"POST",timeout:7e3,data:{ids:e},success:function(e){if(0===e.code){if(!t.ToolBar.$el.hasClass("displaynone")){for(var i=t.todo_listview.selectedRows,o=0;o<i.length;o++)i[o].datasource.importance=0,i[o].rebind(i[o].datasource);t.todo_listview.selectedRows=[],t._setToolbarDisabled(!0),t.selectedAll.unSelected()}}else t.pageview.showLoadingError()},error:function(e){t.pageview.showLoadingError()}})},setImportant:function(e,t){var i=this;this.pageview.ajax({url:"list/setImportance",type:"POST",timeout:7e3,data:{ids:e},success:function(e){if(0===e.code){if(t&&(t.selected(),t.rowInstance.datasource.importance=1),!i.ToolBar.$el.hasClass("displaynone")){for(var o=i.todo_listview.selectedRows,s=0;s<o.length;s++)o[s].datasource.importance=1,o[s].rebind(o[s].datasource);i.todo_listview.selectedRows=[],i._setToolbarDisabled(!0),i.selectedAll.unSelected()}}else i.pageview.showLoadingError()},error:function(e){i.pageview.showLoadingError()}})},getSelectedIds:function(){for(var e,t=[],i=this.todo_listview.selectedRows,o=0;o<i.length;o++)t[o]=i[o].datasource.id;return e=t.join(",")},isAllImportant:function(){var e=this.todo_listview.selectedRows,t=!0;return 0===e.length&&(t=!1),e.forEach(function(e){0===e.datasource.importance&&(t=!1)}),t}},o}),define("pages/todaylist",["../logic/todaylist","../parts/common","utils"],function(e,t,i){var o={pluginClass:e,style:{backgroundColor:t.backColor},root:["testEditor","addInputWrapper","page_content","ToolBar","morePopover"],components:{testEditor:{type:"button",title:"编辑",mode:2,style:{display:"none"}},addInputWrapper:{type:"view",style:{height:50,backgroundColor:"#fff",flexDirection:"row",borderBottom:"1px solid #eee"},root:["addIcon","addInput"]},addIcon:{type:"icon",font:"todo_e902",style:{width:50,fontSize:35,justifyContent:"center",alignItems:"center",color:"#9097ff"}},addInput:{type:"input",placeholder:"输入清单内容",style:{flex:1,height:50,fontSize:16}},ToolBar:{type:"view",className:"displaynone",style:{flexDirection:"row",height:50,backgroundColor:"#fff",borderTop:"1px solid #eee",alignItems:"center"},splitStyle:{height:15,borderLeft:"1px solid #eee"},root:["selectedAll","completeBtn","setImportantBtn","moreBtn"]},selectedAll:{type:"radiobox",text:"全选",style:{flex:1,fontSize:15,justifyContent:"flex-start",marginLeft:9},textStyle:{marginLeft:8}},completeBtn:{type:"text",text:"完成本单",style:{flex:1,height:48,justifyContent:"center",fontSize:15,color:t.mainColor}},setImportantBtn:{type:"text",text:"标记重要",style:{flex:1,justifyContent:"center",fontSize:15,height:48,color:t.mainColor}},moreBtn:{type:"icon",font:"icomoon_e90d",style:{flex:1,height:48,justifyContent:"center",fontSize:18,color:t.mainColor}},morePopover:{type:"popover",root:["moreRepeat"],animate:{mode:"2"},bkCoverStyle:{backgroundColor:"rgba(230, 230, 230, 0.2)"},offset:{x:10},arrowStyle:{backgroundColor:"#fff",zIndex:2,"-webkit-box-shadow":"9px 8px 13px #9C9C9C","box-shadow":"9px 8px 13px #9C9C9C"},style:{"-webkit-box-shadow":"0px 8px 13px #9C9C9C","box-shadow":"0px 8px 13px #9C9C9C",width:90,backgroundColor:"#fff",height:"80",paddingTop:5,paddingBottom:4,borderRadius:"7px"}},moreRepeat:{type:"repeat",items:[{title:"移动至"},{title:"删除"}],root:["moreRepeat_icon"],style:{flexDirection:"column",flex:1},itemStyle:{flex:1,justifyContent:"center",alignItems:"stretch"}},moreRepeat_icon:{type:"icon",text:"",text_bind:"title",style:{flex:1},textStyle:{fontSize:16,color:"#292f33"}},page_content:{type:"view",style:{flex:1},root:["todo_listview"]},todo_listview:{type:"listview",selectedMode:"m",isCanCollapse:!0,groupKey:"className",leftBlock:{key:"row_radiobox_wraper",width:40},groupHeaderStyle:{height:34,paddingLeft:10,alignItems:"center",backgroundColor:"#F2F3F4"},groupHeader:["list_group_headertitle"],autoLoadData:!0,ajaxConfig:{url:"/list/getListByCondition",type:"GET",pageSize:20,pageNumKey:"pageNo",data:{pageNo:1,code:1003}},nodata:"nodata",rowStyle:{flexDirection:"row",alignItems:"stretch",borderBottom:"1px solid #EEEEEE"},root:["row_radiobox_wraper","row_checkbox_wrapper","row_main_wrapper"]},nodata:{type:"view",style:{flexDirection:"column",alignItems:"center",flex:500,justifyContent:"center"},root:["nodata_image"]},nodata_image:{type:"icon",iconStyle:{width:70,height:80},text:"今日未创建清单,赶紧去行动吧",textPos:"bottom",textStyle:{marginTop:16,fontSize:15,color:"#999999"},src:"./imgs/space_tips.png"},row_checkbox_wrapper:{type:"view",disableParentSelect:!0,root:["row_checkbox"],ref:!0,style:{justifyContent:"center",overflow:"hidden",alignItems:"center",width:40}},row_checkbox:{type:"checkbox",selectedStyle:{backgroundColor:"#ccc",border:"1px solid #ccc"}},row_radiobox_wraper:{type:"view",root:["row_radiobox"],style:{justifyContent:"center",overflow:"hidden",alignItems:"center",width:0}},row_radiobox:{type:"radiobox"},row_main_wrapper:{type:"view",style:{flexDirection:"row",alignItems:"stretch",flex:1},root:["row_left","row_right"]},row_left:{type:"view",style:{flex:1,paddingLeft:5},root:["row_title","row_time"]},row_title:{type:"text",text_bind:"content",numberofline:1,style:{paddingTop:16,paddingBottom:4,fontSize:14,color:"#333"}},list_group_headertitle:{type:"text",style:{fontSize:13},text_bind:"className"},row_time:{type:"text",text_bind:"endTime",style:{paddingTop:2,paddingBottom:10,color:"#999",fontSize:13}},row_right:{type:"view",style:{width:50,justifyContent:"center",alignItems:"center"},root:["row_flag"]},row_flag:{type:"icon",font:"todo_e906",disableParentSelect:!0,selectedClassName:"flag-selected",iconStyle:{color:"#CCCCCC"}}}};return o});var Brigdge=function(e){var t=window.navigator.userAgent,i={_initialized:!1,ios:/iPhone|iPad|iPod/i.test(t),android:/Android/i.test(t),readycallback:[]},o=function(t){var o=function(s,a,n){if(i._initialized){if(s||(s=function(e){}),"object"==typeof s&&(a=s,s=function(e){}),n&&"function"==typeof n&&t.parameters&&t.parameters.callback){var r=t.parameters.callback;e.WebViewJavascriptBridge.registerHandler(r,n)}if(n&&"function"==typeof n&&n(e.WebViewJavascriptBridge),a&&"object"==typeof a)if(t.parameters)for(var l in a)t.parameters[l]=a[l];else t.parameters=a;e.WebViewJavascriptBridge.send(JSON.stringify(t),function(e){s(JSON.parse(e))})}else i.readycallback.push({func:o,args:arguments}),console.log("js bridge has not been initialized yet.")};return o},s=function(e){var t={client:{hiddenMenu:{function:"hiddenMenu"},closePage:{function:"closePage"},setHeader:{function:"navRightItemList"},scanQRCode:{function:"scanQRCode",parameters:{type:0,callback:"scanQRCodeCallback"}},scanQRCodeMore:{function:"scanQRCode",parameters:{type:1,callback:"scanQRCodeCallback"}},openWindow:{function:"openWindow"},selectDate:{function:"selectDate"},selectList:{function:"selectList"},selectAttachment:{function:"selectAttachment"},selectCity:{function:"selectCity"},selectMap:{function:"selectMap"},copyText:{function:"copyText"},configNavigationBar:{function:"configNavigationBar"},share:{function:"share"},viewOrDeleteImage:{function:"viewOrDeleteImage"},viewImage:{function:"viewImage"}},enterprise:{openApp:{function:"openAPP"},selectContacts:{function:"selectContacts"},callUer:{function:"callUer"},bindPhone:{function:"bindPhone"},feedReply:{function:"feedReply"},sendMemail:{function:"sendMemail"},sendMessage:{function:"sendMessage"},callUsers:{function:"callUsers"},selectGroup:{function:"selectGroup"},processAt:{function:"processAt"},viewUser:{function:"viewUser"},openChatWindow:{function:"openChatWindow"},createFeed:{function:"createFeed"},previewFile:{function:"previewFile"},viewTaskLog:{function:"viewTaskLog"},viewTaskUser:{function:"viewTaskUser"},createOredit:{function:"createOredit"},taskComment:{function:"taskComment"},feedDataUpdate:{function:"feedDataUpdate"}}};for(var i in t){e[i]={};for(var s in t[i]){var a=t[i][s];e[i][s]=o(a)}}},a=function(e){window.WebViewJavascriptBridge?e(WebViewJavascriptBridge):document.addEventListener("WebViewJavascriptBridgeReady",function(){e(WebViewJavascriptBridge)},!1)};return a(function(t){t.init(function(e,t){}),e.WebViewJavascriptBridge||(e.WebViewJavascriptBridge=t),i._initialized=!0,i.readycallback&&(i.readycallback.forEach(function(e){0==e.args.length?e.func():1==e.args.length?e.func(e.args[0]):2==e.args.length?e.func(e.args[0],e.args[1]):3==e.args.length&&e.func(e.args[0],e.args[1],e.args[2])}),i.readycallback=[])}),s(i),e.yyesn=i,i};Brigdge(window),define("libs/bridge",function(){});